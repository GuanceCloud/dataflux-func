# 整体描述
$description: |
  DataFlux Func Open API document
$description_zhCN: |
  *注意：本页面正在开发中，内容尚不完整*

  DataFlux Func Open API 文档

  请使用 [DataFlux Func SDK](https://func.guance.com/doc/openapi-sdk/) 通过编程方式调用接口。

# 响应体
$response:
  ok:
    $desc     : Whether the processing was successful
    $desc_zhCN: 处理是否成功
    $type     : bool
    $required : true
    $example  : true
  error:
    $desc     : Error Code
    $desc_zhCN: 错误码
    $type     : number
    $required : true
    $example  : 200
  message:
    $desc     : Response Dessage
    $desc_zhCN: 响应信息
    $type     : string
    $required : true
    $example  : ''
  data:
    $desc     : Response Data
    $desc_zhCN: 响应数据
    $type     : any
    $example  : []
  reqTime:
    $desc     : Request Time
    $desc_zhCN: 请求时间
    $type     : string
    $required : true
    $isISO8601: true
    $example  : '2020-01-01T00:00:00.000Z'
  respTime:
    $desc     : Response Time
    $desc_zhCN: 响应时间
    $type     : string
    $required : true
    $isISO8601: true
    $example  : '2020-01-01T00:00:00.100Z'
  reqCost:
    $desc     : Milliseconds of server processing time elapsed
    $desc_zhCN: 请求耗时（毫秒）
    $type     : integer
    $required : true
    $example  : 100
  traceId:
    $desc     : Trace ID of this request
    $desc_zhCN: 本次请求的 Trace ID
    $type     : string
    $required : true
    $example  : TRACE-XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX

# 主要功能
mainAPI:
  $tag     : Core Feature
  $tag_zhCN: 主要功能

  overview:
    showInDoc    : true
    name         : Get Overview
    name_zhCN    : 获取总览
    method       : get
    url          : /api/v1/func/overview
    response     : json
    requireSignIn: true
    privilege    : general_r
    query:
      sections:
        $desc: Overview Sections
        $type: commaArray

  describeFunc:
    showInDoc    : true
    name         : Describe Func
    name_zhCN    : 获取函数描述
    method       : get
    url          : /api/v1/func/:funcId
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    params:
      funcId:
        $desc: Func ID (e.g. lib__demo.hello_world）
        $type: string

  callFunc:
    showInDoc    : true
    name         : Call Func
    name_zhCN    : 调用函数
    descType: markdown
    desc: |
      函数参数`kwargs`以字典`dict`方式传递（即`func(**kwargs)`）

      - 当不指定，或指定同步模式`options.execMode="sync"`时，接口会等待函数返回，并直接将结果返回给调用者，*但一定时间后API接口依然会超时*。
      - 当指定同步模式`options.execMode="async"`时，接口会立即返回，函数返回值需要另外调用接口查询。

      当`returnType`为`"ALL"`时，返回值结构如下：

      |           字段           |   类型   |                       说明                      |
      |--------------------------|----------|-------------------------------------------------|
      | `error`                  | `number` | 错误码。整数部分与HTTP状态码相同（200表示正常） |
      | `message`                | `string` | 错误信息（正常时为固定空字符串）                |
      | `data`                   | `json`   | 函数执行结果                                    |
      | `data.result`            | `json`   | 本次函数执行结果（仅在同步模式时返回）          |
      | `data.result.raw`        | `ANY`    | 本次函数运行结果原始值                          |
      | `data.result.repr`       | `string` | 本次函数运行结果经`repr()`处理后的值            |
      | `data.result.jsonDumps`  | `string` | 本次函数运行结果经`json.dumps()`处理后的值      |
      | `data.taskId`            | `string` | 本次函数执行任务 ID                             |
      | `traceId`                | `string` | 本次请求的请求 ID，可用于查阅日志               |
      | `reqCost`                | `number` | 本次请求服务器端耗时（毫秒）                    |

      示例如下：

      ```json
      {
        "error"  : 200,
        "message": "",
        "data": {
          "result": {
            "raw"      : "Hello, Tom",
            "repr"     : "'Hello, Tom'",
            "jsonDumps": "\"Hello, Tom\""
          },
          "taskId": "task-00000000-0000-0000-0000-000000000000",
        },
        "traceId": "TRACE-00000000-0000-0000-0000-000000000000",
        "reqCost": 35
      }
      ```

      当`returnType`*不为*`"ALL"`，返回值中`result`字段为指定的返回格式。

      当`returnType`为`"raw"`时，返回值结构如下：

      |           字段           |   类型   |                       说明                      |
      |--------------------------|----------|-------------------------------------------------|
      | `error`                  | `number` | 错误码。整数部分与HTTP状态码相同（200表示正常） |
      | `message`                | `string` | 错误信息（正常时为固定空字符串）                |
      | `data`                   | `json`   | 函数执行结果                                    |
      | `data.result`            | `ANY`    | 本次函数运行结果原始值（`returnType`=`"raw"`）  |
      | `data.taskId`            | `string` | 本次函数执行任务 ID                             |
      | `traceId`                | `string` | 本次请求的请求 ID，可用于查阅日志               |
      | `reqCost`                | `number` | 本次请求服务器端耗时（毫秒）                    |

      示例如下：

      ```json
      {
        "error"  : 200,
        "message": "",
        "data": {
          "result": "Hello, Tom",
          "taskId": "task-00000000-0000-0000-0000-000000000000",
        },
        "traceId": "TRACE-00000000-0000-0000-0000-000000000000",
        "reqCost": 35
      }
      ```
    method       : post
    url          : /api/v1/func/:funcId
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    params:
      funcId:
        $desc: Func ID (e.g. lib__demo.hello_world)
        $type: string
    body:
      kwargs:
        $desc: Func calling arguments in dict format (**kwargs)
        $type: json
        $example: {'msg': 'Tom'}
      options:
        $desc: 选项
        apiTimeout:
          $desc    : API超时时间（秒，默认5秒）
          $type    : integer
          $minValue: 1
          $maxValue: 30
          $example : 5
        returnType:
          $desc: Return type (default "raw")
          $type: enum
          $in:
            - ALL
            - raw
            - repr
            - jsonDumps
        unfold:
          $desc: 拆包（仅限execMode=sync。默认false）
          $type: boolean
        execMode:
          $desc: 执行模式（sync=同步；async=异步。默认sync）
          $type: enum
          $in:
            - sync
            - async
        saveResult:
          $desc   : 是否保存结果供后续查询（默认false）
          $type   : boolean
          $example: false
        eta:
          $desc     : 预约执行（ISO8601格式，仅限execMode=async）
          $type     : string
          $isISO8601: true
          $example  : '2020-01-01T00:00:00Z'

  callAuthLinkByGet:
    showInDoc    : true
    name         : Call Auth Link (GET)
    name_zhCN    : 调用授权链接（GET 方式）
    method       : get
    url          : /api/v1/al/:id
    response     : json
    requireSignIn: false
    params:
      id:
        $desc: 授权链接 ID
        $type: string
    query:
      kwargs:
        $desc   : Func calling arguments in dict format (**kwargs)
        $type   : jsonstring
        $example: '{"msg": "Tom"}'
      options:
        $desc   : 选项（详细请参考 POST 方式描述）
        $type   : jsonstring
        $example: '{"execMode": "async"}'

  callAuthLinkByGetWithFormat:
    showInDoc    : true
    name         : Call Auth Link (GET with specified format)
    name_zhCN    : 调用授权链接（GET 方式，指定形式）
    descType: markdown
    desc: |
      在某些第三方系统无法使用标准调用格式时，可以指定不同格式方便调用：

      - 标准形式

      ```http
      GET /api/v1/al/auln-xxxxx
      ?kwargs={"arg1":"arg_value1","arg2":"arg_value2"}
      &options={"opt1":"opt_value1","opt2":"opt_value2"}
      ```
      - 简化形式 `simplified`

      ```http
      GET /api/v1/al/auln-xxxxx/simplified
      ?arg1=arg_value1
      &arg2=arg_value2
      ```

      *注意：本形式所有参数值都以字符串传递，函数需要自行转换数据类型*
      *注意2：本形式不支持标准格式中的`options`参数*

    method       : get
    url          : /api/v1/al/:id/:format
    response     : json
    requireSignIn: false
    params:
      id:
        $desc: 授权链接 ID
        $type: string
      format:
        $desc: 调用形式
        $type: enum
        $in:
          - simplified

  callAuthLinkByPost:
    showInDoc    : true
    name         : Call Auth Link (POST)
    name_zhCN    : 调用授权链接（POST 方式）
    method       : post
    url          : /api/v1/al/:id
    response     : json
    requireSignIn: false
    privilege    : general_r
    params:
      id:
        $desc: 授权链接 ID
        $type: string
    body:
      kwargs:
        $desc: Func calling arguments in dict format (**kwargs)
        $type: json
        $example: {'msg': 'Tom'}
      options:
        $desc: 选项
        returnType:
          $desc: Return type (default "raw")
          $type: enum
          $in:
            - ALL
            - raw
            - repr
            - jsonDumps
        unfold:
          $desc: 拆包（仅限execMode=sync。默认true）
          $type: boolean
        execMode:
          $desc: 执行模式（sync=同步；async=异步。默认sync）
          $type: enum
          $in:
            - sync
            - async

  callAuthLinkByPostWithFormat:
    showInDoc    : true
    name         : Call Auth Link (POST with specified format)
    name_zhCN    : 调用授权链接（POST 方式，指定形式）
    descType: markdown
    desc: |
      在某些第三方系统无法使用标准调用形式时，可以指定不同形式方便调用：

      - 标准形式

      ```http
      POST /api/v1/al/auln-xxxxx
      Content-Type: application/json

      {
        "kwargs": {
          "arg1": "arg_value1",
          "arg2": "arg_value2"
        },
        "options": {
          "opt1": "opt_value1",
          "opt2": "opt_value2"
        }
      }
      ```

      *注意：本形式不支持上传文件*

      - 简化形式 `simplified`

      ```http
      POST /api/v1/al/auln-xxxxx/simplified
      Content-Type: x-www-form-urlencoded

      arg1=arg_value1&arg2=arg_value2
      ```

      *注意：本形式所有参数值都以字符串传递，函数需要自行转换数据类型*
      *注意2：本形式不支持标准形式中的`options`参数*
      *注意3：当上传文件时，需要指定`Content-Type: multipart/form-data`*

    method       : post
    url          : /api/v1/al/:id/:format
    response     : json
    requireSignIn: false
    params:
      id:
        $desc: 授权链接 ID
        $type: string
      format:
        $desc: 调用形式
        $type: enum
        $in:
          - simplified
    files:
      $desc        : File (limit 10GB)
      $desc_zhCN   : 文件（10GB 以内）
      $limitSize   : 10GB
      $allowedTypes: '*/*'

  runCrontabConfigManually:
    showInDoc    : true
    name         : Run Crontab Config manually
    name_zhCN    : 手动执行自动触发配置
    method       : post
    url          : /api/v1/cron/:id
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    params:
      id:
        $desc: 批处理 ID
        $type: string

  callBatchByGet:
    showInDoc    : true
    name         : Call Batch (GET)
    name_zhCN    : 调用批处理（GET 方式）
    method       : get
    url          : /api/v1/bat/:id
    response     : json
    requireSignIn: false
    privilege    : general_r
    params:
      id:
        $desc: 批处理 ID
        $type: string
    query:
      kwargs:
        $desc   : Func calling arguments in dict format (**kwargs)
        $type   : jsonstring
        $example: '{"msg": "Tom"}'

  callBatchByGetWithFormat:
    showInDoc    : true
    name         : Call Batch (GET with specified format)
    name_zhCN    : 调用批处理（GET 方式，指定形式）
    descType: markdown
    desc: |
      在某些第三方系统无法使用标准调用形式时，可以指定不同形式方便调用：

      - 标准形式

      ```
      GET /api/v1/bat/bat-xxxxx
      &kwargs={"arg1":"arg_value1","arg2":"arg_value2"}
      ```

      - 简化形式 `simplified`

      ```
      GET /api/v1/bat/bat-xxxxx/simplified
      ?arg1=arg_value1
      &arg2=arg_value2
      ```

      *注意：本形式所有参数值都以字符串传递，函数需要自行转换数据类型*

    method       : get
    url          : /api/v1/bat/:id/:format
    response     : json
    requireSignIn: false
    privilege    : general_r
    params:
      id:
        $desc: 批处理 ID
        $type: string
      format:
        $desc: 调用形式
        $type: enum
        $in:
          - simplified

  callBatchByPost:
    showInDoc    : true
    name         : Call Batch (POST)
    name_zhCN    : 调用批处理（POST 方式）
    method       : post
    url          : /api/v1/bat/:id
    response     : json
    requireSignIn: false
    privilege    : general_r
    params:
      id:
        $desc: 批处理 ID
        $type: string
    body:
      kwargs:
        $desc: Func calling arguments in dict format (**kwargs)
        $type: json
        $example: {'msg': 'Tom'}

  callBatchByPostWithFormat:
    showInDoc    : true
    name         : Call Batch (POST with specified format)
    name_zhCN    : 调用批处理（POST 方式，指定形式）
    descType: markdown
    desc: |
      在某些第三方系统无法使用标准调用形式时，可以指定不同形式方便调用：

      - 标准形式

      ```http
      POST /api/v1/al/auln-xxxxx
      Content-Type: application/json

      {
        "kwargs": {
          "arg1": "arg_value1",
          "arg2": "arg_value2"
        },
        "options": {
          "opt1": "opt_value1",
          "opt2": "opt_value2"
        }
      }
      ```

      *注意：本形式不支持上传文件*

      - 简化形式 `simplified`

      ```http
      POST /api/v1/al/auln-xxxxx/simplified
      Content-Type: x-www-form-urlencoded

      arg1=arg_value1&arg2=arg_value2
      ```

      *注意：本形式所有参数值都以字符串传递，函数需要自行转换数据类型*
      *注意2：本形式不支持标准形式中的`options`参数*
      *注意3：当上传文件时，需要指定`Content-Type: multipart/form-data`*

    method       : post
    url          : /api/v1/bat/:id/:format
    response     : json
    requireSignIn: false
    params:
      id:
        $desc: 批处理 ID
        $type: string
      format:
        $desc: 调用形式
        $type: enum
        $in:
          - simplified
    files:
      $desc        : File (limit 10GB)
      $desc_zhCN   : 文件（10GB 以内）
      $limitSize   : 10GB
      $allowedTypes: '*/*'

  callFuncDraft:
    showInDoc    : true
    name         : Call Func in draft
    name_zhCN    : 调用草稿中函数
    descType: markdown
    desc: |
      以草稿调用函数

      调用方式与上述`调用函数`相同，*但只能以同步模式调用，不支持异步模式*

    method       : post
    url          : /api/v1/func-draft/:funcId
    response     : json
    requireSignIn: true
    privilege    : general_r
    params:
      funcId:
        $desc: Func ID (e.g. lib__demo.hello_world)
        $type: string
    body:
      kwargs:
        $desc: Func calling arguments in dict format (**kwargs)
        $type: json
        $example: {'msg': 'Tom'}

  getFuncResult:
    showInDoc    : true
    name         : Get Func result
    name_zhCN    : 获取函数结果
    method       : get
    url          : /api/v1/func-result
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    query:
      taskId:
        $desc      : 任务 ID（接口调用时返回）
        $isRequired: true
        $type      : string
      returnType:
        $desc: Return type (default "raw")
        $type: enum
        $in:
          - ALL
          - raw
          - repr
          - jsonDumps
      unfold:
        $desc: 拆包
        $type: boolean

  getFuncList:
    showInDoc    : true
    name         : Func list
    name_zhCN    : 函数列表
    method       : get
    url          : /api/v1/func-list
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    fuzzySearch:
      - func.id
      - func.title
      - func.description
    query:
      id:
        $desc      : 根据函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.id
      name:
        $desc      : 根据函数名过滤
        $type      : string
        $searchType: like
        $searchKey : func.name
      title:
        $desc      : 根据函数标题搜索
        $type      : string
        $searchType: like
        $searchKey : func.title
      category:
        $desc      : 根据类型过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.category
      integration:
        $desc      : 根据集成过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.integration
      tags:
        $desc      : 根据函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : func.tagsJSON
      scriptId:
        $desc      : 根据所属脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : scpt.id
      scriptSetId:
        $desc      : 根据所属脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : sset.id

  getFuncTagList:
    showInDoc    : true
    name         : Func tag list
    name_zhCN    : 函数标签列表
    method       : get
    url          : /api/v1/func-tag-list
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    query:
      scriptSetId:
        $desc      : 根据脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptSetId
      scriptId:
        $desc      : 根据脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptId
      name:
        $desc: 根据标签名搜索（LIKE方式）
        $type: string
      tagPattern:
        $desc: 根据标签名模式搜索（通配方式，如`key|*`）
        $type: string

  getAuthLinkFuncList:
    showInDoc    : true
    name         : Auth Link list
    name_zhCN    : 授权链接列表
    method       : get
    url          : /api/v1/auth-link-func-list
    response     : json
    requireSignIn: false
    fuzzySearch:
      - func.id
      - func.title
      - func.description
    query:
      funcId:
        $desc      : 根据函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.id
      funcName:
        $desc      : 根据函数名过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.name
      funcCategory:
        $desc      : 根据类型过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.category
      funcTags:
        $desc      : 根据函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : func.tagsJSON
      scriptId:
        $desc      : 根据所属脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : scpt.id
      scriptSetId:
        $desc      : 根据所属脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : sset.id

  getSystemConfig:
    showInDoc: true
    name     : Get system configs
    name_zhCN: 获取系统配置
    method   : get
    url      : /api/v1/func-system-config
    response : json

  getUpgradeInfo:
    showInDoc    : true
    name         : Get upgrade info
    name_zhCN    : 获取升级信息
    method       : get
    url          : /api/v1/upgrade-info
    response     : json
    requireSignIn: false
    query:
      seq:
        $desc: 更新序号（数字或"latest"）
        $type: int

  integratedSignIn:
    name     : Integrated sign in
    name_zhCN: 集成用户登录
    method   : post
    url      : /api/v1/func/integration/sign-in
    response : json
    body:
      captchaToken:
        $desc      : 验证码令牌
        $isRequired: true
        $type      : string
      captcha:
        $desc      : 验证码
        $isRequired: true
        $type      : string
        $isLength  : 4
        $example   : '1234'
      signIn:
        funcId:
          $desc      : 函数 ID
          $isRequired: true
          $type      : string
          $maxLength : 256
          $example   : demo_test.sign_in
        username:
          $desc      : 用户名
          $isRequired: true
          $type      : string
          $maxLength : 30
          $example   : admin
        password:
          $desc      : 密码
          $isRequired: true
          $type      : string
          $maxLength : 100
          $example   : 'Abc123'

  clearLogCacheTables:
    name         : Clear Log and Cache tables
    name_zhCN    : 清空日志和缓存表
    method       : post
    url          : /api/v1/log-cache-tables/do/clear
    response     : json
    requireSignIn: true
    privilege    : general_w

  fileService:
    name         : File Service
    name_zhCN    : 文件服务
    method       : get
    url          : /api/v1/fs/:id/*
    response     : any
    requireSignIn: false
    params:
      id:
        $desc: 文件服务 ID
        $type: string

  pullSystemLogs:
    showInDoc    : true
    name         : Pull system logs
    name_zhCN    : 拉取系统日志
    method       : get
    url          : /api/v1/system-logs
    response     : json
    requireSignIn: true
    privilege    : general_r
    query:
      position:
        $desc    : 日志文件读取位置
        $required: false
        $type    : integer

  metrics:
    showInDoc    : true
    name         : Metric data (OpenMetric)
    name_zhCN    : 指标数据（OpenMetric）
    method       : get
    url          : /api/v1/metrics
    response     : text
    requireSignIn: false
    privilege    : general_r

# General
indexAPI:
  $tag     : MISC
  $tag_zhCN: 杂项

  index:
    showInDoc    : true
    name         : API Index
    name_zhCN    : API 索引
    method       : get
    url          : /api
    response     : json
    requireSignIn: true
    desc         : All API list
    desc_zhCN    : 所有 API 列表
    query:
      format:
        $desc: API Doc format
        $type: enum
        $in:
          - openapi
          - swagger
      lang:
        $desc: API Doc Language
        $type: enum
        $in:
          - zh-CN
          - en

  clientConfig:
    showInDoc: true
    name     : Client config
    name_zhCN: 客户端配置
    method   : get
    url      : /api/v1/client-config/do/get
    response : json
    desc     : Client config
    desc_zhCN: 客户端配置

  imageInfo:
    showInDoc: true
    name     : Image Info
    name_zhCN: 镜像信息
    method   : get
    url      : /api/v1/image-info/do/get
    response : json
    desc     : Image info
    desc_zhCN: 镜像信息

  captcha:
    name     : Gen captcha image
    name_zhCN: 生成验证图形
    method   : get
    url      : /api/v1/captcha/do/get
    response : image
    desc: |
      Get CAPTCHA image for signing in, changing password.
      The `captchaToken` should be a random string generated by the client,
      and been used in the API which needs captcha token.
    desc_zhCN: |
      获取验证码图片，用于登录、修改密码。
      参数`captchaToken`必须是一个由客户端生成的随机字符串，
      并在需要验证码令牌的 API 中使用。
    query:
      captchaCategory:
        $desc      : Captcha category
        $isRequired: true
        $type      : enum
        $in:
          - signIn
          - changePassword
      captchaToken:
        $desc      : Captcha token generated by client
        $isRequired: true
        $type      : string
        $maxLength : 128

  ping:
    showInDoc: true
    name     : Ping test
    name_zhCN: Ping 测试
    method   : get
    url      : /api/v1/do/ping
    response : json
    desc     : Ping test
    desc_zhCN: Ping 测试

  echo:
    showInDoc: true
    name     : Echo test
    name_zhCN: 调用测试
    method   : post
    url      : /api/v1/do/echo
    response : json
    desc     : Echo test
    desc_zhCN: 回声测试
    query:
      string:
        $desc     : string value
        $type     : string
        $allowNull: true
      integer:
        $desc: integer value
        $type: integer
      boolean:
        $desc: boolean value
        $type: boolean
    body:
      echo:
        $desc: Any value
        $type: any
        $skip: true

  proxy:
    showInDoc    : true
    name         : Proxy Request
    name_zhCN    : 代理请求
    method       : post
    url          : /api/v1/do/proxy
    response     : json
    requireSignIn: true
    desc         : Do HTTP request from server
    desc_zhCN    : 从服务端发起 HTTP 请求
    body:
      method:
        $desc      : HTTP method
        $isRequired: true
        $type      : enum
        $in:
          - get
          - post
          - put
          - delete
      url:
        $desc      : URL
        $isRequired: true
        $type      : string
        $example   : https://myip.ipip.net/
      headers:
        $desc: Headers
        $type: json
        $skip: true
      body:
        $desc: Body
        $type: json
        $skip: true
      withHeaders:
        $desc   : Get headers from response
        $type   : boolean
        $example: false
      timeout:
        $desc   : Timeout (seconds)
        $type   : integer
        $example: 3

  testThrowError:
    showInDoc: true
    name     : Test Throw Error
    name_zhCN: 测试抛出异常
    method   : get
    url      : /api/v1/do/test-throw-error
    response : json
    desc     : Test Throw Error
    desc_zhCN: 测试抛出异常

  testThrowErrorInAsync:
    showInDoc: true
    name     : Test Throw Error in Async
    name_zhCN: 测试异步抛出异常
    method   : get
    url      : /api/v1/do/test-throw-error-in-async
    response : json
    desc     : Test Throw Error in Async
    desc_zhCN: 测试在异步处理中抛出异常

  testSlowAPI:
    showInDoc: true
    name     : Test Slow API
    name_zhCN: 测试慢速 API
    method   : get
    url      : /api/v1/do/test-slow-api
    response : json
    desc     : Test Slow API
    desc_zhCN: 测试慢速 API
    query:
      simulateReqCost:
        $desc    : Simulate request cost (ms)
        $type    : integer
        $minValue: 1

# Authentication
authAPI:
  $tag     : Authentication
  $tag_zhCN: 认证

  signIn:
    name    : User sign in
    name_zhCN: 用户登录
    method  : post
    url     : /api/v1/auth/do/sign-in
    response: json
    desc: |
      This API will return a token called "xAuthToken" for specify current user.
      Client should store this token and add it to HTTP header when calling API.
    body:
      captchaToken:
        $desc      : Captcha token
        $isRequired: true
        $type      : string
      captcha:
        $desc      : Captcha
        $isRequired: true
        $type      : string
        $isLength  : 4
        $example   : '1234'
      signIn:
        username:
          $desc      : Username
          $isRequired: true
          $type      : string
          $maxLength : 30
          $example   : admin
        password:
          $desc      : Password
          $isRequired: true
          $type      : string
          $maxLength : 100
          $example   : 'Abc123'

  signOut:
    name    : User sign out
    name_zhCN: 用户登出
    method  : get
    url     : /api/v1/auth/do/sign-out
    response: json
    desc: |
      This API will reject the caller's xAuthToken.
      Client should delete the token and let user sign in again.

  changePassword:
    showInDoc    : true
    name         : Change password
    name_zhCN    : 修改密码
    method       : post
    url          : /api/v1/auth/do/change-password
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    body:
      captchaToken:
        $desc      : Captcha token
        $isRequired: true
        $type      : string
      captcha:
        $desc      : Captcha
        $isRequired: true
        $type      : string
        $isLength  : 4
        $example   : '1234'
      changePassword:
        oldPassword:
          $desc      : Old password
          $isRequired: true
          $type      : string
          $maxLength : 100
          $example   : 'Abc123'
        newPassword:
          $desc      : New Password
          $isRequired: true
          $type      : string
          $maxLength : 100
          $example   : '123Abc'

  profile:
    showInDoc    : true
    name         : User profile
    name_zhCN    : 用户信息
    method       : get
    url          : /api/v1/auth/profile/do/get
    response     : json
    requireSignIn: true

  modifyProfile:
    showInDoc    : true
    name         : Modify user profile
    name_zhCN    : 修改用户信息
    method       : post
    url          : /api/v1/auth/profile/do/modify
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    body:
      data:
        $isRequired: true
        name:
          $desc      : Name
          $type      : string
          $maxLength : 50
        email:
          $desc      : Email
          $type      : string
          $maxLength : 50
        mobile:
          $desc      : Mobile
          $allowNull : true
          $type      : string
          $maxLength : 20
          $example   : '18600000000'

# User
userAPI:
  $tag     : User
  $tag_zhCN: 用户

  list:
    showInDoc    : true
    name         : List user
    name_zhCN    : 列出用户
    method       : get
    url          : /api/v1/users/do/list
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : user_r
    export       : true
    paging       : false
    fieldSelecting: true
    orderFields:
      seq     : u.seq
      username: u.username
      name    : u.name
    fuzzySearch:
      - u.id
      - u.username
      - u.name
      - u.email
      - u.mobile
    query:
      id:
        $desc      : Filter by ID
        $type      : commaArray
        $searchType: in
        $searchKey : u.id
      username:
        $desc      : Search by username
        $type      : string
        $searchType: like
        $searchKey : u.username
      name:
        $desc      : Search by name
        $type      : string
        $searchType: like
        $searchKey : u.name
      email:
        $desc      : Search by email
        $type      : string
        $searchType: like
        $searchKey : u.email
      mobile:
        $desc      : Search by mobile number
        $type      : int
        $searchType: like
        $searchKey : u.mobile
      isDisabled:
        $desc      : Filter by DISABLED flag
        $type      : boolean
        $searchType: boolean
        $searchKey : u.isDisabled

  get:
    showInDoc    : true
    name         : Get user
    name_zhCN    : 获取用户
    method       : get
    url          : /api/v1/users/:id/do/get
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : user_r
    fieldSelecting: true
    params:
      id:
        $desc: User ID
        $type: string

  add:
    showInDoc    : true
    name         : Add user
    name_zhCN    : 添加用户
    method       : post
    url          : /api/v1/users/do/add
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : user_w
    body:
      data:
        $isRequired: true
        username:
          $desc      : Username
          $isRequired: true
          $type      : string
          $maxLength : 30
          $example   : tom
        password:
          $desc      : Password
          $isRequired: true
          $type      : string
          $maxLength : 100
          $example   : 'Abc123'
        name:
          $desc      : Name
          $isRequired: true
          $type      : string
          $maxLength : 50
          $example   : Tom White
        email:
          $desc      : Email
          $allowNull : true
          $type      : string
          $maxLength : 100
          $example   : tom.white@guance.com
        mobile:
          $desc     : Mobile number
          $type     : string
          $allowNull: true
          $maxLength: 20
          $example  : '18600000000'
        roles:
          $desc      : Role
          $isRequired: true
          $type      : array
          $allowNull : true
          $:
            $type: enum
            $in:
              - admin
              - user
              - readonlyUser
              - customUser
        customPrivileges:
          $desc     : Custom Privileges
          $type     : string
          $allowNull: true
        isDisabled:
          $desc: DISABLED flag
          $type: boolean

  modify:
    showInDoc    : true
    name         : Modify user
    name_zhCN    : 修改用户
    method       : post
    url          : /api/v1/users/:id/do/modify
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : user_w
    params:
      id:
        $desc: User ID
        $type: string
    body:
      data:
        $isRequired: true
        username:
          $desc      : Username
          $type      : string
          $maxLength : 30
          $example   : tom
        password:
          $desc      : Password
          $type      : string
          $maxLength : 100
          $example   : 'Abc123'
        name:
          $desc      : Name
          $type      : string
          $maxLength : 50
          $example   : Tom White
        email:
          $desc      : Email
          $allowNull : true
          $type      : string
          $maxLength : 100
          $example   : tom.white@guance.com
        mobile:
          $desc     : Mobile number
          $type     : string
          $allowNull: true
          $maxLength: 20
          $example  : '18600000000'
        roles:
          $desc     : Roles
          $type     : array
          $allowNull: true
          $:
            $type: enum
            $in:
              - admin
              - user
              - readonlyUser
              - customUser
        customPrivileges:
          $desc     : Custom Privileges
          $type     : string
          $allowNull: true
        isDisabled:
          $desc: DISABLED flag
          $type: boolean

  delete:
    showInDoc    : true
    name         : Delete user
    name_zhCN    : 删除用户
    method       : get
    url          : /api/v1/users/:id/do/delete
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : user_w
    params:
      id:
        $desc: User ID
        $type: string

# Access Key
accessKeyAPI:
  $tag     : Access Key
  $tag_zhCN: Access Key

  list:
    name         : List Access Keys
    name_zhCN    : 列出 Access Key
    method       : get
    url          : /api/v1/access-keys/do/list
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : accessKey_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      seq : ak.seq
    fuzzySearch:
      - ak.id
      - ak.name
    query:
      id:
        $desc      : Filter by ID
        $type      : commaArray
        $searchType: in
        $searchKey : ak.id
      name:
        $desc      : Search by name
        $type      : string
        $searchType: like
        $searchKey : ak.name

  get:
    name         : Get Access Key
    name_zhCN    : 获取 Access Key
    method       : get
    url          : /api/v1/access-keys/:id/do/get
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : accessKey_r
    fieldSelecting: true
    params:
      id:
        $desc: Access key ID
        $type: string

  add:
    name         : Add Access Key
    name_zhCN    : 添加 Access Key
    method       : post
    url          : /api/v1/access-keys/do/add
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : accessKey_w
    body:
      data:
        $isRequired: true
        name:
          $desc      : Name
          $isRequired: true
          $allowNull : true
          $type      : string
        webhookURL:
          $desc     : Webhook
          $allowNull: true
          $type     : string
        webhookEvents:
          $desc     : Webhook events
          $allowNull: true
          $type     : string
        allowWebhookEcho:
          $desc     : Allow webhook echo
          $allowNull: true
          $type     : boolean

  modify:
    name         : Modify Access Key
    name_zhCN    : 修改 Access Key
    method       : post
    url          : /api/v1/access-keys/:id/do/modify
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : accessKey_w
    params:
      id:
        $desc: Access key ID
        $type: string
    body:
      data:
        $isRequired: true
        webhookURL:
          $desc     : Webhook
          $allowNull: true
          $type     : string
        webhookEvents:
          $desc     : Webhook events
          $allowNull: true
          $type     : string
        allowWebhookEcho:
          $desc: Allow webhook echo
          $type: boolean

  delete:
    name         : Delete Access Key
    name_zhCN    : 删除 Access Key
    method       : get
    url          : /api/v1/access-keys/:id/do/delete
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : accessKey_w
    params:
      id:
        $desc: Access key ID
        $type: string

  testWebhook:
    name         : Test webhook of Access Key
    name_zhCN    : 测试 Access Key 的 Webhook
    method       : get
    url          : /api/v1/access-keys/:id/do/test-webhook
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : accessKey_r
    params:
      id:
        $desc: Access key ID
        $type: string

# Python 包处理 API
pythonPackageAPI:
  $tag     : Python Package
  $tag_zhCN: Python 包

  listInstalled:
    showInDoc    : true
    name         : List installed Python packages
    name_zhCN    : 列出已安装的 Python 包
    method       : get
    url          : /api/v1/python-packages/installed/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r

  getInstallStatus:
    showInDoc    : true
    name         : Get Python package installing status
    name_zhCN    : 获取 Python 包安装状态
    method       : get
    url          : /api/v1/python-packages/install-status/do/get
    response     : json
    requireSignIn: true
    privilege    : general_r

  clearInstallStatus:
    showInDoc    : true
    name         : Clear Python package installing status
    name_zhCN    : 清除 Python 包安装状态
    method       : get
    url          : /api/v1/python-packages/install-status/do/clear
    response     : json
    requireSignIn: true
    privilege    : general_w

  install:
    showInDoc    : true
    name         : Install Python package
    name_zhCN    : 安装 Python 包
    method       : post
    url          : /api/v1/python-packages/do/install
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      mirror:
        $desc: PIP Mirror (e.g. https://pypi.tuna.tsinghua.edu.cn/simple/)
        $type: string
      packages:
        $desc      : Python Packages (e.g. prettytable requests==1.0.0)
        $isRequired: true
        $type      : string
        $minLength : 1

# 资源文件 API
resourceAPI:
  $tag     : Resource
  $tag_zhCN: 资源文件

  list:
    showInDoc    : true
    name         : List resource files
    name_zhCN    : 列出资源文件
    method       : get
    url          : /api/v1/resources/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    query:
      folder:
        $desc: 文件夹
        $type: string
      type:
        $desc: 根据类型过滤
        $type: commaArray
        $commaArrayIn:
          - folder
          - file

  get:
    showInDoc    : true
    name         : Get resource file info
    name_zhCN    : 获取资源文件信息
    method       : get
    url          : /api/v1/resources/do/get
    response     : blob
    requireSignIn: true
    privilege    : general_r
    query:
      filePath:
        $desc    : 文件路径
        $required: true
        $type    : string

  download:
    showInDoc    : true
    name         : Download resource file
    name_zhCN    : 下载资源文件
    method       : get
    url          : /api/v1/resources/do/download
    response     : blob
    requireSignIn: true
    privilege    : general_r
    query:
      filePath:
        $desc    : 文件路径
        $required: true
        $type    : string
      preview:
        $desc    : 预览模式
        $required: false
        $type    : boolean

  upload:
    showInDoc    : true
    name         : Upload resource file
    name_zhCN    : 上传资源文件
    method       : post
    url          : /api/v1/resources/do/upload
    response     : json
    requireSignIn: true
    privilege    : general_w
    files:
      $desc        : File (limit 10GB)
      $desc_zhCN   : 文件（10GB 以内）
      $limitSize   : 10GB
      $allowedTypes: '*/*'
    body:
      folder:
        $desc: 文件夹
        $type: string
      rename:
        $desc: 文件重命名
        $type: string

  operate:
    showInDoc    : true
    name         : Operate resource file
    name_zhCN    : 操作资源文件
    method       : post
    url          : /api/v1/resources/do/operate
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      targetPath:
        $desc    : 操作目标路径（文件/目录）
        $required: true
        $type    : string
      operation:
        $desc    : 执行操作
        $required: true
        $type    : enum
        $in:
          - mkdir
          - zip
          - unzip
          - cp
          - mv
          - rm
      operationArgument:
        $desc     : 执行操作参数
        $allowNull: true
        $required : false
        $type     : string

# 脚本集
scriptSetAPI:
  $tag     : Script Set / Script / Func
  $tag_zhCN: 脚本集 / 脚本 / 函数

  list:
    showInDoc    : true
    name         : List Script Sets
    name_zhCN    : 列出脚本集
    method       : get
    url          : /api/v1/script-sets/do/list
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      seq: sset.seq
      id : sset.id
    fuzzySearch:
      - sset.id
      - sset.title
      - sset.description
      - sset.requirements
      - sset.originId
    query:
      _withScripts:
        $desc: 是否同时返回脚本列表
        $type: bool
      _withScriptCode:
        $desc: 是否同时返回脚本代码
        $type: bool
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : sset.id
      origin:
        $desc      : 根据来源过滤
        $type      : string
        $searchType: eq
        $searchKey : sset.origin
      originId:
        $desc      : 根据来源 ID 过滤
        $type      : string
        $searchType: eq
        $searchKey : sset.originId

  add:
    showInDoc    : true
    name         : Add Script Set
    name_zhCN    : 添加脚本集
    method       : post
    url          : /api/v1/script-sets/do/add
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      data:
        $isRequired: true
        id:
          $desc          : ID
          $isRequired    : true
          $type          : string
          $minLength     : 1
          $maxLength     : 32
          $matchRegExp   : ^[a-zA-Z_][a-zA-Z0-9_]*$
          $notMatchRegExp: __
        title:
          $desc      : 标题
          $allowNull : true
          $type      : string
        description:
          $desc      : 描述
          $allowNull : true
          $type      : string
        requirements:
          $desc      : 依赖包
          $allowNull : true
          $type      : string
        isPinned:
          $desc      : 是否已置顶
          $allowNull : true
          $type      : boolean

  modify:
    showInDoc    : true
    name         : Modify Script Set
    name_zhCN    : 修改脚本集
    method       : post
    url          : /api/v1/script-sets/:id/do/modify
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本集 ID
        $type: string
    body:
      data:
        $isRequired: true
        title:
          $desc      : 标题
          $allowNull : true
          $type      : string
        description:
          $desc      : 描述
          $allowNull : true
          $type      : string
        requirements:
          $desc      : 依赖包
          $allowNull : true
          $type      : string
        isLocked:
          $desc     : 是否锁定
          $allowNull: true
          $type     : boolean
        isPinned:
          $desc      : 是否已置顶
          $allowNull : true
          $type      : boolean

  delete:
    showInDoc    : true
    name         : Delete Script Set
    name_zhCN    : 删除脚本集
    method       : get
    url          : /api/v1/script-sets/:id/do/delete
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本集 ID
        $type: string

  clone:
    showInDoc    : true
    name         : Clone Script Set
    name_zhCN    : 克隆脚本集
    method       : post
    url          : /api/v1/script-sets/:id/do/clone
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本集 ID
        $type: string
    body:
      newId:
        $desc      : 新脚本集 ID
        $isRequired: true
        $type      : string
        $maxLength : 32

  export:
    showInDoc    : true
    name         : Export Script Sets
    name_zhCN    : 导出脚本集
    method       : post
    url          : /api/v1/script-sets/do/export
    response     : blob
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    body:
      $isRequired: true
      scriptSetIds:
        $desc      : 导出的脚本集 ID 列表
        $isRequired: true
        $minLength : 1
        $:
          $desc      : 脚本集 ID
          $isRequired: true
          $type      : string
      connectorIds:
        $desc: 导出的连接器 ID 列表
        $:
          $desc      : 连接器 ID
          $isRequired: true
          $type      : string
      envVariableIds:
        $desc: 导出的环境变量 ID列表
        $:
          $desc      : 环境变量 ID
          $isRequired: true
          $type      : string
      includeAuthLinks:
        $desc     : 是否包含关联的授权链接
        $allowNull: true
        $type     : boolean
      includeCrontabConfigs:
        $desc     : 是否包含关联的自动触发配置
        $allowNull: true
        $type     : boolean
      includeBatches:
        $desc     : 是否包含关联的批处理
        $allowNull: true
        $type     : boolean
      note:
        $desc      : 备注
        $allowNull : true
        $minLength : 1

  import:
    showInDoc    : true
    name         : Import Script Sets
    name_zhCN    : 导入脚本集
    method       : post
    url          : /api/v1/script-sets/do/import
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    files:
      $desc        : File (limit 200MB)
      $desc_zhCN   : 文件（200MB 以内）
      $limitSize   : 200M
      $allowedTypes: 'application/octet-stream'
    body:
      checkOnly:
        $desc      : 是否仅做检查（检查成功后会返回`confirmId`）
        $isRequired: false
        $type      : string # form提交只能接受字符串
        $example   : "true"
      setBuiltin:
        $desc      : 将脚本集指定为`builtin`
        $isRequired: false
        $type      : string # form提交只能接受字符串
        $example   : "true"

  confirmImport:
    showInDoc    : true
    name         : Confirm importing Script Sets
    name_zhCN    : 确认导入脚本集
    method       : post
    url          : /api/v1/script-sets/do/confirm-import
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      confirmId:
        $desc      : 确认 ID
        $isRequired: true
        $type      : string
        $example   : import-001

  deploy:
    showInDoc    : true
    name         : Deploy
    name_zhCN    : 部署
    method       : post
    url          : /api/v1/script-sets/:id/do/deploy
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本集 ID
        $type: string
    body:
      withCrontabConfig:
        $desc   : 是否部署自动触发配置
        $type   : boolean
        $example: true
      startupScriptTitle:
        $desc   : 启动脚本标题
        $type   : string
      configReplacer:
        $desc   : 配置替换（如： 将 `"<您的 AK ID>"` 替换为具体值
        $type   : json
        $example: { '"<您的 AK ID>"': '"xxxx"' }

# 脚本
scriptAPI:
  $tag     : Script Set / Script / Func
  $tag_zhCN: 脚本集 / 脚本 / 函数

  list:
    showInDoc    : true
    name         : List Scripts
    name_zhCN    : 列出脚本
    method       : get
    url          : /api/v1/scripts/do/list
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      seq       : scpt.seq
      id        : scpt.id
      createTime: scpt.createTime
      updateTime: scpt.updateTime
    fulltextSearchFields:
      FULL_TEXT:
        - scpt.id
        - scpt.code
        - scpt.codeDraft
    fuzzySearch:
      - scpt.id
      - scpt.title
      - scpt.description
      - sset.id
      - sset.title
      - sset.description
    query:
      _withCode:
        $desc: 是否同时返回代码
        $type: bool
      _withCodeDraft:
        $desc: 是否同时返回代码草稿
        $type: bool
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : scpt.id
      scriptSetId:
        $desc      : 根据所属脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : scpt.scriptSetId
      scriptName:
        $desc      : 根据脚本名称过滤
        $type      : string
        $searchType: prelike
        $searchKey : SUBSTR(scpt.id, LENGTH(sset.id) + 3)

  get:
    showInDoc    : true
    name         : Script detail
    name_zhCN    : 脚本详情
    method       : get
    url          : /api/v1/scripts/:id/do/get
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    params:
      id:
        $desc: 脚本 ID
        $type: string

  add:
    showInDoc    : true
    name         : Add Script
    name_zhCN    : 添加脚本
    method       : post
    url          : /api/v1/scripts/do/add
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      data:
        $isRequired: true
        id:
          $desc          : ID
          $isRequired    : true
          $type          : string
          $minLength     : 1
          $maxLength     : 64
          $matchRegExp   : ^[a-zA-Z_][a-zA-Z0-9_]*__[a-zA-Z_][a-zA-Z0-9_]*$
        title:
          $desc      : 标题
          $allowNull : true
          $type      : string
        description:
          $desc     : 描述
          $allowNull: true
          $type     : string
        codeDraft:
          $desc      : 草稿
          $isRequired: false
          $type      : string

  modify:
    showInDoc    : true
    name         : Modify Script
    name_zhCN    : 修改脚本
    method       : post
    url          : /api/v1/scripts/:id/do/modify
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本 ID
        $type: string
    body:
      prevCodeDraftMD5:
        $desc    : 修改前的草稿 MD5
        $required: false
        $type    : string
      data:
        $isRequired: true
        title:
          $desc      : 标题
          $allowNull : true
          $type      : string
        description:
          $desc      : 描述
          $allowNull : true
          $type      : string
        codeDraft:
          $desc      : 草稿（需同时传递`prevCodeDraftMD5`参数）
          $isRequired: false
          $type      : string
        isLocked:
          $desc     : 是否锁定
          $allowNull: true
          $type     : boolean

  delete:
    showInDoc    : true
    name         : Delete Script
    name_zhCN    : 删除脚本
    method       : get
    url          : /api/v1/scripts/:id/do/delete
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本 ID
        $type: string

  publish:
    showInDoc    : true
    name         : Publish Script
    name_zhCN    : 发布脚本
    method       : post
    url          : /api/v1/scripts/:id/do/publish
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本 ID
        $type: string
    body:
      wait:
        $desc   : 等待发布结束
        $type   : boolean
        $example: false
      data:
        $isRequired: false
        note:
          $desc      : 发布备注
          $isRequired: false
          $type      : string

# 函数
funcAPI:
  $tag     : Script Set / Script / Func
  $tag_zhCN: 脚本集 / 脚本 / 函数

  list:
    showInDoc    : true
    name         : List Func
    name_zhCN    : 列出函数
    method       : get
    url          : /api/v1/funcs/do/list
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    paging       : true
    fieldSelecting: true
    orderFields:
      seq     : func.seq
      id      : func.id
      defOrder: func.defOrder
    fuzzySearch:
      - func.id
      - func.title
      - func.description
    query:
      _asFuncDoc:
        $desc      : 以函数文档形式返回
        $type      : boolean
      id:
        $desc      : 按函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.id
      scriptSetId:
        $desc      : 按所属脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptSetId
      scriptId:
        $desc      : 按所属脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptId
      category:
        $desc      : 根据类型过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.category
      integration:
        $desc      : 根据集成过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.integration
      tags:
        $desc      : 根据函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : tagsJSON

# 脚本日志
scriptLogAPI:
  $tag     : Script Peripherals
  $tag_zhCN: 脚本周边功能

  list:
    name         : List Script logs
    name_zhCN    : 列出脚本日志
    method       : get
    url          : /api/v1/script-logs/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    paging       : true
    fieldSelecting: true
    orderFields:
      seq: slog.seq
    fuzzySearch:
      - slog.messageTEXT
      - func.id
      - func.title
      - func.description
    query:
      id:
        $desc      : 按日志 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : slog.id
      funcId:
        $desc      : 按函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : slog.funcId

# 脚本故障
scriptFailureAPI:
  $tag     : Script Peripherals
  $tag_zhCN: 脚本周边功能

  list:
    name         : List Script failures
    name_zhCN    : 列出脚本故障
    method       : get
    url          : /api/v1/script-failures/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    paging       : true
    fieldSelecting: true
    orderFields:
      seq: sfal.seq
    fuzzySearch:
      - sfal.einfoTEXT
      - func.id
      - func.title
      - func.description
    query:
      id:
        $desc      : 按故障 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : sfal.id
      funcId:
        $desc      : 按函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : sfal.funcId

# 脚本还原点
scriptRecoverPointAPI:
  $tag     : Script Peripherals
  $tag_zhCN: 脚本周边功能

  list:
    showInDoc    : true
    name         : List Script recover points
    name_zhCN    : 列出脚本还原点
    method       : get
    url          : /api/v1/script-recover-points/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : marker
    fieldSelecting: true
    orderFields:
      seq: srpt.seq
    fuzzySearch:
      - srpt.note
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : srpt.id
      type:
        $desc      : 根据类型过滤
        $type      : commaArray
        $searchType: in
        $searchKey : srpt.type
        $commaArrayIn:
          - import
          - recover
          - manual
      note:
        $desc      : 根据备注搜索
        $type      : string
        $searchType: like
        $searchKey : srpt.note

  add:
    showInDoc    : true
    name         : Create Script recover point
    name_zhCN    : 创建脚本还原点
    method       : post
    url          : /api/v1/script-recover-points/do/add
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      data:
        $isRequired: true
        note:
          $desc      : 备注（手动创建时必须填写）
          $isRequired: true
          $type      : string
          $minLength : 1

  recover:
    showInDoc    : true
    name         : Recover Script Lib
    name_zhCN    : 还原脚本库
    method       : post
    url          : /api/v1/script-recover-points/:id/do/recover
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 连接器 ID
        $type: string

# 脚本发布历史
scriptPublishHistoryAPI:
  $tag     : Script Peripherals
  $tag_zhCN: 脚本周边功能

  list:
    showInDoc    : true
    name         : List Script publish history
    name_zhCN    : 列出脚本发布历史
    method       : get
    url          : /api/v1/script-publish-history/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      seq: scph.seq
    fulltextSearchFields:
      FULL_TEXT:
        - scph.scriptCode_cache
    fuzzySearch:
      - scph.scriptCode_cache
      - scph.note
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : scph.id
      scriptId:
        $desc      : 根据脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : scph.scriptId
      scriptPublishVersion:
        $desc      : 根据脚本版本过滤
        $type      : commaArray
        $searchType: in
        $searchKey : scph.scriptPublishVersion

# 脚本集导出历史
scriptSetExportHistoryAPI:
  $tag     : Script Peripherals
  $tag_zhCN: 脚本周边功能

  list:
    showInDoc    : true
    name         : List Script Set export history
    name_zhCN    : 列出脚本集导出历史
    method       : get
    url          : /api/v1/script-set-export-history/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      seq: sseh.seq
    fuzzySearch:
      - sseh.note
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : sseh.id

# 脚本集导入历史
scriptSetImportHistoryAPI:
  $tag     : Script Peripherals
  $tag_zhCN: 脚本周边功能

  list:
    showInDoc    : true
    name         : List Script Set import history
    name_zhCN    : 列出脚本集导入历史
    method       : get
    url          : /api/v1/script-set-import-history/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      seq: ssih.seq
    fuzzySearch:
      - ssih.note
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : ssih.id

# 脚本市场
scriptMarketAPI:
  $tag     : Script Market
  $tag_zhCN: 脚本市场

  list:
    showInDoc    : true
    name         : List Script Markets
    name_zhCN    : 列出脚本市场
    method       : get
    url          : /api/v1/script-markets/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    paging       : false
    fieldSelecting: true
    orderFields:
      name      : smkt.name
      createTime: smkt.createTime
      updateTime: smkt.updateTime
    fuzzySearch:
      - smkt.name
      - smkt.description
      - smkt.type
      - smkt.configJSON
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : smkt.id
      name:
        $desc      : 根据名称搜索
        $type      : string
        $searchType: like
        $searchKey : smkt.name
      type:
        $desc      : 根据类型过滤
        $type      : commaArray
        $searchType: in
        $searchKey : smkt.type
        $in:
          - git
          - aliyunOSS
          - httpService

  add:
    showInDoc    : true
    name         : Add Script Market
    name_zhCN    : 添加脚本市场
    method       : post
    url          : /api/v1/script-markets/do/add
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      setAdmin:
        $desc      : 获取管理权
        $allowNull : true
        $type      : boolean
      data:
        $isRequired: true
        name:
          $desc      : 名称
          $allowNull : true
          $type      : string
        description:
          $desc      : 描述
          $allowNull : true
          $type      : string
        type:
          $desc      : 类型
          $isRequired: true
          $type      : enum
          $in:
            - git
            - aliyunOSS
            - httpService
        configJSON:
          $desc      : 配置信息
          $allowNull : true
          url:
            $desc      : URL地址
            $allowNull : true
            $type      : string
          branch:
            $desc      : Git 库分支
            $allowNull : true
            $type      : string
          user:
            $desc      : 用户名
            $allowNull : true
            $type      : string
          endpoint:
            $desc      : 接入点
            $allowNull : true
            $type      : string
          bucket:
            $desc      : Bucket
            $allowNull : true
            $type      : string
          folder:
            $desc      : Folder
            $allowNull : true
            $type      : string
          password:
            $desc      : 密码
            $allowNull : true
            $type      : string
          accessKeyId:
            $desc      : Access Key ID
            $allowNull : true
            $type      : string
          accessKeySecret:
            $desc      : Access Key Secret
            $allowNull : true
            $type      : string
          homepageURL:
            $desc      : 主页 URL
            $allowNull : true
            $type      : string
        isPinned:
          $desc      : 是否已置顶
          $allowNull : true
          $type      : boolean

  addOfficial:
    showInDoc    : true
    name         : Add Official Script Market
    name_zhCN    : 添加官方脚本市场
    method       : post
    url          : /api/v1/script-markets/do/add-official
    response     : json
    requireSignIn: true
    privilege    : general_w

  modify:
    showInDoc    : true
    name         : Modify Script Market
    name_zhCN    : 修改脚本市场
    method       : post
    url          : /api/v1/script-markets/:id/do/modify
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本市场 ID
        $type: string
    body:
      data:
        $isRequired: true
        name:
          $desc      : 名称
          $allowNull : true
          $type      : string
        description:
          $desc      : 描述
          $allowNull : true
          $type      : string
        configJSON:
          $desc      : 配置信息
          $allowNull : true
          url:
            $desc      : URL地址
            $allowNull : true
            $type      : string
          branch:
            $desc      : Git 库分支
            $allowNull : true
            $type      : string
          user:
            $desc      : 用户名
            $allowNull : true
            $type      : string
          endpoint:
            $desc      : 接入点
            $allowNull : true
            $type      : string
          bucket:
            $desc      : Bucket
            $allowNull : true
            $type      : string
          folder:
            $desc      : Folder
            $allowNull : true
            $type      : string
          password:
            $desc      : 密码
            $allowNull : true
            $type      : string
          accessKeyId:
            $desc      : Access Key ID
            $allowNull : true
            $type      : string
          accessKeySecret:
            $desc      : Access Key Secret
            $allowNull : true
            $type      : string
        extraJSON:
          $desc      : 额外配置信息
          $allowNull : true
          homepageURL:
            $desc      : 主页 URL
            $allowNull : true
            $type      : string
          i18n:
            en:
              $desc     : 至英文翻译
              $allowNull: true
              $type     : json
            zh-CN:
              $desc     : 至中文翻译
              $allowNull: true
              $type     : json
        isLocked:
          $desc     : 是否锁定
          $allowNull: true
          $type     : boolean
        isPinned:
          $desc      : 是否已置顶
          $allowNull : true
          $type      : boolean

  delete:
    showInDoc    : true
    name         : Delete Script Market
    name_zhCN    : 删除脚本市场
    method       : get
    url          : /api/v1/script-markets/:id/do/delete
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本市场 ID
        $type: string

  listScriptSets:
    showInDoc    : true
    name         : List Script Sets in Script Market
    name_zhCN    : 列出脚本市场中的脚本集
    method       : get
    url          : /api/v1/script-markets/:id/script-sets/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    paging       : false
    fieldSelecting: true
    params:
      id:
        $desc: 脚本市场 ID
        $type: string

  setAdmin:
    showInDoc    : true
    name         : Set admin of Script Market
    name_zhCN    : 成为脚本市场管理员
    method       : post
    url          : /api/v1/script-markets/:id/do/set-admin
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本市场 ID
        $type: string

  unsetAdmin:
    showInDoc    : true
    name         : Unset admin of Script Market
    name_zhCN    : 放弃脚本市场管理员
    method       : post
    url          : /api/v1/script-markets/:id/do/unset-admin
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本市场 ID
        $type: string

  publish:
    showInDoc    : true
    name         : Publish Script Set to Script Market
    name_zhCN    : 发布脚本集至脚本市场
    method       : post
    url          : /api/v1/script-markets/:id/do/publish
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本市场 ID
        $type: string
    body:
      scriptSetIds:
        $desc      : 需要推送的脚本集 ID 列表
        $isRequired: true
        $minLength : 1
        $:
          $desc      : 脚本集 ID
          $isRequired: true
          $type      : string
      mode:
        $desc      : 模式
        $isRequired: true
        $type      : enum
        $in:
          - add
          - delete
      note:
        $desc      : 备注
        $isRequired: true
        $type      : string

  install:
    showInDoc    : true
    name         : Install Script Set from Script Market
    name_zhCN    : 从脚本市场安装脚本集
    method       : post
    url          : /api/v1/script-markets/:id/do/install
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 脚本市场 ID
        $type: string
    body:
      scriptSetIds:
        $desc      : 需要安装的脚本集 ID 列表
        $isRequired: true
        $minLength : 1
        $:
          $desc      : 脚本集 ID
          $isRequired: true
          $type      : string
      deployOptions:
        $desc: 部署选项
        withStartupScript:
          $desc   : 是否部署启动脚本
          $type   : boolean
          $example: true
        withCrontabConfig:
          $desc   : 是否部署自动触发配置
          $type   : boolean
          $example: true
        startupScriptTitle:
          $desc   : 脚本标题
          $type   : string
        configReplacer:
          $desc   : 配置替换（如： 将 `"<您的 AK ID>"` 替换为具体值
          $type   : json
          $example: { '"<您的 AK ID>"': '"xxxx"' }

  checkUpdate:
    showInDoc    : true
    name         : Check Update of Script Sets from Script Markets
    name_zhCN    : 检查脚本市场脚本集更新
    method       : get
    url          : /api/v1/script-markets/do/check-update
    response     : json
    requireSignIn: true
    privilege    : general_r
    query:
      scriptMarketId:
        $desc: 脚本市场 ID
        $type: string

# 连接器
connectorAPI:
  $tag     : Connector
  $tag_zhCN: 连接器

  list:
    showInDoc    : true
    name         : List Connectors
    name_zhCN    : 列出连接器
    method       : get
    url          : /api/v1/connectors/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      id : cnct.id
      seq: cnct.seq
    fuzzySearch:
      - cnct.id
      - cnct.title
      - cnct.description
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cnct.id
      type:
        $desc      : 根据类型过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cnct.type
        $commaArrayIn:
          - guance
          - df_datakit
          - df_dataway
          - dff_sidecar
          - influxdb
          - mysql
          - redis
          - memcached
          - clickhouse
          - oracle
          - sqlserver
          - postgresql
          - mongodb
          - elasticsearch
          - nsq
          - mqtt
          - kafka

  add:
    showInDoc    : true
    name         : Add Connector
    name_zhCN    : 添加连接器
    method       : post
    url          : /api/v1/connectors/do/add
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      skipTest:
        $desc     : 是否跳过连通性测试
        $allowNull: true
        $type     : boolean
      data:
        $isRequired: true
        id:
          $desc       : ID
          $isRequired : true
          $type       : string
          $matchRegExp: ^[a-zA-Z_][a-zA-Z0-9_]*$
        title:
          $desc      : 标题
          $allowNull : true
          $type      : string
        description:
          $desc      : 描述
          $allowNull : true
          $type      : string
        type:
          $desc      : 类型
          $isRequired: true
          $type      : enum
          $in:
            - guance
            - df_datakit
            - df_dataway
            - dff_sidecar
            - influxdb
            - mysql
            - redis
            - memcached
            - clickhouse
            - oracle
            - sqlserver
            - postgresql
            - mongodb
            - elasticsearch
            - nsq
            - mqtt
            - kafka
          $example: mysql
        configJSON:
          $desc      : 配置JSON（根据不同类型，需要包含的字段有所不同。提交时检查，3秒超时）
          $isRequired: true
          guanceNode:
            $desc     : Guance Node
            $allowNull: true
            $type     : string
            $example  : default
          nameInGuance:
            $desc     : Name in Guance
            $allowNull: true
            $type     : string
            $example  : 'DataFlux Func (version: 1.0.0)'
          guanceOpenAPIURL:
            $desc     : Guance OpenAPI URL
            $allowNull: true
            $type     : string
            $example  : https://openapi.guance.com
          guanceWebSocketURL:
            $desc     : Guance WebSocket URL
            $allowNull: true
            $type     : string
            $example  : https://websocket.guance.com
          guanceOpenWayURL:
            $desc     : Guance OpenWay URL
            $allowNull: true
            $type     : string
            $example  : https://openway.guance.com
          guanceAPIKeyId:
            $desc     : Guance API Key ID
            $allowNull: true
            $type     : string
            $example  : wsak_xxxxxxxxxx
          guanceAPIKey:
            $desc     : Guance API Key
            $allowNull: true
            $type     : string
            $example  : xxxxxxxxxx
          host:
            $desc     : 主机
            $allowNull: true
            $type     : string
            $example  : localhost
          port:
            $desc     : 端口
            $allowNull: true
            $type     : int
            $example  : 3306
          servers:
            $desc     : 服务器列表
            $allowNull: true
            $type     : string
            $example  : 'localhost:11211,localhost:11212'
          protocol:
            $desc     : 协议
            $allowNull: true
            $type     : enum
            $in:
              - http
              - https
          source:
            $desc     : 源
            $allowNull: true
            $type     : string
          database:
            $desc     : 数据库
            $allowNull: true
            $type     : string
            $example  : dev
          user:
            $desc     : 用户
            $allowNull: true
            $type     : string
            $example  : dev
          password:
            $desc     : 密码
            $allowNull: true
            $type     : string
            $example  : dev
          charset:
            $desc     : 编码
            $allowNull: true
            $type     : string
            $example  : utf8mb4
          token:
            $desc     : Token
            $allowNull: true
            $type     : string
          accessKey:
            $desc     : Access Key
            $allowNull: true
            $type     : string
          secretKey:
            $desc     : Secret Key
            $allowNull: true
            $type     : string
          clientId:
            $desc     : 客户端 ID
            $allowNull: true
            $type     : string
          groupId:
            $desc     : 组 ID
            $allowNull: true
            $type     : string
          securityProtocol:
            $desc     : 安全协议
            $allowNull: true
            $type     : string
          saslMechanisms:
            $desc     : SASL机制
            $allowNull: true
            $type     : string
          multiSubClient:
            $desc     : 多订阅器
            $allowNull: true
            $type     : boolean
          kafkaSubOffset:
            $desc     : Kafka 订阅 Offset
            $allowNull: true
            $type     : string
            $example  : 'end'
          topicHandlers:
            $desc     : 主题处理函数
            $allowNull: true
            $:
              topic:
                $desc     : 主题
                $type     : string
                $allowNull: true
              funcId:
                $desc     : 处理函数
                $type     : string
                $allowNull: true
          meta:
            $desc     : Meta数据（仅限API添加）
            $allowNull: true
            $type     : json
        isPinned:
          $desc      : 是否已置顶
          $allowNull : true
          $type      : boolean

  modify:
    showInDoc    : true
    name         : Modify Connector
    name_zhCN    : 修改连接器
    method       : post
    url          : /api/v1/connectors/:id/do/modify
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 连接器 ID
        $type: string
    body:
      skipTest:
        $desc     : 是否跳过连通性测试
        $allowNull: true
        $type     : boolean
      data:
        $isRequired: true
        title:
          $desc      : 标题
          $allowNull : true
          $type      : string
        description:
          $desc      : 描述
          $allowNull : true
          $type      : string
        configJSON:
          $desc      : 配置JSON（根据不同类型，需要包含的字段有所不同。修改后重新检查，3秒超时）
          $isRequired: false
          guanceNode:
            $desc     : Guance Node
            $allowNull: true
            $type     : string
            $example  : default
          nameInGuance:
            $desc     : Name in Guance
            $allowNull: true
            $type     : string
            $example  : 'DataFlux Func (version: 1.0.0)'
          guanceOpenAPIURL:
            $desc     : Guance OpenAPI URL
            $allowNull: true
            $type     : string
            $example  : https://openapi.guance.com
          guanceWebSocketURL:
            $desc     : Guance WebSocket URL
            $allowNull: true
            $type     : string
            $example  : https://websocket.guance.com
          guanceOpenWayURL:
            $desc     : Guance OpenWay URL
            $allowNull: true
            $type     : string
            $example  : https://openway.guance.com
          guanceAPIKeyId:
            $desc     : Guance API Key ID
            $allowNull: true
            $type     : string
            $example  : wsak_xxxxxxxxxx
          guanceAPIKey:
            $desc     : Guance API Key
            $allowNull: true
            $type     : string
            $example  : xxxxxxxxxx
          host:
            $desc     : 主机
            $allowNull: true
            $type     : string
            $example  : localhost
          port:
            $desc     : 端口
            $allowNull: true
            $type     : int
            $example  : 3306
          servers:
            $desc     : 服务器列表
            $allowNull: true
            $type     : string
            $example  : 'localhost:11211,localhost:11212'
          protocol:
            $desc     : 协议
            $allowNull: true
            $type     : enum
            $in:
              - http
              - https
          source:
            $desc     : 源
            $allowNull: true
            $type     : string
          database:
            $desc     : 数据库
            $allowNull: true
            $type     : string
            $example  : dev
          user:
            $desc     : 用户
            $allowNull: true
            $type     : string
            $example  : dev
          password:
            $desc     : 密码
            $allowNull: true
            $type     : string
            $example  : dev
          charset:
            $desc     : 编码
            $allowNull: true
            $type     : string
            $example  : utf8mb4
          token:
            $desc     : Token
            $allowNull: true
            $type     : string
          accessKey:
            $desc     : Access Key
            $allowNull: true
            $type     : string
          secretKey:
            $desc     : Secret Key
            $allowNull: true
            $type     : string
          clientId:
            $desc     : 客户端 ID
            $allowNull: true
            $type     : string
          groupId:
            $desc     : 组 ID
            $allowNull: true
            $type     : string
          securityProtocol:
            $desc     : 安全协议
            $allowNull: true
            $type     : string
          saslMechanisms:
            $desc     : SASL机制
            $allowNull: true
            $type     : string
          multiSubClient:
            $desc     : 多订阅器
            $allowNull: true
            $type     : boolean
          kafkaSubOffset:
            $desc     : Kafka 订阅 Offset
            $allowNull: true
            $type     : string
            $example  : 'end'
          topicHandlers:
            $desc     : 主题处理函数
            $allowNull: true
            $:
              topic:
                $desc     : 主题
                $type     : string
                $allowNull: true
              funcId:
                $desc     : 处理函数
                $type     : string
                $allowNull: true
          meta:
            $desc     : Meta数据（仅限API添加）
            $allowNull: true
            $type     : json
        isPinned:
          $desc      : 是否已置顶
          $allowNull : true
          $type      : boolean

  delete:
    showInDoc    : true
    name         : Delete Connector
    name_zhCN    : 删除连接器
    method       : get
    url          : /api/v1/connectors/:id/do/delete
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 连接器 ID
        $type: string

  query:
    showInDoc    : true
    name         : Run query by Connector
    name_zhCN    : 连接器执行查询
    descType: markdown
    desc: |
      查询语句根据连接器类型不同而不同：

      |   连接器类型    |                   查询语句示例                  |
      |-----------------|-------------------------------------------------|
      | `guance`        | 使用封装方法操作，不适用SQL语句                 |
      | `df_datakit`    | 使用封装方法操作，不适用SQL语句                 |
      | `df_dataway`    | 使用封装方法操作，不适用SQL语句                 |
      | `dff_sidecar`   | 使用封装方法操作，不适用SQL语句                 |
      | `influx`        | `"SELECT * FROM some_measurement LIMIT 10"`     |
      | `mysql`         | `"SELECT * FROM some_table LIMIT 10"`           |
      | `redis`         | `"GET some_key"`                                |
      | `memcached`     | `"GET some_key"`                                |
      | `clickhouse`    | `"SELECT * FROM some_table LIMIT 10"`           |
      | `oracle`        | `"SELECT * FROM SOME_TABLE WHERE ROWNUM <= 10"` |
      | `sqlserver`     | `"SELECT TOP 10 * FROM some_table"`             |
      | `postgresql`    | `"SELECT * FROM some_table LIMIT 10"`           |
      | `mongodb`       | 使用封装方法操作，不适用SQL语句                 |
      | `elasticsearch` | `"GET /_search?q=field:value"`                  |
      | `nsq`           | 使用封装方法操作，不适用SQL语句                 |
      | `mqtt`          | 使用封装方法操作，不适用SQL语句                 |
      | `kafka`         | 使用封装方法操作，不适用SQL语句                 |

    method       : post
    url          : /api/v1/connectors/:id/do/query
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 连接器 ID
        $type: string
    body:
      database:
        $desc     : 指定数据库
        $allowNull: true
        $type     : string
      queryStatement:
        $desc      : 查询语句
        $isRequired: true
        $type      : string
        $example   : SHOW TABLES
      returnType:
        $desc     : 返回类型（默认json）
        $allowNull: true
        $type     : enum
        $in:
          - repr
          - json

  test:
    showInDoc    : true
    name         : Test Connector
    name_zhCN    : 测试连接器
    method       : get
    url          : /api/v1/connectors/:id/do/test
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 连接器 ID
        $type: string

  listSubInfo:
    showInDoc    : true
    name         : List subscription info
    name_zhCN    : 列出订阅信息
    method       : get
    url          : /api/v1/connector-sub-info/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    query:
      connectorId:
        $desc: 连接器 ID
        $type: string

# 环境变量
envVariableAPI:
  $tag     : ENV
  $tag_zhCN: 环境变量

  list:
    showInDoc    : true
    name         : List ENV Variables
    name_zhCN    : 列出环境变量
    method       : get
    url          : /api/v1/env-variables/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      seq: evar.seq
      id : evar.id
    fuzzySearch:
      - evar.id
      - evar.title
      - evar.description
      - evar.valueTEXT
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : evar.id

  add:
    showInDoc    : true
    name         : Add ENV Variable
    name_zhCN    : 添加环境变量
    method       : post
    url          : /api/v1/env-variables/do/add
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      data:
        $isRequired: true
        id:
          $desc       : 引用名
          $isRequired : true
          $type       : string
          $matchRegExp: ^[a-zA-Z_][a-zA-Z0-9_]*$
        title:
          $desc      : 标题
          $allowNull : true
          $type      : string
        description:
          $desc      : 描述
          $allowNull : true
          $type      : string
        valueTEXT:
          $desc      : 值
          $isRequired: false
          $type      : string
        autoTypeCasting:
          $desc      : 自动类型转换
          $isRequired: false
          $type      : enum
          $in:
            - string
            - integer
            - float
            - boolean
            - json
            - commaArray
        isPinned:
          $desc      : 是否已置顶
          $allowNull : true
          $type      : boolean

  modify:
    showInDoc    : true
    name         : Modify ENV Variable
    name_zhCN    : 修改环境变量
    method       : post
    url          : /api/v1/env-variables/:id/do/modify
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 环境变量 ID
        $type: string
    body:
      data:
        $isRequired: true
        title:
          $desc      : 标题
          $allowNull : true
          $type      : string
        description:
          $desc      : 描述
          $allowNull : true
          $type      : string
        valueTEXT:
          $desc      : 值
          $isRequired: false
          $type      : string
        autoTypeCasting:
          $desc      : 自动类型转换
          $isRequired: false
          $type      : enum
          $in:
            - string
            - integer
            - float
            - boolean
            - json
            - commaArray
        isPinned:
          $desc      : 是否已置顶
          $allowNull : true
          $type      : boolean

  delete:
    showInDoc    : true
    name         : Delete ENV Variable
    name_zhCN    : 删除环境变量
    method       : get
    url          : /api/v1/env-variables/:id/do/delete
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 环境变量 ID
        $type: string

# API 认证
apiAuthAPI:
  $tag     : API Auth
  $tag_zhCN: API 认证

  list:
    showInDoc    : true
    name         : List API Auth
    name_zhCN    : 列出 API 认证
    method       : get
    url          : /api/v1/api-auth/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      id : apia.id
      seq: apia.seq
    fuzzySearch:
      - apia.id
      - apia.name
      - apia.configJSON
      - apia.note
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : apia.id
      type:
        $desc      : 根据类型过滤
        $type      : commaArray
        $searchType: in
        $searchKey : apia.type
        $commaArrayIn:
          - fixedField
          - httpBasic
          - httpDigest
          - func
      name:
        $desc      : 根据名称搜索
        $type      : string
        $searchType: like
        $searchKey : apia.name
      note:
        $desc      : 根据备注搜索
        $type      : string
        $searchType: like
        $searchKey : apia.note

  add:
    showInDoc    : true
    name         : Add API Auth
    name_zhCN    : 添加 API 认证
    method       : post
    url          : /api/v1/api-auth/do/add
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      data:
        $isRequired: true
        name:
          $desc      : 名称
          $allowNull : true
          $type      : string
        type:
          $desc      : 类型
          $isRequired: true
          $type      : enum
          $in:
            - fixedField
            - httpBasic
            - httpDigest
            - func
          $example: httpBasic
        configJSON:
          $desc      : 配置JSON（根据不同类型，需要包含的字段有所不同）
          $isRequired: true
          fields:
            $desc: 字段列表
            $allowNull: true
            $:
              location:
                $desc      : 字段位置
                $isRequired: true
                $type      : enum
                $in:
                  - header
                  - query
                  - body
              name:
                $desc      : 字段名
                $isRequired: true
                $type      : string
              value:
                $desc      : 字段值
                $isRequired: true
                $type      : string
          users:
            $desc: 用户列表
            $allowNull: true
            $:
              username:
                $desc      : 用户名
                $isRequired: true
                $type      : string
              password:
                $desc      : 用户名
                $isRequired: true
                $type      : string
          funcId:
            $desc     : 认证函数 ID
            $allowNull: true
            $type     : string
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  modify:
    showInDoc    : true
    name         : Modify API Auth
    name_zhCN    : 修改 API 认证
    method       : post
    url          : /api/v1/api-auth/:id/do/modify
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: API认证 ID
        $type: string
    body:
      data:
        $isRequired: true
        name:
          $desc      : 名称
          $allowNull : true
          $type      : string
        configJSON:
          $desc      : 配置JSON（根据不同类型，需要包含的字段有所不同）
          $isRequired: false
          fields:
            $desc: 字段列表
            $allowNull: true
            $:
              location:
                $desc      : 字段位置
                $isRequired: true
                $type      : enum
                $in:
                  - header
                  - query
                  - body
              name:
                $desc      : 字段名
                $isRequired: true
                $type      : string
              value:
                $desc      : 字段值
                $isRequired: true
                $type      : string
          users:
            $desc: 用户列表
            $allowNull: true
            $:
              username:
                $desc      : 用户名
                $isRequired: true
                $type      : string
              password:
                $desc      : 密码
                $isRequired: false
                $type      : string
          funcId:
            $desc     : 认证函数 ID
            $allowNull: true
            $type     : string
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  delete:
    showInDoc    : true
    name         : Delete API Auth
    name_zhCN    : 删除 API 认证
    method       : get
    url          : /api/v1/api-auth/:id/do/delete
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: API认证 ID
        $type: string

# 授权链接
authLinkAPI:
  $tag     : Auth Link
  $tag_zhCN: 授权链接

  list:
    showInDoc    : true
    name         : List Auth Links
    name_zhCN    : 列出授权链接
    method       : get
    url          : /api/v1/auth-links/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      seq   : auln.seq
      funcId: auln.funcId
    fuzzySearch:
      - auln.id
      - auln.funcId
      - auln.funcCallKwargsJSON
      - auln.tagsJSON
      - auln.originId
      - auln.note
      - func.title
      - func.description
      - func.tagsJSON
    query:
      _withTaskInfo:
        $desc: 是否附带任务信息
        $type: boolean
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : auln.id
      funcId:
        $desc      : 根据函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : auln.funcId
      tags:
        $desc      : 根据授权链接标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : auln.tagsJSON
      origin:
        $desc      : 根据来源过滤
        $type      : string
        $searchType: eq
        $searchKey : auln.origin
      originId:
        $desc      : 根据来源 ID 过滤
        $type      : string
        $searchType: eq
        $searchKey : auln.originId
      func_scriptSetId:
        $desc      : 根据脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptSetId
      func_scriptId:
        $desc      : 根据脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptId
      func_tags:
        $desc      : 根据执行函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : func.tagsJSON

  add:
    showInDoc    : true
    name         : Add Auth Link
    name_zhCN    : 添加授权链接
    descType: markdown
    desc: |
      可以通过`data.funcCallKwargsJSON`限制最终调用方传递参数。

      如存在函数`def func(arg1, arg2, arg3, arg4=None)`，且配置为以下内容：

      ```json
      {
        "data": {
          "funcCallKwargsJSON": {
            "arg1": "hello, world.",
            "arg2": null,
            "arg3": "INPUT_BY_CALLER"
          },
          ...
        }
      }
      ```

      则表示：

      - `"arg1"`参数：*不允许*调用时指定，调用时自动指定参数值为`"hello, world."`
      - `"arg2"`参数：*不允许*调用时指定，调用时自动指定参数值为`null`
      - `"arg3"`参数：允许调用时指定
      - `"arg4"`参数：*不允许*调用时指定，调用时也不传递此参数

    method       : post
    url          : /api/v1/auth-links/do/add
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      data:
        $isRequired: true
        id:
          $desc      : ID（不指定自动生成）
          $isRequired: false
          $allowNull : true
          $type      : string
        funcId:
          $desc      : 函数 ID
          $isRequired: true
          $type      : string
        funcCallKwargsJSON:
          $desc      : 函数调用参数JSON (kwargs)
          $isRequired: true
          $type      : json
          $example   : {"msg": "INPUT_BY_CALLER"}
        tagsJSON:
          $desc     : 授权链接标签（直接替换完整数组）
          $allowNull: true
          $:
            $desc      : 标签
            $isRequired: true
            $type      : string
        apiAuthId:
          $desc     : API 认证 ID
          $allowNull: true
          $type     : string
        expireTime:
          $desc      : 过期时间（ISO8601格式）
          $allowNull : true
          $type      : string
          $isISO8601 : true
          $example   : '2019-01-01T00:00:00Z'
        throttlingJSON:
          $desc      : 限流JSON
          $allowNull : true
          bySecond:
            $desc     : 按秒限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 2
          byMinute:
            $desc     : 按分钟限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 5
          byHour:
            $desc     : 按小时限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 10
          byDay:
            $desc     : 按天限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 100
          byMonth:
            $desc     : 按月限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 1000
          byYear:
            $desc     : 按年限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 10000
        showInDoc:
          $desc      : 是否显示于文档
          $isRequired: false
          $type      : boolean
        taskInfoLimit:
          $desc      : 近期任务保留数
          $isRequired: false
          $allowNull : true
          $type      : int
          $minValue  : 0
          $maxValue  : 5000
        isDisabled:
          $desc      : 是否禁用
          $isRequired: false
          $type      : boolean
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  modify:
    showInDoc    : true
    name         : Modify Auth Link
    name_zhCN    : 修改授权链接
    method       : post
    url          : /api/v1/auth-links/:id/do/modify
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 授权链接 ID
        $type: string
    body:
      data:
        $isRequired: true
        funcId:
          $desc      : 函数 ID
          $isRequired: false
          $type      : string
        funcCallKwargsJSON:
          $desc      : 函数调用参数JSON (kwargs)
          $isRequired: false
          $type      : json
          $example  : {"msg": "INPUT_BY_CALLER"}
        tagsJSON:
          $desc     : 授权链接标签（直接替换完整数组）
          $allowNull: true
          $:
            $desc      : 标签
            $isRequired: true
            $type      : string
        apiAuthId:
          $desc     : API 认证 ID
          $allowNull: true
          $type     : string
        expireTime:
          $desc      : 过期时间（ISO8601格式）
          $allowNull : true
          $type      : string
          $isISO8601 : true
          $example   : '2019-01-01T00:00:00Z'
        throttlingJSON:
          $desc      : 限流JSON
          $allowNull : true
          bySecond:
            $desc     : 按秒限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 2
          byMinute:
            $desc     : 按分钟限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 5
          byHour:
            $desc     : 按小时限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 10
          byDay:
            $desc     : 按天限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 100
          byMonth:
            $desc     : 按月限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 1000
          byYear:
            $desc     : 按年限流（次数）
            $allowNull: true
            $type     : int
            $minValue : 1
            $example  : 10000
        showInDoc:
          $desc      : 是否显示于文档
          $isRequired: false
          $type      : boolean
        taskInfoLimit:
          $desc      : 近期任务保留数
          $isRequired: false
          $allowNull : true
          $type      : int
          $minValue  : 0
          $maxValue  : 5000
        isDisabled:
          $desc      : 是否禁用
          $isRequired: false
          $type      : boolean
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  delete:
    showInDoc    : true
    name         : Delete Auth Link
    name_zhCN    : 删除授权链接
    method       : get
    url          : /api/v1/auth-links/:id/do/delete
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 授权链接 ID
        $type: string

  addMany:
    showInDoc    : true
    name         : Add many Auth Links
    name_zhCN    : 批量添加授权链接
    method       : post
    url          : /api/v1/auth-links/do/add-many
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      data:
        $isRequired: true
        $:
          id:
            $desc      : ID（不指定自动生成）
            $isRequired: false
            $allowNull : true
            $type      : string
          funcId:
            $desc      : 函数 ID
            $isRequired: true
            $type      : string
          funcCallKwargsJSON:
            $desc      : 函数调用参数JSON (kwargs)
            $isRequired: true
            $type      : json
            $example   : {"msg": "INPUT_BY_CALLER"}
          tagsJSON:
            $desc     : 授权链接标签（直接替换完整数组）
            $allowNull: true
            $:
              $desc      : 标签
              $isRequired: true
              $type      : string
          apiAuthId:
            $desc     : API 认证 ID
            $allowNull: true
            $type     : string
          expireTime:
            $desc      : 过期时间（ISO8601格式）
            $allowNull : true
            $type      : string
            $isISO8601 : true
            $example   : '2019-01-01T00:00:00Z'
          throttlingJSON:
            $desc      : 限流JSON
            $allowNull : true
            bySecond:
              $desc     : 按秒限流（次数）
              $allowNull: true
              $type     : int
              $minValue : 1
              $example  : 2
            byMinute:
              $desc     : 按分钟限流（次数）
              $allowNull: true
              $type     : int
              $minValue : 1
              $example  : 5
            byHour:
              $desc     : 按小时限流（次数）
              $allowNull: true
              $type     : int
              $minValue : 1
              $example  : 10
            byDay:
              $desc     : 按天限流（次数）
              $allowNull: true
              $type     : int
              $minValue : 1
              $example  : 100
            byMonth:
              $desc     : 按月限流（次数）
              $allowNull: true
              $type     : int
              $minValue : 1
              $example  : 1000
            byYear:
              $desc     : 按年限流（次数）
              $allowNull: true
              $type     : int
              $minValue : 1
              $example  : 10000
          showInDoc:
            $desc      : 是否显示于文档
            $isRequired: false
            $type      : boolean
          taskInfoLimit:
            $desc      : 近期任务保留数
            $isRequired: false
            $allowNull : true
            $type      : int
            $minValue  : 0
            $maxValue  : 5000
          isDisabled:
            $desc      : 是否禁用
            $isRequired: false
            $type      : boolean
          note:
            $desc      : 备注
            $allowNull : true
            $type      : string

  modifyMany:
    showInDoc    : true
    name         : Modify many Auth Links
    name_zhCN    : 批量修改授权链接
    descType: markdown
    desc: |
      *注意：使用本接口时至少需要制定一个条件，不允许通过不指定条件来修改所有数据*

      当指定`funcCallKwargsJSON`时，会在*函数的参数级别*进行替换，如：

      存在函数`def func(a, b)`，那么

      |      更新前      | `funcCallKwargsJSON`参数 |         更新后         |
      |------------------|--------------------------|------------------------|
      | {"a": 1, "b": 2} | { "a": 8, "b": 9 }       | { *"a": 8*, *"b": 9* } |
      | {"a": 1, "b": 2} | { "b": 9 }`              | { "a": 1, *"b": 9* }   |

    method       : post
    url          : /api/v1/auth-links/do/modify-many
    response     : json
    requireSignIn: true
    privilege    : general_w
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : auln.id
      funcId:
        $desc      : 根据函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : auln.funcId
      tags:
        $desc      : 根据授权链接标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : auln.tagsJSON
      origin:
        $desc      : 根据来源过滤
        $type      : commaArray
        $searchType: in
        $searchKey : auln.origin
      originId:
        $desc      : 根据来源 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : auln.originId
      func_scriptSetId:
        $desc      : 根据脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptSetId
      func_scriptId:
        $desc      : 根据脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptId
      func_tags:
        $desc      : 根据执行函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : func.tagsJSON
    body:
      data:
        $isRequired: true
        funcId:
          $desc      : 函数 ID
          $isRequired: false
          $type      : string
        funcCallKwargsJSON:
          $desc      : 函数调用参数JSON (kwargs)
          $isRequired: false
          $type      : json
          $example  : {"msg": "INPUT_BY_CALLER"}
        tagsJSON:
          $desc     : 授权链接标签（直接替换完整数组）
          $allowNull: true
          $:
            $desc      : 标签
            $isRequired: true
            $type      : string
        apiAuthId:
          $desc     : API 认证 ID
          $allowNull: true
          $type     : string
        taskInfoLimit:
          $desc      : 近期任务保留数
          $isRequired: false
          $allowNull : true
          $type      : int
          $minValue  : 0
          $maxValue  : 5000
        isDisabled:
          $desc      : 是否禁用
          $isRequired: false
          $type      : boolean
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  deleteMany:
    showInDoc    : true
    name         : Delete many Auth Links
    name_zhCN    : 批量删除授权链接
    descType: markdown
    desc: |
      *注意：使用本接口时至少需要制定一个条件，不允许通过不指定条件来清空所有数据*
    method       : get
    url          : /api/v1/auth-links/do/delete-many
    response     : json
    requireSignIn: true
    privilege    : general_w
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : auln.id
      funcId:
        $desc      : 根据函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : auln.funcId
      tags:
        $desc      : 根据授权链接标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : auln.tagsJSON
      origin:
        $desc      : 根据来源过滤
        $type      : commaArray
        $searchType: in
        $searchKey : auln.origin
      originId:
        $desc      : 根据来源 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : auln.originId
      func_scriptSetId:
        $desc      : 根据脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptSetId
      func_scriptId:
        $desc      : 根据脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptId
      func_tags:
        $desc      : 根据执行函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : func.tagsJSON

# 自动触发配置
crontabConfigAPI:
  $tag     : Contab Config
  $tag_zhCN: 自动触发配置

  list:
    showInDoc    : true
    name         : List Crontab Configs
    name_zhCN    : 列出自动触发配置
    method       : get
    url          : /api/v1/crontab-configs/do/list
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      seq   : cron.seq
      funcId: cron.funcId
    fuzzySearch:
      - cron.id
      - cron.funcId
      - cron.funcCallKwargsJSON
      - cron.tagsJSON
      - cron.originId
      - cron.note
      - func.title
      - func.description
      - func.tagsJSON
    query:
      _withTaskInfo:
        $desc: 是否附带任务信息
        $type: boolean
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.id
      funcId:
        $desc      : 根据函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.funcId
      tags:
        $desc      : 根据自动触发配置标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : cron.tagsJSON
      scope:
        $desc      : 根据范围过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.scope
      origin:
        $desc      : 根据来源过滤
        $type      : string
        $searchType: eq
        $searchKey : cron.origin
      originId:
        $desc      : 根据来源 ID 过滤
        $type      : string
        $searchType: eq
        $searchKey : cron.originId
      func_scriptSetId:
        $desc      : 根据脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptSetId
      func_scriptId:
        $desc      : 根据脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptId
      func_tags:
        $desc      : 根据执行函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : func.tagsJSON

  add:
    showInDoc    : true
    name         : Add Crontab Config
    name_zhCN    : 添加自动触发配置
    descType: markdown
    desc: |
      自动触发配置根据`scope`字段划分不同范围（默认为`"GLOBAL"`表示全局），

      相同范围内的自动触发配置不允许存在2个以上执行函数和调用参数完全相同的配置。

      *对于观测云Studio 的触发器功能在对接自动触发配置时，可以将工作空间UUID作为scope。如："scope": "workspaceUUID=<工作空间UUID>"*

      *`scope`最长不得超过255个字符*
    method       : post
    url          : /api/v1/crontab-configs/do/add
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    body:
      data:
        $isRequired: true
        id:
          $desc      : ID（不指定自动生成）
          $isRequired: false
          $allowNull : true
          $type      : string
        funcId:
          $desc      : 函数 ID
          $isRequired: true
          $type      : string
        funcCallKwargsJSON:
          $desc      : 函数调用参数JSON (kwargs)
          $isRequired: true
          $type      : json
          $example   : {"msg": "Tom"}
        crontab:
          $desc     : 执行频率（Crontab语法，支持到分钟级）
          $allowNull: true
          $type     : string
          $example  : 0 * * * *
        tagsJSON:
          $desc     : 自动触发配置标签（直接替换完整数组）
          $allowNull: true
          $:
            $desc      : 标签
            $isRequired: true
            $type      : string
        scope:
          $desc     : 范围（默认"GLOBAL"表示全局范围）
          $allowNull: false
          $type     : string
          $maxLength: 255
          $example  : my-uuid
        expireTime:
          $desc      : 过期时间（ISO8601格式）
          $allowNull : true
          $type      : string
          $isISO8601 : true
          $example   : '2019-01-01T00:00:00Z'
        taskInfoLimit:
          $desc      : 近期任务保留数
          $isRequired: false
          $allowNull : true
          $type      : int
          $minValue  : 0
          $maxValue  : 5000
        isDisabled:
          $desc      : 是否禁用
          $isRequired: false
          $type      : boolean
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  modify:
    showInDoc    : true
    name         : Modify Crontab Config
    name_zhCN    : 修改自动触发配置
    method       : post
    url          : /api/v1/crontab-configs/:id/do/modify
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    params:
      id:
        $desc: 自动触发配置 ID
        $type: string
    body:
      data:
        $isRequired: true
        funcId:
          $desc      : 函数 ID
          $isRequired: false
          $type      : string
        funcCallKwargsJSON:
          $desc      : 函数调用参数JSON (kwargs)
          $isRequired: false
          $type      : json
          $example   : {"msg": "Tom"}
        crontab:
          $desc     : 执行频率（Crontab语法，支持到分钟级）
          $allowNull: true
          $type     : string
          $example  : 0 * * * *
        tagsJSON:
          $desc     : 自动触发配置标签（直接替换完整数组）
          $allowNull: true
          $:
            $desc      : 标签
            $isRequired: true
            $type      : string
        scope:
          $desc     : 范围（默认"GLOBAL"表示全局范围）
          $allowNull: false
          $type     : string
          $maxLength: 255
          $example  : my-uuid
        expireTime:
          $desc      : 过期时间（ISO8601格式）
          $allowNull : true
          $type      : string
          $isISO8601 : true
          $example   : '2019-01-01T00:00:00Z'
        taskInfoLimit:
          $desc      : 近期任务保留数
          $isRequired: false
          $allowNull : true
          $type      : int
          $minValue  : 0
          $maxValue  : 5000
        isDisabled:
          $desc      : 是否禁用
          $isRequired: false
          $type      : boolean
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  delete:
    showInDoc    : true
    name         : Delete Crontab Config
    name_zhCN    : 删除自动触发配置
    method       : get
    url          : /api/v1/crontab-configs/:id/do/delete
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    params:
      id:
        $desc: 自动触发配置 ID
        $type: string

  addMany:
    showInDoc    : true
    name         : Add many Crontab Configs
    name_zhCN    : 批量添加自动触发配置
    method       : post
    url          : /api/v1/crontab-configs/do/add-many
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    body:
      data:
        $isRequired: true
        $:
          funcId:
            $desc      : 函数 ID
            $isRequired: true
            $type      : string
          funcCallKwargsJSON:
            $desc      : 函数调用参数JSON (kwargs)
            $isRequired: true
            $type      : json
            $example   : {"msg": "Tom"}
          crontab:
            $desc     : 执行频率（Crontab语法，支持到分钟级）
            $allowNull: true
            $type     : string
            $example  : 0 * * * *
          tagsJSON:
            $desc     : 自动触发配置标签（直接替换完整数组）
            $allowNull: true
            $:
              $desc      : 标签
              $isRequired: true
              $type      : string
          scope:
            $desc     : 范围（默认"GLOBAL"表示全局范围）
            $allowNull: false
            $type     : string
            $maxLength: 255
            $example  : my-uuid
          expireTime:
            $desc      : 过期时间（ISO8601格式）
            $allowNull : true
            $type      : string
            $isISO8601 : true
            $example   : '2019-01-01T00:00:00Z'
          taskInfoLimit:
            $desc      : 近期任务保留数
            $isRequired: false
            $allowNull : true
            $type      : int
            $minValue  : 0
            $maxValue  : 5000
          isDisabled:
            $desc      : 是否禁用
            $isRequired: false
            $type      : boolean
          note:
            $desc      : 备注
            $allowNull : true
            $type      : string

  modifyMany:
    showInDoc    : true
    name         : Modify many Crontab Configs
    name_zhCN    : 批量修改自动触发配置
    descType: markdown
    desc: |
      *注意：使用本接口时至少需要制定一个条件，不允许通过不指定条件来修改所有数据*

      当指定`funcCallKwargsJSON`时，会在*函数的参数级别*进行替换，如：

      存在函数`def func(a, b)`，那么

      |      更新前      | `funcCallKwargsJSON`参数 |       更新后       |
      |------------------|--------------------------|--------------------|
      | {"a": 1, "b": 2} | { "a": 8, "b": 9 }       | { "a": 8, "b": 9 } |
      | {"a": 1, "b": 2} | { "b": 9 }               | { "a": 1, "b": 9 } |

    method       : post
    url          : /api/v1/crontab-configs/do/modify-many
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.id
      funcId:
        $desc      : 根据函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.funcId
      tags:
        $desc      : 根据自动触发配置标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : cron.tagsJSON
      scope:
        $desc      : 根据范围过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.scope
      origin:
        $desc      : 根据来源过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.origin
      originId:
        $desc      : 根据来源 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.originId
      func_scriptSetId:
        $desc      : 根据脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptSetId
      func_scriptId:
        $desc      : 根据脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptId
      func_tags:
        $desc      : 根据执行函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : func.tagsJSON
    body:
      data:
        $isRequired: true
        funcId:
          $desc      : 函数 ID
          $isRequired: false
          $type      : string
        funcCallKwargsJSON:
          $desc      : 函数调用参数JSON (kwargs)
          $isRequired: false
          $type      : json
          $example   : {"msg": "Tom"}
        crontab:
          $desc     : 执行频率（Crontab语法，支持到分钟级）
          $allowNull: true
          $type     : string
          $example  : 0 * * * *
        tagsJSON:
          $desc     : 自动触发配置标签（直接替换完整数组）
          $allowNull: true
          $:
            $desc      : 标签
            $isRequired: true
            $type      : string
        taskInfoLimit:
          $desc      : 近期任务保留数
          $isRequired: false
          $allowNull : true
          $type      : int
          $minValue  : 0
          $maxValue  : 5000
        isDisabled:
          $desc      : 是否禁用
          $isRequired: false
          $type      : boolean
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  deleteMany:
    showInDoc    : true
    name         : Delete many Crontab Configs
    name_zhCN    : 批量删除自动触发配置
    descType: markdown
    desc: |
      *注意：使用本接口时至少需要制定一个条件，不允许通过不指定条件来清空所有数据*
    method       : get
    url          : /api/v1/crontab-configs/do/delete-many
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.id
      funcId:
        $desc      : 根据函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.funcId
      tags:
        $desc      : 根据自动触发配置标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : cron.tagsJSON
      scope:
        $desc      : 根据范围过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.scope
      origin:
        $desc      : 根据来源过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.origin
      originId:
        $desc      : 根据来源 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : cron.originId
      func_scriptSetId:
        $desc      : 根据脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptSetId
      func_scriptId:
        $desc      : 根据脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptId
      func_tags:
        $desc      : 根据执行函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : func.tagsJSON

# 批处理
batchAPI:
  $tag     : Batch
  $tag_zhCN: 批处理

  list:
    showInDoc    : true
    name         : List Batches
    name_zhCN    : 列出批处理
    method       : get
    url          : /api/v1/batches/do/list
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      seq   : bat.seq
      funcId: bat.funcId
    fuzzySearch:
      - bat.id
      - bat.funcId
      - bat.funcCallKwargsJSON
      - bat.originId
      - bat.tagsJSON
      - bat.note
      - func.title
      - func.description
      - func.tagsJSON
    query:
      _withTaskInfo:
        $desc: 是否附带任务信息
        $type: boolean
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : bat.id
      funcId:
        $desc      : 根据函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : bat.funcId
      tags:
        $desc      : 根据批处理标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : bat.tagsJSON
      origin:
        $desc      : 根据来源过滤
        $type      : string
        $searchType: eq
        $searchKey : bat.origin
      originId:
        $desc      : 根据来源 ID 过滤
        $type      : string
        $searchType: eq
        $searchKey : bat.originId
      func_scriptSetId:
        $desc      : 根据脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptSetId
      func_scriptId:
        $desc      : 根据脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptId
      func_tags:
        $desc      : 根据执行函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : func.tagsJSON

  add:
    showInDoc    : true
    name         : Add Batch
    name_zhCN    : 添加批处理
    descType: markdown
    desc: |
      可以通过`data.funcCallKwargsJSON`限制最终调用方传递参数。

      如存在函数`def func(arg1, arg2, arg3, arg4=None)`，且配置为以下内容：

      ```json
      {
        "data": {
          "funcCallKwargsJSON": {
            "arg1": "hello, world.",
            "arg2": null,
            "arg3": "INPUT_BY_CALLER"
          },
          ...
        }
      }
      ```

      则表示：

      - `"arg1"`参数：*不允许*调用时指定，调用时自动指定参数值为`"hello, world."`
      - `"arg2"`参数：*不允许*调用时指定，调用时自动指定参数值为`null`
      - `"arg3"`参数：允许调用时指定
      - `"arg4"`参数：*不允许*调用时指定，调用时也不传递此参数

    method       : post
    url          : /api/v1/batches/do/add
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    body:
      data:
        $isRequired: true
        id:
          $desc      : ID（不指定自动生成）
          $isRequired: false
          $allowNull : true
          $type      : string
        funcId:
          $desc      : 函数 ID
          $isRequired: true
          $type      : string
        funcCallKwargsJSON:
          $desc      : 函数调用参数JSON (kwargs)
          $isRequired: true
          $type      : json
          $example  : {"msg": "INPUT_BY_CALLER"}
        tagsJSON:
          $desc     : 批处理标签（直接替换完整数组）
          $allowNull: true
          $:
            $desc      : 标签
            $isRequired: true
            $type      : string
        apiAuthId:
          $desc     : API 认证 ID
          $allowNull: true
          $type     : string
        showInDoc:
          $desc      : 是否显示于文档
          $isRequired: false
          $type      : boolean
        taskInfoLimit:
          $desc      : 近期任务保留数
          $isRequired: false
          $allowNull : true
          $type      : int
          $minValue  : 0
          $maxValue  : 5000
        isDisabled:
          $desc      : 是否禁用
          $isRequired: false
          $type      : boolean
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  modify:
    showInDoc    : true
    name         : Modify Batch
    name_zhCN    : 修改批处理
    method       : post
    url          : /api/v1/batches/:id/do/modify
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    params:
      id:
        $desc: 批处理 ID
        $type: string
    body:
      data:
        $isRequired: true
        funcId:
          $desc      : 函数 ID
          $isRequired: false
          $type      : string
        funcCallKwargsJSON:
          $desc      : 函数调用参数JSON (kwargs)
          $isRequired: false
          $type      : json
          $example   : {"msg": "INPUT_BY_CALLER"}
        tagsJSON:
          $desc     : 批处理标签（直接替换完整数组）
          $allowNull: true
          $:
            $desc      : 标签
            $isRequired: true
            $type      : string
        apiAuthId:
          $desc     : API 认证 ID
          $allowNull: true
          $type     : string
        showInDoc:
          $desc      : 是否显示于文档
          $isRequired: false
          $type      : boolean
        taskInfoLimit:
          $desc      : 近期任务保留数
          $isRequired: false
          $allowNull : true
          $type      : int
          $minValue  : 0
          $maxValue  : 5000
        isDisabled:
          $desc      : 是否禁用
          $isRequired: false
          $type      : boolean
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  delete:
    showInDoc    : true
    name         : Delete Batch
    name_zhCN    : 删除批处理
    method       : get
    url          : /api/v1/batches/:id/do/delete
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    params:
      id:
        $desc: 批处理 ID
        $type: string

  addMany:
    showInDoc    : true
    name         : Add many Batches
    name_zhCN    : 批量添加批处理
    method       : post
    url          : /api/v1/batches/do/add-many
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    body:
      data:
        $isRequired: true
        $:
          id:
            $desc      : ID（不指定自动生成）
            $isRequired: false
            $allowNull : true
            $type      : string
          funcId:
            $desc      : 函数 ID
            $isRequired: true
            $type      : string
          funcCallKwargsJSON:
            $desc      : 函数调用参数JSON (kwargs)
            $isRequired: true
            $type      : json
            $example  : {"msg": "INPUT_BY_CALLER"}
          tagsJSON:
            $desc     : 批处理标签（直接替换完整数组）
            $allowNull: true
            $:
              $desc      : 标签
              $isRequired: true
              $type      : string
          apiAuthId:
            $desc     : API 认证 ID
            $allowNull: true
            $type     : string
          showInDoc:
            $desc      : 是否显示于文档
            $isRequired: false
            $type      : boolean
          taskInfoLimit:
            $desc      : 近期任务保留数
            $isRequired: false
            $allowNull : true
            $type      : int
            $minValue  : 0
            $maxValue  : 5000
          isDisabled:
            $desc      : 是否禁用
            $isRequired: false
            $type      : boolean
          note:
            $desc      : 备注
            $allowNull : true
            $type      : string

  modifyMany:
    showInDoc    : true
    name         : Modify many Batches
    name_zhCN    : 批量修改批处理
    descType: markdown
    desc: |
      *注意：使用本接口时至少需要制定一个条件，不允许通过不指定条件来修改所有数据*

      当指定`funcCallKwargsJSON`时，会在*函数的参数级别*进行替换，如：

      存在函数`def func(a, b)`，那么

      |      更新前      | `funcCallKwargsJSON`参数 |         更新后         |
      |------------------|--------------------------|------------------------|
      | {"a": 1, "b": 2} | { "a": 8, "b": 9 }       | { *"a": 8*, *"b": 9* } |
      | {"a": 1, "b": 2} | { "b": 9 }`              | { "a": 1, *"b": 9* }   |
    method       : post
    url          : /api/v1/batches/do/modify-many
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : bat.id
      funcId:
        $desc      : 根据函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : bat.funcId
      tags:
        $desc      : 根据批处理标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : bat.tagsJSON
      origin:
        $desc      : 根据来源过滤
        $type      : commaArray
        $searchType: in
        $searchKey : bat.origin
      originId:
        $desc      : 根据来源 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : bat.originId
      func_scriptSetId:
        $desc      : 根据脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptSetId
      func_scriptId:
        $desc      : 根据脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptId
      func_tags:
        $desc      : 根据执行函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : func.tagsJSON
    body:
      data:
        $isRequired: true
        funcId:
          $desc      : 函数 ID
          $isRequired: false
          $type      : string
        funcCallKwargsJSON:
          $desc      : 函数调用参数JSON (kwargs)
          $isRequired: false
          $type      : json
          $example   : {"msg": "INPUT_BY_CALLER"}
        tagsJSON:
          $desc     : 批处理标签（直接替换完整数组）
          $allowNull: true
          $:
            $desc      : 标签
            $isRequired: true
            $type      : string
        apiAuthId:
          $desc     : API 认证 ID
          $allowNull: true
          $type     : string
        taskInfoLimit:
          $desc      : 近期任务保留数
          $isRequired: false
          $allowNull : true
          $type      : int
          $minValue  : 0
          $maxValue  : 5000
        isDisabled:
          $desc      : 是否禁用
          $isRequired: false
          $type      : boolean
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  deleteMany:
    showInDoc    : true
    name         : Delete many Batches
    name_zhCN    : 批量删除批处理
    method       : get
    url          : /api/v1/batches/do/delete-many
    response     : json
    requireSignIn: $NOT_CONFIG._IS_STREAKING
    privilege    : general_w
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : bat.id
      funcId:
        $desc      : 根据函数 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : bat.funcId
      tags:
        $desc      : 根据批处理标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : bat.tagsJSON
      origin:
        $desc      : 根据来源过滤
        $type      : commaArray
        $searchType: in
        $searchKey : bat.origin
      originId:
        $desc      : 根据来源 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : bat.originId
      func_scriptSetId:
        $desc      : 根据脚本集 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptSetId
      func_scriptId:
        $desc      : 根据脚本 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : func.scriptId
      func_tags:
        $desc      : 根据执行函数标签过滤
        $type      : commaArray
        $searchType: jsonArrayHasAll
        $searchKey : func.tagsJSON

# 任务信息
taskInfoAPI:
  $tag     : Task Info
  $tag_zhCN: 任务信息

  list:
    showInDoc    : true
    name         : List task info
    name_zhCN    : 列出任务信息
    method       : get
    url          : /api/v1/task-info/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    paging       : simple
    fieldSelecting: true
    fuzzySearch:
      - task.id
      - task.origin
      - task.originId
      - task.rootTaskId
      - task.funcId
      - task.logMessageTEXT
      - task.einfoTEXT
      - task.status
    query:
      id:
        $desc      : 按任务 ID 过滤
        $type      : string
        $searchType: eq
        $searchKey : task.id
      origin:
        $desc      : 根据来源过滤
        $type      : string
        $searchType: eq
        $searchKey : task.origin
      originId:
        $desc      : 根据来源 ID 过滤
        $type      : string
        $searchType: eq
        $searchKey : task.originId
      rootTaskId:
        $desc      : 根据主任务 ID 过滤
        $type      : string
        $searchType: eq
        $searchKey : task.rootTaskId
      funcId:
        $desc      : 按函数 ID 过滤
        $type      : string
        $searchType: eq
        $searchKey : task.funcId
      status:
        $desc: 按状态过滤
        $type: enum
        $in:
          - success
          - failure
        $searchType: eq
        $searchKey : task.status

# DataFlux Func 函数调用任务结果
datafluxFuncTaskResultAPI:
  $tag     : Func Call Task Result
  $tag_zhCN: 函数调用结果

  list:
    name         : List Func task result
    name_zhCN    : 列出函数任务结果
    method       : get
    url          : /api/v1/dataflux-func-task-results/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    paging       : marker
    fieldSelecting: true
    orderFields:
      seq: dftr.seq
    fuzzySearch:
      - dftr.id
      - dftr.origin
      - dftr.kwargsJSON->>$.funcId
    query:
      id:
        $desc      : 按任务 ID 过滤
        $type      : string
        $searchType: like
        $searchKey : dftr.id
      origin:
        $desc      : 按任务来源过滤
        $type      : string
        $searchType: like
        $searchKey : dftr.origin
      funcId:
        $desc      : 按函数过滤
        $type      : string
        $searchType: like
        $searchKey : dftr.kwargsJSON->>$.funcId
      execMode:
        $desc      : 按执行模式过滤
        $type      : enum
        $searchType: eq
        $searchKey : dftr.kwargsJSON->>$.execMode
        $in:
          - sync
          - async
          - crontab

  get:
    name         : Get Func task result
    name_zhCN    : 获取函数任务结果
    method       : get
    url          : /api/v1/dataflux-func-task-results/:id/do/get
    response     : json
    requireSignIn: true
    privilege    : general_r
    fieldSelecting: true
    params:
      id:
        $desc: 任务 ID
        $type: string

# 操作记录
operationRecordAPI:
  $tag     : Operation Record
  $tag_zhCN: 操作记录

  list:
    showInDoc    : true
    name         : List Operation Records
    name_zhCN    : 列出操作记录
    method       : get
    url          : /api/v1/operation-records/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      seq: oprd.seq
    fuzzySearch:
      - oprd.userId
      - oprd.username
      - oprd.clientId
      - oprd.traceId
      - oprd.reqMethod
      - oprd.reqRoute
      - oprd.reqQueryJSON
      - oprd.reqParamsJSON
      - oprd.reqBodyJSON
      - oprd.respStatusCode
      - oprd.respBodyJSON
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : oprd.id
      userId:
        $desc      : 根据用户 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : oprd.userId
      username:
        $desc      : 根据用户登录名过滤
        $type      : commaArray
        $searchType: in
        $searchKey : oprd.username
      clientId:
        $desc      : 根据客户端 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : oprd.clientId
      traceId:
        $desc      : 根据跟踪 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : oprd.traceId
      reqMethod:
        $desc      : 根据请求方法过滤
        $type      : commaArray
        $searchType: in
        $searchKey : oprd.reqMethod
      reqRoute:
        $desc      : 根据请求路由搜索
        $type      : string
        $searchType: like
        $searchKey : oprd.reqRoute
      reqQueryJSON:
        $desc      : 根据请求Query参数搜索
        $type      : string
        $searchType: like
        $searchKey : oprd.reqQueryJSON
      reqParamsJSON:
        $desc      : 根据请求Params参数搜索
        $type      : string
        $searchType: like
        $searchKey : oprd.reqParamsJSON
      reqBodyJSON:
        $desc      : 根据请求体参数搜索
        $type      : string
        $searchType: like
        $searchKey : oprd.reqBodyJSON
      respStatusCode:
        $desc      : 根据响应状态码过滤
        $type      : int
        $searchType: eq
        $searchKey : oprd.respStatusCode
      respBodyJSON:
        $desc      : 根据响应体搜索
        $type      : string
        $searchType: like
        $searchKey : oprd.respBodyJSON

# 文件服务
fileServiceAPI:
  $tag     : File Service
  $tag_zhCN: 文件服务

  list:
    showInDoc    : true
    name         : List File Service
    name_zhCN    : 列出文件服务
    method       : get
    url          : /api/v1/file-services/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : false
    fieldSelecting: true
    orderFields:
      seq       : fsvc.seq
      id        : fsvc.id
      root      : fsvc.root
      createTime: fsvc.createTime
      updateTime: fsvc.updateTime
    fuzzySearch:
      - fsvc.id
      - fsvc.root
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : fsvc.id
      root:
        $desc      : 根据根目录搜索
        $type      : string
        $searchType: like
        $searchKey : fsvc.root

  add:
    showInDoc    : true
    name         : Add File Service
    name_zhCN    : 添加文件服务
    method       : post
    url          : /api/v1/file-services/do/add
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      data:
        $isRequired: true
        id:
          $desc      : ID（不指定自动生成）
          $isRequired: false
          $allowNull : true
          $type      : string
        root:
          $desc      : 根目录
          $isRequired: true
          $type      : string
        isDisabled:
          $desc      : 是否禁用
          $isRequired: false
          $type      : boolean
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  modify:
    showInDoc    : true
    name         : Modify File Service
    name_zhCN    : 修改文件服务
    method       : post
    url          : /api/v1/file-services/:id/do/modify
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 文件服务 ID
        $type: string
    body:
      data:
        $isRequired: true
        root:
          $desc      : 根目录
          $isRequired: false
          $type      : string
        isDisabled:
          $desc      : 是否禁用
          $isRequired: false
          $type      : boolean
        note:
          $desc      : 备注
          $allowNull : true
          $type      : string

  delete:
    showInDoc    : true
    name         : Delete File Service
    name_zhCN    : 删除文件服务
    method       : get
    url          : /api/v1/file-services/:id/do/delete
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 文件服务 ID
        $type: string

# DFF.CACHE 缓存
funcCacheAPI:
  $tag     : DFF.CACHE / STORE Manage
  $tag_zhCN: DFF.CACHE / STORE 管理

  list:
    showInDoc    : true
    name         : List Func Cache (DFF.CACHE)
    name_zhCN    : 列出函数缓存（DFF.CACHE）
    method       : get
    url          : /api/v1/func-caches/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : false
    fuzzySearch  : true
    query:
      scope:
        $desc: 根据Scope搜索
        $type: string
      key:
        $desc: 根据Key搜索
        $type: string

  get:
    showInDoc    : true
    name         : Get Func Cache (DFF.CACHE)
    name_zhCN    : 获取函数缓存（DFF.CACHE）
    method       : get
    url          : /api/v1/func-caches/:scope/:key/do/get
    response     : json
    requireSignIn: true
    privilege    : general_r
    params:
      scope:
        $desc: 根据Scope过滤
        $type: string
      key:
        $desc: 根据Key过滤
        $type: string

  delete:
    showInDoc    : true
    name         : Delete Func Cache (DFF.CACHE)
    name_zhCN    : 删除函数缓存（DFF.CACHE）
    method       : get
    url          : /api/v1/func-caches/:scope/:key/do/delete
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      scope:
        $desc: 根据Scope过滤
        $type: string
      key:
        $desc: 根据Key过滤
        $type: string

# DFF.STORE 存储
funcStoreAPI:
  $tag     : DFF.CACHE / STORE Manage
  $tag_zhCN: DFF.CACHE / STORE 管理

  list:
    showInDoc    : true
    name         : List Func Store (DFF.STORE)
    name_zhCN    : 列出函数存储（DFF.STORE）
    method       : get
    url          : /api/v1/func-stores/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : true
    orderFields:
      seq       : fnst.seq
      scope     : fnst.scope
      key       : fnst.key
      createTime: fnst.createTime
      updateTime: fnst.updateTime
    fuzzySearch:
      - fnst.scope
      - fnst.key
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : fnst.id
      scope:
        $desc      : 根据Scope搜索
        $type      : string
        $searchType: like
        $searchKey : fnst.scope
      key:
        $desc      : 根据Key搜索
        $type      : string
        $searchType: like
        $searchKey : fnst.key

  get:
    showInDoc    : true
    name         : Get Func Store (DFF.STORE)
    name_zhCN    : 获取函数存储（DFF.STORE）
    method       : get
    url          : /api/v1/func-stores/:id/do/get
    response     : json
    requireSignIn: true
    privilege    : general_r
    params:
      id:
        $desc: 函数存储 ID
        $type: string

  delete:
    showInDoc    : true
    name         : Delete Func Store (DFF.STORE)
    name_zhCN    : 删除函数存储（DFF.STORE）
    method       : get
    url          : /api/v1/func-stores/:id/do/delete
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 函数存储 ID
        $type: string

# 蓝图
blueprintAPI:
  $tag     : Blueprint
  $tag_zhCN: 蓝图

  list:
    name         : List Blueprints
    name_zhCN    : 列出蓝图
    method       : get
    url          : /api/v1/blueprints/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    export       : true
    paging       : true
    fieldSelecting: true
    orderFields:
      id : blpt.id
      seq: blpt.seq
    fuzzySearch:
      - blpt.id
      - blpt.title
    query:
      id:
        $desc      : 根据 ID 过滤
        $type      : commaArray
        $searchType: in
        $searchKey : blpt.id
      title:
        $desc      : 根据标题搜索
        $type      : string
        $searchType: like
        $searchKey : blpt.title
      isDeployed:
        $desc      : 根据是否已部署过滤
        $type      : bool
        $searchType: boolean
        $searchKey : blpt.note

  add:
    name         : Add Blueprint
    name_zhCN    : 添加蓝图
    method       : post
    url          : /api/v1/blueprints/do/add
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      data:
        $isRequired: true
        id:
          $desc          : ID
          $isRequired    : true
          $type          : string
          $minLength     : 1
          $maxLength     : 128
          $matchRegExp   : ^[a-zA-Z_][a-zA-Z0-9_]*$
        title:
          $desc      : 标题
          $allowNull : true
          $type      : string
        canvasJSON:
          $desc      : 画布JSON
          $isRequired: false
          $type      : json
        isDeployed:
          $desc     : 是否已部署
          $allowNull: false
          $type     : boolean

  modify:
    name         : Modify Blueprint
    name_zhCN    : 修改蓝图
    method       : post
    url          : /api/v1/blueprints/:id/do/modify
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 蓝图 ID
        $type: string
    body:
      data:
        $isRequired: true
        title:
          $desc      : 标题
          $allowNull : true
          $type      : string
        canvasJSON:
          $desc      : 画布JSON
          $isRequired: false
          $type      : json
        isDeployed:
          $desc     : 是否已部署
          $allowNull: true
          $type     : boolean

  delete:
    name         : Delete Blueprint
    name_zhCN    : 删除蓝图
    method       : get
    url          : /api/v1/blueprints/:id/do/delete
    response     : json
    requireSignIn: true
    privilege    : general_w
    params:
      id:
        $desc: 蓝图 ID
        $type: string

# 系统配置
systemConfigAPI:
  $tag     : System Config
  $tag_zhCN: 系统配置

  list:
    showInDoc    : true
    name         : List System Configs
    name_zhCN    : 列出系统配置
    method       : get
    url          : /api/v1/system-configs/do/list
    response     : json
    requireSignIn: true
    privilege    : systemConfig_r
    export       : true
    fuzzySearch:
      - sc.id
    query:
      id:
        $desc      : Filter by ID
        $type      : commaArray
        $searchType: in
        $searchKey : sc.id

  get:
    showInDoc    : true
    name         : Get System Config
    name_zhCN    : 获取系统配置
    method       : get
    url          : /api/v1/system-configs/:id/do/get
    response     : json
    requireSignIn: true
    privilege    : systemConfig_r
    params:
      id:
        $desc: System Config ID
        $type: string

  set:
    showInDoc    : true
    name         : Set System Config
    name_zhCN    : 设置系统配置
    method       : post
    url          : /api/v1/system-configs/:id/do/set
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : systemConfig_w
    params:
      id:
        $desc: System Config ID
        $type: string
    body:
      data:
        $isRequired: true
        value:
          $desc: System Config Value
          $type: any

  delete:
    showInDoc    : true
    name         : Delete System Config
    name_zhCN    : 删除系统配置
    method       : get
    url          : /api/v1/system-configs/:id/do/delete
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : systemConfig_w
    params:
      id:
        $desc: System Config ID
        $type: string

# 监控
monitorAPI:
  $tag     : Monitor
  $tag_zhCN: 监控

  getSysStats:
    showInDoc    : true
    name         : Get system stats
    name_zhCN    : 获取系统状态
    method       : get
    url          : /api/v1/monitor/sys-stats/do/get
    response     : json
    requireSignIn: true
    privilege    : general_r

  listAbnormalRequests:
    showInDoc    : true
    name         : List abnormal requests
    name_zhCN    : 列出异常请求
    method       : get
    url          : /api/v1/monitor/abnormal-requests/:type/do/list
    response     : json
    requireSignIn: true
    privilege    : general_r
    paging       : true
    params:
      type:
        $desc: Abnormal request type
        $type: enum
        $in:
          - 'reqCost1000'
          - 'reqCost5000'
          - 'statusCode4xx'
          - 'statusCode5xx'

  clearAbnormalRequests:
    showInDoc    : true
    name         : Clear abnormal requests
    name_zhCN    : 清空异常请求
    method       : get
    url          : /api/v1/monitor/abnormal-requests/do/clear
    response     : json
    requireSignIn: true
    privilege    : general_w

  getServerEnvironment:
    showInDoc    : true
    name         : Get server environment
    name_zhCN    : 获取服务器环境
    method       : get
    url          : /api/v1/monitor/server-environment/do/get
    response     : json
    requireSignIn: true
    privilege    : general_r

  clearSysStats:
    showInDoc    : true
    name         : Clear system stats
    name_zhCN    : 清空系统状态
    method       : get
    url          : /api/v1/monitor/sys-stats/do/clear
    response     : json
    requireSignIn: true
    privilege    : general_w

  listQueuedTasks:
    showInDoc    : true
    name         : List tasks in queue
    name_zhCN    : 列出已进入队列的任务
    method       : get
    url          : /api/v1/monitor/tasks/do/list-queued
    response     : json
    requireSignIn: true
    privilege    : general_r
    query:
      task:
        $desc: Match by task name
        $type: string

  listScheduledTasks:
    showInDoc    : true
    name         : List scheduled tasks
    name_zhCN    : 列出已排期的任务
    method       : get
    url          : /api/v1/monitor/tasks/do/list-scheduled
    response     : json
    requireSignIn: true
    privilege    : general_r
    query:
      task:
        $desc: Match by task name
        $type: string

  listRecentTasks:
    showInDoc    : true
    name         : List recent tasks
    name_zhCN    : 列出最近任务
    method       : get
    url          : /api/v1/monitor/tasks/do/list-recent
    response     : json
    requireSignIn: true
    privilege    : general_r
    query:
      task:
        $desc: Match by task name
        $type: string
      status:
        $desc: Filter by task status
        $type: enum
        $in:
          - SUCCESS
          - FAILURE
          - PENDING

  pingNodes:
    showInDoc    : true
    name         : Ping worker node
    name_zhCN    : Ping Worker（工作单元）节点
    method       : get
    url          : /api/v1/monitor/nodes/do/ping
    response     : json
    requireSignIn: true
    privilege    : general_r

  getNodesStats:
    showInDoc    : true
    name         : Get worker node stats
    name_zhCN    : 获取 Worker（工作单元）状态
    method       : get
    url          : /api/v1/monitor/nodes/do/get-stats
    response     : json
    requireSignIn: true
    privilege    : general_r

  getNodesActiveQueues:
    showInDoc    : true
    name         : Get worker node active queues
    name_zhCN    : 获取 Worker（工作单元）活跃队列
    method       : get
    url          : /api/v1/monitor/nodes/do/get-active-queues
    response     : json
    requireSignIn: true
    privilege    : general_r

  getNodesReport:
    showInDoc    : true
    name         : Get worker node report
    name_zhCN    : 获取 Worker（工作单元）节点报告
    method       : get
    url          : /api/v1/monitor/nodes/do/get-report
    response     : json
    requireSignIn: true
    privilege    : general_r

  clearWorkerQueues:
    showInDoc    : true
    name         : Clear worker queues
    name_zhCN    : 清空工作队列
    method       : post
    url          : /api/v1/monitor/worker-queues/do/clear
    response     : json
    requireSignIn: true
    privilege    : general_w
    body:
      workerQueues:
        $desc      : Worker Queue names
        $isRequired: true
        $:
          $desc      : Worker Queue name
          $isRequired: true
          $type      : string
          $minLength : 1

# 调试
debugAPI:
  $tag     : Debug
  $tag_zhCN: 调试

  putTask:
    showInDoc    : true
    name         : DEBUG - Put async task
    name_zhCN    : 调试 - 发送异步任务
    descType     : markdown
    desc         : "*CAUTION: This API is just for debug, please DO NOT use in a production environment.*"
    method       : post
    url          : /api/v1/debug/tasks/do/put
    response     : json
    requireSignIn: true
    authType     : builtin.byXAuthToken
    privilege    : general_w
    body:
      waitResult:
        $desc   : Wait task result before response
        $type   : boolean
        $example: true
      times:
        $desc    : Send times
        $type    : int
        $minValue: 1
        $example : 1
      task:
        name:
          $desc      : Task name
          $isRequired: true
          $type      : string
          $example   : Example.Echo.Success
        args:
          $desc: List arguments (*args)
          $:
            $type: any
          $example: ['arg1', 'arg2', 'arg3']
        kwargs:
          $desc: Dict arguments (**kwargs)
          $type: json
          $example: {'kwarg1': 'val1', 'kwarg2': 'val2'}
        options:
          $desc: Task options
          queue:
            $desc   : Queue
            $type   : string
            $example: celery
          eta:
            $desc     : ETA (ISO8601)
            $type     : string
            $isISO8601: true
            $example  : '2020-01-01T00:00:00Z'
          expires:
            $desc     : Expires (ISO8601)
            $type     : string
            $isISO8601: true
            $example  : '2020-01-01T00:00:00Z'
          retries:
            $desc    : Retry times
            $type    : int
            $minValue: 0
          timeLimit:
            $desc    : Time limit (in seconds)
            $type    : int
            $minValue: 1
          softTimeLimit:
            $desc    : Time soft limit (in seconds)
            $type    : int
            $minValue: 1
          origin:
            $desc   : origin
            $type   : string
            $example: Host-1
          priority:
            $desc    : Priority
            $type    : int
            $minValue: 0
            $maxValue: 255
            $example : 0
          extra:
            $desc   : Extra information
            $type   : any
            $example: {"extraKey": "extraValue"}