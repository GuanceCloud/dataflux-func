(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-230a36f6"],{"0bcd":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"fade"}},[a("el-container",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[a("el-header",{attrs:{height:"60px"}},[a("div",{staticClass:"page-header"},[a("span",[e._v("脚本库还原点")]),e._v(" "),a("div",{staticClass:"header-control"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.openSetup(null,"add")}}},[a("i",{staticClass:"fa fa-fw fa-camera"}),e._v("\n            创建还原点\n          ")])],1)])]),e._v(" "),a("el-main",[e.T.isNothing(e.data)?a("div",{staticClass:"no-data-area"},[e.T.isPageFiltered()?a("h1",{staticClass:"no-data-title"},[e._v("当前过滤条件无匹配数据")]):a("h1",{staticClass:"no-data-title"},[e._v("当前未全新安装系统，尚无任何还原点")]),e._v(" "),a("p",{staticClass:"no-data-tip"},[e._v("\n          在进行发布脚本、导入脚本集、安装官方脚本集等操作之前，系统会自动创建还原点，保存整个脚本库状态\n          "),a("br"),e._v("如您在某项操作之后，函数遇到无法解决的问题，可以尝试恢复到执行操作时的还原点\n        ")])]):a("el-timeline",e._l(e.data,(function(t){return a("el-timeline-item",{key:t.id,attrs:{placement:"top",size:"large",type:"primary",timestamp:e.T.getDateTimeString(t.createTime)+" ("+e.T.fromNow(t.createTime)+")"}},[a("el-card",{staticClass:"recover-point-card",attrs:{shadow:"hover"}},[a("span",{staticClass:"text-info"},[e._v("#")]),e._v(" "),a("span",{staticClass:"text-main text-large"},[e._v(e._s(t.seq))]),e._v(" "),a("span",{staticClass:"recover-point-title",class:e.C.SCRIPT_RECOVER_POINT_MAP.get(t.type).textClass},[e._v(e._s(e.C.SCRIPT_RECOVER_POINT_MAP.get(t.type).name))]),e._v(" "),a("div",{staticClass:"recover-point-operation"},[a("el-button",{attrs:{type:t.nodeType,plain:"",size:"small"},on:{click:function(a){return e.quickSubmitData(t,"recover")}}},[e._v("还原至此状态")])],1),e._v(" "),t.note?a("div",{staticClass:"recover-point-note"},[a("pre",{staticClass:"text-info text-small"},[e._v(e._s(t.note))])]):e._e()])],1)})),1)],1)],1)],1)},n=[],s=a("1da1"),i=(a("96cf"),{name:"ScriptRecoverPointList",components:{},watch:{$route:{immediate:!0,handler:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.loadData();case 2:case"end":return e.stop()}}),e)})))()}}},methods:{loadData:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.T.callAPI_get("/api/v1/script-recover-points/do/list",{query:{pageSize:50}});case 2:if(a=e.sent,a.ok){e.next=5;break}return e.abrupt("return");case 5:t.data=a.data,t.$store.commit("updateLoadStatus",!0);case 7:case"end":return e.stop()}}),e)})))()},quickSubmitData:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.OP_NAME_MAP[t],r.t0=t,r.next="recover"===r.t0?4:9;break;case 4:return r.next=6,a.T.confirm('执行恢复后，脚本集、脚本、函数等数据将完整恢复到还原点创建时刻的状态且立即生效\n                <hr class="br">是否确认恢复？');case 6:if(r.sent){r.next=8;break}return r.abrupt("return");case 8:return r.abrupt("break",9);case 9:n=null,r.t1=t,r.next="recover"===r.t1?13:24;break;case 13:if(!e.hasExportData){r.next=19;break}return r.next=16,a.T.callAPI("post","/api/v1/script-sets/do/import",{body:{scriptRecoverPointId:e.id},alert:{okMessage:a.$t("Script Lib recovered")}});case 16:n=r.sent,r.next=23;break;case 19:if(!e.hasTableDumpJSON){r.next=23;break}return r.next=22,a.T.callAPI("post","/api/v1/script-recover-points/:id/do/recover",{params:{id:e.id},alert:{okMessage:a.$t("Script Lib recovered")}});case 22:n=r.sent;case 23:return r.abrupt("break",24);case 24:if(n&&n.ok){r.next=26;break}return r.abrupt("return");case 26:return r.next=28,a.loadData();case 28:case"end":return r.stop()}}),r)})))()},openSetup:function(e,t){switch(t){case"add":this.$router.push({name:"script-recover-point-add"});break}}},computed:{OP_NAME_MAP:function(){return{recover:"还原"}}},props:{},data:function(){return{data:[]}}}),o=i,c=(a("540e"),a("2877")),u=a("1118"),p=Object(c["a"])(o,r,n,!1,null,"3bb77509",null);"function"===typeof u["default"]&&Object(u["default"])(p);t["default"]=p.exports},1118:function(e,t,a){"use strict";var r=a("403b"),n=a.n(r);t["default"]=n.a},"403b":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Recover Script Lib":"还原脚本库","Script Lib recovered":"脚本库已还原"}}'),delete e.options._Ctor}},"540e":function(e,t,a){"use strict";a("dc736")},dc736:function(e,t,a){}}]);