(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-679b72fc"],{"0797":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Download as a text file":"作为文本文件下载"}}'),delete t.options._Ctor}},"133d":function(t,e,a){},"21a6":function(t,e,a){(function(a){var n,s,o;(function(a,i){s=[],n=i,o="function"===typeof n?n.apply(e,s):n,void 0===o||(t.exports=o)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,a){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){r(n.response,e,a)},n.onerror=function(){console.error("could not download file")},n.send()}function s(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,l=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(t,e,a){var l=i.URL||i.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener","string"==typeof t?(r.href=t,r.origin===location.origin?o(r):s(r.href)?n(t,e,a):o(r,r.target="_blank")):(r.href=l.createObjectURL(t),setTimeout((function(){l.revokeObjectURL(r.href)}),4e4),setTimeout((function(){o(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,a,i){if(a=a||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,i),a);else if(s(t))n(t,a,i);else{var l=document.createElement("a");l.href=t,l.target="_blank",setTimeout((function(){o(l)}))}}:function(t,e,a,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,a);var o="application/octet-stream"===t.type,r=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&r||l)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},u.readAsDataURL(t)}else{var d=i.URL||i.webkitURL,p=d.createObjectURL(t);s?s.location=p:location.href=p,s=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});i.saveAs=r.saveAs=r,t.exports=r}))}).call(this,a("c8ba"))},"2aa4":function(t,e,a){"use strict";var n=a("bcb3"),s=a.n(n);e["default"]=s.a},3709:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"PIP Tool":"PIP 工具","Custom PIP Index URL":"自定义 PIP Index URL","Add --upgrade option":"添加 --upgrade 选项","Install Python Package":"安装 Python 包","Installed Python Packages":"已安装的 Python 包","Package":"包","Version":"版本","Built-in":"内置","Exactly match":"完全匹配","Load Installed Python Packages":"加载已安装的 Python 包列表","Loading Installed Python Packages":"正在加载已安装的 Python 包列表","Show Error":"显示错误信息","Reset Install Status":"复位安装状态","package or package==1.2.3":"package 或 package==1.2.3","Package installed: {pkg}":"包已安装：{pkg}","[object Object]":"Func 容器 ID","You can also install the package by following command":"您也可以使用以下命令来安装","Previous installing may still running":"之前的安装似乎仍然在运行","Are you sure you want to install the package now?":"是否确定现在就安装？","installCost":"（耗时 {n} 秒）"}}'),delete t.options._Ctor}},"3aac":function(t,e,a){},"4eb8":function(t,e,a){"use strict";var n=a("3709"),s=a.n(n);e["default"]=s.a},"5b81":function(t,e,a){"use strict";var n=a("23e7"),s=a("c65b"),o=a("e330"),i=a("1d80"),l=a("1626"),r=a("44e7"),c=a("577e"),u=a("dc4a"),d=a("90d8"),p=a("0cb2"),f=a("b622"),h=a("c430"),v=f("replace"),g=TypeError,m=o("".indexOf),_=o("".replace),b=o("".slice),w=Math.max,I=function(t,e,a){return a>t.length?-1:""===e?a:m(t,e,a)};n({target:"String",proto:!0},{replaceAll:function(t,e){var a,n,o,f,k,x,P,y,T,S=i(this),L=0,O=0,M="";if(null!=t){if(a=r(t),a&&(n=c(i(d(t))),!~m(n,"g")))throw g("`.replaceAll` does not allow non-global regexes");if(o=u(t,v),o)return s(o,t,S,e);if(h&&a)return _(c(S),t,e)}f=c(S),k=c(t),x=l(e),x||(e=c(e)),P=k.length,y=w(1,P),L=I(f,k,0);while(-1!==L)T=x?c(e(k,L,f)):p(k,f,L,[],void 0,e),M+=b(f,O,L)+T,O=L+P,L=I(f,k,L+y);return O<f.length&&(M+=b(f,O)),M}})},"68fc":function(t,e,a){"use strict";a("8026")},"7b0b4":function(t,e,a){"use strict";var n=a("0797"),s=a.n(n);e["default"]=s.a},8026:function(t,e,a){},b76c:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{id:"LongTextDialog",visible:t.show,"close-on-click-modal":!1,width:"70%"},on:{"update:visible":function(e){t.show=e}}},[e("template",{slot:"title"},[t._v("\n    "+t._s(t.title)+"\n    "),e("span",{staticClass:"text-info press-esc-to-close-tip"},[t._v(t._s(t.$t("Press ESC to close")))])]),t._v(" "),e("div",[t.showDownload&&t.fileName&&t.content?e("div",{staticClass:"download-link"},[e("el-link",{attrs:{type:"primary"},on:{click:t.download}},[t._v("\n        "+t._s(t.$t("Download as a text file"))+"\n        "),e("i",{staticClass:"fa fa-fw fa-download"})])],1):t._e(),t._v(" "),e("textarea",{attrs:{id:"longTextDialogContent"}})])],2)},s=[],o=(a("130f"),a("21a6")),i=a.n(o),l={name:"LongTextDialog",components:{},watch:{},methods:{update:function(t,e){var a=this;this.codeMirror&&this.codeMirror.setValue(""),this.content=t,this.fileName=(e||"dump")+".txt",this.show=!0,setImmediate((function(){if(!a.codeMirror){var t={mode:a.mode||"text"};a.codeMirror=a.T.initCodeMirror("longTextDialogContent",t),a.codeMirror.setOption("theme",a.T.getCodeMirrorThemeName()),a.T.setCodeMirrorReadOnly(a.codeMirror,!0)}a.codeMirror.setValue(a.content||""),a.codeMirror.refresh(),a.codeMirror.focus()}))},download:function(){var t=new Blob([this.content],{type:"text/plain"}),e=this.fileName;i.a.saveAs(t,e)}},computed:{},props:{title:String,mode:String,showDownload:Boolean},data:function(){return{show:!1,fileName:null,content:null,codeMirror:null}},beforeDestroy:function(){this.T.destoryCodeMirror(this.codeMirror)}},r=l,c=(a("68fc"),a("cb4e"),a("2877")),u=a("7b0b4"),d=Object(c["a"])(r,n,s,!1,null,"7f557796",null);"function"===typeof u["default"]&&Object(u["default"])(d);e["a"]=d.exports},bcb3:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"installCost":"(Cost {n} s)"}}'),delete t.options._Ctor}},c209:function(t,e,a){"use strict";a("133d")},c3bb:function(t,e,a){"use strict";a.r(e);a("b0c0"),a("b680");var n=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[e("el-container",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[e("el-header",{attrs:{height:"60px"}},[e("h1",[t._v(t._s(t.$t("PIP Tool")))])]),t._v(" "),e("el-main",[e("el-divider",{attrs:{"content-position":"left"}},[e("h1",[t._v(t._s(t.$t("Install Python Package")))])]),t._v(" "),e("el-select",{staticStyle:{width:"235px"},model:{value:t.mirror,callback:function(e){t.mirror=e},expression:"mirror"}},[t._l(t.C.PIP_MIRROR,(function(t){return e("el-option",{key:t.key,attrs:{label:t.name,value:t.key}})})),t._v(" "),e("el-option",{attrs:{label:t.$t("Custom PIP Index URL"),value:"custom"}})],2),t._v(" "),"custom"===t.mirror?[e("el-input",{staticStyle:{width:"500px","margin-bottom":"5px"},model:{value:t.customPIPIndexURL,callback:function(e){t.customPIPIndexURL=e},expression:"customPIPIndexURL"}}),t._v(" "),e("br")]:t._e(),t._v(" "),e("el-input",{style:"custom"===t.mirror?"width: 740px":"width: 500px",attrs:{placeholder:t.$t("package or package==1.2.3")},model:{value:t.packageToInstall,callback:function(e){t.packageToInstall=e},expression:"packageToInstall"}}),t._v(" "),e("el-button",{attrs:{type:"primary",disabled:!t.isInstallable},on:{click:t.installPackages}},[t.isInstalling?e("span",[e("i",{staticClass:"fa fa-fw fa-circle-o-notch fa-spin"}),t._v("\n          "+t._s(t.$t("Installing"))+"\n        ")]):e("span",[t._v("\n          "+t._s(t.$t("Install"))+"\n        ")])]),t._v(" "),t.isInstallable?[e("div",{staticClass:"pip-install-option"},[e("el-switch",{attrs:{"active-text":t.$t("Add --upgrade option")},model:{value:t.addUpgradeOption,callback:function(e){t.addUpgradeOption=e},expression:"addUpgradeOption"}})],1),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"pip-install-tips"},[e("p",[t._v("\n            "+t._s(t.$t("You can also install the package by following command"))+t._s(t.$t(":"))+"\n          ")]),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:22}},[e("el-input",{attrs:{type:"textarea",autosize:"",resize:"none",value:t.getPIPCommand({pretty:!0})}})],1),t._v(" "),e("el-col",{attrs:{span:2}},[e("CopyButton",{attrs:{content:t.getPIPCommand(),"tip-placement":"right"}})],1)],1)],1)]:t._e(),t._v(" "),e("el-divider",{attrs:{"content-position":"left"}},[e("h1",[t._v(t._s(t.$t("Installed Python Packages")))])]),t._v(" "),e("div",[e("el-link",{attrs:{type:"primary",disabled:t.isLoadingInstalldPackages},on:{click:t.loadInstalledPackages}},[t.isLoadingInstalldPackages?e("span",[e("i",{staticClass:"fa fa-fw fa-circle-o-notch fa-spin"}),t._v("\n            "+t._s(t.$t("Loading Installed Python Packages"))+"\n          ")]):e("span",[t._v(t._s(t.$t("Load Installed Python Packages")))])])],1),t._v(" "),e("br"),t._v(" "),t.installedPackages.length>0?e("el-table",{staticClass:"common-table",attrs:{data:t.installedPackages}},[e("el-table-column",{attrs:{label:t.$t("Package"),sortable:"","sort-by":"name"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("code",[t._v(t._s(a.row.name))])]}}],null,!1,370914816)}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Version")},scopedSlots:t._u([{key:"default",fn:function(a){return[e("code",[t._v(t._s(a.row.version))])]}}],null,!1,2406261309)}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Built-in"),align:"center",sortable:"","sort-by":"isBuiltin",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.isBuiltin?e("span",{staticClass:"text-good"},[t._v(t._s(t.$t("Yes")))]):t._e()]}}],null,!1,4156707113)})],1):t._e()],2),t._v(" "),e("el-dialog",{attrs:{visible:t.showInstallStatus,width:"650px"},on:{"update:visible":function(e){t.showInstallStatus=e}}},[e("template",{slot:"title"},[t._v("\n        "+t._s(t.$t("Install Python Package"))+"\n        "),e("span",{staticClass:"text-info press-esc-to-close-tip"},[t._v(t._s(t.$t("Press ESC to close")))])]),t._v(" "),e("div",{staticClass:"installing-dialog-content"},t._l(t.installStatus,(function(a){return e("div",{staticClass:"install-list-item"},[e("div",{class:(t.INSTALL_ITEM_STATUS[a.status]||{}).text},[e("i",{staticClass:"fa fa-fw",class:(t.INSTALL_ITEM_STATUS[a.status]||{}).icon}),t._v(" "),t._l(a.package.split(","),(function(a){return[e("code",[t._v(t._s(a))])]}))],2),t._v(" "),e("div",[e("small",{staticClass:"text-info install-cost"},[a.startTimeMs&&a.endTimeMs?[t._v("\n                "+t._s(t.$tc("installCost",((a.endTimeMs-a.startTimeMs)/1e3).toFixed(2)))+"\n              ")]:t._e(),t._v(" "),a.startTimeMs&&!a.endTimeMs?[t._v("\n                "+t._s(t.$tc("installCost",((t.nowMs-a.startTimeMs)/1e3).toFixed(2)))+"\n              ")]:t._e()],2),t._v(" "),a.error?e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showError(a.error)}}},[t._v(t._s(t.$t("Show Error")))]):t._e()],1)])})),0),t._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[t.isInstalling?e("el-dropdown",{attrs:{"split-button":""},on:{click:function(e){t.showInstallStatus=!1},command:t.clearInstallStatus}},[t._v("\n          "+t._s(t.$t("Close"))+"\n          "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[t._v(t._s(t.$t("Reset Install Status")))])],1)],1):e("el-button",{attrs:{type:"primary"},on:{click:t.clearInstallStatus}},[t._v(t._s(t.$t("Finish")))])],1)],2),t._v(" "),e("LongTextDialog",{ref:"longTextDialog"})],1)],1)},s=[],o=a("c7eb"),i=a("1da1"),l=(a("14d9"),a("a15b"),a("ac1f"),a("1276"),a("498a"),a("5319"),a("5b81"),a("4de4"),a("d3b7"),a("b76c")),r={name:"PIPTool",components:{LongTextDialog:l["a"]},watch:{$route:{immediate:!0,handler:function(t,e){var a=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.loadData();case 2:case"end":return t.stop()}}),t)})))()}}},methods:{getPIPCommand:function(t){if(!this.isInstallable)return null;t=t||{};var e=this.$store.getters.SYSTEM_INFO("_HOSTNAME")||this.$t("{Func Container ID}"),a="-t ".concat(this.$store.getters.SYSTEM_INFO("_PIP_INSTALL_DIR")),n=" ";t.pretty&&(n=" \\\n  ");var s=["sudo docker exec ".concat(e),"pip install",a];this.mirror&&s.push("-i ".concat(this.pipIndexURL)),this.addUpgradeOption&&s.push("--upgrade"),s.push("".concat(this.packageToInstall.replaceAll(","," ").trim().split(/\s+/).join(n)));var o=s.join(n).replace(/\s+/," ").trim();return o},loadData:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.mirror=t.C.PIP_MIRROR_DEFAULT.key,e.next=3,t.updateInstallStatus();case 3:t.$store.commit("updateLoadStatus",!0),setTimeout((function(){t.installStatus.length>0&&(t.showInstallStatus=!0)}),500);case 5:case"end":return e.stop()}}),e)})))()},loadInstalledPackages:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoadingInstalldPackages=!0,t.installedPackages=[],e.next=4,t.T.callAPI_get("/api/v1/python-packages/installed/do/list");case 4:if(a=e.sent,t.isLoadingInstalldPackages=!1,a&&a.ok){e.next=8;break}return e.abrupt("return");case 8:t.installedPackages=a.data;case 9:case"end":return e.stop()}}),e)})))()},installPackages:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isInstalling){e.next=3;break}return t.showInstallStatus=!0,e.abrupt("return");case 3:return e.next=5,t.T.callAPI("post","/api/v1/python-packages/do/install",{body:{pipIndexURL:t.pipIndexURL,packages:t.packageToInstall,upgrade:t.addUpgradeOption}});case 5:if(a=e.sent,a&&a.ok){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,t.updateInstallStatus();case 10:t.showInstallStatus=!0;case 11:case"end":return e.stop()}}),e)})))()},updateInstallStatus:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.T.callAPI_get("/api/v1/python-packages/install-status/do/get");case 2:if(a=e.sent,a&&a.ok){e.next=5;break}return e.abrupt("return");case 5:t.installStatus=a.data;case 6:case"end":return e.stop()}}),e)})))()},clearInstallStatus:function(){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.T.callAPI_get("/api/v1/python-packages/install-status/do/clear");case 2:if(a=e.sent,a&&a.ok){e.next=5;break}return e.abrupt("return");case 5:t.showInstallStatus=!1,t.installStatus=[];case 7:case"end":return e.stop()}}),e)})))()},showError:function(t){this.$refs.longTextDialog.update(t)}},computed:{INSTALL_ITEM_STATUS:function(){return{success:{text:"text-good",icon:"fa-check-circle"},failure:{text:"text-bad",icon:"fa-times-circle"},installing:{text:"text-main",icon:"fa-circle-o-notch fa-spin"}}},pipIndexURL:function(){var t="custom"===this.mirror?this.customPIPIndexURL:this.C.PIP_MIRROR_MAP.get(this.mirror).value;return t},isInstallable:function(){return!this.T.isNothing(this.packageToInstall)},isInstalling:function(){var t=this.installStatus.filter((function(t){return"success"!==t.status&&"failure"!==t.status})).length;return t>0}},props:{},data:function(){return{mirror:"",customPIPIndexURL:"https://pypi.YOUR-PIP-MIRROR.com/simple/",packageToInstall:"",addUpgradeOption:!0,showInstallStatus:!1,nowMs:Date.now(),installStatus:[],installedPackages:[],isLoadingInstalldPackages:!1,autoUpdateInstallStatusTimer:null,autoUpdateNowMsTimer:null}},mounted:function(){var t=this,e=this.$route.query.requirements;e&&(this.packageToInstall=this.T.fromBase64(e)),this.autoUpdateInstallStatusTimer=setInterval((function(){t.updateInstallStatus()}),3e3),this.autoUpdateNowMsTimer=setInterval((function(){t.nowMs=Date.now()}),500)},beforeDestroy:function(){this.autoUpdateInstallStatusTimer&&clearInterval(this.autoUpdateInstallStatusTimer),this.autoUpdateNowMsTimer&&clearInterval(this.autoUpdateNowMsTimer)}},c=r,u=(a("c209"),a("2877")),d=a("2aa4"),p=a("4eb8"),f=Object(u["a"])(c,n,s,!1,null,"b6a28748",null);"function"===typeof d["default"]&&Object(d["default"])(f),"function"===typeof p["default"]&&Object(p["default"])(f);e["default"]=f.exports},cb4e:function(t,e,a){"use strict";a("3aac")}}]);