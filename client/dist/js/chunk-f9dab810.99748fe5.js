(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f9dab810"],{"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3"),n("ac1f"),n("00b4");var a=n("6b75");function s(t,e){if(t){if("string"===typeof t)return Object(a["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(a["a"])(t,e):void 0}}},"0797":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Download as text file":"作为文本文件下载"}}'),delete t.options._Ctor}},"0c63":function(t,e,n){"use strict";n("37c8")},"183a":function(t,e,n){},"21a6":function(t,e,n){(function(n){var a,s,o;(function(n,i){s=[],a=i,o="function"===typeof a?a.apply(e,s):a,void 0===o||(t.exports=o)})(0,(function(){"use strict";function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function a(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){l(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function s(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(a){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,r=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(t,e,n){var r=i.URL||i.webkitURL,l=document.createElement("a");e=e||t.name||"download",l.download=e,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?o(l):s(l.href)?a(t,e,n):o(l,l.target="_blank")):(l.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,i){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,i),n);else if(s(t))a(t,n,i);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){o(r)}))}}:function(t,e,n,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return a(t,e,n);var o="application/octet-stream"===t.type,l=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&l||r)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},u.readAsDataURL(t)}else{var d=i.URL||i.webkitURL,f=d.createObjectURL(t);s?s.location=f:location.href=f,s=null,setTimeout((function(){d.revokeObjectURL(f)}),4e4)}});i.saveAs=l.saveAs=l,t.exports=l}))}).call(this,n("c8ba"))},"2aa4":function(t,e,n){"use strict";var a=n("bcb3"),s=n.n(a);e["default"]=s.a},3709:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"PIP Tool":"PIP工具","Mirror":"镜像源","Install Python Package":"安装 Python 包","Installed Python Packages":"已安装的 Python 包","Package":"包","Version":"版本","Built-in":"内置","Exactly match":"完全匹配","Load Installed Python Packages":"加载已安装的 Python 包列表","Loading Installed Python Packages":"正在加载已安装的 Python 包列表","Show Error":"显示错误信息","Reset Install Status":"复位安装状态","Package installed: {pkg}":"包已安装：{pkg}","[object Object]":"任意一个容器 ID","You can also install the package by following command":"您也可以使用以下命令来安装","Previous installing may still running":"之前的安装似乎仍然在运行","Are you sure you want to install the package now?":"是否确定现在就安装？","installCost":"（耗时 {n} 秒）"}}'),delete t.options._Ctor}},"37c8":function(t,e,n){},"4eb8":function(t,e,n){"use strict";var a=n("3709"),s=n.n(a);e["default"]=s.a},"6b75":function(t,e,n){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}n.d(e,"a",(function(){return a}))},"7b0b4":function(t,e,n){"use strict";var a=n("0797"),s=n.n(a);e["default"]=s.a},9303:function(t,e,n){},a630:function(t,e,n){var a=n("23e7"),s=n("4df4"),o=n("1c7e"),i=!o((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:i},{from:s})},b76c:function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{id:"LongTextDialog",visible:t.show,"close-on-click-modal":!1,width:"70%"},on:{"update:visible":function(e){t.show=e}}},[e("template",{slot:"title"},[t._v("\n    "+t._s(t.title)+"\n    "),e("span",{staticClass:"text-info press-esc-to-close-tip"},[t._v(t._s(t.$t("Press ESC to close")))])]),t._v(" "),e("div",[t.showDownload&&t.fileName&&t.content?e("div",{staticClass:"download-link"},[e("el-link",{attrs:{type:"primary"},on:{click:t.download}},[t._v("\n        "+t._s(t.$t("Download as text file"))+"\n        "),e("i",{staticClass:"fa fa-fw fa-download"})])],1):t._e(),t._v(" "),e("textarea",{attrs:{id:"longTextDialogContent"}})])],2)},s=[],o=(n("130f"),n("21a6")),i=n.n(o),r={name:"LongTextDialog",components:{},watch:{},methods:{update:function(t,e){var n=this;this.codeMirror&&this.codeMirror.setValue(""),this.content=t,this.fileName=(e||"dump")+".txt",this.show=!0,setImmediate((function(){n.codeMirror||(n.codeMirror=n.T.initCodeMirror("longTextDialogContent",n.mode||"text"),n.codeMirror.setOption("theme",n.T.getCodeMirrorThemeName()),n.T.setCodeMirrorReadOnly(n.codeMirror,!0)),n.codeMirror.setValue(n.content||""),n.codeMirror.refresh(),n.codeMirror.focus()}))},download:function(){var t=new Blob([this.content],{type:"text/plain"}),e=this.fileName;i.a.saveAs(t,e)}},computed:{},props:{title:String,mode:Boolean,showDownload:Boolean},data:function(){return{show:!1,fileName:null,content:null,codeMirror:null}},beforeDestroy:function(){this.T.destoryCodeMirror(this.codeMirror)}},l=r,c=(n("c8d4"),n("d9ed"),n("2877")),u=n("7b0b4"),d=Object(c["a"])(l,a,s,!1,null,"96f726ca",null);"function"===typeof u["default"]&&Object(u["default"])(d);e["a"]=d.exports},bcb3:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"installCost":"(Cost {n} s)"}}'),delete t.options._Ctor}},c3bb:function(t,e,n){"use strict";n.r(e);n("b0c0"),n("b680");var a=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[e("el-container",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[e("el-header",{attrs:{height:"60px"}},[e("h1",[t._v(t._s(t.$t("PIP Tool")))])]),t._v(" "),e("el-main",[e("el-divider",{attrs:{"content-position":"left"}},[e("h1",[t._v(t._s(t.$t("Install Python Package")))])]),t._v(" "),e("el-select",{staticStyle:{width:"235px"},model:{value:t.pypiMirror,callback:function(e){t.pypiMirror=e},expression:"pypiMirror"}},t._l(t.C.PIP_MIRROR,(function(t){return e("el-option",{key:t.key,attrs:{label:t.name,value:t.value}})})),1),t._v(" "),e("el-input",{staticStyle:{width:"500px"},attrs:{placeholder:"package or package==1.2.3"},model:{value:t.packageToInstall,callback:function(e){t.packageToInstall=e},expression:"packageToInstall"}}),t._v(" "),e("el-button",{attrs:{type:"primary",disabled:!t.isInstallable},on:{click:t.installPackages}},[t.isInstalling?e("span",[e("i",{staticClass:"fa fa-fw fa-circle-o-notch fa-spin"}),t._v("\n          "+t._s(t.$t("Installing"))+"\n        ")]):e("span",[t._v(t._s(t.$t("Install")))])]),t._v(" "),e("p",{staticClass:"pip-install-tips"},[t.pipCommand?[t._v("\n          "+t._s(t.$t("You can also install the package by following command"))+t._s(t.$t(":"))+"\n          "),e("br"),t._v("\n          　\n          "),e("code",{staticClass:"text-main"},[t._v(t._s(t.pipCommand))]),t._v(" "),e("CopyButton",{attrs:{content:t.pipCommand}})]:t._e()],2),t._v(" "),e("el-divider",{attrs:{"content-position":"left"}},[e("h1",[t._v(t._s(t.$t("Installed Python Packages")))])]),t._v(" "),e("el-button",{attrs:{disabled:t.isLoadingInstalldPackages},on:{click:t.loadInstalledPackages}},[t.isLoadingInstalldPackages?e("span",[e("i",{staticClass:"fa fa-fw fa-circle-o-notch fa-spin"}),t._v("\n          "+t._s(t.$t("Loading Installed Python Packages"))+"\n        ")]):e("span",[t._v(t._s(t.$t("Load Installed Python Packages")))])]),t._v(" "),t.installedPackages.length>0?e("el-table",{staticClass:"common-table",attrs:{data:t.installedPackages}},[e("el-table-column",{attrs:{label:t.$t("Package"),sortable:"","sort-by":"name"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("code",[t._v(t._s(n.row.name))])]}}],null,!1,370914816)}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Version")},scopedSlots:t._u([{key:"default",fn:function(n){return[e("code",[t._v(t._s(n.row.version))])]}}],null,!1,2406261309)}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Built-in"),align:"center",sortable:"","sort-by":"isBuiltin",width:"100"},scopedSlots:t._u([{key:"default",fn:function(n){return[n.row.isBuiltin?e("span",{staticClass:"text-good"},[t._v(t._s(t.$t("Yes")))]):t._e()]}}],null,!1,4156707113)})],1):t._e()],1),t._v(" "),e("el-dialog",{attrs:{visible:t.showInstallStatus,width:"650px"},on:{"update:visible":function(e){t.showInstallStatus=e}}},[e("template",{slot:"title"},[t._v("\n        "+t._s(t.$t("Install Python Package"))+"\n        "),e("span",{staticClass:"text-info press-esc-to-close-tip"},[t._v(t._s(t.$t("Press ESC to close")))])]),t._v(" "),e("div",{staticClass:"installing-dialog-content"},t._l(t.installStatus,(function(n){return e("div",{staticClass:"install-list-item"},[e("div",["success"===n.status?e("span",{staticClass:"text-good"},[e("i",{staticClass:"fa fa-fw fa-check-circle"}),t._v(" "),e("code",[t._v(t._s(n.package))])]):"failure"===n.status?e("span",{staticClass:"text-bad"},[e("i",{staticClass:"fa fa-fw fa-times-circle"}),t._v(" "),e("code",[t._v(t._s(n.package))])]):"installing"===n.status?e("span",{staticClass:"text-main"},[e("i",{staticClass:"fa fa-fw fa-circle-o-notch fa-spin"}),t._v(" "),e("code",[t._v(t._s(n.package))])]):e("span",[e("i",{staticClass:"fa fa-fw"}),t._v(" "),e("code",[t._v(t._s(n.package))])]),t._v(" "),e("small",{staticClass:"text-info"},[n.startTimeMs&&n.endTimeMs?[t._v("\n                "+t._s(t.$tc("installCost",((n.endTimeMs-n.startTimeMs)/1e3).toFixed(2)))+"\n              ")]:t._e(),t._v(" "),n.startTimeMs&&!n.endTimeMs?[t._v("\n                "+t._s(t.$tc("installCost",((t.nowMs-n.startTimeMs)/1e3).toFixed(2)))+"\n              ")]:t._e()],2)]),t._v(" "),e("div",[n.error?e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showError(n.error)}}},[t._v(t._s(t.$t("Show Error")))]):t._e()],1)])})),0),t._v(" "),e("span",{attrs:{slot:"footer"},slot:"footer"},[t.isInstalling?e("el-dropdown",{attrs:{"split-button":""},on:{click:function(e){t.showInstallStatus=!1},command:t.clearInstallStatus}},[t._v("\n          "+t._s(t.$t("Close"))+"\n          "),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[t._v(t._s(t.$t("Reset Install Status")))])],1)],1):e("el-button",{attrs:{type:"primary"},on:{click:t.clearInstallStatus}},[t._v(t._s(t.$t("Finish")))])],1)],2),t._v(" "),e("LongTextDialog",{ref:"longTextDialog"})],1)],1)},s=[],o=(n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("d9e2"),n("06c5"));function i(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Object(o["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,s=function(){};return{s:s,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){l=!0,i=t},f:function(){try{r||null==n["return"]||n["return"]()}finally{if(l)throw i}}}}var r=n("c7eb"),l=n("1da1"),c=(n("99af"),n("498a"),n("ac1f"),n("1276"),n("4de4"),n("b76c")),u={name:"PIPTool",components:{LongTextDialog:c["a"]},watch:{$route:{immediate:!0,handler:function(t,e){var n=this;return Object(l["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.loadData();case 2:case"end":return t.stop()}}),t)})))()}}},methods:{loadData:function(){var t=this;return Object(l["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.pypiMirror=t.C.PIP_MIRROR_DEFAULT.value,e.next=3,t.updateInstallStatus();case 3:t.$store.commit("updateLoadStatus",!0),setTimeout((function(){t.installStatus.length>0&&(t.showInstallStatus=!0)}),500);case 5:case"end":return e.stop()}}),e)})))()},loadInstalledPackages:function(){var t=this;return Object(l["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoadingInstalldPackages=!0,t.installedPackages=[],e.next=4,t.T.callAPI_get("/api/v1/python-packages/installed/do/list");case 4:if(n=e.sent,t.isLoadingInstalldPackages=!1,n&&n.ok){e.next=8;break}return e.abrupt("return");case 8:t.installedPackages=n.data;case 9:case"end":return e.stop()}}),e)})))()},installPackages:function(){var t=this;return Object(l["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isInstalling){e.next=3;break}return t.showInstallStatus=!0,e.abrupt("return");case 3:return e.next=5,t.T.callAPI("post","/api/v1/python-packages/do/install",{body:{mirror:t.pypiMirror,packages:t.packageToInstall}});case 5:if(n=e.sent,n&&n.ok){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,t.updateInstallStatus();case 10:t.showInstallStatus=!0;case 11:case"end":return e.stop()}}),e)})))()},updateInstallStatus:function(){var t=this;return Object(l["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.T.callAPI_get("/api/v1/python-packages/install-status/do/get");case 2:if(n=e.sent,n&&n.ok){e.next=5;break}return e.abrupt("return");case 5:t.installStatus=n.data;case 6:case"end":return e.stop()}}),e)})))()},clearInstallStatus:function(){var t=this;return Object(l["a"])(Object(r["a"])().mark((function e(){var n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.T.callAPI_get("/api/v1/python-packages/install-status/do/clear");case 2:if(n=e.sent,n&&n.ok){e.next=5;break}return e.abrupt("return");case 5:t.showInstallStatus=!1,t.installStatus=[];case 7:case"end":return e.stop()}}),e)})))()},showError:function(t){this.$refs.longTextDialog.update(t)}},computed:{pipCommand:function(){if(!this.isInstallable)return null;var t=this.$store.getters.CONFIG("_HOSTNAME")||this.$t("{Any container ID}"),e="-t ".concat(this.$store.getters.CONFIG("_PIP_INSTALL_DIR")),n=this.pypiMirror?"-i ".concat(this.pypiMirror):"",a="sudo docker exec ".concat(t," pip install ").concat(e," ").concat(n," ").concat(this.packageToInstall.trim());return a},isInstallable:function(){if(this.T.isNothing(this.packageToInstall))return!1;var t,e=i(this.packageToInstall.trim().split(/\s+/));try{for(e.s();!(t=e.n()).done;){var n=t.value,a=n.split("==");if(a.length>2)return!1;if(this.T.isNothing(a[0]))return!1;if(a.length>1&&this.T.isNothing(a[1]))return!1}}catch(s){e.e(s)}finally{e.f()}return!0},isInstalling:function(){var t=this.installStatus.filter((function(t){return"success"!==t.status&&"failure"!==t.status})).length;return t>0}},props:{},data:function(){return{pypiMirror:"",packageToInstall:"",showInstallStatus:!1,nowMs:Date.now(),installStatus:[],installedPackages:[],isLoadingInstalldPackages:!1,autoUpdateInstallStatusTimer:null,autoUpdateNowMsTimer:null}},mounted:function(){var t=this,e=this.$route.query.requirements;e&&(this.packageToInstall=this.T.fromBase64(e)),this.autoUpdateInstallStatusTimer=setInterval((function(){t.updateInstallStatus()}),3e3),this.autoUpdateNowMsTimer=setInterval((function(){t.nowMs=Date.now()}),500)},beforeDestroy:function(){this.autoUpdateInstallStatusTimer&&clearInterval(this.autoUpdateInstallStatusTimer),this.autoUpdateNowMsTimer&&clearInterval(this.autoUpdateNowMsTimer)}},d=u,f=(n("0c63"),n("2877")),p=n("2aa4"),h=n("4eb8"),v=Object(f["a"])(d,a,s,!1,null,"355bfb84",null);"function"===typeof p["default"]&&Object(p["default"])(v),"function"===typeof h["default"]&&Object(h["default"])(v);e["default"]=v.exports},c8d4:function(t,e,n){"use strict";n("183a")},d9ed:function(t,e,n){"use strict";n("9303")}}]);