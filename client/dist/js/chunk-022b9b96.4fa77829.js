(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-022b9b96"],{"12a5":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"randomIDString":"auln-{随机 ID}","Add Auth Link":"添加授权链接","Setup Auth Link":"配置授权链接","Customize ID":"定制 ID","Execute":"执行","Arguments":"参数指定","Task Record":"任务记录","Keep":"保留","Tags":"标签","Add Tag":"添加标签","Show in doc":"显示于文档","Expires":"有效期","Limiting":"限流","Note":"备注","URL Preview":"URL预览","ID will be a part of the calling URL":"此 ID 用于生成调用时的 URL","JSON formated arguments (**kwargs)":"JSON 格式的参数（**kwargs）","The Func accepts extra arguments not listed above":"本函数允许传递额外的自定义函数参数","ID must starts with \\"{prefix}\\"":"ID 必须以\\"{prefix}\\"开头","Only numbers, alphabets, dot(.), underscore(_) and hyphen(-) are allowed":"只能输入数字、英文、点（.）、下划线（_）以及连字符（-）","Please select Func":"请选择执行函数","Please input arguments, input \\"{}\\" when no argument":"请输入参数，无参数时填写 \\"{}\\"","Only date-time between 1970 and 2037 are allowed":"只能选择1970年至2037年之间的日期","Date-time cannot earlier than 1970":"日期不能早于1970年","Date-time cannot later than 2037":"时间不能晚于2037年","Auth Link created":"授权链接已创建","Auth Link saved":"授权链接已保存","Auth Link deleted":"授权链接已删除","Are you sure you want to delete the Auth Link?":"是否确认删除此授权链接？","Invalid argument format":"参数格式不正确","parameterHint":"参数值指定为 \\"INPUT_BY_CALLER\\" 时，允许调用时指定本参数","shortcutDays":"{n} 天","recentTaskCount":"{n} 个近期任务"}}'),delete t.options._Ctor}},"1b5b":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"randomIDString":"auln-{Random ID}","parameterHint":"When the parameter value is specified as \\"INPUT_BY_CALLER\\", this parameter is allowed to be specified by the caller","shortcutDays":"{n} day | {n} days","recentTaskCount":"recent {n} task | recent {n} tasks"}}'),delete t.options._Ctor}},"1fe2":function(t,e,a){"use strict";var n=a("a2b6"),s=a.n(n);e["default"]=s.a},"50c9":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"lastSucceeded":"Succeeded {t}","lastFailed":"Failed {t}","lastRan":"Ran {t}","successCount":"Success {n}","failureCount":"Failure {n}"}}'),delete t.options._Ctor}},"5aca":function(t,e,a){"use strict";a.r(e);a("b0c0");var n=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[e("el-container",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[e("el-header",{attrs:{height:"60px"}},[e("div",{staticClass:"common-page-header"},[e("h1",[t._v(t._s(t.$t("Auth Link")))]),t._v(" "),e("div",{staticClass:"header-control"},[e("FuzzySearchInput",{attrs:{dataFilter:t.dataFilter}}),t._v(" "),e("el-tooltip",{attrs:{content:t.$t("Show all contents"),placement:"bottom",enterable:!1}},[e("el-checkbox",{attrs:{border:!0,size:"small","true-label":"_ALL","false-label":"user"},on:{change:function(e){return t.T.changePageFilter(t.dataFilter)}},model:{value:t.dataFilter.origin,callback:function(e){t.$set(t.dataFilter,"origin",e)},expression:"dataFilter.origin"}},[t._v(t._s(t.$t("Show all")))])],1),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.openSetup(null,"add")}}},[e("i",{staticClass:"fa fa-fw fa-plus"}),t._v("\n            "+t._s(t.$t("New"))+"\n          ")])],1)])]),t._v(" "),e("el-main",{staticClass:"common-table-container"},[t.T.isNothing(t.data)?e("div",{staticClass:"no-data-area"},[t.T.isPageFiltered({ignore:{origin:"_ALL"}})?e("h1",{staticClass:"no-data-title"},[e("i",{staticClass:"fa fa-fw fa-search"}),t._v(t._s(t.$t("No matched data found")))]):e("h1",{staticClass:"no-data-title"},[e("i",{staticClass:"fa fa-fw fa-info-circle"}),t._v(t._s(t.$t("No Auth Link has ever been added")))]),t._v(" "),e("p",{staticClass:"no-data-tip"},[t._v("\n          "+t._s(t.$t("If you need to access the Python function from an external system,"))+"\n          "),e("br"),t._v(t._s(t.$t("you must first create an Auth Link for the Python function and access the Python function through the Auth Link."))+"\n        ")])]):e("el-table",{staticClass:"common-table",attrs:{height:"100%",data:t.data,"row-class-name":t.T.getHighlightRowCSS}},[e("el-table-column",{attrs:{label:t.$t("Func"),"min-width":"420"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("FuncInfo",{attrs:{"config-func-id":a.row.funcId,id:a.row.func_id,title:a.row.func_title,kwargsJSON:a.row.funcCallKwargsJSON}}),t._v(" "),e("div",[e("span",{staticClass:"text-info"},[t._v("ID")]),t._v("\n               "),e("code",{staticClass:"text-main"},[t._v(t._s(a.row.id))]),t._v(" "),e("CopyButton",{attrs:{content:a.row.id}}),t._v(" "),t.T.notNothing(a.row.tagsJSON)||t.T.notNothing(a.row.func_tagsJSON)?[e("br"),t._v(" "),e("span",{staticClass:"text-info"},[t._v("　"+t._s(t.$t("Tags")))]),t._v(" "),t._l(a.row.func_tagsJSON,(function(a){return e("el-tag",{key:a,attrs:{size:"mini",type:"info"}},[t._v(t._s(a))])})),t._v(" "),t._l(a.row.tagsJSON,(function(a){return e("el-tag",{key:a,attrs:{size:"mini",type:"warning"}},[t._v(t._s(a))])}))]:t._e(),t._v(" "),a.row.note?[e("br"),t._v(" "),e("span",{staticClass:"text-info"},[t._v("　"+t._s(t.$t("Note"))+t._s(t.$t(":")))]),t._v(" "),e("span",[t._v(t._s(a.row.note))])]:t._e()],2)]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Config"),width:"240"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"text-info"},[t._v(t._s(t.$t("Auth"))+t._s(t.$t(":")))]),t._v(" "),e("el-tooltip",{attrs:{content:a.row.apia_title,disabled:!a.row.apia_title,placement:"right"}},[e("span",{class:{"text-main":!!a.row.apia_id}},[t._v(t._s(t.C.API_AUTH_MAP.get(a.row.apia_type).name))])]),t._v(" "),e("br"),t._v(" "),e("span",{staticClass:"text-info"},[t._v(t._s(t.$t("Expires"))+t._s(t.$t(":")))]),t._v(" "),a.row.expireTime?[e("RelativeDateTime",{class:t.T.isExpired(a.row.expireTime)?"text-bad":"text-good",attrs:{datetime:a.row.expireTime}})]:e("span",[t._v("-")]),t._v(" "),e("br"),t._v(" "),e("span",{staticClass:"text-info"},[t._v(t._s(t.$t("Throttling"))+t._s(t.$t(":")))]),t._v(" "),t.T.isNothing(a.row.throttlingJSON)?e("span",[t._v("-")]):e("el-tooltip",{attrs:{placement:"right"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._l(t.C.AUTH_LINK_THROTTLING,(function(n){return[a.row.throttlingJSON[n.key]?e("span",[t._v(t._s(t.$tc(n.name,a.row.throttlingJSON[n.key]))),e("br")]):t._e()]}))],2),t._v(" "),e("span",{staticClass:"text-bad"},[t._v(t._s(t.$t("ON")))])])]}}])}),t._v(" "),t.isLocalFuncTaskRecordEnabled?e("el-table-column",{attrs:{label:t.$t("Task Record"),width:"240"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.isStatisticLoaded?t.statisticMap[a.row.id]?["success"===t.statisticMap[a.row.id].lastStatus?e("span",{staticClass:"text-good"},[e("i",{staticClass:"fa fa-fw fa-check"}),t._v(" "+t._s(t.$t("lastSucceeded",{t:t.T.fromNow(t.statisticMap[a.row.id].lastStartTime)}))+"\n              ")]):"failure"===t.statisticMap[a.row.id].lastStatus?e("span",{staticClass:"text-bad"},[e("i",{staticClass:"fa fa-fw fa-times"}),t._v(" "+t._s(t.$t("lastFailed",{t:t.T.fromNow(t.statisticMap[a.row.id].lastStartTime)}))+"\n              ")]):e("span",{staticClass:"text-main"},[e("i",{staticClass:"fa fa-fw fa-clock-o"}),t._v(" "+t._s(t.$t("lastRan",{t:t.T.fromNow(t.statisticMap[a.row.id].lastStartTime)}))+"\n              ")]),t._v(" "),e("br"),t._v(" "),e("i",{staticClass:"fa fa-fw fa-pie-chart text-info"}),t._v(" "),e("span",{class:{"text-good":!!t.statisticMap[a.row.id].recentSuccessCount}},[t._v(t._s(t.$t("successCount",{n:t.T.numberLimit(t.statisticMap[a.row.id].recentSuccessCount)})))]),t._v("\n              / "),e("span",{class:{"text-bad":!!t.statisticMap[a.row.id].recentFailureCount}},[t._v(t._s(t.$t("failureCount",{n:t.T.numberLimit(t.statisticMap[a.row.id].recentFailureCount)})))])]:[t._v("\n              "+t._s(t.$t("No recent record"))+"\n            ")]:[e("i",{staticClass:"fa fa-fw fa-circle-o-notch fa-spin"}),t._v("\n              "+t._s(t.$t("Loading"))+"\n            ")]]}}],null,!1,3861681052)}):t._e(),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Status"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.isDisabled?e("span",{staticClass:"text-bad"},[e("i",{staticClass:"fa fa-fw fa-ban"}),t._v(" "+t._s(t.$t("Disabled")))]):e("span",{staticClass:"text-good"},[e("i",{staticClass:"fa fa-fw fa-check"}),t._v(" "+t._s(t.$t("Enabled")))])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"right",width:"380"},scopedSlots:t._u([{key:"default",fn:function(a){return[t.statisticMap[a.row.id]?[e("el-link",{attrs:{disabled:!t.statisticMap[a.row.id].taskRecordCount},on:{click:function(e){return t.common.goToTaskRecord({origin:"authLink",originId:a.row.id},{hlDataId:a.row.id})}}},[t._v("\n                "+t._s(t.$t("Task Record"))+" "),t.statisticMap[a.row.id].taskRecordCount?e("code",[t._v("("+t._s(t.T.numberLimit(t.statisticMap[a.row.id].taskRecordCount))+")")]):t._e()])]:t._e(),t._v(" "),e("el-link",{attrs:{disabled:t.T.isNothing(a.row.func_id)},on:{click:function(e){return t.showAPI(a.row)}}},[t._v(t._s(t.$t("Example")))]),t._v(" "),a.row.isDisabled?e("el-link",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],attrs:{disabled:t.T.isNothing(a.row.func_id)},on:{click:function(e){return t.quickSubmitData(a.row,"enable")}}},[t._v(t._s(t.$t("Enable")))]):e("el-link",{attrs:{disabled:t.T.isNothing(a.row.func_id)},on:{click:function(e){return t.quickSubmitData(a.row,"disable")}}},[t._v(t._s(t.$t("Disable")))]),t._v(" "),e("el-link",{on:{click:function(e){return t.openSetup(a.row,"setup")}}},[t._v(t._s(t.$t("Setup")))]),t._v(" "),e("el-link",{on:{click:function(e){return t.quickSubmitData(a.row,"delete")}}},[t._v(t._s(t.$t("Delete")))])]}}])})],1)],1),t._v(" "),e("Pager",{attrs:{pageInfo:t.pageInfo}}),t._v(" "),e("AuthLinkSetup",{ref:"setup"}),t._v(" "),e("APIExampleDialog",{ref:"apiExampleDialog",attrs:{showPostExample:!0,showPostExampleSimplified:!0,showGetExample:!0,showGetExampleSimplified:!0}})],1)],1)},s=[],i=a("c7eb"),o=a("1da1"),r=(a("130f"),a("d81d"),function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{id:"ScriptSetSetup",visible:t.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"750px"},on:{"update:visible":function(e){t.show=e}}},[e("template",{slot:"title"},[t._v("\n    "+t._s(t.pageTitle)+" "),e("code",{staticClass:"text-main"},[t._v(t._s(t.data.func_title))])]),t._v(" "),e("el-container",{attrs:{direction:"vertical"}},[e("el-main",[e("div",{staticClass:"setup-form"},[e("el-form",{ref:"form",attrs:{"label-width":"135px",model:t.form,rules:t.formRules}},["add"===t.pageMode?e("el-form-item",{attrs:{label:t.$t("Customize ID"),prop:"useCustomId"}},[e("el-switch",{model:{value:t.useCustomId,callback:function(e){t.useCustomId=e},expression:"useCustomId"}}),t._v(" "),e("span",{staticClass:"text-main float-right"},[t._v("\n              "+t._s(t.$t("URL Preview"))+t._s(t.$t(":"))+"\n              "),e("code",{staticClass:"code-font"},[t._v(t._s("/api/v1/al/".concat(t.useCustomId?t.form.id:t.$t("randomIDString"))))])])],1):t._e(),t._v(" "),"add"===t.pageMode?e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.useCustomId,expression:"useCustomId"}],attrs:{label:"ID",prop:"id"}},[e("el-input",{attrs:{maxlength:"60"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}}),t._v(" "),e("InfoBlock",{attrs:{title:t.$t("ID will be a part of the calling URL")}})],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Execute"),prop:"funcId"}},[e("el-cascader",{ref:"funcCascader",attrs:{"popper-class":"code-font",placeholder:"--",filterable:"","filter-method":t.common.funcCascaderFilter,options:t.funcCascader,props:{expandTrigger:"hover",emitPath:!1,multiple:!1}},on:{change:t.autoFillFuncCallKwargsJSON},model:{value:t.form.funcId,callback:function(e){t.$set(t.form,"funcId",e)},expression:"form.funcId"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Arguments"),prop:"funcCallKwargsJSON"}},[e("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:2}},model:{value:t.form.funcCallKwargsJSON,callback:function(e){t.$set(t.form,"funcCallKwargsJSON",e)},expression:"form.funcCallKwargsJSON"}}),t._v(" "),e("InfoBlock",{attrs:{title:t.$t("JSON formated arguments (**kwargs)")}}),t._v(" "),e("InfoBlock",{attrs:{title:t.$t("parameterHint")}}),t._v(" "),t.apiCustomKwargsSupport?e("InfoBlock",{attrs:{type:"success",title:t.$t("The Func accepts extra arguments not listed above")}}):t._e()],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Tags"),prop:"tagsJSON"}},[t._l(t.form.tagsJSON,(function(a){return e("el-tag",{key:a,attrs:{type:"warning",size:"small",closable:""},on:{close:function(e){return t.removeTag(a)}}},[t._v(t._s(a))])})),t._v(" "),t.showAddTag?e("el-input",{ref:"newTag",attrs:{size:"mini"},on:{blur:t.addTag},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTag.apply(null,arguments)}},model:{value:t.newTag,callback:function(e){t.newTag=e},expression:"newTag"}}):e("el-button",{attrs:{type:"text"},on:{click:t.openAddTagInput}},[t._v(t._s(t.$t("Add Tag")))])],2),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Task Record")}},[e("span",{staticClass:"task-record-limit-prefix"},[t._v(t._s(t.$t("Keep"))+" ")]),t._v(" "),e("el-input-number",{staticClass:"task-record-limit-input",attrs:{min:t.$store.getters.SYSTEM_INFO("_TASK_RECORD_LIMIT_MIN"),max:t.$store.getters.SYSTEM_INFO("_TASK_RECORD_LIMIT_MAX"),step:10,precision:0},model:{value:t.form.taskRecordLimit,callback:function(e){t.$set(t.form,"taskRecordLimit",e)},expression:"form.taskRecordLimit"}}),t._v(" "),e("span",{staticClass:"task-record-limit-unit"},[t._v(t._s(t.$tc("recentTaskCount",t.form.taskRecordLimit,{n:""}))+" ")]),t._v(" "),e("el-link",{staticClass:"task-record-limit-clear",attrs:{type:"primary"},on:{click:function(e){e.stopPropagation(),t.form.taskRecordLimit=t.$store.getters.SYSTEM_INFO("_TASK_RECORD_FUNC_LIMIT_BY_ORIGIN_AUTH_LINK")}}},[t._v(t._s(t.$t("Restore Default")))])],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("API Auth"),prop:"apiAuthId"}},[e("el-select",{model:{value:t.form.apiAuthId,callback:function(e){t.$set(t.form,"apiAuthId",e)},expression:"form.apiAuthId"}},t._l(t.apiAuthList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Show in doc"),prop:"showInDoc"}},[e("el-switch",{model:{value:t.form.showInDoc,callback:function(e){t.$set(t.form,"showInDoc",e)},expression:"form.showInDoc"}})],1),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Expires"),prop:"expireTime"}},[e("el-date-picker",{attrs:{type:"datetime",align:"left",format:"yyyy-MM-dd HH:mm",clearable:!0,"picker-options":t.datetimePickerOptions},model:{value:t.form.expireTime,callback:function(e){t.$set(t.form,"expireTime",e)},expression:"form.expireTime"}})],1),t._v(" "),t._l(t.C.AUTH_LINK_THROTTLING,(function(a,n){return[e("el-form-item",{attrs:{label:0===n?t.$t("Limiting"):"",prop:"throttlingJSON.".concat(a.key)}},[e("el-input-number",{staticClass:"throttling-input",attrs:{min:1,step:1,precision:0},model:{value:t.form.throttlingJSON[a.key],callback:function(e){t.$set(t.form.throttlingJSON,a.key,e)},expression:"form.throttlingJSON[opt.key]"}}),t._v(" "),e("span",{staticClass:"throttling-unit"},[t._v(t._s(t.$tc(a.name,t.form.throttlingJSON[a.key],{n:""}))+" ")]),t._v(" "),e("el-link",{staticClass:"throttling-clear",on:{click:function(e){e.stopPropagation(),t.form.throttlingJSON[a.key]=void 0}}},[t._v(t._s(t.$t("Clear")))])],1)]})),t._v(" "),e("el-form-item",{attrs:{label:t.$t("Note")}},[e("el-input",{attrs:{placeholder:t.$t("Optional"),type:"textarea",resize:"none",autosize:{minRows:2},maxlength:"5000"},model:{value:t.form.note,callback:function(e){t.$set(t.form,"note",e)},expression:"form.note"}})],1),t._v(" "),e("el-form-item",{staticClass:"setup-footer"},["setup"===t.pageMode?e("el-button",{staticClass:"delete-button",on:{click:t.deleteData}},[t._v(t._s(t.$t("Delete")))]):t._e(),t._v(" "),e("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],attrs:{type:"primary"},on:{click:t.submitData}},[t._v(t._s(t.$t("Save")))])],1)],2)],1)])],1)],2)}),l=[],c=(a("d3b7"),a("159b"),a("b64b"),a("e9c4"),a("99af"),a("25f0"),a("a434"),a("14d9"),a("d9e2"),a("ac1f"),a("466d"),{name:"AuthLinkSetup",components:{},watch:{show:function(t){t||this.$root.$emit("reload.authLinkList")},useCustomId:function(t){this.form.id=t?"".concat(this.ID_PREFIX,"my-auth-link"):null}},methods:{loadData:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n,s,o,r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t){a.next=9;break}e.pageMode="add",e.T.jsonClear(e.form),e.form.throttlingJSON={},e.form.showInDoc=!1,e.form.taskRecordLimit=e.$store.getters.SYSTEM_INFO("_TASK_RECORD_FUNC_LIMIT_BY_ORIGIN_AUTH_LINK"),e.data={},a.next=25;break;case 9:return e.pageMode="setup",e.data.id=t,a.next=13,e.T.callAPI_getOne("/api/v1/auth-links/do/list",e.data.id);case 13:if(n=a.sent,n&&n.ok){a.next=16;break}return a.abrupt("return");case 16:e.data=n.data,s={},Object.keys(e.form).forEach((function(t){return s[t]=e.data[t]})),s.funcCallKwargsJSON=JSON.stringify(s.funcCallKwargsJSON,null,2),s.tagsJSON=s.tagsJSON||[],s.apiAuthId=e.data.apia_id,s.throttlingJSON=s.throttlingJSON||{},e.T.isNothing(s.taskRecordLimit)&&(s.taskRecordLimit=e.$store.getters.SYSTEM_INFO("_TASK_RECORD_FUNC_LIMIT_BY_ORIGIN_AUTH_LINK")),e.form=s;case 25:return a.next=27,e.common.getFuncList();case 27:return o=a.sent,e.funcMap=o.map,e.funcCascader=o.cascader,a.next=32,e.common.getAPIAuthList();case 32:r=a.sent,e.apiAuthList=r,e.show=!0;case 35:case"end":return a.stop()}}),a)})))()},submitData:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$refs.form.validate();case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e["catch"](0),e.abrupt("return",console.error(e.t0));case 8:e.t1=t.pageMode,e.next="add"===e.t1?11:"setup"===e.t1?14:17;break;case 11:return e.next=13,t.addData();case 13:return e.abrupt("return",e.sent);case 14:return e.next=16,t.modifyData();case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,null,[[0,5]])})))()},addData:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var a,n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={body:{data:t.T.jsonCopy(t.form)},alert:{okMessage:t.$t("Auth Link created")}},e.prev=1,a.body.data.funcCallKwargsJSON=JSON.parse(t.form.funcCallKwargsJSON),e.next=8;break;case 5:return e.prev=5,e.t0=e["catch"](1),e.abrupt("return",t.T.alert("".concat(t.$t("Invalid argument format"),"<br>").concat(e.t0.toString())));case 8:return e.next=10,t.T.callAPI("post","/api/v1/auth-links/do/add",a);case 10:if(n=e.sent,n&&n.ok){e.next=13;break}return e.abrupt("return");case 13:t.$store.commit("updateHighlightedTableDataId",n.data.id),t.show=!1;case 15:case"end":return e.stop()}}),e,null,[[1,5]])})))()},modifyData:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var a,n,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.T.jsonCopy(t.form),delete a.id,n={params:{id:t.data.id},body:{data:a},alert:{okMessage:t.$t("Auth Link saved")}},e.prev=3,n.body.data.funcCallKwargsJSON=JSON.parse(t.form.funcCallKwargsJSON),e.next=10;break;case 7:return e.prev=7,e.t0=e["catch"](3),e.abrupt("return",t.T.alert("".concat(t.$t("Invalid argument format"),"<br>").concat(e.t0.toString())));case 10:return e.next=12,t.T.callAPI("post","/api/v1/auth-links/:id/do/modify",n);case 12:if(s=e.sent,s&&s.ok){e.next=15;break}return e.abrupt("return");case 15:t.$store.commit("updateHighlightedTableDataId",s.data.id),t.show=!1;case 17:case"end":return e.stop()}}),e,null,[[3,7]])})))()},deleteData:function(){var t=this;return Object(o["a"])(Object(i["a"])().mark((function e(){var a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.T.confirm(t.$t("Are you sure you want to delete the Auth Link?"));case 2:if(e.sent){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.T.callAPI("/api/v1/auth-links/:id/do/delete",{params:{id:t.data.id},alert:{okMessage:t.$t("Auth Link deleted")}});case 6:if(a=e.sent,a&&a.ok){e.next=9;break}return e.abrupt("return");case 9:t.show=!1;case 10:case"end":return e.stop()}}),e)})))()},autoFillFuncCallKwargsJSON:function(t){var e=this.funcMap[t].argsJSON||Object.keys(this.funcMap[t].kwargsJSON),a={};e.forEach((function(t){0===t.indexOf("**")||(a[t]="INPUT_BY_CALLER")})),this.form.funcCallKwargsJSON=JSON.stringify(a,null,2)},removeTag:function(t){this.form.tagsJSON.splice(this.form.tagsJSON.indexOf(t),1)},openAddTagInput:function(){var t=this;this.showAddTag=!0,this.$nextTick((function(e){t.$refs.newTag.$refs.input.focus()}))},addTag:function(){var t=this.newTag;t&&(Array.isArray(this.form.tagsJSON)||this.$set(this.form,"tagsJSON",[]),this.form.tagsJSON.push(t)),this.showAddTag=!1,this.newTag=""}},computed:{ID_PREFIX:function(){return"auln-"},pageTitle:function(){var t={setup:this.$t("Setup Auth Link"),add:this.$t("Add Auth Link")};return t[this.pageMode]},apiCustomKwargsSupport:function(){var t=this.form.funcId;if(!t)return!1;if(!this.funcMap[t])return!1;for(var e in this.funcMap[t].kwargsJSON)if(0===e.indexOf("**"))return!0;return!1},datetimePickerOptions:function(){var t=this,e=(new Date).getTime(),a=[1,3,7,30,90,365],n=[];return a.forEach((function(a){var s=new Date;s.setTime(e+86400*a*1e3),n.push({text:t.$tc("shortcutDays",a),onClick:function(t){t.$emit("pick",s)}})})),{shortcuts:n}}},props:{},data:function(){var t=this,e=this.$t('Please input arguments, input "{}" when no argument');return{show:!1,pageMode:null,data:{},funcMap:{},funcCascader:[],apiAuthList:[],useCustomId:!1,showAddTag:!1,newTag:"",form:{id:null,funcId:null,funcCallKwargsJSON:null,tagsJSON:[],apiAuthId:null,expireTime:null,throttlingJSON:{},showInDoc:!1,taskRecordLimit:this.$store.getters.SYSTEM_INFO("_TASK_RECORD_FUNC_LIMIT_BY_ORIGIN_AUTH_LINK"),note:null},formRules:{id:[{trigger:"change",validator:function(e,a,n){if(t.T.notNothing(a)){if(0!==a.indexOf(t.ID_PREFIX)||a===t.ID_PREFIX)return n(new Error(t.$t('ID must starts with "{prefix}"',{prefix:t.ID_PREFIX})));if(!a.match(/^[0-9a-zA-Z\.\-\_]+$/g))return n(new Error(t.$t("Only numbers, alphabets, dot(.), underscore(_) and hyphen(-) are allowed")))}return n()}}],funcId:[{trigger:"change",message:this.$t("Please select Func"),required:!0}],expireTime:[{trigger:"change",message:this.$t("Only date-time between 1970 and 2037 are allowed"),validator:function(e,a,n){var s=t.M(a).unix();return s<t.T.MIN_UNIX_TIMESTAMP?n(new Error(t.$t("Date-time cannot earlier than 1970"))):s>t.T.MAX_UNIX_TIMESTAMP?n(new Error(t.$t("Date-time cannot later than 2037"))):n()}}],funcCallKwargsJSON:[{trigger:"change",message:e,required:!0},{trigger:"change",validator:function(t,a,n){try{var s=JSON.parse(a);return Array.isArray(s)?n(new Error(e)):n()}catch(i){return n(new Error(e))}}}]}}}}),u=c,p=(a("bfc0"),a("2877")),d=a("d66c"),f=a("a26d"),m=Object(p["a"])(u,r,l,!1,null,"6f045ca2",null);"function"===typeof d["default"]&&Object(d["default"])(m),"function"===typeof f["default"]&&Object(f["default"])(m);var h=m.exports,_=a("b3fd"),g={name:"AuthLinkList",components:{AuthLinkSetup:h,APIExampleDialog:_["a"]},watch:{$route:{immediate:!0,handler:function(t,e){var a=this;return Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.loadData();case 2:case"end":return t.stop()}}),t)})))()}},"$store.state.isLoaded":function(t){var e=this;t&&setImmediate((function(){return e.T.autoScrollTable()}))}},methods:{loadData:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n,s;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=t||{},n=e.dataFilter=e.T.createListQuery(),e.T.isNothing(e.$route.query)&&(n.origin="user"),a.next=5,e.T.callAPI_get("/api/v1/auth-links/do/list",{query:n});case 5:if(s=a.sent,s&&s.ok){a.next=8;break}return a.abrupt("return");case 8:e.data=s.data,e.pageInfo=s.pageInfo,e.$store.commit("updateLoadStatus",!0),e.isLocalFuncTaskRecordEnabled&&!t.skipStatistic&&(e.isStatisticLoaded=!1,setTimeout(Object(o["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.common.loadStatistic("originId",e.data.map((function(t){return t.id})));case 2:e.statisticMap=t.sent,e.isStatisticLoaded=!0;case 4:case"end":return t.stop()}}),t)}))),1e3));case 12:case"end":return a.stop()}}),a)})))()},quickSubmitData:function(t,e){var a=this;return Object(o["a"])(Object(i["a"])().mark((function n(){var s;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:n.t0=e,n.next="disable"===n.t0?3:"delete"===n.t0?8:13;break;case 3:return n.next=5,a.T.confirm(a.$t("Are you sure you want to disable the Auth Link?"));case 5:if(n.sent){n.next=7;break}return n.abrupt("return");case 7:return n.abrupt("break",13);case 8:return n.next=10,a.T.confirm(a.$t("Are you sure you want to delete the Auth Link?"));case 10:if(n.sent){n.next=12;break}return n.abrupt("return");case 12:return n.abrupt("break",13);case 13:s=null,n.t1=e,n.next="disable"===n.t1?17:"enable"===n.t1?21:"delete"===n.t1?25:29;break;case 17:return n.next=19,a.T.callAPI("post","/api/v1/auth-links/:id/do/modify",{params:{id:t.id},body:{data:{isDisabled:!0}},alert:{okMessage:a.$t("Auth Link disabled")}});case 19:return s=n.sent,n.abrupt("break",29);case 21:return n.next=23,a.T.callAPI("post","/api/v1/auth-links/:id/do/modify",{params:{id:t.id},body:{data:{isDisabled:!1}},alert:{okMessage:a.$t("Auth Link enabled")}});case 23:return s=n.sent,n.abrupt("break",29);case 25:return n.next=27,a.T.callAPI("/api/v1/auth-links/:id/do/delete",{params:{id:t.id},alert:{okMessage:a.$t("Auth Link deleted")}});case 27:return s=n.sent,n.abrupt("break",29);case 29:if(s&&s.ok){n.next=31;break}return n.abrupt("return");case 31:return a.$store.commit("updateHighlightedTableDataId",t.id),n.next=34,a.loadData({skipStatistic:!0});case 34:case"end":return n.stop()}}),n)})))()},openSetup:function(t,e){switch(e){case"add":this.$refs.setup.loadData();break;case"setup":this.$store.commit("updateHighlightedTableDataId",t.id),this.$refs.setup.loadData(t.id);break}},showAPI:function(t){var e=this;return Object(o["a"])(Object(i["a"])().mark((function a(){var n,s,o,r,l,c;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.T.callAPI_getOne("/api/v1/funcs/do/list",t.funcId);case 2:if(n=a.sent,n&&n.ok){a.next=5;break}return a.abrupt("return");case 5:for(r in s=e.T.formatURL("/api/v1/al/:id",{baseURL:!0,params:{id:t.id}}),o={},t.funcCallKwargsJSON)t.funcCallKwargsJSON.hasOwnProperty(r)&&e.common.isFuncArgumentPlaceholder(t.funcCallKwargsJSON[r])&&(o[r]=t.funcCallKwargsJSON[r]);l={kwargs:o},c=n.data.kwargsJSON,e.$refs.apiExampleDialog.update(s,l,c),e.$store.commit("updateHighlightedTableDataId",t.id);case 12:case"end":return a.stop()}}),a)})))()}},computed:{isLocalFuncTaskRecordEnabled:function(){return!!this.$store.getters.SYSTEM_SETTINGS("LOCAL_FUNC_TASK_RECORD_ENABLED")}},props:{},data:function(){var t=this.T.createPageInfo(),e=this.T.createListQuery();return{data:[],pageInfo:t,statisticMap:{},isStatisticLoaded:!1,dataFilter:{_fuzzySearch:e._fuzzySearch,origin:e.origin}}},created:function(){var t=this;this.$root.$on("reload.authLinkList",(function(){return t.loadData({skipStatistic:!0})}))},destroyed:function(){this.$root.$off("reload.authLinkList")}},v=g,w=(a("9f49"),a("a7ce")),b=a("b4c0"),k=Object(p["a"])(v,n,s,!1,null,"21d1d63e",null);"function"===typeof w["default"]&&Object(w["default"])(k),"function"===typeof b["default"]&&Object(b["default"])(k);e["default"]=k.exports},"5ec3":function(t,e,a){},6601:function(t,e,a){"use strict";a("8987")},8987:function(t,e,a){},"8bbf":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Config":"配置","Auth":"认证","Expires":"过期","Throttling":"限流","Task Record":"任务记录","Auth Link disabled":"授权链接已禁用","Auth Link enabled":"授权链接已启用","Auth Link deleted":"授权链接已删除","Show all contents":"展示全部内容","No Auth Link has ever been added":"从未添加过任何授权链接","Are you sure you want to disable the Auth Link?":"是否确认禁用此授权链接？","Are you sure you want to delete the Auth Link?":"是否确认删除此授权链接？","lastSucceeded":"{t}调用成功","lastFailed":"{t}调用失败","lastRan":"{t}调用","successCount":"成功 {n}","failureCount":"失败 {n}","If you need to access the Python function from an external system,":"如需要从外部系统访问 Python 函数，","you must first create an Auth Link for the Python function and access the Python function through the Auth Link.":"必须先为 Python 函数创建授权链接，通过授权链接访问 Python 函数"}}'),delete t.options._Ctor}},"9f49":function(t,e,a){"use strict";a("da98")},a26d:function(t,e,a){"use strict";var n=a("12a5"),s=a.n(n);e["default"]=s.a},a2ad:function(t,e,a){"use strict";var n=a("ebfc"),s=a.n(n);e["default"]=s.a},a2b6:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"seconds":"Second | Seconds"}}'),delete t.options._Ctor}},a434:function(t,e,a){"use strict";var n=a("23e7"),s=a("7b0b"),i=a("23cb"),o=a("5926"),r=a("07fa"),l=a("3511"),c=a("65f0"),u=a("8418"),p=a("083a"),d=a("1dde"),f=d("splice"),m=Math.max,h=Math.min;n({target:"Array",proto:!0,forced:!f},{splice:function(t,e){var a,n,d,f,_,g,v=s(this),w=r(v),b=i(t,w),k=arguments.length;for(0===k?a=n=0:1===k?(a=0,n=w-b):(a=k-2,n=h(m(o(e),0),w-b)),l(w+a-n),d=c(v,n),f=0;f<n;f++)_=b+f,_ in v&&u(d,f,v[_]);if(d.length=n,a<n){for(f=b;f<w-n;f++)_=f+n,g=f+a,_ in v?v[g]=v[_]:p(v,g);for(f=w;f>w-n+a;f--)p(v,f-1)}else if(a>n)for(f=w-n;f>b;f--)_=f+n-1,g=f+a-1,_ in v?v[g]=v[_]:p(v,g);for(f=0;f<a;f++)v[f+b]=arguments[f+2];return v.length=w-n+a,d}})},a7ce:function(t,e,a){"use strict";var n=a("50c9"),s=a.n(n);e["default"]=s.a},b3fd:function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title||t.$t("API Example"),visible:t.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"950px"},on:{"update:visible":function(e){t.show=e}}},[e("span",[t.showOptions?[e("el-divider",{attrs:{"content-position":"left"}},[e("h1",[t._v(t._s(t.$t("Request Options")))])]),t._v(" "),e("el-form",{staticClass:"call-options",attrs:{"label-width":"120px"}},[t.showExecModeOption?e("el-form-item",{attrs:{label:t.$t("Async")}},[e("el-switch",{attrs:{"inactive-value":"sync","active-value":"async"},model:{value:t.callOptions.execMode,callback:function(e){t.$set(t.callOptions,"execMode",e)},expression:"callOptions.execMode"}})],1):t._e(),t._v(" "),t.showSaveResultOption?e("el-form-item",{attrs:{label:t.$t("Save Result")}},[e("el-switch",{attrs:{"inactive-value":!1,"active-value":!0},model:{value:t.callOptions.saveResult,callback:function(e){t.$set(t.callOptions,"saveResult",e)},expression:"callOptions.saveResult"}})],1):t._e(),t._v(" "),t.showTimeoutOption?e("el-form-item",{attrs:{label:t.$t("Func Timeout")}},[e("el-input-number",{attrs:{size:"mini","step-strictly":"",step:1,precision:0,min:t.$store.getters.SYSTEM_INFO("_FUNC_TASK_TIMEOUT_MIN"),max:t.$store.getters.SYSTEM_INFO("_FUNC_TASK_TIMEOUT_MAX")},model:{value:t.callOptions.timeout,callback:function(e){t.$set(t.callOptions,"timeout",e)},expression:"callOptions.timeout"}}),t._v(" "+t._s(t.$tc("seconds",t.callOptions.timeout))+"\n        ")],1):t._e(),t._v(" "),t.showAPITimeoutOption?e("el-form-item",{attrs:{label:t.$t("API Timeout")}},[e("el-input-number",{attrs:{size:"mini","step-strictly":"",step:1,precision:0,min:t.$store.getters.SYSTEM_INFO("_FUNC_TASK_MIN_API_TIMEOUT"),max:t.$store.getters.SYSTEM_INFO("_FUNC_TASK_MAX_API_TIMEOUT")},model:{value:t.callOptions.apiTimeout,callback:function(e){t.$set(t.callOptions,"apiTimeout",e)},expression:"callOptions.apiTimeout"}}),t._v(" "+t._s(t.$tc("seconds",t.callOptions.apiTimeout))+"\n        ")],1):t._e()],1)]:t._e(),t._v(" "),e("el-divider",{attrs:{"content-position":"left"}},[e("h1",[t._v(t._s(t.$t("Input Parameters")))])]),t._v(" "),t.apiBodyInput||t.supportCustomKwargs?e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:22}},[e("el-input",{attrs:{type:"textarea",autosize:"",resize:"none"},model:{value:t.apiBodyInput,callback:function(e){t.apiBodyInput=e},expression:"apiBodyInput"}}),t._v(" "),t.apiBodyInput.indexOf("kwargs")>=0?e("InfoBlock",{attrs:{type:"info",title:t.$t('The JSON inside "kwargs" is the call parameter, modify its value and check out the calling example below')}}):t._e(),t._v(" "),t.supportCustomKwargs?e("InfoBlock",{attrs:{type:"success",title:t.$t("This Python function allows additional parameters (**kwargs syntax)")}}):t._e(),t._v(" "),t.supportFileUpload?e("InfoBlock",{attrs:{type:"success",title:t.$t('This Python function allows uploading files, field name of the uploading file is "files"')}}):t._e()],1),t._v(" "),e("el-col",{attrs:{span:2}},[e("CopyButton",{attrs:{content:t.apiBodyInput}})],1)],1):t._e(),t._v(" "),e("el-divider",{attrs:{"content-position":"left"}},[e("h1",[t._v(t._s(t.$t("Calling Example")))])]),t._v(" "),t.apiBody?[t.showGet?[e("el-tabs",{attrs:{"tab-position":"top"}},[e("el-tab-pane",{attrs:{label:t.$t("Simple GET")}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:22}},[t.onlyStringParameter?e("el-link",{staticClass:"get-example",attrs:{href:t.getExample("simplified"),underline:!0,type:"primary",target:"_blank"}},[e("code",{domProps:{innerHTML:t._s(t.getExample("simplified",{asHTML:!0,decodeURL:!0}))}})]):t._e(),t._v(" "),e("InfoBlock",{attrs:{type:t.onlyStringParameter?"info":"error",title:t.$t("Only string arguments are allowed in this from")}}),t._v(" "),t.showOptions?e("InfoBlock",{attrs:{title:t.$t('Parameter "options" are not supported in this from')}}):t._e()],1),t._v(" "),e("el-col",{attrs:{span:2}},[t.onlyStringParameter?e("CopyButton",{attrs:{content:t.getExample("simplified")}}):t._e()],1)],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:t.$t("Normal GET")}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:22}},[e("el-link",{staticClass:"get-example",attrs:{href:t.getExample("normal"),underline:!0,type:"primary",target:"_blank"}},[e("code",{domProps:{innerHTML:t._s(t.getExample("normal",{asHTML:!0,decodeURL:!0}))}})]),t._v(" "),e("br"),t._v(" "),e("InfoBlock",{attrs:{type:"info",title:t.$t('Parameter "kwargs" should be URL encoded in HTTP request')}})],1),t._v(" "),e("el-col",{attrs:{span:2}},[e("CopyButton",{attrs:{content:t.getExample("normal")}})],1)],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:t.$t("Simple POST (JSON)")}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:22}},[e("el-input",{attrs:{value:t.postExample("simplified",{contentType:"json"}),autosize:{minRows:6},type:"textarea",resize:"none",readonly:""}}),t._v(" "),e("InfoBlock",{attrs:{type:"info",title:t.$t('When posting JSON data, "Content-Type" should be "application/json"')}}),t._v(" "),t.showOptions?e("InfoBlock",{attrs:{title:t.$t('Parameter "options" are not supported in this from')}}):t._e()],1),t._v(" "),e("el-col",{attrs:{span:2}},[e("CopyButton",{attrs:{content:t.postExample("simplified",{contentType:"json",oneLine:!0})}})],1)],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:t.$t("Simple POST (Form)")}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:22}},[e("el-input",{attrs:{value:t.postExample("simplified",{contentType:"form"}),autosize:{minRows:6},type:"textarea",resize:"none",readonly:""}}),t._v(" "),e("InfoBlock",{attrs:{type:"info",title:t.$t('When posting form data, "Content-Type" should be "multipart/form-data" or "application/x-www-form-urlencoded", and the values of the fields support string value only')}}),t._v(" "),t.supportFileUpload?e("InfoBlock",{attrs:{type:"warning",title:t.$t('When uploading files, "Content-Type" should be "multipart/form-data"')}}):t._e(),t._v(" "),t.showOptions?e("InfoBlock",{attrs:{type:"error",title:t.$t('Parameter "options" are not supported in this from')}}):t._e()],1),t._v(" "),e("el-col",{attrs:{span:2}},[t.onlyStringParameter?e("CopyButton",{attrs:{content:t.postExample("simplified",{contentType:"form",oneLine:!0})}}):t._e()],1)],1)],1),t._v(" "),e("el-tab-pane",{attrs:{label:t.$t("Normal POST")}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:22}},[e("el-input",{attrs:{value:t.postExample("normal"),autosize:{minRows:6},type:"textarea",resize:"none",readonly:""}}),t._v(" "),e("InfoBlock",{attrs:{type:"info",title:t.$t('When posting JSON data, "Content-Type" should be "application/json"')}}),t._v(" "),t.supportFileUpload?e("InfoBlock",{attrs:{type:"error",title:t.$t("File uploading is not supported in this this form")}}):t._e()],1),t._v(" "),e("el-col",{attrs:{span:2}},[e("CopyButton",{attrs:{content:t.postExample("normal",{oneLine:!0})}})],1)],1)],1)],1)]:t._e()]:[e("span",{staticClass:"text-bad"},[t._v(t._s(t.$t("Invalid Parameters. Examples require a valid Body content")))])]],2)])},s=[],i=(a("b64b"),a("e9c4"),a("a15b"),a("14d9"),a("99af"),a("4de4"),a("d3b7"),{name:"APIExampleDialog",components:{},watch:{callOptions:{deep:!0,handler:function(t){var e=null;try{e=JSON.parse(this.apiBodyExample)}catch(n){}if(e){for(var a in e.options=e.options||{},t)t[a]===this.DEFAULT_CALL_OPTIONS[a]?delete e.options[a]:e.options[a]=t[a];this.T.isNothing(e.options)&&delete e.options,this.apiBodyExample=JSON.stringify(e,null,2)}}}},methods:{prettyURLForHTML:function(t){if(!t)return"";try{var e=t.split("?");if(!e[1])return t;for(var a=e[1].split("&"),n=0;n<a.length;n++)a[n]=0===n?"?"+a[n]:"&"+a[n];var s=e[0]+"<br>"+a.join("<br>");return s}catch(i){return console.error(i),t}},washAPIBody:function(t){if(t=this.T.jsonCopy(t),this.T.isNothing(t))return t;if(this.T.isNothing(t.kwargs)&&!this.supportCustomKwargs&&delete t.kwargs,this.T.isNothing(t.options)&&delete t.options,this.T.notNothing(t.kwargs))for(var e in t.kwargs)0!==e.indexOf("**")&&"files"!==e||delete t.kwargs[e];return t},update:function(t,e,a){for(var n in e=e||{},e.kwargs=e.kwargs||{},e.options=e.options||{},this.apiKwargs=this.T.jsonCopy(e.kwargs),this.funcKwargs=this.T.jsonCopy(a)||{},this.callOptions)this.callOptions[n]=this.DEFAULT_CALL_OPTIONS[n];e=this.washAPIBody(e);var s="";this.T.notNothing(e)&&(s=JSON.stringify(e,null,2)),this.apiURL=t,this.apiBodyInput=s,this.show=!0},getExample:function(t,e){if(!this.apiBody)return null;t=t||"normal",e=e||{},e.asHTML=e.asHTML||!1,e.decodeURL=e.decodeURL||!1;var a=this.washAPIBody(this.apiBody)||{},n=null,s={};switch(t){case"normal":s=a||s,n=this.T.formatURL(this.apiURL,{query:s});break;case"simplified":s=a.kwargs||s,n=this.T.formatURL(this.apiURL_simplified,{query:s});break}return e.asHTML&&(n=this.prettyURLForHTML(n)),e.decodeURL&&(n=decodeURIComponent(n)),n},postExample:function(t,e){if(!this.apiBody)return null;t=t||"normal",e=e||{},e.oneLine=e.oneLine||!1,e.contentType=e.contentType||"json";var a=this.washAPIBody(this.apiBody)||{},n="\\\n",s=["curl",n,"-X","POST",n];switch(t){case"normal":this.T.notNothing(a)&&(s.push("-H",'"Content-Type: application/json"',n),s.push("-d","'".concat(JSON.stringify(a),"'"),n)),s.push(this.apiURL);break;case"simplified":if(this.T.notNothing(a.kwargs))switch(e.contentType){case"json":s.push("-H",'"Content-Type: application/json"',n),s.push("-d","'".concat(JSON.stringify(a.kwargs),"'"),n);break;case"form":if(this.supportFileUpload)for(var i in s.push("-H",'"Content-Type: multipart/form-data"',n),a.kwargs)s.push("-F","'".concat(i,"=").concat(a.kwargs[i],"'"),n);else s.push("-H",'"Content-Type: application/x-www-form-urlencoded"',n),s.push("-d","'".concat(this.T.formatQuery(a.kwargs),"'"),n);break}this.supportFileUpload&&s.push("-F","files=@UPLOAD_FILE_PATH",n),s.push(this.apiURL_simplified);break}e.oneLine&&(s=s.filter((function(t){return t!==n})));var o=s.join(" ");return o}},computed:{DEFAULT_CALL_OPTIONS:function(){return{execMode:"sync",saveResult:!1,timeout:this.$store.getters.SYSTEM_INFO("_FUNC_TASK_TIMEOUT_DEFAULT"),apiTimeout:this.$store.getters.SYSTEM_INFO("_FUNC_TASK_DEFAULT_API_TIMEOUT")}},showOptions:function(){return this.showExecModeOption||this.showSaveResultOption||this.showTimeoutOption||this.showAPITimeoutOption},showGet:function(){return this.showGetExample||this.showGetExampleSimplified},showPost:function(){return this.showPostExample||this.showPostExampleSimplified},apiURL_simplified:function(){return"".concat(this.apiURL,"/simplified")},apiBody:function(){if(!this.apiBodyInput)return{};var t=null;try{t=JSON.parse(this.apiBodyInput)}catch(e){return null}return t},onlyStringParameter:function(){if(!this.apiBody)return!1;var t=this.apiBody.kwargs||{};for(var e in t)if("string"!==typeof t[e])return!1;return!0},supportFileUpload:function(){return!(!this.apiKwargs||!this.apiKwargs.files)&&this.common.isFuncArgumentPlaceholder(this.apiKwargs.files)},supportCustomKwargs:function(){if(this.funcKwargs)for(var t in this.funcKwargs)if(0===t.indexOf("**"))return!0;return!1}},props:{title:String,showExecModeOption:{type:Boolean,default:!1},showSaveResultOption:{type:Boolean,default:!1},showTimeoutOption:{type:Boolean,default:!1},showAPITimeoutOption:{type:Boolean,default:!1},showGetExample:{type:Boolean,default:!0},showGetExampleSimplified:{type:Boolean,default:!1},showPostExample:{type:Boolean,default:!0},showPostExampleSimplified:{type:Boolean,default:!1}},data:function(){return{show:!1,apiURL:null,apiBodyInput:null,apiKwargs:null,funcKwargs:null,callOptions:{execMode:null,saveResult:null,timeout:null,apiTimeout:null}}}}),o=i,r=(a("6601"),a("2877")),l=a("1fe2"),c=a("a2ad"),u=Object(r["a"])(o,n,s,!1,null,"46fdc89a",null);"function"===typeof l["default"]&&Object(l["default"])(u),"function"===typeof c["default"]&&Object(c["default"])(u);e["a"]=u.exports},b4c0:function(t,e,a){"use strict";var n=a("8bbf"),s=a.n(n);e["default"]=s.a},bfc0:function(t,e,a){"use strict";a("5ec3")},d66c:function(t,e,a){"use strict";var n=a("1b5b"),s=a.n(n);e["default"]=s.a},da98:function(t,e,a){},ebfc:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"API Example":"API 调用示例","Request Options":"请求选项","Async":"异步执行","Save Result":"保留结果","Func Timeout":"函数超时","API Timeout":"API 超时","Input Parameters":"填写参数","Calling Example":"调用示例","Simple GET":"GET 简化形式","Normal GET":"GET 标准形式","Simple POST (JSON)":"POST 简化形式（JSON）","Simple POST (Form)":"POST 简化形式（表单）","Normal POST":"POST 标准形式","The JSON inside \\"kwargs\\" is the call parameter, modify its value and check out the calling example below":"\\"kwargs\\" 内的 JSON 即为调用参数，修改其中的值并在下方查看具体调用示例","This Python function allows additional parameters (**kwargs syntax)":"本 Python 函数支持传递额外的参数（**kwargs 语法）","This Python function allows uploading files, field name of the uploading file is \\"files\\"":"本 Python 函数支持文件上传，文件字段名为\\"files\\"","Invalid Parameters. Examples require a valid Body content":"参数填写存在错误，正确填写后将展示示例","Only string arguments are allowed in this from":"此方式参数值只支持字符串","Parameter \\"kwargs\\" should be URL encoded in HTTP request":"发送请求时，\\"kwargs\\" 参数需要进行 URL encode 编码","Parameter \\"options\\" are not supported in this from":"此方式不支持 \\"options\\" 参数","When posting form data, \\"Content-Type\\" should be \\"multipart/form-data\\" or \\"application/x-www-form-urlencoded\\", and the values of the fields support string value only":"POST 表单数据时，\\"Content-Type\\" 必须指定为 \\"multipart/form-data\\" 或 \\"application/x-www-form-urlencoded\\"，此时 Body 中参数值只支持字符串","When posting JSON data, \\"Content-Type\\" should be \\"application/json\\"":"POST JSON 数据时，\\"Content-Type\\" 必须指定为 \\"application/json\\"","When uploading files, \\"Content-Type\\" should be \\"multipart/form-data\\"":"上传文件时，\\"Content-Type\\" 必须指定为 \\"multipart/form-data\\"","File uploading is not supported in this this form":"此方式不支持文件上传","seconds":"秒"}}'),delete t.options._Ctor}}}]);