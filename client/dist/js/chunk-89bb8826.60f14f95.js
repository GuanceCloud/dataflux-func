(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89bb8826"],{"12ac":function(e,t,a){"use strict";a("1edf")},"1cc8":function(e,t,a){},"1d9a":function(e,t,a){"use strict";a("32f0")},"1edf":function(e,t,a){},"244c":function(e,t,a){},2966:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Jump to...":"跳转到...","Refresh":"刷新列表","Add Script":"添加脚本","Add Script Set":"添加脚本集","Edited":"已修改","Builtin":"内置","Locked by other user({user})":"被其他用户（{user}）锁定","Locked by you":"被您锁定","Quick View":"快速查看","View":"查看","Setup":"配置","Copy example":"复制示例","Copy {name} ID":"复制{name}ID","Example":"示例","Code edited but not published yet":"代码已修改但尚未发布","Import/Calling will run the published version":"引用/API调用实际将运行已发布代码","Script Set {id}":"脚本集 {id}","Script {id}":"脚本 {id}","Script Set pinned":"脚本集已置顶","Script Set unpinned":"脚本集已取消","Script Set locked":"脚本集已上锁","Script Set unlocked":"脚本集已解锁","Script locked":"脚本已上锁","Script unlocked":"脚本已解锁","Config":"配置","Auth":"认证","Expires":"过期","Throttling":"限流","Created":"创建","Run":"执行","lastSucceeded":"{t}调用成功","lastFailed":"{t}调用失败","lastRan":"{t}调用","successCount":"成功 {n}","failureCount":"失败 {n}","Are you sure you want to send a task of the Crontab Config?":"是否确认立刻发送此自动触发配置的任务？","Crontab Config Task sent":"自动触发配置任务已发送"}}'),delete e.options._Ctor}},"32f0":function(e,t,a){},"37a1":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Schema Browser":"结构浏览器","Guance DataWay":"观测云DataWay","SQL Debugger":"SQL 调试","URI Query Debugger":"URI Query 调试","Command Debugger":"命令调试","Databases":"数据库","Tables":"表","Fields":"字段","Data":"数据","Measurements":"指标","Tags":"标签","Indices":"索引","Collections":"集合","Retention Policies":"保留策略","Initials":"首字母","Keys (a part of)":"键（部分）","Other":"其他","Moving...":"调整位置...","Cannot connect to this Data Source, check the configs and try again.":"无法连接至数据源，请检查配置后重试。","Error Message":"错误信息如下","Query is running. It waits up to 5 seconds, You can refresh the page when it not response for a long time.":"查询执行中，最多等待 5 秒，长时间无响应后再尝试刷新页面","Results will be shown here...":"执行结果将显示在此...","Query Failed":"查询失败","Database":"数据库","Run":"执行","Query":"查询语句","Code":"代码","Result":"结果"}}'),delete e.options._Ctor}},"49d7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("split-pane",{ref:"vueSplitPane",attrs:{"min-percent":0,"default-percent":20,split:"vertical"},on:{resize:e.resizeVueSplitPane}},[a("template",{slot:"paneL"},[a("div",{staticClass:"aside"},[a("div",{staticClass:"aside-content"},[a("i",{staticClass:"icon-bg",class:e.currentTabIcon}),e._v(" "),a("el-tabs",{attrs:{stretch:"",type:"border-card"},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[a("el-tab-pane",{attrs:{label:e.$t("Script Lib"),name:"aside-script"}},[a("AsideScript",{ref:"asideScript"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.$t("Data Source"),name:"aside-data-source"}},[a("AsideDataSource",{ref:"asideDataSource"})],1),e._v(" "),a("el-tab-pane",{attrs:{label:e.$t("ENV"),name:"aside-env-variable"}},[a("AsideEnvVariable",{ref:"asideEnvVariable"})],1)],1)],1)])]),e._v(" "),a("template",{slot:"paneR"},[a("router-view")],1)],2)},i=[],r=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"aside-script-content"}},[a("el-select",{staticClass:"jump-to-select",attrs:{placeholder:e.$t("Jump to..."),"no-data-text":e.$t("No Data"),size:"small",filterable:!0,clearable:!0,"filter-method":e.doFilter},model:{value:e.selectFilterText,callback:function(t){e.selectFilterText=t},expression:"selectFilterText"}},e._l(e.selectShowOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}},[a("span",{staticClass:"select-item-name"},["scriptSet"===t.type?a("i",{staticClass:"fa fa-fw fa-folder"}):"script"===t.type?a("i",{staticClass:"fa fa-fw fa-file-code-o"}):"func"===t.type?a("el-tag",{attrs:{type:"info",size:"mini"}},[a("code",[e._v("def")])]):e._e(),e._v("\n        "+e._s(t.label)+"\n      ")],1),e._v(" "),a("code",{staticClass:"select-item-id"},[e._v("ID: "+e._s(t.id))])])})),1),e._v(" "),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",staticClass:"aside-tree",attrs:{data:e.data,"highlight-current":!0,"default-expand-all":!1,"default-expanded-keys":e.defaultExpandedNodeKeys,"auto-expand-parent":!1,"expand-on-click-node":!1,indent:10,"node-key":"id"},on:{"node-expand":e.onExpandNode,"node-collapse":e.onCollapseNode},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("span",{staticClass:"aside-tree-node",attrs:{"entry-id":i.id},on:{click:function(t){return e.openEntity(s,i)}}},[a("el-popover",{attrs:{placement:"right-start",trigger:"hover","popper-class":"aside-tip",disabled:!i.id,value:e.showPopoverId===i.id}},[a("div",{staticClass:"aside-tree-node-description"},[a("CopyButton",{attrs:{content:i.id,"tip-placement":"left"}}),e._v("\n          ID"+e._s(e.$t(":"))),a("code",{staticClass:"text-code"},[e._v(e._s(i.id))]),e._v(" "),"scriptSet"!==i.type&&"script"!==i.type||!i.description?e._e():a("pre",[e._v(e._s(i.description))])],1),e._v(" "),i.sampleCode?[a("div",{staticClass:"aside-tree-node-sample-code"},[i.sampleCode?a("CopyButton",{attrs:{content:i.sampleCode,"tip-placement":"left"}}):e._e(),e._v("\n            "+e._s(e.$t("Example"))+e._s(e.$t(":"))+"\n\n            "),a("pre",[e._v(e._s(i.sampleCode))])],1)]:e._e(),e._v(" "),i.isCodeEdited?[a("br"),e._v(" "),a("div",{staticClass:"code-edited-tip"},[a("span",{staticClass:"text-bad"},[e._v(e._s(e.$t("Code edited but not published yet"))),a("br"),e._v(e._s(e.$t("Import/Calling will run the published version")))])])]:e._e(),e._v(" "),"scriptSet"===i.type||"script"===i.type||"func"===i.type?[a("br"),e._v(" "),a("el-button-group",["scriptSet"===i.type?a("el-button",{attrs:{size:"mini",disabled:!i.isEditable},on:{click:function(t){return e.openEntity(s,i,"add")}}},[a("i",{staticClass:"fa fa-fw fa-plus"}),e._v("\n              "+e._s(e.$t("Add Script"))+"\n            ")]):e._e(),e._v(" "),"script"===i.type?a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.showQuickViewWindow(i.id)}}},[a("i",{staticClass:"fa fa-fw fa-window-restore"}),e._v("\n              "+e._s(e.$t("Quick View"))+"\n            ")]):e._e(),e._v(" "),"scriptSet"===i.type?a("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],attrs:{size:"mini",disabled:!i.isEditable},on:{click:function(t){return e.pinData(i.type,i.id,!i.isPinned)}}},[a("i",{staticClass:"fa fa-fw",class:[i.isPinned?"fa-thumb-tack fa-rotate-270":"fa-thumb-tack"]}),e._v("\n              "+e._s(i.isPinned?e.$t("Unpin"):e.$t("Pin"))+"\n            ")]):e._e(),e._v(" "),"scriptSet"===i.type||"script"===i.type?a("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],attrs:{size:"mini",disabled:!i.isEditable||"script"===i.type&&i.isLockedByScriptSet},on:{click:function(t){return e.lockData(i.type,i.id,!i.isLocked)}}},[a("i",{staticClass:"fa fa-fw",class:[i.isLocked?"fa-unlock":"fa-lock"]}),e._v("\n              "+e._s(i.isLocked?e.$t("Unlock"):e.$t("Lock"))+"\n            ")]):e._e(),e._v(" "),"scriptSet"===i.type||"script"===i.type?a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.openEntity(s,i,"setup")}}},[a("i",{staticClass:"fa fa-fw fa-wrench"}),e._v("\n              "+e._s(e.$t("Setup"))+"\n            ")]):e._e(),e._v(" "),"func"===i.type?a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.openRelEntity(s,i,"authLink")}}},[a("i",{staticClass:"fa fa-fw fa-link"}),e._v("\n              "+e._s(e.$t("Auth Link"))+"\n            ")]):e._e(),e._v(" "),"func"===i.type?a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.openRelEntity(s,i,"crontabConfig")}}},[a("i",{staticClass:"fa fa-fw fa-clock-o"}),e._v("\n              "+e._s(e.$t("Crontab Config"))+"\n            ")]):e._e(),e._v(" "),"func"===i.type?a("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.openRelEntity(s,i,"batch")}}},[a("i",{staticClass:"fa fa-fw fa-tasks"}),e._v("\n              "+e._s(e.$t("Batch"))+"\n            ")]):e._e()],1)]:e._e(),e._v(" "),a("div",{staticClass:"aside-item",attrs:{slot:"reference"},slot:"reference"},[a("span",{class:{"text-watch":i.isBuiltin,"text-bad":i.isPinned}},["refresh"===i.type?a("el-link",{attrs:{type:"primary"}},[a("i",{staticClass:"fa fa-fw fa-refresh"}),e._v(" "+e._s(e.$t("Refresh"))+"\n            ")]):"addScriptSet"===i.type?a("el-link",{attrs:{type:"primary"}},[a("i",{staticClass:"fa fa-fw fa-plus"}),e._v(" "+e._s(e.$t("Add Script Set"))+"\n            ")]):a("div",["scriptSet"===i.type?a("i",{staticClass:"fa fa-fw",class:[s.expanded?"fa-folder-open":"fa-folder"]}):"script"===i.type?a("i",{staticClass:"fa fa-fw fa-file-code-o"}):"func"===i.type?a("el-tag",{attrs:{type:"info",size:"mini"}},[a("code",[e._v("def")])]):e._e(),e._v(" "),i.isCodeEdited?a("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v(e._s(e.$t("Edited")))]):e._e(),e._v(" "),i.isBuiltin?a("el-tag",{attrs:{effect:"dark",type:i.isPinned?"danger":"warning",size:"mini"}},[e._v(e._s(e.$t("Builtin")))]):e._e(),e._v(" "),a("span",[e._v(e._s(s.label))])],1)],1),e._v(" "),a("div",[a("el-tooltip",{attrs:{effect:"dark",content:i.isLockedByOther?e.$t("Locked by other user({user})",{user:i.lockedByUser}):e.$t("Locked by you"),placement:"top",enterable:!1}},[a("i",{staticClass:"fa fa-fw",class:[i.isLocked?"fa-lock":"",(i.isLockedByOther?"text-bad":"text-good")+(i.isLockedByScriptSet?"-fade text-small":"")]})]),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:e.$t("Pinned"),placement:"top",enterable:!1}},[a("i",{staticClass:"fa fa-fw text-bad",class:[i.isPinned?"fa-thumb-tack":""]})])],1)])],2)],1)}}])}),e._v(" "),a("QuickViewWindow",{ref:"quickViewWindow"}),e._v(" "),a("APIExampleDialog",{ref:"apiExampleDialog",attrs:{showPostExample:!0,showPostExampleSimplified:!0,showGetExample:!0,showGetExampleSimplified:!0}}),e._v(" "),a("el-dialog",{attrs:{visible:e.showRelEntity,"close-on-click-modal":!1,width:"1050px"},on:{"update:visible":function(t){e.showRelEntity=t}}},[a("div",{attrs:{slot:"title"},slot:"title"},[a("FuncInfo",{attrs:{id:e.relEntityFunc.id,title:e.relEntityFunc.title,definition:e.relEntityFunc.definition,hideGotoFunc:!0}})],1),e._v(" "),a("el-tabs",{model:{value:e.relEntityTarget,callback:function(t){e.relEntityTarget=t},expression:"relEntityTarget"}},[a("el-tab-pane",{attrs:{name:"authLink"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"fa fa-fw fa-link"}),e._v(" "+e._s(e.$t("Auth Link")))]),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.showRelEntityData?a("el-table",{staticClass:"common-table",attrs:{data:e.relEntities.authLinks}},[a("el-table-column",{attrs:{label:e.$t("Auth Link")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-info"},[e._v("ID")]),e._v(" "),a("code",{staticClass:"text-code"},[e._v(e._s(t.row.id))]),a("CopyButton",{attrs:{content:t.row.id}}),e._v(" "),t.row.note?[a("br"),e._v(" "),a("span",{staticClass:"text-info"},[e._v("　"+e._s(e.$t("Note"))+e._s(e.$t(":")))]),e._v(" "),a("span",[e._v(e._s(t.row.note))])]:e._e()]}}],null,!1,2945054358)}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("Config"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Auth"))+e._s(e.$t(":")))]),e._v(" "),a("el-tooltip",{attrs:{content:t.row.apia_name,disabled:!t.row.apia_name,placement:"right"}},[a("span",{class:{"text-main":!!t.row.apia_id}},[e._v(e._s(e.C.API_AUTH_MAP.get(t.row.apia_type).name))])]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Expires"))+e._s(e.$t(":")))]),e._v(" "),t.row.expireTime?[a("RelativeDateTime",{class:e.T.isExpired(t.row.expireTime)?"text-bad":"text-good",attrs:{datetime:t.row.expireTime}})]:a("span",[e._v("-")]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Throttling"))+e._s(e.$t(":")))]),e._v(" "),e.T.isNothing(t.row.throttlingJSON)?a("span",[e._v("-")]):a("el-tooltip",{attrs:{placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._l(e.C.AUTH_LINK_THROTTLING,(function(s){return[t.row.throttlingJSON[s.key]?a("span",[e._v(e._s(e.$tc(s.name,t.row.throttlingJSON[s.key]))),a("br")]):e._e()]}))],2),e._v(" "),a("span",{staticClass:"text-bad"},[e._v(e._s(e.$t("ON")))])])]}}],null,!1,4220749632)}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("Status"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isDisabled?a("span",{staticClass:"text-bad"},[a("i",{staticClass:"fa fa-fw fa-ban"}),e._v(" "+e._s(e.$t("Disabled")))]):a("span",{staticClass:"text-good"},[a("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("Enabled")))]),e._v(" "),t.row.lastStartTime?[a("br"),e._v(" "),"success"===t.row.lastStatus?a("span",{staticClass:"text-good"},[a("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("lastSucceeded",{t:e.T.fromNow(t.row.lastStartTime)}))+"\n                ")]):"failure"===t.row.lastStatus?a("span",{staticClass:"text-bad"},[a("i",{staticClass:"fa fa-fw fa-times"}),e._v(" "+e._s(e.$t("lastFailed",{t:e.T.fromNow(t.row.lastStartTime)}))+"\n                ")]):a("span",{staticClass:"text-main"},[a("i",{staticClass:"fa fa-fw fa-clock-o"}),e._v(" "+e._s(e.$t("lastRan",{t:e.T.fromNow(t.row.lastStartTime)}))+"\n                ")]),e._v(" "),a("br"),e._v(" "),a("i",{staticClass:"fa fa-fw fa-pie-chart text-info"}),e._v(" "),a("span",{class:{"text-good":!!t.row.recentSuccessCount}},[e._v(e._s(e.$t("successCount",{n:e.T.numberLimit(t.row.recentSuccessCount)})))]),e._v("\n                / "),a("span",{class:{"text-bad":!!t.row.recentFailureCount}},[e._v(e._s(e.$t("failureCount",{n:e.T.numberLimit(t.row.recentFailureCount)})))])]:e._e()]}}],null,!1,2994765989)}),e._v(" "),a("el-table-column",{attrs:{align:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{disabled:e.T.isNothing(t.row.func_id)},on:{click:function(a){return e.showAPI(t.row,"/api/v1/al/:id")}}},[e._v(e._s(e.$t("Example")))])]}}],null,!1,1969161028)})],1):e._e()],1)],1),e._v(" "),a("el-tab-pane",{attrs:{name:"crontabConfig"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"fa fa-fw fa-clock-o"}),e._v(" "+e._s(e.$t("Crontab Config")))]),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.showRelEntityData?a("el-table",{staticClass:"common-table",attrs:{data:e.relEntities.crontabConfigs}},[a("el-table-column",{attrs:{label:e.$t("Crontab Config")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-info"},[e._v("ID")]),e._v(" "),a("code",{staticClass:"text-code"},[e._v(e._s(t.row.id))]),a("CopyButton",{attrs:{content:t.row.id}}),e._v(" "),t.row.note?[a("br"),e._v(" "),a("span",{staticClass:"text-info"},[e._v("　"+e._s(e.$t("Note"))+e._s(e.$t(":")))]),e._v(" "),a("span",[e._v(e._s(t.row.note))])]:e._e()]}}],null,!1,2945054358)}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("Config"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-info"},[e._v("Crontab"+e._s(e.$t(":")))]),e._v(" "),t.row.func_extraConfigJSON&&t.row.func_extraConfigJSON.fixedCrontab?[a("code",{staticClass:"text-code"},[e._v(e._s(t.row.func_extraConfigJSON.fixedCrontab))]),e._v(" "),a("el-tag",{attrs:{size:"mini"}},[e._v(e._s(e.$t("Fixed")))])]:t.row.crontab?a("code",{staticClass:"text-code"},[e._v(e._s(t.row.crontab))]):a("span",{staticClass:"text-bad"},[e._v(e._s(e.$t("Not Set")))]),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Created"))+e._s(e.$t(":")))]),e._v(" "),a("RelativeDateTime",{attrs:{datetime:t.row.createTime}}),e._v(" "),a("br"),e._v(" "),a("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Expires"))+e._s(e.$t(":")))]),e._v(" "),t.row.expireTime?[a("RelativeDateTime",{class:e.T.isExpired(t.row.expireTime)?"text-bad":"text-good",attrs:{datetime:t.row.expireTime}})]:a("span",[e._v("-")])]}}],null,!1,1964200627)}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("Status"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isDisabled?a("span",{staticClass:"text-bad"},[a("i",{staticClass:"fa fa-fw fa-ban"}),e._v(" "+e._s(e.$t("Disabled")))]):a("span",{staticClass:"text-good"},[a("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("Enabled")))]),e._v(" "),t.row.lastStartTime?[a("br"),e._v(" "),"success"===t.row.lastStatus?a("span",{staticClass:"text-good"},[a("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("lastSucceeded",{t:e.T.fromNow(t.row.lastStartTime)}))+"\n                ")]):"failure"===t.row.lastStatus?a("span",{staticClass:"text-bad"},[a("i",{staticClass:"fa fa-fw fa-times"}),e._v(" "+e._s(e.$t("lastFailed",{t:e.T.fromNow(t.row.lastStartTime)}))+"\n                ")]):a("span",{staticClass:"text-main"},[a("i",{staticClass:"fa fa-fw fa-clock-o"}),e._v(" "+e._s(e.$t("lastRan",{t:e.T.fromNow(t.row.lastStartTime)}))+"\n                ")]),e._v(" "),a("br"),e._v(" "),a("i",{staticClass:"fa fa-fw fa-pie-chart text-info"}),e._v(" "),a("span",{class:{"text-good":!!t.row.recentSuccessCount}},[e._v(e._s(e.$t("successCount",{n:e.T.numberLimit(t.row.recentSuccessCount)})))]),e._v("\n                / "),a("span",{class:{"text-bad":!!t.row.recentFailureCount}},[e._v(e._s(e.$t("failureCount",{n:e.T.numberLimit(t.row.recentFailureCount)})))])]:e._e()]}}],null,!1,2994765989)}),e._v(" "),a("el-table-column",{attrs:{align:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{disabled:!t.row.func_id},on:{click:function(a){return e.runCrontabTask(t.row)}}},[e._v("\n                "+e._s(e.$t("Run"))+"\n              ")])]}}],null,!1,1929442217)})],1):e._e()],1)],1),e._v(" "),a("el-tab-pane",{attrs:{name:"batch"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"fa fa-fw fa-tasks"}),e._v(" "+e._s(e.$t("Batch")))]),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.showRelEntityData?a("el-table",{staticClass:"common-table",attrs:{data:e.relEntities.batches}},[a("el-table-column",{attrs:{label:e.$t("Batch")},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-info"},[e._v("ID")]),e._v(" "),a("code",{staticClass:"text-code"},[e._v(e._s(t.row.id))]),a("CopyButton",{attrs:{content:t.row.id}}),e._v(" "),t.row.note?[a("br"),e._v(" "),a("span",{staticClass:"text-info"},[e._v("　"+e._s(e.$t("Note"))+e._s(e.$t(":")))]),e._v(" "),a("span",[e._v(e._s(t.row.note))])]:e._e()]}}],null,!1,2945054358)}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("Config"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Auth"))+e._s(e.$t(":")))]),e._v(" "),a("el-tooltip",{attrs:{content:t.row.apia_name,disabled:!t.row.apia_name,placement:"right"}},[a("span",{class:{"text-main":!!t.row.apia_id}},[e._v(e._s(e.C.API_AUTH_MAP.get(t.row.apia_type).name))])])]}}],null,!1,1006567290)}),e._v(" "),a("el-table-column",{attrs:{label:e.$t("Status"),width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isDisabled?a("span",{staticClass:"text-bad"},[a("i",{staticClass:"fa fa-fw fa-ban"}),e._v(" "+e._s(e.$t("Disabled")))]):a("span",{staticClass:"text-good"},[a("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("Enabled")))]),e._v(" "),t.row.lastStartTime?[a("br"),e._v(" "),"success"===t.row.lastStatus?a("span",{staticClass:"text-good"},[a("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("lastSucceeded",{t:e.T.fromNow(t.row.lastStartTime)}))+"\n                ")]):"failure"===t.row.lastStatus?a("span",{staticClass:"text-bad"},[a("i",{staticClass:"fa fa-fw fa-times"}),e._v(" "+e._s(e.$t("lastFailed",{t:e.T.fromNow(t.row.lastStartTime)}))+"\n                ")]):a("span",{staticClass:"text-main"},[a("i",{staticClass:"fa fa-fw fa-clock-o"}),e._v(" "+e._s(e.$t("lastRan",{t:e.T.fromNow(t.row.lastStartTime)}))+"\n                ")]),e._v(" "),a("br"),e._v(" "),a("i",{staticClass:"fa fa-fw fa-pie-chart text-info"}),e._v(" "),a("span",{class:{"text-good":!!t.row.recentSuccessCount}},[e._v(e._s(e.$t("successCount",{n:e.T.numberLimit(t.row.recentSuccessCount)})))]),e._v("\n                / "),a("span",{class:{"text-bad":!!t.row.recentFailureCount}},[e._v(e._s(e.$t("failureCount",{n:e.T.numberLimit(t.row.recentFailureCount)})))])]:e._e()]}}],null,!1,2994765989)}),e._v(" "),a("el-table-column",{attrs:{align:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{disabled:e.T.isNothing(t.row.func_id)},on:{click:function(a){return e.showAPI(t.row,"/api/v1/bat/:id")}}},[e._v(e._s(e.$t("Example")))])]}}],null,!1,2698023646)})],1):e._e()],1)],1)],1)],1)],1)}),n=[],o=a("c7eb"),l=a("1da1"),c=(a("498a"),a("4de4"),a("d3b7"),a("130f"),a("159b"),a("a4d3"),a("e01a"),a("99af"),a("a15b"),a("fb6a"),a("ac1f"),a("1276"),a("07ac"),a("4e82"),a("b64b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.show&&e.script,expression:"show && script"}],staticClass:"quick-view-window",class:{"quick-view-window-no-scoll":e.isDragging},style:{top:e.showPosition.top+"px",left:e.showPosition.left+"px"},attrs:{id:"quickViewWindow"}},[a("div",{staticClass:"quick-view-header",on:{mousedown:e.startDrag}},[a("span",{staticClass:"quick-view-title"},[a("span",[e._v(e._s(e.script.title||e.script.id))])]),e._v(" "),a("el-link",{staticClass:"quick-view-close",on:{click:function(t){return t.stopPropagation(),e.hideWindow()}},nativeOn:{mousedown:function(e){e.stopPropagation()}}},[a("i",{staticClass:"fa fa-times"}),e._v(" "+e._s(e.$t("Close")))])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDragging,expression:"isDragging"}],staticClass:"quick-view-dragging-cover"},[a("span",{staticClass:"quick-view-dragging-cover-tip"},[e._v(e._s(e.$t("Drag to place")))])]),e._v(" "),a("el-tabs",{attrs:{"tab-position":"bottom",type:"border-card"},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},[a("el-tab-pane",{attrs:{label:e.$t("Published"),name:"code"}},[a("div",{staticClass:"quick-view-code"},[a("textarea",{attrs:{id:"quickView_code"}})])]),e._v(" "),a("el-tab-pane",{attrs:{label:e.$t("Draft"),name:"codeDraft"}},[a("div",{staticClass:"quick-view-code"},[a("textarea",{attrs:{id:"quickView_codeDraft"}})])])],1)],1)}),d=[],u={name:"QuickViewWindow",components:{},watch:{selectedTab:function(e){var t=this;setImmediate((function(){switch(e){case"code":t.codeMirror_code.refresh();break;case"codeDraft":t.codeMirror_codeDraft.refresh();break}}))}},methods:{showWindow:function(e){var t=this;return Object(l["a"])(Object(o["a"])().mark((function a(){var s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.T.callAPI_get("/api/v1/scripts/:id/do/get",{params:{id:e}});case 2:if(s=a.sent,s.ok){a.next=5;break}return a.abrupt("return");case 5:t.show||t.$message({type:"warning",duration:3e3,message:"快速查看窗口仅在脚本侧边栏激活时显示，拖拽标题栏可以移动位置"}),t.script=s.data,t.show=!0,t.selectedTab="code",setImmediate((function(){t.fixShowPosition(),t.codeMirror_code||(t.codeMirror_code=t.T.initCodeMirror("quickView_code"),t.codeMirror_code.setOption("theme",t.T.getCodeMirrorThemeName()),t.T.setCodeMirrorReadOnly(t.codeMirror_code,!0)),t.codeMirror_codeDraft||(t.codeMirror_codeDraft=t.T.initCodeMirror("quickView_codeDraft"),t.codeMirror_codeDraft.setOption("theme",t.T.getCodeMirrorThemeName()),t.T.setCodeMirrorReadOnly(t.codeMirror_codeDraft,!0)),t.codeMirror_code.setValue(""),t.codeMirror_code.setValue(t.script.code||""),t.codeMirror_code.refresh(),t.codeMirror_codeDraft.setValue(""),t.codeMirror_codeDraft.setValue(t.script.codeDraft||""),t.codeMirror_codeDraft.refresh()}));case 10:case"end":return a.stop()}}),a)})))()},hideWindow:function(){this.show=!1},startDrag:function(e){var t=this,a=document.getElementById("quickViewWindow"),s=e.screenX-a.offsetLeft,i=e.screenY-a.offsetTop;this.isDragging=!0,document.onmousemove=function(r){var n=(r||e).screenX-s,o=(r||e).screenY-i,l=window.innerWidth-a.offsetWidth-10,c=window.innerHeight-a.offsetHeight-10;n<0&&(n=0),o<0&&(o=0),n>l&&(n=l),o>c&&(o=c);var d={left:n,top:o};t.dragPosition=d,t.$store.commit("updateAsideScript_quickViewWindowPosition",t.dragPosition),t.fixShowPosition()},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null,t.isDragging=!1}},fixShowPosition:function(){var e={top:this.dragPosition.top,left:this.dragPosition.left},t=document.getElementById("quickViewWindow");if(t){var a=window.innerWidth-t.offsetWidth-10,s=window.innerHeight-t.offsetHeight-10;e.left<0&&(e.left=0),e.top<0&&(e.top=0),e.left>a&&(e.left=a),e.top>s&&(e.top=s),this.showPosition=e}}},computed:{},props:{},data:function(){var e=this.$store.state.asideScript_quickViewWindowPosition||{left:10,top:10};return{show:!1,selectedTab:"code",showPosition:this.T.jsonCopy(e),dragPosition:this.T.jsonCopy(e),isDragging:!1,script:{},codeMirror_code:null,codeMirror_codeDraft:null}},mounted:function(){window.addEventListener("resize",this.fixShowPosition,!1)},beforeDestroy:function(){window.removeEventListener("resize",this.fixShowPosition,!1),this.T.destoryCodeMirror(this.codeMirror_code),this.T.destoryCodeMirror(this.codeMirror_codeDraft)}},p=u,f=(a("12ac"),a("aa16"),a("2877")),m=a("ce37"),b=Object(f["a"])(p,c,d,!1,null,"91f3d796",null);"function"===typeof m["default"]&&Object(m["default"])(b);var _=b.exports,h=a("b3fd"),v={name:"AsideScript",components:{QuickViewWindow:_,APIExampleDialog:h["a"]},watch:{$route:function(){this.showPopoverId=null},selectFilterText:function(e){if(e&&this.$refs.tree){var t=this.$refs.tree.getNode(e);this.openEntity(t,t.data)}},"$store.state.scriptListSyncTime":function(){this.loadData()},expandedNodeMap:function(e){this.$store.commit("updateAsideScript_expandedNodeMap",e)},relEntityTarget:function(e){var t=this;this.showRelEntityData=!1,this.$nextTick((function(){t.showRelEntityData=!0}))}},methods:{doFilter:function(e){e=(e||"").trim(),this.selectShowOptions=e?this.selectOptions.filter((function(t){return t.searchTEXT.indexOf(e)>=0})):this.selectOptions.filter((function(e){return"scriptSet"===e.type}))},onExpandNode:function(e,t){this.$set(this.expandedNodeMap,e.id,!0)},onCollapseNode:function(e,t){this.$delete(this.expandedNodeMap,e.id)},selectNode:function(e,t){var a=this;t=t||{},this.$refs.tree&&e&&setImmediate((function(){var s=a.$refs.tree.getNode(e);if(s&&s.data){a.$refs.tree.setCurrentKey(s.data.id);var i=s.parent;while(i)i.expand(),a.onExpandNode(i.data,i),i=i.parent;t.expandChildren&&(s.expand(),a.onExpandNode(s.data,s)),setTimeout((function(){var e=document.getElementById("aside-script-content"),t=document.querySelector('[entry-id="'.concat(s.data.id,'"]')),a=0,i=35;if(e.scrollTop+i>t.offsetTop)a=t.offsetTop-i;else{if(!(e.scrollTop+e.offsetHeight<t.offsetTop))return;a=t.offsetTop-e.offsetHeight+t.offsetHeight}e.scrollTo({top:a,behavior:"smooth"})}),300)}}))},loadData:function(){var e=this;return Object(l["a"])(Object(o["a"])().mark((function t(){var a,s,i,r,n,l,c,d,u,p,f;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.T.isNothing(e.data)&&(e.loading=!0),a={},s={},i={},r={},t.next=7,e.T.callAPI_getAll("/api/v1/script-sets/do/list",{query:{fields:["id","title","description","lockedByUserId","lockedByUserUsername","lockedByUserName","pinTime","isBuiltin"]}});case 7:if(n=t.sent,n.ok){t.next=10;break}return t.abrupt("return");case 10:return n.data.forEach((function(t){a[t.id]="scriptSet",t.description=e.T.limitLines(t.description,10);var i="".concat(t.lockedByUserName||t.lockedByUsername),r=t.lockedByUserId===e.$store.getters.userId,n=t.lockedByUserId&&!r,o=e.$store.getters.isAdmin||!n,l=r||n,c=!!t.pinTime;s[t.id]={id:t.id,label:t.title||t.id,type:"scriptSet",lockedByUser:i,isLockedByMe:r,isLockedByOther:n,isEditable:o,isLocked:l,isPinned:c,pinTime:t.pinTime,isBuiltin:t.isBuiltin,searchTEXT:"".concat(t.title," ").concat(t.id),title:t.title,description:t.description,children:[]}})),t.next=13,e.T.callAPI_getAll("/api/v1/scripts/do/list",{query:{fields:["id","title","description","scriptSetId","codeMD5","codeDraftMD5","lockedByUserId","lockedByUserUsername","lockedByUserName","sset_lockedByUserId","sset_lockedByUserUsername","sset_lockedByUserName"]}});case 13:if(n=t.sent,n.ok){t.next=16;break}return t.abrupt("return");case 16:return window._DFF_scriptIds=[],n.data.forEach((function(t){window._DFF_scriptIds.push(t.id),a[t.id]="script",t.description=e.T.limitLines(t.description,10);var r=t.id.split("__").slice(1).join("__"),n="import ".concat(t.id," as ").concat(r),o=t.codeMD5!==t.codeDraftMD5,l=t.sset_lockedByUserId||t.lockedByUserId,c=t.sset_lockedByUserId?"".concat(t.sset_lockedByUserName||t.sset_lockedByUsername):"".concat(t.lockedByUserName||t.lockedByUsername),d=l===e.$store.getters.userId,u=l&&!d,p=d||u,f=p&&!!t.sset_lockedByUserId,m=e.$store.getters.isAdmin||!u;i[t.id]={id:t.id,scriptSetId:t.scriptSetId,label:t.title||r,type:"script",isCodeEdited:o,lockedByUser:c,isLockedByMe:d,isLockedByOther:u,isLocked:p,isLockedByScriptSet:f,isEditable:m,searchTEXT:"".concat(t.title," ").concat(t.id),title:t.title,description:t.description,sampleCode:n,children:[]},s[t.scriptSetId]&&s[t.scriptSetId].children.push(i[t.id])})),t.next=20,e.T.callAPI_getAll("/api/v1/funcs/do/list",{query:{fields:["id","title","description","definition","scriptSetId","scriptId","sset_type","integration","extraConfigJSON"]}});case 20:if(n=t.sent,n.ok){t.next=23;break}return t.abrupt("return");case 23:for(d in window._DFF_funcIds=[],n.data.forEach((function(t){window._DFF_funcIds.push(t.id),a[t.id]="func",t.description=e.T.limitLines(t.description,10);var s=t.scriptId.split("__").slice(1).join("__"),n="import ".concat(t.scriptId," as ").concat(s,"\n").concat(s,".").concat(t.definition);r[t.id]={id:t.id,scriptSetId:t.scriptSetId,scriptId:t.scriptId,label:t.title||t.id,type:"func",definition:t.definition,searchTEXT:"".concat(t.title," ").concat(t.id),title:t.title,description:t.description,sampleCode:n,disabled:!e.$store.state.codeEditor_isCodeLoaded,integration:t.integration,extraConfigJSON:t.extraConfigJSON},i[t.scriptId]&&i[t.scriptId].children.push(r[t.id])})),l=Object.values(s),l.forEach((function(t){t.children.sort(e.T.asideItemSorter)})),l.sort(e.T.asideItemSorter),l.unshift({type:"addScriptSet"}),l.unshift({type:"refresh"}),c=e.T.jsonCopy(e.$store.state.asideScript_expandedNodeMap),c)a[d]||delete c[d];for(u in e.$store.commit("updateAsideScript_expandedNodeMap",c),c=e.T.jsonCopy(e.$store.state.codeEditor_highlightedLineConfigMap),c)i[u]&&!e.T.isNothing(c[u])||delete c[u];for(p in e.$store.commit("updateCodeEditor_highlightedLineConfigMap",c),c=e.T.jsonCopy(e.$store.state.codeViewer_highlightedLineConfigMap),c)i[p]&&!e.T.isNothing(c[p])||delete c[p];e.$store.commit("updateCodeViewer_highlightedLineConfigMap",c),f=[],[s,i,r].forEach((function(t){var a=Object.values(t);a.sort(e.T.asideItemSorter),f=f.concat(a)})),e.loading=!1,e.data=l,e.selectOptions=f,e.selectShowOptions=f,e.expandedNodeMap=e.$store.state.asideScript_expandedNodeMap||{},e.defaultExpandedNodeKeys=Object.keys(e.expandedNodeMap),e.selectNode(e.$route.params.id);case 48:case"end":return t.stop()}}),t)})))()},pinData:function(e,t,a){var s=this;return Object(l["a"])(Object(o["a"])().mark((function i(){var r,n,l;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:r=null,n=null,i.t0=e,i.next="scriptSet"===i.t0?5:8;break;case 5:return r="/api/v1/script-sets/:id/do/modify",n=a?s.$t("Script Set pinned"):s.$t("Script Set unpinned"),i.abrupt("break",9);case 8:return i.abrupt("return");case 9:return i.next=11,s.T.callAPI("post",r,{params:{id:t},body:{data:{isPinned:a}},alert:{okMessage:n}});case 11:if(l=i.sent,l.ok){i.next=14;break}return i.abrupt("return");case 14:s.$store.commit("updateScriptListSyncTime");case 15:case"end":return i.stop()}}),i)})))()},lockData:function(e,t,a){var s=this;return Object(l["a"])(Object(o["a"])().mark((function i(){var r,n,l;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:r=null,n=null,i.t0=e,i.next="scriptSet"===i.t0?5:"script"===i.t0?8:11;break;case 5:return r="/api/v1/script-sets/:id/do/modify",n=a?s.$t("Script Set locked"):s.$t("Script Set unlocked"),i.abrupt("break",11);case 8:return r="/api/v1/scripts/:id/do/modify",n=a?s.$t("Script locked"):s.$t("Script unlocked"),i.abrupt("break",11);case 11:return i.next=13,s.T.callAPI("post",r,{params:{id:t},body:{data:{isLocked:a}},alert:{okMessage:n}});case 13:if(l=i.sent,l.ok){i.next=16;break}return i.abrupt("return");case 16:s.$store.commit("updateScriptListSyncTime");case 17:case"end":return i.stop()}}),i)})))()},showQuickViewWindow:function(e){this.$refs.quickViewWindow.showWindow(e)},openEntity:function(e,t,a){var s=this,i=function(e){"code-editor"===s.$route.name&&s.$route.params.id!==e&&s.$store.commit("updateCodeEditor_isCodeLoaded",!1)};switch(t.type){case"refresh":this.loadData();break;case"addScriptSet":this.$router.push({name:"script-set-add"});break;case"scriptSet":"add"===a?(this.selectNode(t.id,{expandChildren:!0}),this.$router.push({name:"script-add",params:{id:t.id}})):"setup"===a?(this.selectNode(t.id,{expandChildren:!1}),this.$router.push({name:"script-set-setup",params:{id:t.id}})):this.selectNode(t.id,{expandChildren:!0});break;case"script":"setup"===a?(this.selectNode(t.id,{expandChildren:!1}),this.$router.push({name:"script-setup",params:{id:t.id}})):"code-viewer"!==this.$route.name&&"code-editor"!==this.$route.name||t.id!==this.$route.params.id?(this.selectNode(t.id,{expandChildren:!0}),i(t.id),this.$router.push({name:"code-viewer",params:{id:t.id}})):this.selectNode(t.id,{expandChildren:!0});break;case"func":this.$store.commit("updateEditor_selectedItemId",t.id),"code-viewer"!==this.$route.name&&"code-editor"!==this.$route.name||t.scriptId!==this.$route.params.id?(this.selectNode(t.id,{expandChildren:!1}),i(t.scriptId),this.$router.push({name:"code-viewer",params:{id:t.scriptId}})):this.selectNode(t.id,{expandChildren:!1});break;default:console.error("Unexcepted data type: ".concat(t.type));break}},loadRelEntityData:function(e){var t=this;return Object(l["a"])(Object(o["a"])().mark((function e(){var a,s;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=null,s={query:{_withTaskInfo:!0,origin:"UI",pageSize:100}},e.next=4,t.T.callAPI_get("/api/v1/auth-links/do/list",s);case 4:return a=e.sent,a.ok&&(t.relEntities.authLinks=a.data),e.next=8,t.T.callAPI_get("/api/v1/crontab-configs/do/list",s);case 8:return a=e.sent,a.ok&&(t.relEntities.crontabConfigs=a.data),e.next=12,t.T.callAPI_get("/api/v1/batches/do/list",s);case 12:a=e.sent,a.ok&&(t.relEntities.batches=a.data);case 14:case"end":return e.stop()}}),e)})))()},openRelEntity:function(e,t,a){var s=this;return Object(l["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.loadRelEntityData(t.id);case 2:s.relEntityFunc=t,s.relEntityTarget=a,s.showRelEntity=!0,s.showPopoverId=null;case 6:case"end":return e.stop()}}),e)})))()},showAPI:function(e,t){var a=this;return Object(l["a"])(Object(o["a"])().mark((function s(){var i,r,n,l,c,d;return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,a.T.callAPI_getOne("/api/v1/funcs/do/list",e.funcId);case 2:if(i=s.sent,i.ok){s.next=5;break}return s.abrupt("return");case 5:for(c in r=i.data.kwargsJSON,n=a.T.formatURL(t,{baseURL:!0,params:{id:e.id}}),l={},e.funcCallKwargsJSON)e.funcCallKwargsJSON.hasOwnProperty(c)&&a.common.isFuncArgumentPlaceholder(e.funcCallKwargsJSON[c])&&(l[c]=e.funcCallKwargsJSON[c]);d={kwargs:l},a.$refs.apiExampleDialog.update(n,d,r);case 11:case"end":return s.stop()}}),s)})))()},runCrontabTask:function(e){var t=this;return Object(l["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.T.confirm(t.$t("Are you sure you want to send a task of the Crontab Config?"));case 2:if(a.sent){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,t.T.callAPI_get("/api/v1/cron/:id",{params:{id:e.id},alert:{okMessage:t.$t("Crontab Config Task sent")}});case 6:a.sent;case 7:case"end":return a.stop()}}),a)})))()}},computed:{highlightedFuncId:function(){switch(this.$route.name){case"code-editor":case"code-viewer":return this.$store.state.Editor_selectedItemId;default:return null}}},props:{},data:function(){return{loading:!1,data:[],selectFilterText:"",selectOptions:[],selectShowOptions:[],showPopoverId:null,expandedNodeMap:{},defaultExpandedNodeKeys:[],showRelEntity:!1,showRelEntityData:!1,relEntityTarget:"",relEntityFunc:{},relEntities:{authLinks:[],crontabConfigs:[],batches:[]}}},created:function(){this.loadData()}},y=v,w=(a("b1d2"),a("8eb3")),g=a("f48b"),C=Object(f["a"])(y,r,n,!1,null,"722babfa",null);"function"===typeof w["default"]&&Object(w["default"])(C),"function"===typeof g["default"]&&Object(g["default"])(C);var E=C.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"aside-data-source-content"}},[a("el-select",{staticClass:"jump-to-select",attrs:{placeholder:e.$t("Jump to..."),"no-data-text":e.$t("No Data"),size:"small",filterable:!0,clearable:!0,"filter-method":e.doFilter},model:{value:e.selectFilterText,callback:function(t){e.selectFilterText=t},expression:"selectFilterText"}},e._l(e.selectShowOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}},[a("span",{staticClass:"select-item-name"},[a("el-tag",{staticClass:"aside-tree-node-tag",attrs:{type:e.C.DATA_SOURCE_MAP.get(t.dataSourceType).tagType,size:"mini"}},[e._v(e._s(e.C.DATA_SOURCE_MAP.get(t.dataSourceType).name))]),e._v("\n        "+e._s(t.label)+"\n      ")],1),e._v(" "),a("code",{staticClass:"select-item-id"},[e._v("ID: "+e._s(t.id))])])})),1),e._v(" "),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",staticClass:"aside-tree",attrs:{data:e.data,"highlight-current":!0,indent:10,"node-key":"id"},on:{"current-change":e.onSelectNode},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("span",{staticClass:"aside-tree-node",attrs:{"entry-id":i.id},on:{click:function(t){return e.openEntity(s,i)}}},[a("el-popover",{attrs:{placement:"right-start",trigger:"hover","popper-class":"aside-tip",disabled:!i.id,value:e.showPopoverId===i.id}},[a("div",{staticClass:"aside-tree-node-description"},[a("div",[a("el-tag",{staticClass:"aside-tree-node-tag-title",attrs:{type:e.C.DATA_SOURCE_MAP.get(i.dataSourceType).tagType,size:"mini"}},[e._v(e._s(e.C.DATA_SOURCE_MAP.get(i.dataSourceType).name))])],1),e._v(" "),a("CopyButton",{attrs:{content:i.id,"tip-placement":"left"}}),e._v("\n          ID"+e._s(e.$t(":"))),a("code",{staticClass:"text-code"},[e._v(e._s(i.id))]),e._v(" "),i.description?a("pre",[e._v(e._s(i.description))]):e._e()],1),e._v(" "),i.sampleCode?[a("div",{staticClass:"aside-tree-node-sample-code"},[i.sampleCode?a("CopyButton",{attrs:{content:i.sampleCode,"tip-placement":"left"}}):e._e(),e._v("\n            "+e._s(e.$t("Example"))+e._s(e.$t(":"))+"\n\n            "),a("pre",[e._v(e._s(i.sampleCode))])],1)]:e._e(),e._v(" "),a("br"),e._v(" "),a("el-button-group",[e.C.DATA_SOURCE_MAP.get(i.dataSourceType).debugSupported?a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.showSimpleDebugWindow(i.dataSource)}}},[a("i",{staticClass:"fa fa-fw fa-window-restore"}),e._v("\n            "+e._s(e.$t("Simple Debug"))+"\n          ")]):e._e(),e._v(" "),a("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],attrs:{size:"small"},on:{click:function(t){return e.pinData(i.type,i.id,!i.isPinned)}}},[a("i",{staticClass:"fa fa-fw",class:[i.isPinned?"fa-thumb-tack fa-rotate-270":"fa-thumb-tack"]}),e._v("\n            "+e._s(i.isPinned?e.$t("Unpin"):e.$t("Pin"))+"\n          ")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.openEntity(s,i,"setup")}}},[a("i",{staticClass:"fa fa-fw",class:[i.isBuiltin?"fa-search":"fa-wrench"]}),e._v("\n            "+e._s(i.isBuiltin?e.$t("View"):e.$t("Setup"))+"\n          ")])],1),e._v(" "),a("div",{staticClass:"aside-item",attrs:{slot:"reference"},slot:"reference"},[a("span",{class:{"text-watch":i.isBuiltin,"text-bad":i.isPinned}},["refresh"===i.type?a("el-link",{attrs:{type:"primary"}},[a("i",{staticClass:"fa fa-fw fa-refresh"}),e._v(" "+e._s(e.$t("Refresh"))+"\n            ")]):"addDataSource"===i.type?a("el-link",{attrs:{type:"primary"}},[a("i",{staticClass:"fa fa-fw fa-plus"}),e._v(" "+e._s(e.$t("Add Data Source"))+"\n            ")]):a("div",[a("el-tag",{staticClass:"aside-tree-node-tag",attrs:{type:e.C.DATA_SOURCE_MAP.get(i.dataSourceType).tagType,size:"mini"}},[e._v(e._s(e.C.DATA_SOURCE_MAP.get(i.dataSourceType).name))]),e._v(" "),i.isBuiltin?a("el-tag",{attrs:{effect:"dark",type:"warning",size:"mini"}},[e._v(e._s(e.$t("Builtin")))]):e._e(),e._v(" "),a("span",[e._v(e._s(s.label))])],1)],1),e._v(" "),a("div",[a("el-tooltip",{attrs:{effect:"dark",content:e.$t("Pinned"),placement:"top",enterable:!1}},[a("i",{staticClass:"fa fa-fw text-bad",class:[i.isPinned?"fa-thumb-tack":""]})])],1)])],2)],1)}}])}),e._v(" "),a("SimpleDebugWindow",{ref:"simpleDebugWindow"})],1)},S=[],T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show&&e.dataSource?a("div",{staticClass:"simple-debug-window",style:{top:e.showPosition.top+"px",left:e.showPosition.left+"px"},attrs:{id:"simpleDebugWindow"}},[a("div",{staticClass:"simple-debug-header",on:{mousedown:e.startDrag}},[a("span",{staticClass:"simple-debug-title"},[a("el-tag",{attrs:{type:e.DATA_SOURCE_DEBUGGER_META_MAP[e.dataSource.type].tagType,size:"mini"}},[a("span",[e._v(e._s(e.DATA_SOURCE_DEBUGGER_META_MAP[e.dataSource.type].name))])]),e._v(" "),a("span",{class:{builtin:e.dataSource.isBuiltin}},[e._v(e._s(e.dataSource.title||e.dataSource.id))])],1),e._v(" "),a("el-link",{staticClass:"simple-debug-close",on:{click:function(t){return t.stopPropagation(),e.hideWindow()}},nativeOn:{mousedown:function(e){e.stopPropagation()}}},[a("i",{staticClass:"fa fa-times"}),e._v(" "+e._s(e.$t("Close")))])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isDragging,expression:"isDragging"}],staticClass:"simple-debug-dragging-cover"},[a("span",{staticClass:"simple-debug-dragging-cover-tip"},[e._v(e._s(e.$t("Moving...")))])]),e._v(" "),a("el-tabs",{class:{"simple-debug-window-fade":e.isDragging},attrs:{"tab-position":"bottom",type:"border-card"},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},[e.DATA_SOURCE_DEBUGGER_META_MAP[e.dataSource.type].supportBrowser?a("el-tab-pane",{attrs:{label:e.$t("Schema Browser"),name:"browser"}},[a("div",{staticClass:"simple-debug-browser"},[e.browserCascaderErrorMessage?a("el-link",{attrs:{type:"danger"}},[e._v("\n          "+e._s(e.$t("Cannot connect to this Data Source, check the configs and try again."))+"\n          "),a("br"),e._v(e._s(e.$t("Error Message"))+e._s(e.$t(":"))+"\n          "),a("pre",{staticClass:"simple-debug-browser-error"},[e._v(e._s(e.browserCascaderErrorMessage))])]):a("el-form",[a("el-form-item",[a("el-cascader-panel",{ref:"browserCascader",staticClass:"simple-debug-browser-cascader",attrs:{placeholder:"--",size:"mini",props:e.browserCascaderProps},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("div",{staticClass:"simple-debug-browser-cascader-item",on:{click:function(t){return e.updateCodeExample(s)}}},[i.showDefaultTag?a("el-tag",{attrs:{plain:"",size:"mini"}},[e._v(e._s(e.$t("Default")))]):e._e(),e._v(" "),i.dbTag?a("el-tag",{attrs:{plain:"",type:i.dbTag.type,size:"mini"}},[e._v(e._s(i.dbTag.title))]):e._e(),e._v(" "),a("span",{class:{"text-bad":i.isError}},[e._v(e._s(i.label||i.value))]),e._v(" "),i.itemCount?a("span",[e._v(" ("+e._s(i.itemCount)+") ")]):e._e()],1)}}],null,!1,2840819864)})],1),e._v(" "),a("el-form-item",[a("pre",{staticClass:"simple-debug-browser-example-code",attrs:{rows:"2"}},[e._v(e._s(e.browserCascaderExampleCode))]),e._v(" "),a("div",{staticClass:"simple-debug-browser-example-code-edit"},[a("i",{staticClass:"fa fa-fw fa-terminal text-main"})]),e._v(" "),a("CopyButton",{directives:[{name:"show",rawName:"v-show",value:e.browserCascaderExampleCode,expression:"browserCascaderExampleCode"}],staticClass:"simple-debug-browser-example-code-copy",attrs:{content:e.browserCascaderExampleCode}})],1)],1)],1)]):e._e(),e._v(" "),e.DATA_SOURCE_DEBUGGER_META_MAP[e.dataSource.type].supportDebugger?a("el-tab-pane",{attrs:{label:e.DATA_SOURCE_DEBUGGER_META_MAP[e.dataSource.type].debuggerName,name:"debugger"}},[a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.isQuerying,expression:"isQuerying",modifiers:{lock:!0}}],staticClass:"simple-debug-sql",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":e.$t("Query is running. It waits up to 5 seconds, You can refresh the page when it not response for a long time.")}},[a("el-form",[a("el-form-item",[a("el-input",{attrs:{type:"textarea",resize:"none",rows:"3"},model:{value:e.latestQueryOptionsMap[e.dataSource.id].queryStatement,callback:function(t){e.$set(e.latestQueryOptionsMap[e.dataSource.id],"queryStatement",t)},expression:"latestQueryOptionsMap[dataSource.id].queryStatement"}})],1),e._v(" "),a("el-form-item",[e.DATA_SOURCE_DEBUGGER_META_MAP[e.dataSource.type].supportDatabase?[a("span",[e._v(e._s(e.$t("Database")))]),e._v(" "),e.dataSource.configJSON.database?a("el-input",{staticClass:"simple-debug-database",attrs:{size:"mini",disabled:!0,value:e.dataSource.configJSON.database}}):a("el-input",{staticClass:"simple-debug-database",attrs:{size:"mini"},model:{value:e.latestQueryOptionsMap[e.dataSource.id].database,callback:function(t){e.$set(e.latestQueryOptionsMap[e.dataSource.id],"database",t)},expression:"latestQueryOptionsMap[dataSource.id].database"}})]:e._e(),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){return t.stopPropagation(),e.queryDataSource(e.latestQueryOptionsMap[e.dataSource.id])}}},[a("i",{staticClass:"fa fa-fw fa-play"}),e._v(" "+e._s(e.$t("Run"))+"\n            ")]),e._v(" "),e.latestQueryResultMap[e.dataSource.id]&&e.latestQueryResultMap[e.dataSource.id].ok?a("div",{staticClass:"simple-debug-copy-content"},[a("CopyButton",{attrs:{tipPlacement:"bottom",title:e.$t("Query"),content:e.latestQueryOptionsMap[e.dataSource.id].queryStatement}}),e._v("\n               \n              "),a("CopyButton",{attrs:{tipPlacement:"bottom",title:e.$t("Code"),content:e.latestQueryOptionsMap[e.dataSource.id].queryCode}}),e._v("\n               \n              "),a("CopyButton",{attrs:{tipPlacement:"bottom",title:e.$t("Result"),content:e.latestQueryResultMap[e.dataSource.id].data}})],1):e._e()],2),e._v(" "),a("el-form-item",[a("pre",{staticClass:"simple-debug-result",class:{"simple-debug-query-failed":e.latestQueryResultMap[e.dataSource.id]&&!e.latestQueryResultMap[e.dataSource.id].ok},attrs:{rows:"5"}},[e._v(e._s(e.latestQueryResultMap[e.dataSource.id]&&e.latestQueryResultMap[e.dataSource.id].data||e.$t("Results will be shown here...")))])])],1)],1)]):e._e()],1)],1):e._e()},k=[],O=(a("4c53"),a("5319"),a("ddb0"),a("aa09")),$=a.n(O),D={name:"SimpleDebugWindow",components:{},watch:{dataSource:function(e){this.$refs.browserCascader&&(this.$refs.browserCascader.clearCheckedNodes(),this.$refs.browserCascader.initStore(),this.browserCascaderExampleCode="")}},methods:{showWindow:function(e){var t=this;return Object(l["a"])(Object(o["a"])().mark((function a(){var s,i,r,n,l;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.browserCascaderErrorMessage="",s=t.DATA_SOURCE_DEBUGGER_META_MAP[e.type],s.supportDebugger&&(i=s.command,r=s.exampleCommandArgs,t.latestQueryOptionsMap[e.id]||(n="helper = DFF.SRC('".concat(e.id,"')"),l="helper.".concat(i,"('").concat(r.join("', '"),"')"),t.$set(t.latestQueryOptionsMap,e.id,{database:e.database,queryStatement:r.join(" "),queryCode:"".concat(n,"\n").concat(l)}))),t.dataSource=e,t.show=!0,s.supportBrowser?t.selectedTab="browser":s.supportDebugger&&(t.selectedTab="debugger"),setImmediate((function(){t.fixShowPosition()}));case 7:case"end":return a.stop()}}),a)})))()},hideWindow:function(){this.show=!1},startDrag:function(e){var t=this,a=document.getElementById("simpleDebugWindow"),s=e.screenX-a.offsetLeft,i=e.screenY-a.offsetTop;this.isDragging=!0,document.onmousemove=function(r){var n=(r||e).screenX-s,o=(r||e).screenY-i,l=window.innerWidth-a.offsetWidth-10,c=window.innerHeight-a.offsetHeight-10;n<0&&(n=0),o<0&&(o=0),n>l&&(n=l),o>c&&(o=c);var d={left:n,top:o};t.dragPosition=d,t.$store.commit("updateAsideDataSource_simpleDebugWindowPosition",t.dragPosition),t.fixShowPosition()},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null,t.isDragging=!1}},fixShowPosition:function(){var e={top:this.dragPosition.top,left:this.dragPosition.left},t=document.getElementById("simpleDebugWindow");if(t){var a=window.innerWidth-t.offsetWidth-10,s=window.innerHeight-t.offsetHeight-10;e.left<0&&(e.left=0),e.top<0&&(e.top=0),e.left>a&&(e.left=a),e.top>s&&(e.top=s),this.showPosition=e}},queryDataSource:function(e){var t=this;return Object(l["a"])(Object(o["a"])().mark((function a(){var s,i,r,n,l,c,d,u;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isQuerying=!0,a.next=3,t.T.callAPI("post","/api/v1/data-sources/:id/do/query",{params:{id:t.dataSource.id},body:{database:e.database,queryStatement:e.queryStatement,returnType:"repr"},alert:{muteError:!0},extraOptions:{noCountProcessing:!0}});case 3:if(s=a.sent,i={ok:s.ok},!s.ok){a.next=33;break}i.data="# pprint.pprint(db_res)\n"+s.data,r=t.DATA_SOURCE_DEBUGGER_META_MAP[t.dataSource.type].command,n=null,l="",c="",a.t0=t.dataSource.type,a.next="influxdb"===a.t0?14:"mysql"===a.t0||"clickhouse"===a.t0||"oracle"===a.t0||"sqlserver"===a.t0||"postgresql"===a.t0?17:"redis"===a.t0||"memcached"===a.t0?20:"elasticsearch"===a.t0?25:28;break;case 14:return n=[e.queryStatement],c="if len(db_res.get('series', [])) > 0:\n    for d in db_res['series'][0]['values']:\n        # Your code here...\n        pass",a.abrupt("break",28);case 17:return n=[e.queryStatement],c="for d in db_res:\n    # Your code here...\n    pass",a.abrupt("break",28);case 20:return n=$()(e.queryStatement),l=s.data+"",t.validator.isInt(l)?c="db_res = int(db_res)\n":t.validator.isFloat(l)&&(c="db_res = float(db_res)\n"),c+="\n# Your code...",a.abrupt("break",28);case 25:return n=[e.queryStatement],c+="\n# Your code...",a.abrupt("break",28);case 28:d="helper = DFF.SRC('".concat(t.dataSource.id,"')"),u="db_res = helper.".concat(r,"('").concat((n||[]).join("', '"),"')"),t.$set(t.latestQueryOptionsMap,t.dataSource.id,{database:e.database,queryStatement:e.queryStatement,queryCode:"".concat(d,"\n").concat(u,"\n").concat(c)}),a.next=37;break;case 33:i.data=t.$t("Query Failed"),s.message&&(i.data+="\n\n"+s.message),s.detail&&s.detail.error&&(i.data+="\n\n"+s.detail.error),s.detail&&s.detail.message&&(i.data+="\n\n"+s.detail.message);case 37:t.$set(t.latestQueryResultMap,t.dataSource.id,i),t.isQuerying=!1;case 39:case"end":return a.stop()}}),a)})))()},browserDataLoader:function(e,t){var a=this;return Object(l["a"])(Object(o["a"])().mark((function s(){var i,r,n,l,c,d,u,p,f,m,b,_,h,v;return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e.isLeaf){s.next=2;break}return s.abrupt("return",t());case 2:if(i=a.DATA_SOURCE_DEBUGGER_META_MAP[a.dataSource.type],i.browsers){s.next=5;break}return s.abrupt("return",t());case 5:if(r=[],e.root){s.next=18;break}n=e,l=0;case 9:if(!(l<10)){s.next=17;break}if(n&&!n.root&&n.data){s.next=12;break}return s.abrupt("break",17);case 12:r.push(n.data),n=n.parent;case 14:l++,s.next=9;break;case 17:r.reverse();case 18:c=i.browsers,d=0;case 20:if(!(d<e.level)){s.next=38;break}s.t0=c.type,s.next="static"===s.t0?24:"query"===s.t0||"api"===s.t0?33:35;break;case 24:u=0;case 25:if(!(u<c.data.length)){s.next=32;break}if(c.data[u].value!==r[d].value){s.next=29;break}return c=c.data[u].sub,s.abrupt("break",32);case 29:u++,s.next=25;break;case 32:return s.abrupt("break",35);case 33:return c=c.sub,s.abrupt("break",35);case 35:d++,s.next=20;break;case 38:p=function(e,t,a){return e?(r.forEach((function(t){t.ref&&t.value&&(e=e.replace("{".concat(t.ref,"}"),t.value))})),t&&a&&(e=e.replace("{".concat(t,"}"),a)),e):null},f=null,m=[],s.t1=c.type,s.next="static"===s.t1?44:"query"===s.t1?46:"api"===s.t1?86:97;break;case 44:return c.data.forEach((function(e){m.push({label:e.label,value:e.value,ref:e.ref,leaf:!e.sub,example:p(e.example,e.ref,e.value),defaultExample:p(e.defaultExample,e.ref,e.value)})})),s.abrupt("break",97);case 46:return b=p(c.query),s.next=49,a.T.callAPI("post","/api/v1/data-sources/:id/do/query",{params:{id:a.dataSource.id},body:{database:a.dataSource.configJSON.database,queryStatement:b,returnType:"json"},alert:{muteError:!0},extraOptions:{noCountProcessing:!0}});case 49:if(f=s.sent,f.ok){s.next=53;break}return e.root?a.browserCascaderErrorMessage=f.message:t([{label:a.$t("Query Failed"),value:null,leaf:!0,disabled:!0,isError:!0}]),s.abrupt("return");case 53:s.t2=a.dataSource.type,s.next="influxdb"===s.t2?56:"mysql"===s.t2?58:"redis"===s.t2?60:"clickhouse"===s.t2?62:"oracle"===s.t2?64:"sqlserver"===s.t2?66:"postgresql"===s.t2?68:"mongodb"===s.t2?70:"elasticsearch"===s.t2?72:84;break;case 56:return f.data.series&&f.data.series.length>0&&f.data.series[0].values.forEach((function(e){m.push({value:e[0]})})),s.abrupt("break",85);case 58:return f.data.forEach((function(e){switch(c.ref){case"table":m.push({value:Object.values(e)[0]});break;case"field":m.push({value:e["Field"]});break;default:break}})),s.abrupt("break",85);case 60:return f.data[1].forEach((function(e){m.push({value:e})})),s.abrupt("break",85);case 62:return f.data.forEach((function(e){switch(c.ref){case"database":case"table":m.push({value:e["name"]});break;case"field":m.push({value:e["name"]});break;default:break}})),s.abrupt("break",85);case 64:return f.data.forEach((function(e){switch(c.ref){case"table":m.push({value:e["TABLE_NAME"]});break;case"field":m.push({value:e["COLUMN_NAME"]});break;default:break}})),s.abrupt("break",85);case 66:return f.data.forEach((function(e){switch(c.ref){case"table":case"field":m.push({value:e["NAME"]});break;default:break}})),s.abrupt("break",85);case 68:return f.data.forEach((function(e){switch(c.ref){case"schema":m.push({value:e["schemaname"]});break;case"table":m.push({value:e["tablename"]});break;case"field":m.push({value:e["attname"]});break;default:break}})),s.abrupt("break",85);case 70:return f.data.forEach((function(e){switch(c.ref){case"database":case"collection":m.push({value:e});break}})),s.abrupt("break",85);case 72:s.t3=c.ref,s.next="index"===s.t3?75:"field"===s.t3?77:82;break;case 75:return f.data.forEach((function(e){m.push({value:e["index"]})})),s.abrupt("break",83);case 77:_=[];try{_=Object.keys(Object.values(f.data)[0]["mappings"]["properties"])}catch(o){}return _.forEach((function(e){m.push({value:e})})),s.abrupt("break",83);case 82:return s.abrupt("break",83);case 83:return s.abrupt("break",85);case 84:return s.abrupt("break",85);case 85:return s.abrupt("break",97);case 86:return s.next=88,a.T.callAPI_get(c.api,{extraOptions:{noCountProcessing:!0}});case 88:if(f=s.sent,f.ok){s.next=92;break}return e.root?a.browserCascaderErrorMessage=f.message:t([{label:a.$t("Query Failed"),value:null,leaf:!0,disabled:!0,isError:!0}]),s.abrupt("return");case 92:s.t4=a.dataSource.type,s.next=95;break;case 95:return s.abrupt("break",96);case 96:return s.abrupt("break",97);case 97:s.t5=c.type,s.next="api"===s.t5||"query"===s.t5?100:(s.t5,102);break;case 100:return m.forEach((function(e){e.ref=c.ref,e.leaf=!c.sub,e.example=p(c.example,e.ref,e.value),e.defaultExample=p(c.defaultExample,e.ref,e.value)})),s.abrupt("break",103);case 102:return s.abrupt("break",103);case 103:return m.forEach((function(e){e.isDefaultDatabase="database"===e.ref&&e.value===a.dataSource.configJSON.database,e.isDefaultDatabase||r.forEach((function(t){"database"===t.ref&&t.value===a.dataSource.configJSON.database&&(e.isDefaultDatabase=!0)})),e.isDefaultDatabase&&"database"===e.ref&&(e.showDefaultTag=!0)})),h=m.length,v=c.title||"",v&&h>0&&(v="".concat(v," (").concat(h,")")),m.unshift({label:v,value:null,leaf:!0,disabled:!0,isTitle:!0}),e.root||a.$set(e.data,"itemCount",h),s.abrupt("return",t(m));case 110:case"end":return s.stop()}}),s)})))()},updateCodeExample:function(e){this.browserCascaderExampleCode=e.data.isDefaultDatabase&&e.data.defaultExample||e.data.example}},computed:{DATA_SOURCE_DEBUGGER_META_MAP:function(){for(var e={title:this.$t("Keys (a part of)"),type:"query",query:'SCAN 0 MATCH "{pattern}" COUNT 100',example:'TYPE "{key}"',ref:"key"},t={title:this.$t("Initials"),type:"static",data:[]},a=[],s="a".charCodeAt();s<="z".charCodeAt();s++){var i=String.fromCharCode(s);t.data.push({label:"".concat(i).concat(i.toUpperCase()),value:"[".concat(i.toUpperCase()).concat(i,"]*"),example:'SCAN 0 MATCH "{pattern}" COUNT 100',ref:"pattern",sub:e}),a.push("".concat(i.toUpperCase()).concat(i))}return t.data.push({label:this.$t("Other"),value:"[^".concat(a.join(),"]*"),example:'SCAN 0 MATCH "{pattern}" COUNT 100',ref:"pattern",sub:e}),{df_dataway:{name:this.$t("Guance DataWay"),supportDebugger:!1,supportBrowser:!1,supportDatabase:!1,tagType:"info"},influxdb:{name:"InfluxDB",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:null,command:"query",exampleCommandArgs:["SELECT * FROM some_measurement LIMIT 10"],debuggerName:this.$t("SQL Debugger"),browsers:{title:this.$t("Databases"),type:"query",query:"SHOW DATABASES",example:'SHOW MEASUREMENTS ON "{database}"',defaultExample:"SHOW MEASUREMENTS",ref:"database",sub:{title:this.$t("Data"),type:"static",data:[{value:this.$t("Measurements"),example:'SHOW MEASUREMENTS ON "{database}"',defaultExample:"SHOW MEASUREMENTS",sub:{title:this.$t("Measurements"),type:"query",query:'SHOW MEASUREMENTS ON "{database}"',example:'SELECT * FROM "{database}".."{measurement}"',defaultExample:'SELECT * FROM "{measurement}"',ref:"measurement",sub:{type:"static",data:[{value:this.$t("Tags"),example:'SHOW TAG KEYS ON "{database}" FROM "{measurement}"',defaultExample:'SHOW TAG KEYS FROM "{measurement}"',sub:{title:this.$t("Tags"),type:"query",query:'SHOW TAG KEYS ON "{database}" FROM "{measurement}"',example:'SELECT * FROM "{database}".."{measurement}" WHERE "{tagKey}" = \'标签值\'',defaultExample:'SELECT * FROM "{measurement}" WHERE "{tagKey}" = \'标签值\'',ref:"tagKey"}},{value:this.$t("Fields"),example:'SHOW FIELD KEYS ON "{database}" FROM "{measurement}"',defaultExample:'SHOW FIELD KEYS FROM "{measurement}"',sub:{title:this.$t("Fields"),type:"query",query:'SHOW FIELD KEYS ON "{database}" FROM "{measurement}"',example:'SELECT "{fieldKey}" FROM "{database}".."{measurement}"',defaultExample:'SELECT "{fieldKey}" FROM "{measurement}"',ref:"fieldKey"}}]}}},{value:this.$t("Retention Policies"),example:'SHOW RETENTION POLICIES ON "{database}"',defaultExample:"SHOW RETENTION POLICIES",sub:{title:this.$t("Retention Policies"),type:"query",query:'SHOW RETENTION POLICIES ON "{database}"',example:'SELECT * FROM "{database}"."{retentionPolicy}"."指标"',ref:"retentionPolicy"}}]}}},mysql:{name:"MySQL",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"success",command:"query",exampleCommandArgs:["SELECT * FROM `some_table` LIMIT 10"],debuggerName:this.$t("SQL Debugger"),browsers:{title:this.$t("Tables"),type:"query",query:"SHOW TABLES",example:"SELECT * FROM `{table}`",ref:"table",sub:{title:this.$t("Fields"),type:"query",query:"SHOW FULL COLUMNS FROM `{table}`",example:"SELECT `{field}` FROM `{table}`",ref:"field"}}},redis:{name:"Redis",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"danger",command:"query",exampleCommandArgs:["SCAN","0","COUNT","10"],debuggerName:this.$t("Command Debugger"),browsers:t},memcached:{name:"Memcached",supportDebugger:!0,supportBrowser:!1,supportDatabase:!1,tagType:"success",command:"query",exampleCommandArgs:["GET","key"],debuggerName:this.$t("Command Debugger")},clickhouse:{name:"ClickHouse",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"warning",command:"query",exampleCommandArgs:["SELECT * FROM some_table LIMIT 10"],debuggerName:this.$t("SQL Debugger"),browsers:{title:this.$t("Databases"),type:"query",query:"SHOW DATABASES",example:"SHOW TABLES FROM `{database}`",defaultExample:"SHOW TABLES",ref:"database",sub:{title:this.$t("Tables"),type:"query",query:"SHOW TABLES FROM `{database}`",example:"SELECT * FROM `{database}`.`{table}`",defaultExample:"SELECT * FROM `{table}`",ref:"table",sub:{title:this.$t("Fields"),type:"query",query:"DESCRIBE TABLE `{database}`.`{table}`",example:"SELECT `{field}` FROM `{database}`.`{table}`",defaultExample:"SELECT `{field}` FROM `{table}`",ref:"field"}}}},oracle:{name:"Oracle",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"danger",command:"query",exampleCommandArgs:["SELECT * FROM SOME_TABLE WHERE ROWNUM <= 10"],debuggerName:this.$t("SQL Debugger"),browsers:{title:this.$t("Tables"),type:"query",query:"SELECT TABLE_NAME FROM USER_TABLES",example:"SELECT * FROM {table}",ref:"table",sub:{title:this.$t("Fields"),type:"query",query:"SELECT COLUMN_NAME FROM USER_TAB_COLUMNS WHERE TABLE_NAME='{table}'",example:"SELECT {field} FROM {table}",ref:"field"}}},sqlserver:{name:"SQLServer",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"info",command:"query",exampleCommandArgs:["SELECT TOP 10 * FROM some_table"],debuggerName:this.$t("SQL Debugger"),browsers:{title:this.$t("Tables"),type:"query",query:"SELECT [NAME] FROM [sys].[TABLES]",example:"SELECT * FROM [{table}]",ref:"table",sub:{title:this.$t("Fields"),type:"query",query:"SELECT NAME FROM SYSCOLUMNS WHERE ID = object_id('{table}')",example:"SELECT [{field}] FROM [{table}]",ref:"field"}}},postgresql:{name:"PostgreSQL",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"info",command:"query",exampleCommandArgs:["SELECT * FROM some_table LIMIT 10"],debuggerName:this.$t("SQL Debugger"),browsers:{title:"Schema",type:"query",query:'SELECT DISTINCT "schemaname" FROM "pg_tables" GROUP BY "schemaname" ORDER BY "schemaname"',example:'SELECT "tablename" FROM "pg_tables" WHERE "schemaname" = \'public\'',defaultExample:'SELECT "tablename" FROM "pg_tables" WHERE "schemaname" = \'public\'',ref:"schema",sub:{title:this.$t("Tables"),type:"query",query:'SELECT "tablename" FROM "pg_tables" WHERE "schemaname" = \'{schema}\'',example:'SELECT * FROM "{schema}"."{table}"',defaultExample:'SELECT * FROM "{table}"',ref:"table",sub:{title:this.$t("Fields"),type:"query",query:'SELECT "A"."attname" FROM "pg_class" AS "C", "pg_attribute" AS "A" WHERE "A"."attrelid" = "C"."oid" AND "A"."attnum" > 0 AND "C"."relname" = \'{table}\'',example:'SELECT "{field}" FROM "{schema}"."{table}"',defaultExample:'SELECT "{field}" FROM {table}"',ref:"field"}}}},mongodb:{name:"mongoDB",supportDebugger:!1,supportBrowser:!0,supportDatabase:!1,tagType:"success",command:"query",exampleCommandArgs:["GET /_search?q=field:value"],debuggerName:this.$t("URI Query Debugger"),browsers:{title:this.$t("Databases"),type:"query",query:'{"method": "list_database_names"}',example:"# Python\ndata = helper.db('{database}')",defaultExample:"# Python\ndata = helper.db()",ref:"database",sub:{title:this.$t("Collections"),type:"query",query:'{"method": "list_collection_names", "db_name": "{database}"}',example:"# Python\ndata = helper.db('{database}')['{collection}'].find_one()",defaultExample:"# Python\ndata = helper.db()['{collection}'].find_one()",ref:"collection"}}},elasticsearch:{name:"ES",supportDebugger:!0,supportBrowser:!0,supportDatabase:!1,tagType:"success",command:"query",exampleCommandArgs:["GET /_search?q=field:value"],debuggerName:this.$t("URI Query Debugger"),browsers:{title:this.$t("Indices"),type:"query",query:"GET /_cat/indices",example:"GET /{index}/_search",defaultExample:"GET /{index}/_search",ref:"index",sub:{title:this.$t("Fields"),type:"query",query:"GET /{index}/_mapping",example:"GET /{index}/_search?q={field}:something",defaultExample:"GET /{index}/_search?q={field}:something",ref:"field"}}}}}},props:{},data:function(){var e=this.$store.state.asideDataSource_simpleDebugWindowPosition||{left:10,bottom:10};return{show:!1,isQuerying:!1,selectedTab:"browser",showPosition:this.T.jsonCopy(e),dragPosition:this.T.jsonCopy(e),isDragging:!1,dataSource:{},latestQueryOptionsMap:{},latestQueryResultMap:{},browserCascaderProps:{lazy:!0,lazyLoad:this.browserDataLoader},browserCascaderExampleCode:"",browserCascaderErrorMessage:""}},mounted:function(){window.addEventListener("resize",this.fixShowPosition,!1)},beforeDestroy:function(){window.removeEventListener("resize",this.fixShowPosition,!1)}},P=D,A=(a("ea1e"),a("1d9a"),a("ebd4")),N=Object(f["a"])(P,T,k,!1,null,"2c76db0d",null);"function"===typeof A["default"]&&Object(A["default"])(N);var I=N.exports,M={name:"AsideDataSource",components:{SimpleDebugWindow:I},watch:{$route:function(){this.showPopoverId=null},selectFilterText:function(e){if(e&&this.$refs.tree){var t=this.$refs.tree.getNode(e);this.onSelectNode(t.data)}},"$store.state.dataSourceListSyncTime":function(){this.loadData()}},methods:{doFilter:function(e){e=(e||"").trim(),this.selectShowOptions=e?this.selectOptions.filter((function(t){return t.searchTEXT.indexOf(e)>=0})):this.selectOptions.filter((function(e){return"scriptSet"===e.type}))},onSelectNode:function(e,t){var a=this;e&&this.$refs.tree&&this.$nextTick((function(){var t=e.id||e;if(t){a.$refs.tree.setCurrentKey(t);var s=document.getElementById("aside-data-source-content"),i=document.querySelector('[entry-id="'.concat(t,'"]')),r=0,n=35;if(s.scrollTop+n>i.offsetTop)r=i.offsetTop-n;else{if(!(s.scrollTop+s.offsetHeight<i.offsetTop))return;r=i.offsetTop-s.offsetHeight+i.offsetHeight}s.scrollTo({top:r,behavior:"smooth"})}}))},loadData:function(){var e=this;return Object(l["a"])(Object(o["a"])().mark((function t(){var a,s,i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.T.callAPI_getAll("/api/v1/data-sources/do/list",{query:{fields:["id","title","description","type","configJSON","isBuiltin","isPinned","pinTime"]}});case 3:if(a=t.sent,a.ok){t.next=6;break}return t.abrupt("return");case 6:s=[],window._DFF_dataSourceIds=[],a.data.forEach((function(t){window._DFF_dataSourceIds.push(t.id),t.description=e.T.limitLines(t.description,10);var a=e.T.strf(e.C.DATA_SOURCE_MAP.get(t.type).sampleCode,t.id);s.push({id:t.id,label:t.title||t.id,type:"dataSource",dataSourceType:t.type,isBuiltin:t.isBuiltin,isPinned:t.isPinned,pinTime:t.pinTime,searchTEXT:"".concat(t.title," ").concat(t.type," ").concat(t.id),title:t.title,description:t.description,sampleCode:a,dataSource:t})})),s.sort(e.T.asideItemSorter),s.unshift({type:"addDataSource"}),s.unshift({type:"refresh"}),i=s.filter((function(e){return"dataSource"===e.type})),e.loading=!1,e.data=s,e.selectOptions=i,e.selectShowOptions=i;case 17:case"end":return t.stop()}}),t)})))()},pinData:function(e,t,a){var s=this;return Object(l["a"])(Object(o["a"])().mark((function i(){var r,n,l;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:r=null,n=null,i.t0=e,i.next="dataSource"===i.t0?5:8;break;case 5:return r="/api/v1/data-sources/:id/do/modify",n=a?s.$t("Data Source pinned"):s.$t("Data Source unpinned"),i.abrupt("break",9);case 8:return i.abrupt("return");case 9:return i.next=11,s.T.callAPI("post",r,{params:{id:t},body:{data:{isPinned:a}},alert:{okMessage:n}});case 11:if(l=i.sent,l.ok){i.next=14;break}return i.abrupt("return");case 14:s.$store.commit("updateDataSourceListSyncTime");case 15:case"end":return i.stop()}}),i)})))()},showSimpleDebugWindow:function(e){this.$refs.simpleDebugWindow.showWindow(e)},openEntity:function(e,t,a){switch(t.type){case"refresh":this.loadData();break;case"addDataSource":this.$router.push({name:"data-source-add"});break;case"dataSource":this.$router.push({name:"data-source-setup",params:{id:t.id}});break;default:console.error("Unexcepted data type: ".concat(t.type));break}this.onSelectNode(t)}},props:{},data:function(){return{loading:!1,data:[],selectFilterText:"",selectOptions:[],selectShowOptions:[],showPopoverId:null}},created:function(){this.loadData()}},R=M,L=(a("7fbe"),a("5ff8")),B=Object(f["a"])(R,x,S,!1,null,"b20a5d3a",null);"function"===typeof L["default"]&&Object(L["default"])(B);var F=B.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"aside-env-variable-content"}},[a("el-select",{staticClass:"jump-to-select",attrs:{placeholder:e.$t("Jump to..."),"no-data-text":e.$t("No Data"),size:"small",filterable:!0,clearable:!0,"filter-method":e.doFilter},model:{value:e.selectFilterText,callback:function(t){e.selectFilterText=t},expression:"selectFilterText"}},e._l(e.selectShowOptions,(function(t){return a("el-option",{key:t.id,attrs:{label:t.label,value:t.id}},[a("span",{staticClass:"select-item-name"},[e._v("\n        "+e._s(t.label)+"\n      ")]),e._v(" "),a("code",{staticClass:"select-item-id"},[e._v("ID: "+e._s(t.id))])])})),1),e._v(" "),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",staticClass:"aside-tree",attrs:{data:e.data,"highlight-current":!0,indent:10,"node-key":"id"},on:{"current-change":e.onSelectNode},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.node,i=t.data;return a("span",{staticClass:"aside-tree-node",attrs:{"entry-id":i.id},on:{click:function(t){return e.openEntity(s,i)}}},[a("el-popover",{attrs:{placement:"right-start",trigger:"hover","popper-class":"aside-tip",disabled:!i.id,value:e.showPopoverId===i.id}},[a("div",{staticClass:"aside-tree-node-description"},[a("CopyButton",{attrs:{content:i.id,"tip-placement":"left"}}),e._v("\n          ID"+e._s(e.$t(":"))),a("code",{staticClass:"text-code"},[e._v(e._s(i.id))]),e._v(" "),i.description?a("pre",[e._v(e._s(i.description))]):e._e()],1),e._v(" "),i.sampleCode?[a("div",{staticClass:"aside-tree-node-sample-code"},[i.sampleCode?a("CopyButton",{attrs:{content:i.sampleCode,"tip-placement":"left"}}):e._e(),e._v("\n            "+e._s(e.$t("Example"))+e._s(e.$t(":"))+"\n\n            "),a("pre",[e._v(e._s(i.sampleCode))])],1)]:e._e(),e._v(" "),a("br"),e._v(" "),a("el-button-group",[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.pinData(i.type,i.id,!i.isPinned)}}},[a("i",{staticClass:"fa fa-fw",class:[i.isPinned?"fa-thumb-tack fa-rotate-270":"fa-thumb-tack"]}),e._v("\n            "+e._s(i.isPinned?e.$t("Unpin"):e.$t("Pin"))+"\n          ")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.openEntity(s,i,"setup")}}},[a("i",{staticClass:"fa fa-fw fa-wrench"}),e._v("\n            "+e._s(e.$t("Setup"))+"\n          ")])],1),e._v(" "),a("div",{staticClass:"aside-item",attrs:{slot:"reference"},slot:"reference"},[a("span",{class:{"text-bad":i.isPinned}},["refresh"===i.type?a("el-link",{attrs:{type:"primary"}},[a("i",{staticClass:"fa fa-fw fa-refresh"}),e._v(" "+e._s(e.$t("Refresh"))+"\n            ")]):"addEnvVariable"===i.type?a("el-link",{attrs:{type:"primary"}},[a("i",{staticClass:"fa fa-fw fa-plus"}),e._v(" "+e._s(e.$t("Add ENV"))+"\n            ")]):a("div",[a("span",[e._v(e._s(s.label))])])],1),e._v(" "),a("div",[a("el-tooltip",{attrs:{effect:"dark",content:e.$t("Pinned"),placement:"top",enterable:!1}},[a("i",{staticClass:"fa fa-fw text-bad",class:[i.isPinned?"fa-thumb-tack":""]})])],1)])],2)],1)}}])})],1)},q=[],W={name:"AsideEnvVariable",components:{},watch:{$route:function(){this.showPopoverId=null},selectFilterText:function(e){if(e&&this.$refs.tree){var t=this.$refs.tree.getNode(e);this.onSelectNode(t.data)}},"$store.state.envVariableListSyncTime":function(){this.loadData()}},methods:{doFilter:function(e){e=(e||"").trim(),this.selectShowOptions=e?this.selectOptions.filter((function(t){return t.searchTEXT.indexOf(e)>=0})):this.selectOptions.filter((function(e){return"scriptSet"===e.type}))},onSelectNode:function(e,t){var a=this;e&&this.$refs.tree&&this.$nextTick((function(){var t=e.id||e;if(t){a.$refs.tree.setCurrentKey(t);var s=document.getElementById("aside-env-variable-content"),i=document.querySelector('[entry-id="'.concat(t,'"]')),r=0,n=35;if(s.scrollTop+n>i.offsetTop)r=i.offsetTop-n;else{if(!(s.scrollTop+s.offsetHeight<i.offsetTop))return;r=i.offsetTop-s.offsetHeight+i.offsetHeight}s.scrollTo({top:r,behavior:"smooth"})}}))},loadData:function(){var e=this;return Object(l["a"])(Object(o["a"])().mark((function t(){var a,s,i;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.T.callAPI_getAll("/api/v1/env-variables/do/list",{query:{fields:["id","title","description","isPinned","pinTime"]}});case 3:if(a=t.sent,a.ok){t.next=6;break}return t.abrupt("return");case 6:s=[],window._DFF_envVariableIds=[],a.data.forEach((function(t){window._DFF_envVariableIds.push(t.id),t.description=e.T.limitLines(t.description);var a="".concat(t.id," = DFF.ENV('").concat(t.id,"')");s.push({id:t.id,label:t.title||t.id,type:"envVariable",isPinned:t.isPinned,pinTime:t.pinTime,searchTEXT:"".concat(t.title," ").concat(t.id),title:t.title,description:t.description,sampleCode:a})})),s.sort(e.T.asideItemSorter),s.unshift({type:"addEnvVariable"}),s.unshift({type:"refresh"}),i=s.filter((function(e){return"envVariable"===e.type})),e.loading=!1,e.data=s,e.selectOptions=i,e.selectShowOptions=i;case 17:case"end":return t.stop()}}),t)})))()},pinData:function(e,t,a){var s=this;return Object(l["a"])(Object(o["a"])().mark((function i(){var r,n,l;return Object(o["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:r=null,n=null,i.t0=e,i.next="envVariable"===i.t0?5:8;break;case 5:return r="/api/v1/env-variables/:id/do/modify",n=a?s.$t("ENV Variable pinned"):s.$t("ENV Variable unpinned"),i.abrupt("break",9);case 8:return i.abrupt("return");case 9:return i.next=11,s.T.callAPI("post",r,{params:{id:t},body:{data:{isPinned:a}},alert:{okMessage:n}});case 11:if(l=i.sent,l.ok){i.next=14;break}return i.abrupt("return");case 14:s.$store.commit("updateEnvVariableListSyncTime");case 15:case"end":return i.stop()}}),i)})))()},openEntity:function(e,t,a){switch(t.type){case"refresh":this.loadData();break;case"addEnvVariable":this.$router.push({name:"env-variable-add"});break;case"envVariable":this.$router.push({name:"env-variable-setup",params:{id:t.id}});break;default:console.error("Unexcepted data type: ".concat(t.type));break}this.onSelectNode(t)}},props:{},data:function(){return{loading:!1,data:[],selectFilterText:"",selectOptions:[],selectShowOptions:[],showPopoverId:null}},created:function(){this.loadData()}},j=W,Q=(a("e9fd"),a("9edc")),z=Object(f["a"])(j,U,q,!1,null,"6a0992cf",null);"function"===typeof Q["default"]&&Object(Q["default"])(z);var H=z.exports,V={name:"Editor",components:{AsideScript:E,AsideDataSource:F,AsideEnvVariable:H},watch:{$route:{immediate:!0,handler:function(e,t){var a=["code-editor","code-viewer"];a.indexOf(e.name)>=0?this.transitionName=null:this.transitionName="fade"}},splitPanePercent:function(e){this.resizeVueSplitPane(e)}},methods:{resizeVueSplitPane:function(e){e>this.SPLIT_PANE_MAX_PERCENT?e=this.SPLIT_PANE_MAX_PERCENT:e<this.SPLIT_PANE_MIN_PERCENT&&(e=this.SPLIT_PANE_MIN_PERCENT),this.$refs.vueSplitPane.percent=e,this.debouncedUpdatePanePercent(this.$store,e)}},computed:{SPLIT_PANE_MAX_PERCENT:function(){return 35},SPLIT_PANE_MIN_PERCENT:function(){return 10},currentTabFromRoute:function(){switch(this.$route.name){case"data-source-add":case"data-source-setup":return"aside-data-source";case"env-variable-add":case"env-variable-setup":return"aside-env-variable";default:return"aside-script"}},currentTabIcon:function(){var e=["fa","fa-fw","icon-bg"];switch(this.currentTab){case"aside-script":e.push("fa-file-code-o");break;case"aside-data-source":e.push("fa-database");break;case"aside-env-variable":e.push("fa-cogs");break}return e},splitPanePercent:function(){return this.$store.state.Editor_splitPanePercent||this.$store.getters.DEFAULT_STATE.Editor_splitPanePercent}},data:function(){return{currentTab:null}},created:function(){this.debouncedUpdatePanePercent=this.T.debounce((function(e,t){e.commit("updateEditor_splitPanePercent",t)}),100),this.currentTab=this.currentTabFromRoute},mounted:function(){this.resizeVueSplitPane(this.splitPanePercent)}},G=V,K=(a("d5ff"),a("e578"),a("937d")),J=Object(f["a"])(G,s,i,!1,null,"0c46cd57",null);"function"===typeof K["default"]&&Object(K["default"])(J);t["default"]=J.exports},"4c53":function(e,t,a){"use strict";var s=a("23e7"),i=a("857a"),r=a("af03");s({target:"String",proto:!0,forced:r("sub")},{sub:function(){return i(this,"sub","","")}})},"4fb6":function(e,t,a){},"5ff8":function(e,t,a){"use strict";var s=a("777d"),i=a.n(s);t["default"]=i.a},"60fb":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Drag to place":"调整位置"}}'),delete e.options._Ctor}},"66db":function(e,t,a){},"777d":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Jump to...":"跳转到...","Refresh":"刷新列表","Add Data Source":"添加数据源","Simple Debug":"简易调试","View":"查看","Setup":"配置","Example":"示例","Copy example":"复制示例","Copy {name} ID":"复制{name}ID","Data Source pinned":"数据源已置顶","Data Source unpinned":"数据源已取消"}}'),delete e.options._Ctor}},"7fbe":function(e,t,a){"use strict";a("a8bb")},"857a":function(e,t,a){var s=a("e330"),i=a("1d80"),r=a("577e"),n=/"/g,o=s("".replace);e.exports=function(e,t,a,s){var l=r(i(e)),c="<"+t;return""!==a&&(c+=" "+a+'="'+o(r(s),n,"&quot;")+'"'),c+">"+l+"</"+t+">"}},"8b59":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Script Lib":"脚本库","Data Source":"数据源","Env":"环境变量"}}'),delete e.options._Ctor}},"8eb3":function(e,t,a){"use strict";var s=a("e7b5"),i=a.n(s);t["default"]=i.a},"937d":function(e,t,a){"use strict";var s=a("8b59"),i=a.n(s);t["default"]=i.a},"9edc":function(e,t,a){"use strict";var s=a("ca5e"),i=a.n(s);t["default"]=i.a},a8bb:function(e,t,a){},aa09:function(e,t){(function(){"use strict";e.exports=function(e,t,a){for(var s=t||/\s/g,i=!1,r=!1,n=[],o=[],l=e.split(""),c=0;c<l.length;++c){var d=l[c],u=d.match(s);"'"!==d||r?'"'!==d||i?i||r||!u?n.push(d):n.length>0?(o.push(n.join("")),n=[]):t&&o.push(d):(!0===a&&n.push(d),r=!r):(!0===a&&n.push(d),i=!i)}return n.length>0?o.push(n.join("")):t&&o.push(""),o}})()},aa16:function(e,t,a){"use strict";a("4fb6")},af03:function(e,t,a){var s=a("d039");e.exports=function(e){return s((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b1d2:function(e,t,a){"use strict";a("66db")},b350:function(e,t,a){"use strict";a("244c")},b3fd:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title||"API调用示例",visible:e.show,"close-on-click-modal":!1,width:"750px"},on:{"update:visible":function(t){e.show=t}}},[a("span",[a("span",{class:e.descriptionClass},[e._v(e._s(e.description))]),e._v(" "),e.showOptions?[a("el-divider",{attrs:{"content-position":"left"}},[e._v("请求选项")]),e._v(" "),a("el-form",{staticClass:"call-options",attrs:{"label-width":"80px"}},[e.showExecModeOption?a("el-form-item",{attrs:{label:"异步执行"}},[a("el-switch",{attrs:{"inactive-value":"sync","active-value":"async"},model:{value:e.callOptions.execMode,callback:function(t){e.$set(e.callOptions,"execMode",t)},expression:"callOptions.execMode"}})],1):e._e(),e._v(" "),e.showSaveResultOption?a("el-form-item",{attrs:{label:"保留结果"}},[a("el-switch",{attrs:{"inactive-value":!1,"active-value":!0},model:{value:e.callOptions.saveResult,callback:function(t){e.$set(e.callOptions,"saveResult",t)},expression:"callOptions.saveResult"}})],1):e._e(),e._v(" "),e.showTimeoutOption?a("el-form-item",{attrs:{label:"执行超时"}},[a("el-input-number",{attrs:{size:"mini","step-strictly":"",step:1,precision:0,min:e.$store.getters.CONFIG("_FUNC_TASK_MIN_TIMEOUT"),max:e.$store.getters.CONFIG("_FUNC_TASK_MAX_TIMEOUT")},model:{value:e.callOptions.timeout,callback:function(t){e.$set(e.callOptions,"timeout",t)},expression:"callOptions.timeout"}}),e._v("　秒\n        ")],1):e._e(),e._v(" "),e.showAPITimeoutOption?a("el-form-item",{attrs:{label:"API超时"}},[a("el-input-number",{attrs:{size:"mini","step-strictly":"",step:1,precision:0,min:e.$store.getters.CONFIG("_FUNC_TASK_MIN_API_TIMEOUT"),max:e.$store.getters.CONFIG("_FUNC_TASK_MAX_API_TIMEOUT")},model:{value:e.callOptions.apiTimeout,callback:function(t){e.$set(e.callOptions,"apiTimeout",t)},expression:"callOptions.apiTimeout"}}),e._v("　秒\n        ")],1):e._e()],1)]:e._e(),e._v(" "),a("el-divider",{attrs:{"content-position":"left"}},[e._v("编辑请求")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",readonly:"",autosize:"",resize:"none"},model:{value:e.apiURLExample,callback:function(t){e.apiURLExample=t},expression:"apiURLExample"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("CopyButton",{attrs:{content:e.apiURLExample}})],1)],1),e._v(" "),e.apiBodyExample||e.supportCustomKwargs?a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",autosize:"",resize:"none"},model:{value:e.apiBodyExample,callback:function(t){e.apiBodyExample=t},expression:"apiBodyExample"}}),e._v(" "),a("InfoBlock",{attrs:{type:"info",title:"POST请求时，Content-Type 应设置为 application/json"}}),e._v(" "),e.apiBodyExample&&e.common.containsFuncArgumentPlaceholder(e.apiBodyExample)>=0?a("InfoBlock",{attrs:{type:"info",title:'"INPUT_BY_CALLER"为需要填写的参数，请根据需要进行修改'}}):e._e(),e._v(" "),e.supportCustomKwargs?a("InfoBlock",{attrs:{type:"success",title:"本函数允许传递额外的自定义函数参数（**kwargs 语法）"}}):e._e(),e._v(" "),e.supportFileUpload?a("InfoBlock",{attrs:{type:"success",title:'本函数支持文件上传，文件字段名为"files"'}}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("CopyButton",{attrs:{content:e.apiBodyExample}})],1)],1):e._e(),e._v(" "),e.apiBody?[e.showGetExampleSimplified?[a("el-divider",{attrs:{"content-position":"left"}},[e._v("GET 简化形式请求")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[e.stringParametersOnly?a("el-link",{staticClass:"api-url-with-query",attrs:{type:"primary",underline:!0,href:e.apiURLWithQueryExample_simplified,target:"_blank"}},[a("code",{domProps:{innerHTML:e._s(e.apiURLWithQueryExampleText_simplified)}})]):e._e(),e._v(" "),a("InfoBlock",{attrs:{type:e.stringParametersOnly?"info":"error",title:"此方式参数值只支持字符串，且不支持 options 参数"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[e.stringParametersOnly?a("CopyButton",{attrs:{content:e.apiURLWithQueryExample_simplified}}):e._e()],1)],1)]:e._e(),e._v(" "),e.showGetExample?[a("el-divider",{attrs:{"content-position":"left"}},[e._v("GET 标准形式请求")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-link",{staticClass:"api-url-with-query",attrs:{type:"primary",underline:!0,href:e.apiURLWithQueryExample,target:"_blank"}},[a("code",{domProps:{innerHTML:e._s(e.apiURLWithQueryExampleText)}})]),e._v(" "),a("InfoBlock",{attrs:{type:"info",title:"kwargs 参数为 POST 方式中对 kwargs 参数进行 JSON 序列化，再进行 URL 编码后的字符串"}}),e._v(" "),a("InfoBlock",{attrs:{type:"info",title:"kwargs 参数处理代码参考：encodeURIComponent(JSON.stringify(kwargs))"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("CopyButton",{attrs:{content:e.apiURLWithQueryExample}})],1)],1)]:e._e(),e._v(" "),e.showGetExampleFlattened?[a("el-divider",{attrs:{"content-position":"left"}},[e._v("GET 扁平形式请求")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[e.stringParametersOnly?a("el-link",{staticClass:"api-url-with-query",attrs:{type:"primary",underline:!0,href:e.apiURLWithQueryExample_flattened,target:"_blank"}},[a("code",{domProps:{innerHTML:e._s(e.apiURLWithQueryExampleText_flattened)}})]):e._e(),e._v(" "),a("InfoBlock",{attrs:{type:e.stringParametersOnly?"info":"error",title:"此方式参数值只支持字符串"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[e.stringParametersOnly?a("CopyButton",{attrs:{content:e.apiURLWithQueryExample_flattened}}):e._e()],1)],1)]:e._e(),e._v(" "),e.showPostExampleSimplified?[a("el-divider",{attrs:{"content-position":"left"}},[e._v("POST 简化形式请求")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[e.stringParametersOnly?a("el-input",{attrs:{type:"textarea",readonly:"",autosize:"",resize:"none",value:e.apiCallByCurlExample_simplified}}):e._e(),e._v(" "),a("InfoBlock",{attrs:{type:e.stringParametersOnly?"info":"error",title:"此方式不支持 options 参数"}}),e._v(" "),a("InfoBlock",{attrs:{type:"info",title:'表单形式提交时，Content-Type 可以指定为 "multipart/form-data" 或 "application/x-www-form-urlencoded"，此时 Body 中参数值只支持字符串'}}),e._v(" "),a("InfoBlock",{attrs:{type:"info",title:'JSON 形式提交时，Content-Type 可以指定为 "application/json"，配合 def f(**kwargs) 形式的函数，此时 Body 可以为任意 JSON 数据'}}),e._v(" "),a("InfoBlock",{attrs:{type:"info",title:'上传文件时，Content-Type 需要指定为 "multipart/form-data"'}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[e.stringParametersOnly?a("CopyButton",{attrs:{content:e.apiCallByCurlExample_simplified}}):e._e()],1)],1)]:e._e(),e._v(" "),e.showPostExample?[a("el-divider",{attrs:{"content-position":"left"}},[e._v("POST 标准形式请求")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{type:"textarea",readonly:"",autosize:"",resize:"none",value:e.apiCallByCurlExample}}),e._v(" "),a("InfoBlock",{attrs:{type:"info",title:"此方式不支持文件上传"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("CopyButton",{attrs:{content:e.apiCallByCurlExample}})],1)],1)]:e._e(),e._v(" "),e.showPostExampleFlattened?[a("el-divider",{attrs:{"content-position":"left"}},[e._v("POST 扁平形式请求")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:22}},[e.stringParametersOnly?a("el-input",{attrs:{type:"textarea",readonly:"",autosize:"",resize:"none",value:e.apiCallByCurlExample_flattened}}):e._e(),e._v(" "),a("InfoBlock",{attrs:{type:e.stringParametersOnly?"info":"error",title:"此方式参数值只支持字符串"}}),e._v(" "),a("InfoBlock",{attrs:{type:"info",title:'单纯提交数据时，Content-Type 可以指定为 "multipart/form-data" 或 "application/x-www-form-urlencoded"'}}),e._v(" "),a("InfoBlock",{attrs:{type:"info",title:'上传文件时，Content-Type 需要指定为 "multipart/form-data"'}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[e.stringParametersOnly?a("CopyButton",{attrs:{content:e.apiCallByCurlExample_flattened}}):e._e()],1)],1)]:e._e()]:[a("span",{staticClass:"text-bad"},[e._v("Body内容填写存在错误，正确填写后将展示示例")])]],2)])},i=[],r=(a("e9c4"),a("ac1f"),a("1276"),a("a15b"),a("99af"),a("498a"),{name:"APIExampleDialog",components:{},watch:{callOptions:{deep:!0,handler:function(e){var t=null;try{t=JSON.parse(this.apiBodyExample)}catch(s){}if(t){for(var a in t.options=t.options||{},e)e[a]===this.DEFAULT_CALL_OPTIONS[a]?delete t.options[a]:t.options[a]=e[a];this.T.isNothing(t.options)&&delete t.options,this.apiBodyExample=JSON.stringify(t,null,2)}}}},methods:{prettyURLForHTML:function(e){if(!e)return"";try{var t=e.split("?");if(!t[1])return e;for(var a=t[1].split("&"),s=0;s<a.length;s++)a[s]=0===s?"?"+a[s]:"&"+a[s];var i=t[0]+"<br>"+a.join("<br>");return i}catch(r){return console.error(r),e}},washAPIBody:function(e){if(e=this.T.jsonCopy(e),this.T.isNothing(e))return e;if(!this.T.isNothing(e.kwargs))for(var t in e.kwargs)0!==t.indexOf("**")&&"files"!==t||delete e.kwargs[t];return this.T.isNothing(e.kwargs)&&!this.supportCustomKwargs&&delete e.kwargs,this.T.isNothing(e.options)&&delete e.options,e},update:function(e,t,a){for(var s in t=t||{},t.kwargs=t.kwargs||{},t.options=t.options||{},a=a||{},this.supportFileUpload=!1,this.supportCustomKwargs=!1,this.callOptions)this.callOptions[s]=this.DEFAULT_CALL_OPTIONS[s];for(var i in t.kwargs.files&&(this.supportFileUpload=this.common.isFuncArgumentPlaceholder(t.kwargs.files)),a)if(0===i.indexOf("**")){this.supportCustomKwargs=!0;break}t=this.washAPIBody(t),t=this.T.isNothing(t)?"":JSON.stringify(t,null,2),this.apiURLExample=e,this.apiBodyExample=t,this.show=!0},getAPIURLWithQueryExample:function(e,t,a){if(!this.apiBody)return null;var s=this.washAPIBody(this.apiBody);e=e||"normal",t=t||!1;var i=null,r={};switch(e){case"normal":r=s||r,i=this.T.formatURL(this.apiURLExample,{query:r});break;case"simplified":s&&s.kwargs&&(r=s.kwargs||r),i=this.T.formatURL("".concat(this.apiURLExample,"/simplified"),{query:r});break;case"flattened":if(s){if(s.kwargs)for(var n in s.kwargs)r["kwargs_".concat(n)]=s.kwargs[n];if(s.options)for(var o in s.options)r["options_".concat(o)]=s.options[o]}i=this.T.formatURL("".concat(this.apiURLExample,"/flattened"),{query:r});break}return t&&(i=this.prettyURLForHTML(i)),a&&(i=decodeURIComponent(i)),i},getAPICallByCurlPostExample:function(e){if(!this.apiBody)return null;var t=this.washAPIBody(this.apiBody);e=e||"normal";var a="",s="",i="";switch(e){case"normal":a=this.apiURLExample,s='-H "Content-Type: application/json"',this.T.isNothing(t)||(i="-d '".concat(JSON.stringify(t),"'"));break;case"simplified":if(a="".concat(this.apiURLExample,"/").concat(e),this.supportFileUpload){if(s='-H "Content-Type: multipart/form-data"',!this.T.isNothing(t.kwargs))for(var r in t.kwargs)i+=" -F '".concat(r,"=").concat(t.kwargs[r],"'");i+=" -F files=@FILE_TO_UPLOAD"}else s='-H "Content-Type: application/x-www-form-urlencoded"',this.T.isNothing(t.kwargs)||(i+=" -d '".concat(this.T.formatQuery(t.kwargs),"'"));break;case"flattened":if(a="".concat(this.apiURLExample,"/").concat(e),s='-H "Content-Type: application/x-www-form-urlencoded"',!this.T.isNothing(t.kwargs))for(var n in t.kwargs)i+=" -F kwargs_".concat(n,"=").concat(t.kwargs[n]);if(!this.T.isNothing(t.options))for(var o in t.options)i+=" -F options_".concat(o,"=").concat(t.options[o]);this.supportFileUpload&&(i+=" -F kwargs_files=@FILE_TO_UPLOAD");break}var l="curl -X POST";return s&&(l+=" ".concat(s.trim())),i&&(l+=" ".concat(i.trim())),a&&(l+=" ".concat(a.trim())),l}},computed:{DEFAULT_CALL_OPTIONS:function(){return{execMode:"sync",saveResult:!1,timeout:this.$store.getters.CONFIG("_FUNC_TASK_DEFAULT_TIMEOUT"),apiTimeout:this.$store.getters.CONFIG("_FUNC_TASK_DEFAULT_API_TIMEOUT")}},showOptions:function(){return this.showExecModeOption||this.showSaveResultOption||this.showTimeoutOption||this.showAPITimeoutOption},apiBody:function(){if(!this.apiBodyExample)return{};var e=null;try{e=JSON.parse(this.apiBodyExample)}catch(t){return null}return e},apiURLWithQueryExample:function(){return this.getAPIURLWithQueryExample("normal")},apiURLWithQueryExample_flattened:function(){return this.getAPIURLWithQueryExample("flattened")},apiURLWithQueryExample_simplified:function(){return this.getAPIURLWithQueryExample("simplified")},apiURLWithQueryExampleText:function(){return this.getAPIURLWithQueryExample("normal",!0,!0)},apiURLWithQueryExampleText_simplified:function(){return this.getAPIURLWithQueryExample("simplified",!0,!0)},apiURLWithQueryExampleText_flattened:function(){return this.getAPIURLWithQueryExample("flattened",!0,!0)},apiCallByCurlExample:function(){return this.getAPICallByCurlPostExample("normal")},apiCallByCurlExample_simplified:function(){return this.getAPICallByCurlPostExample("simplified")},apiCallByCurlExample_flattened:function(){return this.getAPICallByCurlPostExample("flattened")},stringParametersOnly:function(){if(!this.apiBody)return!1;var e=this.apiBody.kwargs||{};for(var t in e)if("string"!==typeof e[t])return!1;return!0}},props:{title:String,description:String,descriptionClass:Object,showExecModeOption:{type:Boolean,default:!1},showSaveResultOption:{type:Boolean,default:!1},showTimeoutOption:{type:Boolean,default:!1},showAPITimeoutOption:{type:Boolean,default:!1},showGetExample:{type:Boolean,default:!0},showGetExampleSimplified:{type:Boolean,default:!1},showGetExampleFlattened:{type:Boolean,default:!1},showPostExample:{type:Boolean,default:!0},showPostExampleSimplified:{type:Boolean,default:!1},showPostExampleFlattened:{type:Boolean,default:!1}},data:function(){return{show:!1,supportFileUpload:!1,supportCustomKwargs:!1,apiURLExample:null,apiBodyExample:null,funcKwargs:null,callOptions:{execMode:null,saveResult:null,timeout:null,apiTimeout:null}}}}),n=r,o=(a("b350"),a("2877")),l=Object(o["a"])(n,s,i,!1,null,"27941e0a",null);t["a"]=l.exports},b409:function(e,t,a){},ca5e:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Jump to...":"跳转到...","Refresh":"刷新列表","Add ENV":"添加环境变量","Setup":"配置","Example":"示例","Copy example":"复制示例","Copy {name} ID":"复制{name}ID","ENV Variable pinned":"环境变量已置顶","ENV Variable unpinned":"环境变量已取消"}}'),delete e.options._Ctor}},caf1:function(e,t,a){},ce37:function(e,t,a){"use strict";var s=a("60fb"),i=a.n(s);t["default"]=i.a},d5ff:function(e,t,a){"use strict";a("ec54")},e578:function(e,t,a){"use strict";a("1cc8")},e7b5:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"lastSucceeded":"Succeeded {t}","lastFailed":"Failed {t}","lastRan":"Ran {t}","successCount":"Success {n}","failureCount":"Failure {n}"}}'),delete e.options._Ctor}},e9fd:function(e,t,a){"use strict";a("b409")},ea1e:function(e,t,a){"use strict";a("caf1")},ebd4:function(e,t,a){"use strict";var s=a("37a1"),i=a.n(s);t["default"]=i.a},ec54:function(e,t,a){},f48b:function(e,t,a){"use strict";var s=a("2966"),i=a.n(s);t["default"]=i.a}}]);