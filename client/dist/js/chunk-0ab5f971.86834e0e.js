(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ab5f971"],{1165:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"About":"关于","You are using {0} browser":"您正在使用 {0} 浏览器","In this system:":"在本系统中：","Monospaced font is from {0}":"等宽字体来自 {0}","Icons used are from {0}":"图标来自 {0}","Illustrations used are from {0}":"插图来自 {0}","Version Information":"版本信息","System Report":"系统报告","Version":"版本","Architecture":"架构","Vue Version":"Vue 版本","Node Version":"Node 版本","Python Version":"Python 版本","Release Date":"发布日期","Loading...":"加载中...","Get System Report":"获取系统报告","Clear Worker Queue":"清空工作队列","Clear Log and Cache":"清空日志与缓存表","Worker Queue cleared":"工作队列已清空","Log and Cache cleared":"日志与缓存表已清空","Please note that there may be a delay in the system reporting":"请注意系统报告数据可能存在延迟","Full Node name is celery@{Number}":"完整节点名称为 celery@{编号}","Full Worker Queue name is DataFluxFunc-worker#workerQueue@{Number}":"完整工作队列名称为 DataFluxFunc-worker#workerQueue@{序号}","taskRemain":"（存在 {n} 个待处理任务）","Are you sure you want to clear the Worker Queue?":"是否确认清空此工作队列？","Are you sure you want to clear the Log and Cache?":"是否确认清空日志与缓存表？","DB Schema Version":"数据库结构版本","Web Server CPU Usage":"Web 服务 CPU 使用率","Web Server Memory Usage":"Web 服务内存使用量","Worker CPU Usage":"Worker CPU 使用率","Worker Memory Usage":"Worker 内存使用量","DB Disk Usage":"数据库磁盘使用量","Cache DB Number":"缓存数据库序号","Cache Key Count":"缓存键数量","Cache Memory Usage":"缓存内存使用量","Worker Node Status":"Worker 节点状态","Wroker Queue Distribution":"Worker 队列分布","Wroker Queue Length":"Worker 队列长度"}}'),delete e.options._Ctor}},"190e":function(e,t,r){"use strict";var n=r("1165"),o=r.n(n);t["default"]=o.a},"476e":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"taskRemain":"(remain {n} task to process) | (remain {n} tasks to process)"}}'),delete e.options._Ctor}},5861:function(e,t,r){},"631a":function(e,t,r){},"67f8":function(e,t,r){"use strict";r.r(t);r("b0c0");var n=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"fade"}},[t("el-container",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[t("el-header",{attrs:{height:"60px"}},[t("h1",[e._v(e._s(e.$t("About")))])]),e._v(" "),t("el-main",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:15}},[t("div",{staticClass:"about-form"},[t("div",{staticClass:"announce"},[t("p",[t("i18n",{attrs:{path:"You are using {0} browser"}},[t("span",{staticClass:"text-main"},[e._v(e._s(e.T.getBrowser())+" ("+e._s(e.T.getEngine())+")")])])],1),e._v(" "),t("p",[e._v("\n                "+e._s(e.$t("In this system:"))+"\n                "),t("ul",[t("li",[t("i18n",{attrs:{path:"Monospaced font is from {0}"}},[t("el-link",{attrs:{href:"https://typeof.net/Iosevka/",target:"_blank"}},[t("i",{staticClass:"fa fa-fw fa-external-link"}),e._v("\n                        Iosevka\n                      ")])],1)],1),e._v(" "),t("li",[t("i18n",{attrs:{path:"Icons used are from {0}"}},[t("el-link",{attrs:{href:"https://fontawesome.com/v4/",target:"_blank"}},[t("i",{staticClass:"fa fa-fw fa-external-link"}),e._v("\n                        Font Awesome (v4)\n                      ")])],1)],1),e._v(" "),t("li",[t("i18n",{attrs:{path:"Illustrations used are from {0}"}},[t("el-link",{attrs:{href:"https://flexiple.com/illustrations/",target:"_blank"}},[t("i",{staticClass:"fa fa-fw fa-external-link"}),e._v("\n                        Scale by flexiple\n                      ")])],1)],1)])])]),e._v(" "),t("el-divider",{attrs:{"content-position":"left"}},[t("h1",[e._v(e._s(e.$t("Version Information")))])]),e._v(" "),t("el-form",{attrs:{"label-width":"120px"}},[t("el-form-item",{attrs:{label:e.$t("Version")}},[t("el-input",{attrs:{placeholder:e.$t("Loading..."),readonly:!0,value:e.about.version}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Architecture")}},[t("el-input",{attrs:{placeholder:e.$t("Loading..."),readonly:!0,value:e.about.architecture}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Release Date")}},[t("el-input",{attrs:{placeholder:e.$t("Loading..."),readonly:!0,value:e.releaseDateTEXT}})],1),e._v(" "),t("br"),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Vue Version")}},[t("el-input",{attrs:{placeholder:e.$t("Loading..."),readonly:!0,value:e.about.vueVersion}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Node Version")}},[t("el-input",{attrs:{placeholder:e.$t("Loading..."),readonly:!0,value:e.about.nodeVersion}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Python Version")}},[t("el-input",{attrs:{placeholder:e.$t("Loading..."),readonly:!0,value:e.about.pythonVersion}})],1)],1),e._v(" "),t("br"),e._v(" "),t("el-divider",{attrs:{"content-position":"left"}},[t("h1",[e._v(e._s(e.$t("System Report")))])]),e._v(" "),t("el-form",{attrs:{"label-width":"120px"}},[e.showSystemReport?[t("el-form-item",[t("el-input",{attrs:{placeholder:e.$t("Loading..."),type:"textarea",autosize:"",resize:"none",readonly:!0,value:e.systemReportTEXT}})],1),e._v(" "),t("el-form-item",[t("InfoBlock",{attrs:{type:"info",title:e.$t("Full Node name is celery@{Number}")}}),e._v(" "),t("InfoBlock",{attrs:{type:"info",title:e.$t("Full Worker Queue name is DataFluxFunc-worker#workerQueue@{Number}")}})],1)]:e._e(),e._v(" "),t("el-form-item",[t("el-button",{on:{click:e.getSystemReport}},[e._v(e._s(e.$t("Get System Report")))])],1),e._v(" "),t("el-form-item",[e.dbDiskUsedInfoTEXT?t("el-button",{on:{click:e.clearLogCacheTables}},[e._v(e._s(e.$t("Clear Log and Cache")))]):e._e(),e._v(" "),e.workerQueues.length>0?t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.clearWorkerQueue}},[t("el-button",[e._v(e._s(e.$t("Clear Worker Queue")))]),e._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{disabled:""}},[e._v("\n                      "+e._s(e.$t("Clear Worker Queue"))+"\n                    ")]),e._v(" "),e._l(e.workerQueues,(function(r,n){return t("el-dropdown-item",{key:r.name,attrs:{command:r.name,divided:0===n}},[e._v("\n                       "),t("span",{staticClass:"code-font"},[e._v("#"+e._s(r.name))]),e._v(" "),t("small",{staticClass:"text-info"},[e._v(e._s(e.$tc("taskRemain",r.value)))])])}))],2)],1):e._e()],1)],2)],1)]),e._v(" "),t("el-col",{staticClass:"hidden-md-and-down",attrs:{span:9}})],1)],1)],1)],1)},o=[],a=r("c7eb"),s=r("1da1"),c=(r("fb6a"),r("38cf"),r("14d9"),r("99af"),r("a15b"),r("d3b7"),r("159b"),r("b680"),r("498a"),r("d81d"),r("2b0e")),i={name:"About",components:{},watch:{$route:{immediate:!0,handler:function(e,t){var r=this;return Object(s["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.loadData();case 2:case"end":return e.stop()}}),e)})))()}}},methods:{_getVersion:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.callAPI_get("/api/v1/image-info/do/get");case 2:r=t.sent,r.ok&&e.T.notNothing(r.data)?e.about={version:r.data.CI_COMMIT_REF_NAME,architecture:r.data.ARCHITECTURE,vueVersion:c["default"].version,nodeVersion:r.data.NODE_VERSION,pythonVersion:r.data.PYTHON_VERSION,releaseTimestamp:r.data.CREATE_TIMESTAMP}:e.about={version:e.NO_INFO_TEXT,architecture:e.NO_INFO_TEXT,vueVersion:e.NO_INFO_TEXT,nodeVersion:e.NO_INFO_TEXT,pythonVersion:e.NO_INFO_TEXT,releaseDate:e.NO_INFO_TEXT};case 4:case"end":return t.stop()}}),t)})))()},_getDBSchemaVersion:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var r;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dbSchemaVersionInfoTEXT="",t.next=3,e.T.callAPI_get("/api/v1/upgrade-info",{query:{seq:"latest"}});case 3:r=t.sent,r.ok?e.T.isNothing(r.data)?e.dbSchemaVersionInfoTEXT="seq = 0":e.dbSchemaVersionInfoTEXT="seq = ".concat(r.data[0].seq):e.dbSchemaVersionInfoTEXT=e.NO_INFO_TEXT;case 5:case"end":return t.stop()}}),t)})))()},_getSysStats:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var r,n,o,s,c,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.serverCPUPercentInfoTEXT="",e.serverMemoryRSSInfoTEXT="",e.workerCPUPercentInfoTEXT="",e.workerMemoryPSSInfoTEXT="",e.dbDiskUsedInfoTEXT="",e.cacheDBMemoryUsedInfoTEXT="",e.cacheDBKeyUsedInfoTEXT="",e.workerQueueLengthInfoTEXT="",t.next=10,e.T.callAPI_get("/api/v1/monitor/sys-stats/do/get");case 10:if(r=t.sent,r.ok&&e.T.notNothing(r.data)){for(c in n=function(t,r,n){r=r||"",n=n||"",Array.isArray(t)&&(t={"":t});var o=[],a=0;for(var s in t)s.length>a&&(a=s.length);for(var c in t){var i=t[c];if(!e.T.isNothing(i)){var u=i.slice(-1)[0],l=u[0];if(!(Date.now()-l>9e5)){var d=u[1],h=" ".repeat(a-c.length);Array.isArray(r)&&(r=d>1?r[0]:r[1]),o.push("".concat(n).concat(c).concat(h," = ").concat(d).concat(r))}}}return o.join("\n")},o=r.data,e.serverCPUPercentInfoTEXT=n(o.serverCPUPercent,"%"),e.serverMemoryRSSInfoTEXT=n(o.serverMemoryRSS," MB"),e.workerCPUPercentInfoTEXT=n(o.workerCPUPercent,"%"),e.workerMemoryPSSInfoTEXT=n(o.workerMemoryPSS," MB"),e.dbDiskUsedInfoTEXT=n(o.dbDiskUsed," MB"),e.cacheDBKeyUsedInfoTEXT=n(o.cacheDBKeyUsed,[" Keys"," Key"]),e.cacheDBMemoryUsedInfoTEXT=n(o.cacheDBMemoryUsed," MB"),e.workerQueueLengthInfoTEXT=n(o.workerQueueLength,[" Tasks"," Task"],"#"),s=[],o.workerQueueLength)i=o.workerQueueLength[c],s.push({name:c,value:i.slice(-1)[0][1]});e.workerQueues=s}else e.serverCPUPercentInfoTEXT=e.NO_INFO_TEXT,e.serverMemoryRSSInfoTEXT=e.NO_INFO_TEXT,e.workerCPUPercentInfoTEXT=e.NO_INFO_TEXT,e.workerMemoryPSSInfoTEXT=e.NO_INFO_TEXT,e.dbDiskUsedInfoTEXT=e.NO_INFO_TEXT,e.cacheDBKeyUsedInfoTEXT=e.NO_INFO_TEXT,e.cacheDBMemoryUsedInfoTEXT=e.NO_INFO_TEXT,e.workerQueueLengthInfoTEXT=e.NO_INFO_TEXT;case 12:case"end":return t.stop()}}),t)})))()},_getNodesStats:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var r,n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.nodesStatsInfoTEXT="",t.next=3,e.T.callAPI_get("/api/v1/monitor/nodes/do/get-stats");case 3:r=t.sent,r.ok&&e.T.notNothing(r.data)?(n=[],r.data.forEach((function(t){var r=t.node.split("@")[1];n.push("\nNODE = ".concat(r)),n.push("  Pool   = ".concat(t.pool.processes.length," / ").concat(t.pool["max-concurrency"])),n.push("  Proc   = ".concat(t.pool.processes.join(", "))),n.push("  Dist#  = ".concat(t.pool.writes.raw," Tasks")),n.push("  Dist%  = ".concat(t.pool.writes.all)),n.push("  maxrss = ".concat((t.rusage.maxrss/1024).toFixed(2)," MB")),n.push("  ixrss  = ".concat((t.rusage.ixrss/1024).toFixed(2)," MB")),n.push("  idrss  = ".concat((t.rusage.idrss/1024).toFixed(2)," MB")),n.push("  isrss  = ".concat((t.rusage.isrss/1024).toFixed(2)," MB")),e.cacheDBNumberInfoTEXT=" = ".concat(t.broker.virtual_host)})),e.nodesStatsInfoTEXT=n.join("\n").trim()):e.nodesStatsInfoTEXT=e.NO_INFO_TEXT;case 5:case"end":return t.stop()}}),t)})))()},_getNodesActiveQueues:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var r,n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.nodesActiveQueuesInfoTEXT="",t.next=3,e.T.callAPI_get("/api/v1/monitor/nodes/do/get-active-queues");case 3:r=t.sent,r.ok&&e.T.notNothing(r.data)?(n=[],r.data.forEach((function(e){var t=e.node.split("@")[1];n.push("\nNODE = ".concat(t));var r=e.activeQueues.map((function(e){return"#"+e.shortName}));n.push("  ".concat(r.join(", "))),n.push("  --- ".concat(e.activeQueues.length," Active Queues ---"))})),e.nodesActiveQueuesInfoTEXT=n.join("\n").trim()):e.nodesActiveQueuesInfoTEXT=e.NO_INFO_TEXT;case 5:case"end":return t.stop()}}),t)})))()},loadData:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$store.commit("updateLoadStatus",!0),e._getVersion();case 2:case"end":return t.stop()}}),t)})))()},getSystemReport:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.showSystemReport=!0,e._getDBSchemaVersion(),e._getSysStats(),e._getNodesStats(),e._getNodesActiveQueues();case 5:case"end":return t.stop()}}),t)})))()},clearWorkerQueue:function(e){var t=this;return Object(s["a"])(Object(a["a"])().mark((function r(){return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.T.confirm(t.$t("Are you sure you want to clear the Worker Queue?"));case 2:if(r.sent){r.next=4;break}return r.abrupt("return");case 4:return r.next=6,t.T.callAPI("post","/api/v1/monitor/worker-queues/do/clear",{body:{workerQueues:[e]},alert:{okMessage:"".concat(t.$t("Worker Queue cleared"),"\n            <br><small>").concat(t.$t("Please note that there may be a delay in the system reporting"),"<small>")}});case 6:r.sent;case 7:case"end":return r.stop()}}),r)})))()},clearLogCacheTables:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.confirm(e.$t("Are you sure you want to clear the Log and Cache?"));case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.T.callAPI("post","/api/v1/log-cache-tables/do/clear",{alert:{okMessage:"".concat(e.$t("Log and Cache cleared"),"\n            <br><small>").concat(e.$t("Please note that there may be a delay in the system reporting"),"<small>")}});case 6:t.sent;case 7:case"end":return t.stop()}}),t)})))()}},computed:{NO_INFO_TEXT:function(){return this.$t("No Data")},systemReportTEXT:function(){return["[".concat(this.$t("DB Schema Version"),"]"),this.dbSchemaVersionInfoTEXT,"\n[".concat(this.$t("Web Server CPU Usage"),"]"),this.serverCPUPercentInfoTEXT,"\n[".concat(this.$t("Web Server Memory Usage"),"]"),this.serverMemoryRSSInfoTEXT,"\n[".concat(this.$t("Worker CPU Usage"),"]"),this.workerCPUPercentInfoTEXT,"\n[".concat(this.$t("Worker Memory Usage"),"]"),this.workerMemoryPSSInfoTEXT,"\n[".concat(this.$t("DB Disk Usage"),"]"),this.dbDiskUsedInfoTEXT,"\n[".concat(this.$t("Cache DB Number"),"]"),this.cacheDBNumberInfoTEXT,"\n[".concat(this.$t("Cache Key Count"),"]"),this.cacheDBKeyUsedInfoTEXT,"\n[".concat(this.$t("Cache Memory Usage"),"]"),this.cacheDBMemoryUsedInfoTEXT,"\n[".concat(this.$t("Worker Node Status"),"]"),this.nodesStatsInfoTEXT,"\n[".concat(this.$t("Wroker Queue Distribution"),"]"),this.nodesActiveQueuesInfoTEXT,"\n[".concat(this.$t("Wroker Queue Length"),"]"),this.workerQueueLengthInfoTEXT].join("\n")},releaseDateTEXT:function(){var e="",t="",r=Date.now();if(this.about.releaseTimestamp>0)this.about.releaseTimestamp;return e=this.M.utc(r).locale(this.T.getUILocale()).utcOffset(8).format("YYYY-MM-DD HH:mm:ss"),t=this.M.utc(r).locale(this.T.getUILocale()).fromNow(),e&&t?"".concat(e," ").concat(this.$t("(")).concat(t).concat(this.$t(")")):"-"}},props:{},data:function(){return{about:{},showSystemReport:!1,dbSchemaVersionInfoTEXT:"",dbDiskUsedInfoTEXT:"",cacheDBNumberInfoTEXT:"",cacheDBKeyUsedInfoTEXT:"",cacheDBMemoryUsedInfoTEXT:"",serverCPUPercentInfoTEXT:"",serverMemoryRSSInfoTEXT:"",workerCPUPercentInfoTEXT:"",workerMemoryPSSInfoTEXT:"",nodesStatsInfoTEXT:"",nodesActiveQueuesInfoTEXT:"",workerQueueLengthInfoTEXT:"",workerQueues:[]}}},u=i,l=(r("d553"),r("a3fe"),r("2877")),d=r("fb21"),h=r("190e"),f=Object(l["a"])(u,n,o,!1,null,"89cbb9dc",null);"function"===typeof d["default"]&&Object(d["default"])(f),"function"===typeof h["default"]&&Object(h["default"])(f);t["default"]=f.exports},a3fe:function(e,t,r){"use strict";r("5861")},d553:function(e,t,r){"use strict";r("631a")},fb21:function(e,t,r){"use strict";var n=r("476e"),o=r.n(n);t["default"]=o.a}}]);