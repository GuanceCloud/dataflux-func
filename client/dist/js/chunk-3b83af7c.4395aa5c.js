(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b83af7c","chunk-7af9c208"],{"0bcd":function(e,t,r){"use strict";r.r(t);r("99af"),r("b0c0");var a=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"fade"}},[t("el-container",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[t("el-header",{attrs:{height:"60px"}},[t("div",{staticClass:"common-page-header"},[t("h1",[e._v(e._s(e.$t("Script Lib Recover")))]),e._v(" "),t("div",{staticClass:"header-control"})])]),e._v(" "),t("el-main",[e.T.isNothing(e.data)?t("div",{staticClass:"no-data-area"},[e.T.isPageFiltered()?t("h1",{staticClass:"no-data-title"},[t("i",{staticClass:"fa fa-fw fa-search"}),e._v(e._s(e.$t("No matched data found")))]):t("h1",{staticClass:"no-data-title"},[t("i",{staticClass:"fa fa-fw fa-info-circle"}),e._v(e._s(e.$t("No Recover Point has ever been created")))]),e._v(" "),t("p",{staticClass:"no-data-tip"},[e._v("\n          "+e._s(e.$t("System automatically creates Script Lib Recover Points before importing, installing Script Sets."))+"\n          "),t("br"),e._v(e._s(e.$t("Recover Points can also be created manually."))+"\n        ")]),e._v(" "),t("el-button",{on:{click:function(t){return e.openSetup(null,"add")}}},[t("i",{staticClass:"fa fa-fw fa-camera"}),e._v("\n          "+e._s(e.$t("Create Recover Point"))+"\n        ")])],1):t("el-timeline",e._l(e.data,(function(r){return t("el-timeline-item",{key:r.id,attrs:{placement:"top",size:"large",type:"primary",timestamp:"".concat(e.T.getDateTimeString(r.createTime)," (").concat(e.T.fromNow(r.createTime),")")}},[t("el-card",{staticClass:"recover-point-card",attrs:{shadow:"hover"}},[t("span",{staticClass:"text-info"},[e._v("#")]),e._v(" "),t("span",{staticClass:"text-main text-large"},[e._v(e._s(r.seq))]),e._v(" "),t("span",{staticClass:"recover-point-title",class:e.C.SCRIPT_RECOVER_POINT_MAP.get(r.type).textClass},[e._v(e._s(e.C.SCRIPT_RECOVER_POINT_MAP.get(r.type).name))]),e._v(" "),t("div",{staticClass:"recover-point-operation"},[t("el-button",{attrs:{type:r.nodeType,plain:"",size:"small"},on:{click:function(t){return e.quickSubmitData(r,"recover")}}},[e._v("\n                "+e._s(e.$t("Recover"))+"\n              ")])],1),e._v(" "),r.note?t("div",{staticClass:"recover-point-note"},[t("pre",{staticClass:"text-info text-small"},[e._v(e._s(r.note))])]):e._e()])],1)})),1)],1),e._v(" "),e.T.notNothing(e.data)?t("el-footer",[t("div",{staticClass:"setup-page-footer"},[t("el-button",{on:{click:function(t){return e.openSetup(null,"add")}}},[t("i",{staticClass:"fa fa-fw fa-camera"}),e._v("\n          "+e._s(e.$t("Create Recover Point"))+"\n        ")])],1)]):e._e(),e._v(" "),t("ScriptRecoverPointAdd",{ref:"setup"})],1)],1)},n=[],o=r("c7eb"),i=r("1da1"),c=r("5f2f"),s={name:"ScriptRecoverPointList",components:{ScriptRecoverPointAdd:c["default"]},watch:{$route:{immediate:!0,handler:function(e,t){var r=this;return Object(i["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.loadData();case 2:case"end":return e.stop()}}),e)})))()}}},methods:{loadData:function(e){var t=this;return Object(i["a"])(Object(o["a"])().mark((function e(){var r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.T.callAPI_get("/api/v1/script-recover-points/do/list",{query:{pageSize:20}});case 2:if(r=e.sent,r&&r.ok){e.next=5;break}return e.abrupt("return");case 5:t.data=r.data,t.$store.commit("updateLoadStatus",!0);case 7:case"end":return e.stop()}}),e)})))()},quickSubmitData:function(e,t){var r=this;return Object(i["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.t0=t,a.next="recover"===a.t0?3:8;break;case 3:return a.next=5,r.T.confirm(r.$t('After recovery, the entire Script Lib will be reset to the state at the time the Recover Point was created and will take effect immediately.<hr class="br">Are you sure you want to recover?'));case 5:if(a.sent){a.next=7;break}return a.abrupt("return");case 7:return a.abrupt("break",8);case 8:n=null,a.t1=t,a.next="recover"===a.t1?12:16;break;case 12:return a.next=14,r.T.callAPI("post","/api/v1/script-recover-points/:id/do/recover",{params:{id:e.id},alert:{okMessage:r.$t("Script Lib recovered")}});case 14:return n=a.sent,a.abrupt("break",16);case 16:if(n&&n.ok){a.next=18;break}return a.abrupt("return");case 18:return a.next=20,r.loadData();case 20:case"end":return a.stop()}}),a)})))()},openSetup:function(e,t){switch(t){case"add":this.$refs.setup.loadData();break}}},props:{},data:function(){return{data:[]}},created:function(){var e=this;this.$root.$on("reload.scriptRecoverPointList",(function(){return e.loadData()}))},destroyed:function(){this.$root.$off("reload.scriptRecoverPointList")}},u=s,l=(r("2127"),r("2877")),p=r("1118"),f=r("84d1"),d=r("47ae"),v=Object(l["a"])(u,a,n,!1,null,"0e66aafc",null);"function"===typeof p["default"]&&Object(p["default"])(v),"function"===typeof f["default"]&&Object(f["default"])(v),"function"===typeof d["default"]&&Object(d["default"])(v);t["default"]=v.exports},1118:function(e,t,r){"use strict";var a=r("403b"),n=r.n(a);t["default"]=n.a},2127:function(e,t,r){"use strict";r("fd57")},2971:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"After recovery, the entire Script Lib will be reset to the state at the time the Recover Point was created and will take effect immediately.<hr class=\\"br\\">Are you sure you want to recover?":"執行恢復後，整個腳本庫將重置到還原點創建時的狀態且立即生效。<hr class=\\"br\\">是否確認恢復？","Create Recover Point":"創建還原點","No Recover Point has ever been created":"從未創建過任何還原點","Recover Points can also be created manually.":"也可以手動創建腳本庫還原點。","Script Lib Recover":"腳本庫還原","Script Lib recovered":"腳本庫已還原","System automatically creates Script Lib Recover Points before importing, installing Script Sets.":"在導入、安裝腳本集前，系統會自動創建還原點。"}}'),delete e.options._Ctor}},"30d5":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Create Recover Point":"創建還原點","Meaningful notes can provide a reliable reference for the future":"有意義的備註可以為將來提供可靠的參考","Please input note":"請輸入備註","Recover Point created by {userName}":"{userName} 創建的還原點","Script Lib Recover Point created":"腳本庫還原點已創建","Script Lib Recover Points":"腳本庫還原點"}}'),delete e.options._Ctor}},"403b":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Script Lib Recover":"脚本库还原","Create Recover Point":"创建还原点","Script Lib recovered":"脚本库已还原","No Recover Point has ever been created":"从未创建过任何还原点","System automatically creates Script Lib Recover Points before importing, installing Script Sets.":"在导入、安装脚本集前，系统会自动创建还原点。","Recover Points can also be created manually.":"也可以手动创建脚本库还原点。","After recovery, the entire Script Lib will be reset to the state at the time the Recover Point was created and will take effect immediately.<hr class=\\"br\\">Are you sure you want to recover?":"执行恢复后，整个脚本库将重置到还原点创建时的状态且立即生效。<hr class=\\"br\\">是否确认恢复？"}}'),delete e.options._Ctor}},"47ae":function(e,t,r){"use strict";var a=r("bd99"),n=r.n(a);t["default"]=n.a},5426:function(e,t,r){"use strict";var a=r("5cc0"),n=r.n(a);t["default"]=n.a},"5cc0":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Create Recover Point":"建立還原點","Meaningful notes can provide a reliable reference for the future":"有意義的備註可以為將來提供可靠的參考","Please input note":"請輸入備註","Recover Point created by {userName}":"{userName} 建立的還原點","Script Lib Recover Point created":"指令碼庫還原點已建立","Script Lib Recover Points":"指令碼庫還原點"}}'),delete e.options._Ctor}},"5f2f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"ScriptSetSetup",visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"750px"},on:{"update:visible":function(t){e.show=t}}},[t("template",{slot:"title"},[e._v("\n    "+e._s(e.$t("Create Recover Point"))+"\n  ")]),e._v(" "),t("el-container",{attrs:{direction:"vertical"}},[t("el-main",[t("div",{staticClass:"setup-form"},[t("el-form",{ref:"form",attrs:{"label-width":"135px",model:e.form,rules:e.formRules}},[t("el-form-item",{attrs:{label:e.$t("Note"),prop:"note"}},[t("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:5},maxlength:"5000"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}}),e._v(" "),t("InfoBlock",{attrs:{title:e.$t("Meaningful notes can provide a reliable reference for the future")}})],1),e._v(" "),t("el-form-item",{staticClass:"setup-footer"},[t("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],attrs:{type:"primary"},on:{click:e.submitData}},[e._v(e._s(e.$t("Create")))])],1)],1)],1)])],1)],2)},n=[],o=r("c7eb"),i=r("1da1"),c=(r("b0c0"),{name:"ScriptRecoverPointAdd",components:{},watch:{show:function(e){e||this.$root.$emit("reload.scriptRecoverPointList")}},methods:{loadData:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.show=!0;case 1:case"end":return t.stop()}}),t)})))()},submitData:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t["catch"](0),t.abrupt("return",console.error(t.t0));case 8:return t.next=10,e.addData();case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,null,[[0,5]])})))()},addData:function(){var e=this;return Object(i["a"])(Object(o["a"])().mark((function t(){var r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.callAPI("post","/api/v1/script-recover-points/do/add",{body:{data:e.T.jsonCopy(e.form)},alert:{okMessage:e.$t("Script Lib Recover Point created")}});case 2:if(r=t.sent,r&&r.ok){t.next=5;break}return t.abrupt("return");case 5:e.show=!1;case 6:case"end":return t.stop()}}),t)})))()}},props:{},data:function(){var e=this.$store.state.userProfile.name||this.$store.state.userProfile.username,t=this.$t("Recover Point created by {userName}",{userName:e});return{show:!1,form:{note:t},formRules:{note:[{trigger:"blur",message:this.$t("Please input note"),required:!0,min:1}]}}},created:function(){this.$store.commit("updateLoadStatus",!0)}}),s=c,u=r("2877"),l=r("68ec"),p=r("868d"),f=r("5426"),d=Object(u["a"])(s,a,n,!1,null,"b0c1be1c",null);"function"===typeof l["default"]&&Object(l["default"])(d),"function"===typeof p["default"]&&Object(p["default"])(d),"function"===typeof f["default"]&&Object(f["default"])(d);t["default"]=d.exports},"68ec":function(e,t,r){"use strict";var a=r("ffc4"),n=r.n(a);t["default"]=n.a},"84d1":function(e,t,r){"use strict";var a=r("2971"),n=r.n(a);t["default"]=n.a},"868d":function(e,t,r){"use strict";var a=r("30d5"),n=r.n(a);t["default"]=n.a},bd99:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"After recovery, the entire Script Lib will be reset to the state at the time the Recover Point was created and will take effect immediately.<hr class=\\"br\\">Are you sure you want to recover?":"執行恢復後，整個指令碼庫將重置到還原點建立時的狀態且立即生效。<hr class=\\"br\\">是否確認恢復？","Create Recover Point":"建立還原點","No Recover Point has ever been created":"從未建立過任何還原點","Recover Points can also be created manually.":"也可以手動建立指令碼庫還原點。","Script Lib Recover":"指令碼庫還原","Script Lib recovered":"指令碼庫已還原","System automatically creates Script Lib Recover Points before importing, installing Script Sets.":"在匯入、安裝指令碼集前，系統會自動建立還原點。"}}'),delete e.options._Ctor}},fd57:function(e,t,r){},ffc4:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Create Recover Point":"创建还原点","Script Lib Recover Points":"脚本库还原点","Recover Point created by {userName}":"{userName} 创建的还原点","Meaningful notes can provide a reliable reference for the future":"有意义的备注可以为将来提供可靠的参考","Please input note":"请输入备注","Script Lib Recover Point created":"脚本库还原点已创建"}}'),delete e.options._Ctor}}}]);