(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0116395c"],{"09bf":function(t,e,a){"use strict";a("15ec")},"15ec":function(t,e,a){},2020:function(t,e,a){"use strict";var s=a("a2b7"),n=a.n(s);e["default"]=n.a},6678:function(t,e,a){"use strict";var s=a("759be"),n=a.n(s);e["default"]=n.a},"759be":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"lastSucceeded":"Succeeded {t}","lastFailed":"Failed {t}","lastRan":"Ran {t}","successCount":"Success {n}","failureCount":"Failure {n}"}}'),delete t.options._Ctor}},"99d5":function(t,e,a){"use strict";a.r(e);a("b0c0");var s=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[e("el-container",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[e("el-header",{attrs:{height:"60px"}},[e("div",{staticClass:"page-header"},[e("span",[t._v(t._s(t.$t("Batch")))]),t._v(" "),e("div",{staticClass:"header-control"},[e("FuzzySearchInput",{attrs:{dataFilter:t.dataFilter}}),t._v(" "),e("el-tooltip",{attrs:{content:t.$t("Show all contents"),placement:"bottom",enterable:!1}},[e("el-checkbox",{attrs:{border:!0,size:"small","true-label":"_ALL","false-label":"user"},on:{change:function(e){return t.T.changePageFilter(t.dataFilter)}},model:{value:t.dataFilter.origin,callback:function(e){t.$set(t.dataFilter,"origin",e)},expression:"dataFilter.origin"}},[t._v(t._s(t.$t("Show all")))])],1),t._v(" "),e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.openSetup(null,"add")}}},[e("i",{staticClass:"fa fa-fw fa-plus"}),t._v("\n            "+t._s(t.$t("New"))+"\n          ")])],1)])]),t._v(" "),e("el-main",{staticClass:"common-table-container"},[t.T.isNothing(t.data)?e("div",{staticClass:"no-data-area"},[t.T.isPageFiltered({ignore:{origin:"_ALL"}})?e("h1",{staticClass:"no-data-title"},[e("i",{staticClass:"fa fa-fw fa-search"}),t._v(t._s(t.$t("No matched data found")))]):e("h1",{staticClass:"no-data-title"},[e("i",{staticClass:"fa fa-fw fa-info-circle"}),t._v(t._s(t.$t("No Batch has ever been added")))]),t._v(" "),e("p",{staticClass:"no-data-tip"},[t._v("\n          "+t._s(t.$t("Using Batches, you can execute long and time-consuming Python functions"))+"\n        ")])]):e("el-table",{staticClass:"common-table",attrs:{height:"100%",data:t.data,"row-class-name":t.T.getHighlightRowCSS}},[e("el-table-column",{attrs:{label:t.$t("Func"),"min-width":"420"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("FuncInfo",{attrs:{id:a.row.func_id,title:a.row.func_title,kwargsJSON:a.row.funcCallKwargsJSON}}),t._v(" "),e("div",[e("span",{staticClass:"text-info"},[t._v("ID")]),t._v("\n               "),e("code",{staticClass:"text-main"},[t._v(t._s(a.row.id))]),t._v(" "),e("CopyButton",{attrs:{content:a.row.id}}),t._v(" "),t.T.notNothing(a.row.tagsJSON)||t.T.notNothing(a.row.func_tagsJSON)?[e("br"),t._v(" "),e("span",{staticClass:"text-info"},[t._v("　"+t._s(t.$t("Tags")))]),t._v(" "),t._l(a.row.func_tagsJSON,(function(a){return e("el-tag",{key:a,attrs:{size:"mini",type:"info"}},[t._v(t._s(a))])})),t._v(" "),t._l(a.row.tagsJSON,(function(a){return e("el-tag",{key:a,attrs:{size:"mini",type:"warning"}},[t._v(t._s(a))])}))]:t._e(),t._v(" "),a.row.note?[e("br"),t._v(" "),e("span",{staticClass:"text-info"},[t._v("　"+t._s(t.$t("Note"))+t._s(t.$t(":")))]),t._v(" "),e("span",[t._v(t._s(a.row.note))])]:t._e()],2)]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Config"),width:"220"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"text-info"},[t._v(t._s(t.$t("Auth"))+t._s(t.$t(":")))]),t._v(" "),e("el-tooltip",{attrs:{content:a.row.apia_name,disabled:!a.row.apia_name,placement:"right"}},[e("span",{class:{"text-main":!!a.row.apia_id}},[t._v(t._s(t.C.API_AUTH_MAP.get(a.row.apia_type).name))])])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Status"),width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.isDisabled?e("span",{staticClass:"text-bad"},[e("i",{staticClass:"fa fa-fw fa-ban"}),t._v(" "+t._s(t.$t("Disabled")))]):e("span",{staticClass:"text-good"},[e("i",{staticClass:"fa fa-fw fa-check"}),t._v(" "+t._s(t.$t("Enabled")))]),t._v(" "),a.row.lastStartTime?[e("br"),t._v(" "),"success"===a.row.lastStatus?e("span",{staticClass:"text-good"},[e("i",{staticClass:"fa fa-fw fa-check"}),t._v(" "+t._s(t.$t("lastSucceeded",{t:t.T.fromNow(a.row.lastStartTime)}))+"\n              ")]):"failure"===a.row.lastStatus?e("span",{staticClass:"text-bad"},[e("i",{staticClass:"fa fa-fw fa-times"}),t._v(" "+t._s(t.$t("lastFailed",{t:t.T.fromNow(a.row.lastStartTime)}))+"\n              ")]):e("span",{staticClass:"text-main"},[e("i",{staticClass:"fa fa-fw fa-clock-o"}),t._v(" "+t._s(t.$t("lastRan",{t:t.T.fromNow(a.row.lastStartTime)}))+"\n              ")]),t._v(" "),e("br"),t._v(" "),e("i",{staticClass:"fa fa-fw fa-pie-chart text-info"}),t._v(" "),e("span",{class:{"text-good":!!a.row.recentSuccessCount}},[t._v(t._s(t.$t("successCount",{n:t.T.numberLimit(a.row.recentSuccessCount)})))]),t._v("\n              / "),e("span",{class:{"text-bad":!!a.row.recentFailureCount}},[t._v(t._s(t.$t("failureCount",{n:t.T.numberLimit(a.row.recentFailureCount)})))])]:t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"right",width:"350"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-link",{attrs:{disabled:!a.row.taskInfoCount},on:{click:function(e){return t.openTaskInfo(a.row)}}},[t._v("\n              "+t._s(t.$t("Recent"))+" "),a.row.taskInfoCount?e("code",[t._v("("+t._s(t.T.numberLimit(a.row.taskInfoCount))+")")]):t._e()]),t._v(" "),e("el-link",{attrs:{disabled:t.T.isNothing(a.row.func_id)},on:{click:function(e){return t.showAPI(a.row)}}},[t._v(t._s(t.$t("Example")))]),t._v(" "),a.row.isDisabled?e("el-link",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],attrs:{disabled:t.T.isNothing(a.row.func_id)},on:{click:function(e){return t.quickSubmitData(a.row,"enable")}}},[t._v(t._s(t.$t("Enable")))]):t._e(),t._v(" "),a.row.isDisabled?t._e():e("el-link",{attrs:{disabled:t.T.isNothing(a.row.func_id)},on:{click:function(e){return t.quickSubmitData(a.row,"disable")}}},[t._v(t._s(t.$t("Disable")))]),t._v(" "),e("el-link",{attrs:{disabled:t.T.isNothing(a.row.func_id)},on:{click:function(e){return t.openSetup(a.row,"setup")}}},[t._v(t._s(t.$t("Setup")))]),t._v(" "),e("el-link",{on:{click:function(e){return t.quickSubmitData(a.row,"delete")}}},[t._v(t._s(t.$t("Delete")))])]}}])})],1)],1),t._v(" "),e("Pager",{attrs:{pageInfo:t.pageInfo}}),t._v(" "),e("APIExampleDialog",{ref:"apiExampleDialog",attrs:{description:t.$t("Batch only supports asynchronous calling"),showExecModeOption:!1,showPostExample:!0,showPostExampleSimplified:!0,showGetExample:!0,showGetExampleSimplified:!0}})],1)],1)},n=[],i=a("c7eb"),r=a("1da1"),o=(a("130f"),a("14d9"),a("b3fd")),c={name:"BatchList",components:{APIExampleDialog:o["a"]},watch:{$route:{immediate:!0,handler:function(t,e){var a=this;return Object(r["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.loadData();case 2:case"end":return t.stop()}}),t)})))()}},"$store.state.isLoaded":function(t){var e=this;t&&setImmediate((function(){return e.T.autoScrollTable()}))}},methods:{loadData:function(){var t=this;return Object(r["a"])(Object(i["a"])().mark((function e(){var a,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dataFilter=t.T.createListQuery({_withTaskInfo:!0}),t.T.isNothing(t.$route.query)&&(a.origin="user"),e.next=4,t.T.callAPI_get("/api/v1/batches/do/list",{query:a});case 4:if(s=e.sent,s&&s.ok){e.next=7;break}return e.abrupt("return");case 7:t.data=s.data,t.pageInfo=s.pageInfo,t.$store.commit("updateLoadStatus",!0);case 10:case"end":return e.stop()}}),e)})))()},quickSubmitData:function(t,e){var a=this;return Object(r["a"])(Object(i["a"])().mark((function s(){var n;return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:s.t0=e,s.next="disable"===s.t0?3:"delete"===s.t0?8:13;break;case 3:return s.next=5,a.T.confirm(a.$t("Are you sure you want to disable the Batch?"));case 5:if(s.sent){s.next=7;break}return s.abrupt("return");case 7:return s.abrupt("break",13);case 8:return s.next=10,a.T.confirm(a.$t("Are you sure you want to delete the Batch?"));case 10:if(s.sent){s.next=12;break}return s.abrupt("return");case 12:return s.abrupt("break",13);case 13:n=null,s.t1=e,s.next="disable"===s.t1?17:"enable"===s.t1?21:"delete"===s.t1?25:29;break;case 17:return s.next=19,a.T.callAPI("post","/api/v1/batches/:id/do/modify",{params:{id:t.id},body:{data:{isDisabled:!0}},alert:{okMessage:a.$t("Batch disabled")}});case 19:return n=s.sent,s.abrupt("break",29);case 21:return s.next=23,a.T.callAPI("post","/api/v1/batches/:id/do/modify",{params:{id:t.id},body:{data:{isDisabled:!1}},alert:{okMessage:a.$t("Batch enabled")}});case 23:return n=s.sent,s.abrupt("break",29);case 25:return s.next=27,a.T.callAPI("/api/v1/batches/:id/do/delete",{params:{id:t.id},alert:{okMessage:a.$t("Batch deleted")}});case 27:return n=s.sent,s.abrupt("break",29);case 29:if(n&&n.ok){s.next=31;break}return s.abrupt("return");case 31:return a.$store.commit("updateHighlightedTableDataId",t.id),s.next=34,a.loadData();case 34:case"end":return s.stop()}}),s)})))()},openSetup:function(t,e){var a=this.T.packRouteQuery();switch(this.$store.commit("updateTableList_scrollY"),e){case"add":this.$router.push({name:"batch-add",query:a});break;case"setup":this.$store.commit("updateHighlightedTableDataId",t.id),this.$router.push({name:"batch-setup",params:{id:t.id},query:a});break}},openTaskInfo:function(t){var e=this.T.packRouteQuery();this.$store.commit("updateHighlightedTableDataId",t.id),this.$store.commit("updateTableList_scrollY"),this.$router.push({name:"task-info-list",params:{id:t.id},query:e})},showAPI:function(t){var e=this;return Object(r["a"])(Object(i["a"])().mark((function a(){var s,n,r,o,c,l;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.T.callAPI_getOne("/api/v1/funcs/do/list",t.funcId);case 2:if(s=a.sent,s&&s.ok){a.next=5;break}return a.abrupt("return");case 5:for(c in n=s.data.kwargsJSON,r=e.T.formatURL("/api/v1/bat/:id",{baseURL:!0,params:{id:t.id}}),o={},t.funcCallKwargsJSON)t.funcCallKwargsJSON.hasOwnProperty(c)&&e.common.isFuncArgumentPlaceholder(t.funcCallKwargsJSON[c])&&(o[c]=t.funcCallKwargsJSON[c]);l={kwargs:o},e.$store.commit("updateHighlightedTableDataId",t.id),e.$refs.apiExampleDialog.update(r,l,n);case 12:case"end":return a.stop()}}),a)})))()}},computed:{},props:{},data:function(){var t=this.T.createPageInfo(),e=this.T.createListQuery();return{data:[],pageInfo:t,dataFilter:{_fuzzySearch:e._fuzzySearch,origin:e.origin}}}},l=c,u=(a("09bf"),a("2877")),d=a("6678"),f=a("2020"),p=Object(u["a"])(l,s,n,!1,null,"8cd7615a",null);"function"===typeof d["default"]&&Object(d["default"])(p),"function"===typeof f["default"]&&Object(f["default"])(p);e["default"]=p.exports},a2b7:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Config":"配置","Auth":"认证","Recent":"近期调用","Batch disabled":"批处理已禁用","Batch enabled":"批处理已启用","Batch deleted":"批处理已删除","Show all contents":"展示全部内容","No Batch has ever been added":"从未添加过任何批处理","Batch only supports asynchronous calling":"批处理只支持异步调用","Are you sure you want to disable the Batch?":"是否确认禁用此批处理？","Are you sure you want to delete the Batch?":"是否确认删除此批处理？","lastSucceeded":"{t}调用成功","lastFailed":"{t}调用失败","lastRan":"{t}调用","successCount":"成功 {n}","failureCount":"失败 {n}","Using Batches, you can execute long and time-consuming Python functions":"使用批处理，可以执行长耗时的 Python 函数"}}'),delete t.options._Ctor}}}]);