(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50729480"],{"1f58":function(e,t,n){"use strict";n("3f18")},2382:function(e,t,n){"use strict";n("6f3b")},"36fa":function(e,t,n){"use strict";var a=n("7804"),r=n.n(a);t["default"]=r.a},"3f18":function(e,t,n){},"6d78":function(e,t,n){"use strict";var a=n("ede8"),r=n.n(a);t["default"]=r.a},"6f3b":function(e,t,n){},7804:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"retryMinutes":"Please retry after {n} minute | Please retry after {n} minutes"}}'),delete e.options._Ctor}},"83ed":function(e,t,n){"use strict";var a=n("abaa"),r=n.n(a);t["default"]=r.a},abaa:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Please select sign in method":"请选择登录方式","System built-in sign":"系统内置登录","Username":"请输入账号","Password":"请输入密码","Captcha":"请输入验证码","Sign In":"登录","Please input username":"请输入用户名","Please input password":"请输入密码","Please input captcha":"请输入验证码","Captcha should be a 4-digit number":"验证码为4位数字","Invalid username or password":"用户名或密码错误","Invalid captcha":"验证码错误或无效","User has been disabled":"当前用户已被禁用","User has been temporarily locked":"当前用户已被临时锁定","retryMinutes":"请在 {n} 分钟后重试","Worker no response, please check the status of this system":"工作单元没有响应，请检查系统状态","Integration sign-in func returned an unexpected value, please contact admin":"集成登录函数返回了未预期的结果，请联系系统管理员","Sign in failed. Error occured in integration sign-in func, please concat admin":"登录失败。集成登录函数抛出异常，请联系系统管理员","Sign in failed. Integration sign-in func timeout, please concat admin":"登录失败，集成登录函数超时，请联系系统管理员","Sign in failed. Integration sign-in func returned `False` or empty value, please concat admin":"登录失败，集成登录函数返回`False`或空内容，请联系系统管理员"}}'),delete e.options._Ctor}},bac6:function(e,t,n){},cc8d:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Captcha":"請輸入驗證碼","Captcha should be a 4-digit number":"驗證碼為4位數字","Integration sign-in func returned an unexpected value, please contact admin":"集成登錄函數返回了未預期的結果，請聯繫系統管理員","Invalid captcha":"驗證碼錯誤或無效","Invalid username or password":"用户名或密碼錯誤","Password":"請輸入密碼","Please input captcha":"請輸入驗證碼","Please input password":"請輸入密碼","Please input username":"請輸入用户名","Please select sign in method":"請選擇登錄方式","Sign In":"登錄","Sign in failed. Error occured in integration sign-in func, please concat admin":"登錄失敗。集成登錄函數拋出異常，請聯繫系統管理員","Sign in failed. Integration sign-in func returned `False` or empty value, please concat admin":"登錄失敗，集成登錄函數返回`False`或空內容，請聯繫系統管理員","Sign in failed. Integration sign-in func timeout, please concat admin":"登錄失敗，集成登錄函數超時，請聯繫系統管理員","System built-in sign":"系統內置登錄","User has been disabled":"當前用户已被禁用","User has been temporarily locked":"當前用户已被臨時鎖定","Username":"請輸入賬號","Worker no response, please check the status of this system":"工作單元沒有響應，請檢查系統狀態","retryMinutes":"請在 {n} 分鐘後重試"}}'),delete e.options._Ctor}},d4ab:function(e,t,n){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"captcha-image"},[t("div",{domProps:{innerHTML:e._s(e.captchaImageRaw)}})])},r=[],s=n("c7eb"),i=n("1da1"),o={name:"CaptchaImage",components:{},watch:{captchaToken:{immediate:!0,handler:function(e,t){var n=this;return Object(i["a"])(Object(s["a"])().mark((function e(){return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.showCaptchaImage();case 2:case"end":return e.stop()}}),e)})))()}}},methods:{showCaptchaImage:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var n,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.captchaToken){t.next=2;break}return t.abrupt("return");case 2:return n={captchaToken:e.captchaToken},e.captchaCategory&&(n.captchaCategory=e.captchaCategory),t.next=6,e.T.callAPI_get(e.captchaUrl,{respType:"text",query:n});case 6:a=t.sent,e.captchaImageRaw=a||"";case 8:case"end":return t.stop()}}),t)})))()}},computed:{},props:{captchaCategory:String,captchaToken:String,captchaUrl:{type:String,default:"/api/v1/captcha/do/get"}},data:function(){return{captchaImageRaw:""}},created:function(){}},c=o,u=(n("d662"),n("2877")),l=Object(u["a"])(c,a,r,!1,null,"eee2afa2",null);t["a"]=l.exports},d504:function(e,t,n){"use strict";n.r(t);n("b0c0");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sign-in"},[t("div",{staticClass:"sign-in-area"},[t("Logo",{staticClass:"logo",attrs:{type:"auto",width:"400px",height:"70px"}}),e._v(" "),t("div",{staticClass:"sign-in-panel"},[t("el-form",{ref:"form",staticClass:"sign-in-form",attrs:{model:e.form,rules:e.formRules}},[e.signInFuncs&&e.signInFuncs.length>0?t("el-form-item",{attrs:{prop:"funcId"}},[t("el-select",{attrs:{placeholder:e.$t("Please select sign in method")},model:{value:e.form.funcId,callback:function(t){e.$set(e.form,"funcId",t)},expression:"form.funcId"}},[t("i",{staticClass:"fth-man-icon fth-man-icon-integration",attrs:{slot:"prefix"},slot:"prefix"}),e._v(" "),t("el-option",{attrs:{label:e.$t("System built-in sign"),value:e.BUILTIN_SIGN_IN_FUNC_ID}}),e._v(" "),e._l(e.signInFuncs,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],2)],1):e._e(),e._v(" "),t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{tabindex:"1",maxlength:"60",placeholder:e.$t("Username")},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}},[t("i",{staticClass:"fth-man-icon fth-man-icon-account-number",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),t("el-form-item",{attrs:{prop:"password",error:e.respError.password}},[t("el-input",{attrs:{tabindex:"2",maxlength:"100","show-password":"",placeholder:e.$t("Password")},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[t("i",{staticClass:"fth-man-icon fth-man-icon-password",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),t("el-form-item",{attrs:{_captcha:"",prop:"captcha",error:e.respError.captcha}},[t("el-input",{attrs:{tabindex:"3",maxlength:4,clearable:!0,placeholder:e.$t("Captcha")},on:{focus:e.autoFillCaptcha},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitData.apply(null,arguments)}},model:{value:e.form.captcha,callback:function(t){e.$set(e.form,"captcha",t)},expression:"form.captcha"}},[t("i",{staticClass:"fth-man-icon fth-man-icon-verification-code",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),t("CaptchaImage",{attrs:{"captcha-category":"signIn","captcha-token":e.form.captchaToken},nativeOn:{click:function(t){return e.refreshCaptcha()}}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{tabindex:"4",type:"primary",disabled:e.isSigningIn},on:{click:e.submitData}},[e.isSigningIn?t("i",{staticClass:"fa fa-fw fa-circle-o-notch fa-spin"}):e._e(),e._v("\n            "+e._s(e.$t("Sign In"))+"\n          ")]),e._v(" "),t("div",{staticClass:"ui-extra"},[t("el-dropdown",{staticClass:"ui-locale-select",on:{command:e.$root.setUILocale}},[t("span",[t("i",{staticClass:"fa fa-fw fa-globe"}),e._v(" "+e._s(e.uiLocaleDetail.name))]),e._v(" "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.C.UI_LOCALE,(function(n){return t("el-dropdown-item",{key:n.key,attrs:{command:n.key}},[t("span",{class:{"selected-option":e.uiLocaleDetail.key===n.key}},[e._v("\n                    "+e._s(n.name)+"\n                    "),n.tip?t("span",{staticClass:"ui-locale-tip"},[e._v(e._s(n.tip))]):e._e()])])})),1)],1),e._v(" "),e.respError.other?t("div",{staticClass:"ui-error-message text-bad"},[e._v("\n              "+e._s(e.respError.other)+"\n              "),e.respError.otherSub?t("small",{staticClass:"text-bad"},[t("br"),e._v(e._s(e.respError.otherSub)+"\n              ")]):e._e()]):e._e()],1)],1)],1)],1)],1)])},r=[],s=n("c7eb"),i=n("1da1"),o=(n("fb6a"),n("d3b7"),n("25f0"),n("d4ab")),c={name:"Index",components:{CaptchaImage:o["a"]},watch:{},methods:{submitData:function(){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var n,a,r,i,o,c,u;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isSigningIn=!0,e.submitFailed=!1,n=e.form.funcId,a=e.form.username,t.prev=4,t.next=7,e.$refs.form.validate();case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t["catch"](4),e.isSigningIn=!1,t.abrupt("return",console.error(t.t0));case 13:return t.next=15,e.$refs.form.clearValidate();case 15:return e.T.jsonClear(e.respError),r=e.T.jsonCopy(e.form),i=null,o={captchaToken:r.captchaToken,captcha:r.captcha,signIn:{username:r.username,password:r.password}},e.isBuiltInSignIn?i="/api/v1/auth/do/sign-in":(i="/api/v1/func/integration/sign-in",o.signIn.funcId=r.funcId),t.next=22,e.T.callAPI("post",i,{body:o,alert:{muteError:!0}});case 22:if(c=t.sent,e.$refs.form.resetFields(),e.form.funcId=n,e.form.username=a,c.ok){t.next=57;break}e.refreshCaptcha(),t.t1=c.reason,t.next="EUserPassword"===t.t1?31:"EUserCaptcha"===t.t1?33:"EUserDisabled"===t.t1?35:"EUserLocked"===t.t1?37:"EWorkerNoResponse"===t.t1?39:"EFuncResultParsingFailed"===t.t1?41:"EFuncFailed.SignInFuncRaisedException"===t.t1?43:"EFuncFailed.SignInFuncTimeout"===t.t1?45:"EFuncFailed.SignInFuncReturnedFalseOrNothing"===t.t1?47:49;break;case 31:return e.respError.password=e.$t("Invalid username or password"),t.abrupt("break",49);case 33:return e.respError.captcha=e.$t("Invalid captcha"),t.abrupt("break",49);case 35:return e.respError.other=e.$t("User has been disabled"),t.abrupt("break",49);case 37:return e.respError.other=e.$t("User has been temporarily locked"),t.abrupt("break",49);case 39:return e.respError.other=e.$t("Worker no response, please check the status of this system"),t.abrupt("break",49);case 41:return e.respError.other=e.$t("Integration sign-in func returned an unexpected value, please contact admin"),t.abrupt("break",49);case 43:return e.respError.other=c.message||e.$t("Sign in failed. Error occured in integration sign-in func, please concat admin"),t.abrupt("break",49);case 45:return e.respError.other=e.$t("Sign in failed. Integration sign-in func timeout, please concat admin"),t.abrupt("break",49);case 47:return e.respError.other=e.$t("Sign in failed. Integration sign-in func returned `False` or empty value, please concat admin"),t.abrupt("break",49);case 49:t.t2=c.reason,t.next="EUserPassword"===t.t2||"EUserLocked"===t.t2?52:54;break;case 52:return c.detail&&c.detail.signInWaitTimeout&&(e.respError.other=e.$t("User has been temporarily locked"),e.respError.otherSub=e.$tc("retryMinutes",Math.ceil(c.detail.signInWaitTimeout/60))),t.abrupt("break",54);case 54:return e.isSigningIn=!1,e.submitFailed=!0,t.abrupt("return");case 57:u=c.data.xAuthToken,e.$store.dispatch("signIn",u),setTimeout((function(){e.isSigningIn=!1}),1e3);case 60:case"end":return t.stop()}}),t,null,[[4,9]])})))()},refreshCaptcha:function(){this.form.captchaToken=Math.random().toString(),this.form.captcha=""},autoFillCaptcha:function(){var e=this;if("prod"!==this.$store.getters.SYSTEM_INFO("MODE")&&this.form.username&&this.form.password){var t=this.form.captchaToken.slice(-4);this.form.captcha="";var n=setInterval((function(){e.form.captcha=t.slice(0,e.form.captcha.length+1),4===e.form.captcha.length&&(clearInterval(n),setTimeout((function(){e.submitData()}),500))}),100)}}},computed:{BUILTIN_SIGN_IN_FUNC_ID:function(){return"builtIn"},signInFuncs:function(){return this.$store.getters.SYSTEM_INFO("INTEGRATED_SIGN_IN_FUNC")},isBuiltInSignIn:function(){return this.T.isNothing(this.signInFuncs)||this.form.funcId===this.BUILTIN_SIGN_IN_FUNC_ID},uiLocaleDetail:function(){return this.C.UI_LOCALE_MAP.get(this.$store.getters.uiLocale)}},props:{},data:function(){return{isSigningIn:!1,respError:{password:null,captcha:null,other:null,otherSub:null},form:{captchaToken:null,captcha:null,funcId:null,username:null,password:null},formRules:{username:[{trigger:"change",message:this.$t("Please input username"),required:!0}],password:[{trigger:"change",message:this.$t("Please input password"),required:!0}],captcha:[{trigger:"change",message:this.$t("Please input captcha"),required:!0},{trigger:"change",message:this.$t("Captcha should be a 4-digit number"),length:4,pattern:/^\d{4}$/g}]},submitFailed:!1}},created:function(){this.form.funcId=this.BUILTIN_SIGN_IN_FUNC_ID,this.refreshCaptcha()}},u=c,l=(n("1f58"),n("2382"),n("2877")),p=n("36fa"),d=n("83ed"),f=n("db25"),h=n("6d78"),m=Object(l["a"])(u,a,r,!1,null,"3297923d",null);"function"===typeof p["default"]&&Object(p["default"])(m),"function"===typeof d["default"]&&Object(d["default"])(m),"function"===typeof f["default"]&&Object(f["default"])(m),"function"===typeof h["default"]&&Object(h["default"])(m);t["default"]=m.exports},d662:function(e,t,n){"use strict";n("bac6")},db25:function(e,t,n){"use strict";var a=n("cc8d"),r=n.n(a);t["default"]=r.a},ede8:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Captcha":"請輸入驗證碼","Captcha should be a 4-digit number":"驗證碼為4位數字","Integration sign-in func returned an unexpected value, please contact admin":"整合登入函式返回了未預期的結果，請聯絡系統管理員","Invalid captcha":"驗證碼錯誤或無效","Invalid username or password":"使用者名稱或密碼錯誤","Password":"請輸入密碼","Please input captcha":"請輸入驗證碼","Please input password":"請輸入密碼","Please input username":"請輸入使用者名稱","Please select sign in method":"請選擇登入方式","Sign In":"登入","Sign in failed. Error occured in integration sign-in func, please concat admin":"登入失敗。整合登入函式丟擲異常，請聯絡系統管理員","Sign in failed. Integration sign-in func returned `False` or empty value, please concat admin":"登入失敗，整合登入函式返回`False`或空內容，請聯絡系統管理員","Sign in failed. Integration sign-in func timeout, please concat admin":"登入失敗，整合登入函式超時，請聯絡系統管理員","System built-in sign":"系統內建登入","User has been disabled":"當前使用者已被禁用","User has been temporarily locked":"當前使用者已被臨時鎖定","Username":"請輸入賬號","Worker no response, please check the status of this system":"工作單元沒有響應，請檢查系統狀態","retryMinutes":"請在 {n} 分鐘後重試"}}'),delete e.options._Ctor}}}]);