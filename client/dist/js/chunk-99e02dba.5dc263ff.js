(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-99e02dba"],{"0538":function(t,e,n){"use strict";var i=n("1c0b"),o=n("861d"),r=[].slice,a={},s=function(t,e,n){if(!(e in a)){for(var i=[],o=0;o<e;o++)i[o]="a["+o+"]";a[e]=Function("C,a","return new C("+i.join(",")+")")}return a[e](t,n)};t.exports=Function.bind||function(t){var e=i(this),n=r.call(arguments,1),a=function(){var i=n.concat(r.call(arguments));return this instanceof a?s(e,i.length,i):e.apply(t,i)};return o(e.prototype)&&(a.prototype=e.prototype),a}},"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3");var i=n("6b75");function o(t,e){if(t){if("string"===typeof t)return Object(i["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(i["a"])(t,e):void 0}}},"0f29":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Execute":"执行处理","Crontab":"自动触发","Merge":"合并","End":"结束","Execute stage":"执行处理步骤","Auth Link entry":"授权链接入口","Crontab entry":"自动触发入口","Merge point":"合并点","End point":"结束点","Select all":"全选"}}'),delete t.options._Ctor}},1188:function(t,e,n){"use strict";n("5c31")},"131a0":function(t,e,n){var i=n("23e7"),o=n("d2bb");i({target:"Object",stat:!0},{setPrototypeOf:o})},"19aa":function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},"1c7e":function(t,e,n){var i=n("b622"),o=i("iterator"),r=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){r=!0}};s[o]=function(){return this},Array.from(s,(function(){throw 2}))}catch(u){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var i={};i[o]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(u){}return n}},2266:function(t,e,n){var i=n("825a"),o=n("e95a"),r=n("50c4"),a=n("f8c2"),s=n("35a1"),u=n("9bdd"),c=function(t,e){this.stopped=t,this.result=e},l=t.exports=function(t,e,n,l,d){var h,f,p,m,v,g,y,b=a(e,n,l?2:1);if(d)h=t;else{if(f=s(t),"function"!=typeof f)throw TypeError("Target is not iterable");if(o(f)){for(p=0,m=r(t.length);m>p;p++)if(v=l?b(i(y=t[p])[0],y[1]):b(t[p]),v&&v instanceof c)return v;return new c(!1)}h=f.call(t)}g=h.next;while(!(y=g.call(h)).done)if(v=u(h,b,y.value,l),"object"==typeof v&&v&&v instanceof c)return v;return new c(!1)};l.stop=function(t){return new c(!0,t)}},2909:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("6b75");function o(t){if(Array.isArray(t))return Object(i["a"])(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function r(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var a=n("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return o(t)||r(t)||Object(a["a"])(t)||s()}},3410:function(t,e,n){var i=n("23e7"),o=n("d039"),r=n("7b0b"),a=n("e163"),s=n("e177"),u=o((function(){a(1)}));i({target:"Object",stat:!0,forced:u,sham:!s},{getPrototypeOf:function(t){return a(r(t))}})},"35a1":function(t,e,n){var i=n("f5df"),o=n("3f8c"),r=n("b622"),a=r("iterator");t.exports=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||o[i(t)]}},3835:function(t,e,n){"use strict";function i(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return s}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function o(t,e){var n=t&&("undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done);a=!0)if(r.push(i.value),e&&r.length===e)break}catch(u){s=!0,o=u}finally{try{a||null==n["return"]||n["return"]()}finally{if(s)throw o}}return r}}var r=n("06c5");function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return i(t)||o(t,e)||Object(r["a"])(t,e)||a()}},"3b29":function(t,e,n){},"41f6":function(t,e,n){"use strict";n("58cd")},"42ad":function(t,e,n){"use strict";var i=n("0f29"),o=n.n(i);e["default"]=o.a},"4ae1":function(t,e,n){var i=n("23e7"),o=n("d066"),r=n("1c0b"),a=n("825a"),s=n("861d"),u=n("7c73"),c=n("0538"),l=n("d039"),d=o("Reflect","construct"),h=l((function(){function t(){}return!(d((function(){}),[],t)instanceof t)})),f=!l((function(){d((function(){}))})),p=h||f;i({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(t,e){r(t),a(e);var n=arguments.length<3?t:r(arguments[2]);if(f&&!h)return d(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(c.apply(t,i))}var o=n.prototype,l=u(s(o)?o:Object.prototype),p=Function.apply.call(t,l,e);return s(p)?p:l}})},"4df4":function(t,e,n){"use strict";var i=n("f8c2"),o=n("7b0b"),r=n("9bdd"),a=n("e95a"),s=n("50c4"),u=n("8418"),c=n("35a1");t.exports=function(t){var e,n,l,d,h,f=o(t),p="function"==typeof this?this:Array,m=arguments.length,v=m>1?arguments[1]:void 0,g=void 0!==v,y=0,b=c(f);if(g&&(v=i(v,m>2?arguments[2]:void 0,2)),void 0==b||p==Array&&a(b))for(e=s(f.length),n=new p(e);e>y;y++)u(n,y,g?v(f[y],y):f[y]);else for(d=b.call(f),h=d.next,n=new p;!(l=h.call(d)).done;y++)u(n,y,g?r(d,v,[l.value,y],!0):l.value);return n.length=y,n}},"58cd":function(t,e,n){},"5c31":function(t,e,n){},6062:function(t,e,n){"use strict";var i=n("6d61"),o=n("6566");t.exports=i("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),o)},6566:function(t,e,n){"use strict";var i=n("9bf2").f,o=n("7c73"),r=n("e2cc"),a=n("f8c2"),s=n("19aa"),u=n("2266"),c=n("7dd0"),l=n("2626"),d=n("83ab"),h=n("f183").fastKey,f=n("69f3"),p=f.set,m=f.getterFor;t.exports={getConstructor:function(t,e,n,c){var l=t((function(t,i){s(t,l,e),p(t,{type:e,index:o(null),first:void 0,last:void 0,size:0}),d||(t.size=0),void 0!=i&&u(i,t[c],t,n)})),f=m(e),v=function(t,e,n){var i,o,r=f(t),a=g(t,e);return a?a.value=n:(r.last=a={index:o=h(e,!0),key:e,value:n,previous:i=r.last,next:void 0,removed:!1},r.first||(r.first=a),i&&(i.next=a),d?r.size++:t.size++,"F"!==o&&(r.index[o]=a)),t},g=function(t,e){var n,i=f(t),o=h(e);if("F"!==o)return i.index[o];for(n=i.first;n;n=n.next)if(n.key==e)return n};return r(l.prototype,{clear:function(){var t=this,e=f(t),n=e.index,i=e.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;e.first=e.last=void 0,d?e.size=0:t.size=0},delete:function(t){var e=this,n=f(e),i=g(e,t);if(i){var o=i.next,r=i.previous;delete n.index[i.index],i.removed=!0,r&&(r.next=o),o&&(o.previous=r),n.first==i&&(n.first=o),n.last==i&&(n.last=r),d?n.size--:e.size--}return!!i},forEach:function(t){var e,n=f(this),i=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){i(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!g(this,t)}}),r(l.prototype,n?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return v(this,0===t?0:t,e)}}:{add:function(t){return v(this,t=0===t?0:t,t)}}),d&&i(l.prototype,"size",{get:function(){return f(this).size}}),l},setStrong:function(t,e,n){var i=e+" Iterator",o=m(e),r=m(i);c(t,e,(function(t,e){p(this,{type:i,target:t,state:o(t),kind:e,last:void 0})}),(function(){var t=r(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),l(e)}}},"6a8a":function(t,e,n){"use strict";n("7055")},"6b75":function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}n.d(e,"a",(function(){return i}))},"6d61":function(t,e,n){"use strict";var i=n("23e7"),o=n("da84"),r=n("94ca"),a=n("6eeb"),s=n("f183"),u=n("2266"),c=n("19aa"),l=n("861d"),d=n("d039"),h=n("1c7e"),f=n("d44e"),p=n("7156");t.exports=function(t,e,n){var m=-1!==t.indexOf("Map"),v=-1!==t.indexOf("Weak"),g=m?"set":"add",y=o[t],b=y&&y.prototype,k=y,w={},L=function(t){var e=b[t];a(b,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!l(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!l(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(r(t,"function"!=typeof y||!(v||b.forEach&&!d((function(){(new y).entries().next()})))))k=n.getConstructor(e,t,m,g),s.REQUIRED=!0;else if(r(t,!0)){var x=new k,C=x[g](v?{}:-0,1)!=x,O=d((function(){x.has(1)})),M=h((function(t){new y(t)})),_=!v&&d((function(){var t=new y,e=5;while(e--)t[g](e,e);return!t.has(-0)}));M||(k=e((function(e,n){c(e,k,t);var i=p(new y,e,k);return void 0!=n&&u(n,i[g],i,m),i})),k.prototype=b,b.constructor=k),(O||_)&&(L("delete"),L("has"),m&&L("get")),(_||C)&&L(g),v&&b.clear&&delete b.clear}return w[t]=k,i({global:!0,forced:k!=y},w),f(k,t),v||n.setStrong(k,t,m),k}},7055:function(t,e,n){},"741f":function(t,e,n){},"7c93":function(t,e,n){"use strict";n("dfb6")},"7db0":function(t,e,n){"use strict";var i=n("23e7"),o=n("b727").find,r=n("44d2"),a="find",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),i({target:"Array",proto:!0,forced:s},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),r(a)},"81d5":function(t,e,n){"use strict";var i=n("7b0b"),o=n("23cb"),r=n("50c4");t.exports=function(t){var e=i(this),n=r(e.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:o(u,n);while(c>s)e[s++]=t;return e}},"857a":function(t,e,n){var i=n("1d80"),o=/"/g;t.exports=function(t,e,n,r){var a=String(i(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(o,"&quot;")+'"'),s+">"+a+"</"+e+">"}},"8de6":function(t,e,n){"use strict";n("741f")},9911:function(t,e,n){"use strict";var i=n("23e7"),o=n("857a"),r=n("eae9");i({target:"String",proto:!0,forced:r("link")},{link:function(t){return o(this,"a","href",t)}})},"9bdd":function(t,e,n){var i=n("825a");t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(a){var r=t["return"];throw void 0!==r&&i(r.call(t)),a}}},a434:function(t,e,n){"use strict";var i=n("23e7"),o=n("23cb"),r=n("a691"),a=n("50c4"),s=n("7b0b"),u=n("65f0"),c=n("8418"),l=n("1dde"),d=Math.max,h=Math.min,f=9007199254740991,p="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!l("splice")},{splice:function(t,e){var n,i,l,m,v,g,y=s(this),b=a(y.length),k=o(t,b),w=arguments.length;if(0===w?n=i=0:1===w?(n=0,i=b-k):(n=w-2,i=h(d(r(e),0),b-k)),b+n-i>f)throw TypeError(p);for(l=u(y,i),m=0;m<i;m++)v=k+m,v in y&&c(l,m,y[v]);if(l.length=i,n<i){for(m=k;m<b-i;m++)v=m+i,g=m+n,v in y?y[g]=y[v]:delete y[g];for(m=b;m>b-i+n;m--)delete y[m-1]}else if(n>i)for(m=b-i;m>k;m--)v=m+i-1,g=m+n-1,v in y?y[g]=y[v]:delete y[g];for(m=0;m<n;m++)y[m+k]=arguments[m+2];return y.length=b-i+n,l}})},a630:function(t,e,n){var i=n("23e7"),o=n("4df4"),r=n("1c7e"),a=!r((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:a},{from:o})},a9e3:function(t,e,n){"use strict";var i=n("83ab"),o=n("da84"),r=n("94ca"),a=n("6eeb"),s=n("5135"),u=n("c6b6"),c=n("7156"),l=n("c04e"),d=n("d039"),h=n("7c73"),f=n("241c").f,p=n("06cf").f,m=n("9bf2").f,v=n("58a8").trim,g="Number",y=o[g],b=y.prototype,k=u(h(b))==g,w=function(t){var e,n,i,o,r,a,s,u,c=l(t,!1);if("string"==typeof c&&c.length>2)if(c=v(c),e=c.charCodeAt(0),43===e||45===e){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+c}for(r=c.slice(2),a=r.length,s=0;s<a;s++)if(u=r.charCodeAt(s),u<48||u>o)return NaN;return parseInt(r,i)}return+c};if(r(g,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var L,x=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof x&&(k?d((function(){b.valueOf.call(n)})):u(n)!=g)?c(new y(w(e)),n,x):w(e)},C=i?f(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),O=0;C.length>O;O++)s(y,L=C[O])&&!s(x,L)&&m(x,L,p(y,L));x.prototype=b,b.constructor=x,a(o,g,x)}},bb2f:function(t,e,n){var i=n("d039");t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bf19:function(t,e,n){"use strict";var i=n("23e7");i({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},bf1a:function(t,e,n){"use strict";n("3b29")},cb29:function(t,e,n){var i=n("23e7"),o=n("81d5"),r=n("44d2");i({target:"Array",proto:!0},{fill:o}),r("fill")},d11f:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[t.$store.state.isLoaded?n("el-container",{attrs:{direction:"vertical"}},[n("h1",[t._v("蓝图 (WIP)")]),t._v(" "),n("super-flow",{ref:"superFlow",attrs:{"graph-menu":t.graphMenu,"node-menu":t.nodeMenu,"link-menu":t.linkMenu,"enter-intercept":t.enterIntercept,"output-intercept":t.outputIntercept,"link-base-style":t.linkBaseStyle,"link-desc":t.linkDesc,"node-list":t.data.dataJSON.nodeList,"link-list":t.data.dataJSON.linkList,"before-node-create":t.beforeNodeCreate,"on-node-created":t.onNodeCreated,"before-link-create":t.beforeLinkCreate,"on-link-created":t.onLinkCreated},scopedSlots:t._u([{key:"node",fn:function(e){var i=e.meta;return["stage"===i.category?[n("el-card",{staticClass:"node-card stage-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"stage-header"},["execStage"===i.type?[n("i",{staticClass:"fa fa-fw fa-cogs"})]:t._e()],2),t._v(" "),n("div",{staticClass:"node-title"},[n("div",{staticClass:"node-title-content"},[n("span",[t._v(t._s(t.getTitle(i)))])])])])]:"entry"===i.category?[n("el-card",{staticClass:"node-card entry-card",attrs:{shadow:"hover"}},[n("div",{staticClass:"entry-header"},["authLinkEntry"===i.type?[n("i",{staticClass:"fa fa-fw fa-link"})]:t._e(),t._v(" "),"crontabEntry"===i.type?[n("i",{staticClass:"fa fa-fw fa-clock-o"})]:t._e()],2),t._v(" "),n("div",{staticClass:"node-title"},[n("div",{staticClass:"node-title-content"},[n("span",[t._v(t._s(t.getTitle(i)))])])])])]:"point"===i.category?[n("el-card",{staticClass:"node-card point-card",attrs:{shadow:"hover"}},["mergePoint"===i.type?[n("span",[t._v(t._s(t.$t("Merge")))])]:t._e(),t._v(" "),"endPoint"===i.type?[n("span",[t._v(t._s(t.$t("End")))])]:t._e()],2)]:t._e()]}}],null,!1,4222335977)}),t._v(" "),n("el-dialog",{attrs:{title:t.$t("Setup"),visible:t.showConfigPanel},on:{"update:visible":function(e){t.showConfigPanel=e}}},[n("el-form",{attrs:{model:t.configForm,"label-width":"80px"}},[n("el-form-item",{attrs:{label:t.$t("Title")}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.configForm.title,callback:function(e){t.$set(t.configForm,"title",e)},expression:"configForm.title"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.showConfigPanel=!1}}},[t._v(t._s(t.$t("Cancel")))]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.updateItemMeta}},[t._v(t._s(t.$t("Confirm")))])],1)],1)],1):t._e()],1)},o=[],r=n("1da1"),a=(n("159b"),n("2ca0"),n("7db0"),n("4de4"),n("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"flow-canvas",staticClass:"super-flow",on:{contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),t.contextmenu(e)}}},[t.temEdgeConf.visible?n("graph-line",{attrs:{padding:t.linkPadding,graph:t.graph,link:t.temEdgeConf.link,"link-base-style":t.linkBaseStyle,"link-desc":t.linkDesc,"link-style":t.linkStyle}}):t._e(),t._v(" "),t._l(t.graph.linkList,(function(e,i){return n("graph-line",{key:e.key,attrs:{index:i,padding:t.linkPadding,graph:t.graph,link:e,"link-base-style":t.linkBaseStyle,"link-desc":t.linkDesc,"link-style":t.linkStyle}})})),t._v(" "),t.moveNodeConf.isMove&&t.hasMarkLine?n("mark-line",{attrs:{width:t.clientWidth,height:t.clientHeight,"mark-color":t.markLineColor,markLine:t.moveNodeConf.markLine}}):t._e(),t._v(" "),t._l(t.graph.nodeList,(function(e,i){return n("graph-node",{key:e.key,attrs:{index:i,node:e,graph:t.graph,"is-move":e===t.moveNodeConf.node,"is-tem-edge":t.temEdgeConf.visible,"node-intercept":t.nodeIntercept(e),"line-drop":t.linkAddable,"node-drop":t.draggable},on:{"node-mousedown":t.nodeMousedown,"node-mouseenter":t.nodeMouseenter,"node-mouseleave":t.nodeMouseleave,"node-mouseup":t.nodeMouseup,"side-mousedown":t.sideMousedown,"node-contextmenu":t.nodeContextmenu},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.meta;return[t._t("node",null,{meta:n})]}}],null,!0)})})),t._v(" "),n("graph-menu",{attrs:{visible:t.menuConf.visible,graph:t.graph,position:t.menuConf.position,list:t.menuConf.list,source:t.menuConf.source},on:{"update:visible":function(e){return t.$set(t.menuConf,"visible",e)}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[t._t("menuItem",null,{item:n})]}}],null,!0)}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.graph.graphSelected,expression:"graph.graphSelected"}],ref:"selectAllMask",staticClass:"select-all__mask",style:t.maskStyle,attrs:{tabindex:"-1"},on:{blur:function(e){t.graph.graphSelected=!1},mousedown:t.selectAllMaskMouseDown,contextmenu:function(t){t.preventDefault(),t.stopPropagation()}}})],2)}),s=[],u=n("2909"),c=(n("b64b"),n("a4d3"),n("e439"),n("dbb4"),n("ade3"));function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n("a9e3"),n("d81d"),n("9911"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("bf19"),n("b0c0");function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function p(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}n("131a0");function m(t,e){return m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},m(t,e)}function v(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}n("4ae1"),n("3410");function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}var b=n("7037"),k=n.n(b);function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t,e){return!e||"object"!==k()(e)&&"function"!==typeof e?w(t):e}function x(t){var e=y();return function(){var n,i=g(t);if(e){var o=g(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return L(this,n)}}n("a434"),n("99af");var C,O=function(){function t(){h(this,t),this.listeners={}}return p(t,[{key:"add",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"remove",value:function(t,e){if(t in this.listeners)for(var n=this.listeners[t],i=0,o=n.length;i<o;i++)if(n[i]===e)return n.splice(i,1),this.remove(t,e)}},{key:"dispatch",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.type in this.listeners){var i=this.listeners[t.type];t.target=this,n?i.some((function(n,o){var r=n.call(e,t);return r&&i.unshift.apply(i,Object(u["a"])(i.splice(o,1))),r})):i.forEach((function(n){return n.call(e,t)}))}}}]),t}();n("ac1f"),n("1276"),n("a15b"),n("fb6a");function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.clientX,i=t.clientY,o=t.currentTarget,r=e||o,a=r.getBoundingClientRect(),s=a.left,u=a.top;return[n-s,i-u]}function _(t,e){return[t[0]+e[0],t[1]+e[1]]}function A(t,e){return[t[0]*e,t[1]*e]}function I(t,e){return[e[0]-t[0],e[1]-t[1]]}function P(t,e){return[t[0]-e[0],t[1]-e[1]]}function N(t,e){return t[0]*e[0]+t[1]*e[1]}function j(t,e){return t[0]*e[1]-t[1]*e[0]}function S(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]}function E(t,e){return t[0]===e[0]&&t[1]===e[1]}function T(t){return Math.round(180/Math.PI*Math.atan2(t[1],t[0]))+180}function D(t,e){return t[0]*e[1]-t[1]*e[0]===0}function $(t){var e={add:_,multiply:A,differ:I,minus:P,dotProduct:N,cross:j,unitVector:S,equals:E,angle:T,parallel:D},n={};return Object.keys(e).forEach((function(i){Object.defineProperty(n,i,{get:function(){return function(o){return t=e[i](t,o),n}}})})),Object.defineProperty(n,"end",{get:function(){return t}}),n}function F(t){return Object.prototype.toString.call(t).slice(8,-1).toLocaleLowerCase()}function R(t){return"function"===F(t)}function z(t){return"boolean"===F(t)}function B(t){return"string"===F(t)}function Y(t){return"object"===F(t)}function Q(t,e){t.splice.apply(t,[0,t.length].concat(Object(u["a"])(e)))}var G={top:1,right:2,bottom:3,left:4},Z=(C={},Object(c["a"])(C,G.top,[0,-1]),Object(c["a"])(C,G.right,[1,0]),Object(c["a"])(C,G.bottom,[0,1]),Object(c["a"])(C,G.left,[-1,0]),C),J=n("40f5"),X=function(){function t(e,n){h(this,t);var i=e.id,o=void 0===i?J["genDataId"]("node"):i,r=e.width,a=void 0===r?180:r,s=e.height,c=void 0===s?100:s,l=e.coordinate,d=void 0===l?[0,0]:l,f=e.meta,p=void 0===f?null:f;this.key=J["genDataId"]("node"),this.graph=n,this.id=o,this.coordinate=Object(u["a"])(d),this.meta=p,this.width=a,this.height=c}return p(t,[{key:"position",get:function(){return $(this.coordinate).add(this.graph.origin).end},set:function(t){this.coordinate=$(t).minus(this.graph.origin).end}},{key:"center",get:function(){return $(this.coordinate).add([this.width/2,this.height/2]).end},set:function(t){this.coordinate=$(t).minus([this.width/2,this.height/2]).end}},{key:"width",get:function(){return this._width},set:function(t){t=Math.floor(t),this._width=t>50?t:50,this.angle()}},{key:"height",get:function(){return this._height},set:function(t){t=Math.floor(t),this._height=t>20?t:20,this.angle()}},{key:"angle",value:function(){var t=this.width/2,e=this.height/2,n=[0,0],i=$(n).minus([t,e]).angle().end,o=$(n).add([t,0]).minus([0,e]).angle().end,r=$(n).add([t,e]).angle().end,a=$(n).add([0,e]).minus([t,0]).angle().end;this.angleList=[i,o,r,a]}},{key:"relative",value:function(t){var e=$(t).minus([this.width/2,this.height/2]).angle().end,n=this.angleList,i=[G.top,G.right,G.bottom,G.left],o=G.left;return n.reduce((function(t,n,r){return e>=t&&e<n&&(o=i[r-1]),n})),{position:this.fixOffset(t,o),direction:Z[o]}}},{key:"fixOffset",value:function(t,e){switch(e){case G.top:t[0]=this.width/2,t[1]=0;break;case G.right:t[0]=this.width,t[1]=this.height/2;break;case G.bottom:t[0]=this.width/2,t[1]=this.height;break;case G.left:default:t[0]=0,t[1]=this.height/2;break}return t}},{key:"remove",value:function(){return this.graph.removeNode(this)}},{key:"toJSON",value:function(){return{id:this.id,width:this.width,height:this.height,coordinate:Object(u["a"])(this.coordinate),meta:this.meta}}}]),t}(),U=n("3835"),W=function(){function t(e,n){h(this,t);var i=e.id,o=void 0===i?J["genDataId"]("link"):i,r=e.start,a=e.end,s=void 0===a?null:a,u=e.startAt,c=void 0===u?[0,0]:u,l=e.endAt,d=void 0===l?[0,0]:l,f=e.meta,p=void 0===f?null:f;this.key=J["genDataId"]("link"),this.id=o,this.graph=n,this.start=r,this.meta=p,this.end=s,this.startDirection=Z[G.top],this.endDirection=Z[G.top],this.startAt=c,this.endAt=d}return p(t,[{key:"end",get:function(){return this._end},set:function(t){if(this.start===t)return!1;this._end=t}},{key:"startAt",get:function(){return this._startAt},set:function(t){var e=this.start.relative(t);this._startAt=e.position,this.startDirection=e.direction}},{key:"endAt",get:function(){return this._endAt},set:function(t){if(this.end){var e=this.end.relative(t);this._endAt=e.position,this.endDirection=e.direction}else this._endAt=t}},{key:"movePosition",get:function(){return this._movePosition},set:function(t){if(this._movePosition=t,!this.end){var e=this.start.relative($(t).minus(this.graph.origin).minus(this.start.coordinate).end);this.endDirection=$(e.direction).multiply(-1).end}}},{key:"pathPointList",get:function(){var t=this.coordinateList(),e=[],n=[];return t.forEach((function(t){e.push(t[0]),n.push(t[1])})),{pointList:t,xList:e,yList:n,minX:Math.min.apply(Math,e),maxX:Math.max.apply(Math,e),minY:Math.min.apply(Math,n),maxY:Math.max.apply(Math,n)}}},{key:"startCoordinate",value:function(){return $(this.start.position).add(this.startAt).end}},{key:"endCoordinate",value:function(){return this.end?$(this.end.position).add(this.endAt).end:this.movePosition}},{key:"coordinateList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=this.startCoordinate(),i=this.endCoordinate(),o=this.startDirection,r=this.endDirection,a=$(o).multiply(t.distance).add(n).end,s=$(r).multiply(t.distance).add(i).end;r=$(r).multiply(-1).end;var u=[s[0]-a[0],0],c=[0,s[1]-a[1]],l=this.pathDirection(c,u,o),d=this.pathDirection(c,u,r),h=$(l).dotProduct(d).end>0?2:1,f=d===u?c:u,p=[];if(p.push(n,a),1===h){var m=$(a).add(l).end,v=$(m).add(d).end;p.push(m,v)}else{var g=$(l).multiply(e).add(a).end,y=$(g).add(f).end,b=$(d).multiply(1-e).add(y).end;p.push(g,y,b)}return p.push(i),p}},{key:"pathDirection",value:function(t,e,n){return $(e).parallel(n).end?$(e).dotProduct(n).end>0?e:t:$(t).dotProduct(n).end>0?t:e}},{key:"isPointInLink",value:function(t,e){var n=e||this.pathPointList,i=n.pointList,o=n.minX,r=n.minY,a=n.maxX,s=n.maxY,u=5;if(t[0]<o-u||t[0]>a+u||t[1]<r-u||t[1]>s+u)return!1;for(var c=0;c<i.length-2;c++){var l=i[c],d=i[c+1],h=Math.min(l[1],d[1])-u,f=Math.max(l[0],d[0])+u,p=Math.max(l[1],d[1])+u,m=Math.min(l[0],d[0])-u,v=Object(U["a"])(t,2),g=v[0],y=v[1];if(g>m&&g<f&&y>h&&y<p)return!0}return!1}},{key:"remove",value:function(){return this.graph.removeLink(this)}},{key:"toJSON",value:function(){return{id:this.id,startId:this.start.id,endId:this.end.id,startAt:this.startAt,endAt:this.endAt,meta:this.meta}}}]),t}();Object(c["a"])(W,"distance",15);var V=function(t){v(n,t);var e=x(n);function n(t){var i;h(this,n);var o=t.nodeList,r=void 0===o?[]:o,a=t.linkList,s=void 0===a?[]:a,u=t.origin,c=t.beforeNodeCreate,l=t.onNodeCreated,d=t.beforeLinkCreate,f=t.onLinkCreated;return i=e.call(this),i.nodeList=[],i.linkList=[],i.origin=u,i.mouseonLink=null,i.mouseonNode=null,i.graphSelected=!1,i.maskBoundingClientRect={},i.beforeNodeCreate=c,i.onNodeCreated=l,i.beforeLinkCreate=d,i.onLinkCreated=f,i.initNode(r),i.initLink(s),i}return p(n,[{key:"pointMap",value:function(){var t={};return this.nodeList.forEach((function(e){t[e.id]=e})),t}},{key:"initNode",value:function(t){var e=this;return Q(this.nodeList,t.map((function(t){return e.createNode(t)}))),this.nodeList}},{key:"initLink",value:function(t){var e=this,n=[];return t.forEach((function(t){var i=t.startId,o=void 0===i?"":i,r=t.endId,a=void 0===r?"":r,s=t.startAt,u=void 0===s?[0,0]:s,c=t.endAt,l=void 0===c?[0,0]:c,d=t.meta,h=void 0===d?null:d,f=e.pointMap(),p=f[o],m=f[a];p&&m&&n.push(e.createLink({start:p,end:m,meta:h,startAt:u,endAt:l}))})),Q(this.linkList,n),this.linkList}},{key:"createNode",value:function(t){return new X(t,this)}},{key:"createLink",value:function(t){return new W(t,this)}},{key:"addNode",value:function(t){var e=t.constructor===X?t:this.createNode(t);return e=this.beforeNodeCreate(e,this)||e,this.nodeList.push(e),this.onNodeCreated(e,this),e}},{key:"addLink",value:function(t){var e=t.constructor===W?t:this.createLink(t),n=this.linkList.find((function(t){return t.start===e.start&&t.end===e.end}));return n?(n.startAt=e.startAt,n.endAt=e.endAt):e.start&&e.end&&(e=this.beforeLinkCreate(e,this)||e,this.linkList.push(e),this.onLinkCreated(e,this)),e}},{key:"removeNode",value:function(t){var e=this,n=this.nodeList.indexOf(t);return this.linkList.filter((function(e){return e.start===t||e.end===t})).forEach((function(t){e.removeLink(t)})),this.nodeList.splice(n,1),t}},{key:"removeLink",value:function(t){var e=this.linkList.indexOf(t);return this.linkList.splice(e,1),this.mouseonLink===t&&(this.mouseonLink=null),t}},{key:"toLastNode",value:function(t){var e=this.nodeList;e.splice.apply(e,[e.length-1,0].concat(Object(u["a"])(e.splice(t,1))))}},{key:"toLastLink",value:function(t){var e=this.linkList;e.splice.apply(e,[e.length-1,0].concat(Object(u["a"])(e.splice(t,1))))}},{key:"toJSON",value:function(){return{origin:this.origin,nodeList:this.nodeList.map((function(t){return t.toJSON()})),linkList:this.linkList.map((function(t){return t.toJSON()}))}}},{key:"selectAll",value:function(){var t=this.nodeList,e=20;this.maskBoundingClientRect={top:Math.min.apply(Math,Object(u["a"])(t.map((function(t){return t.center[1]-t.height/2}))))-e,right:Math.max.apply(Math,Object(u["a"])(t.map((function(t){return t.center[0]+t.width/2}))))+e,bottom:Math.max.apply(Math,Object(u["a"])(t.map((function(t){return t.center[1]+t.height/2}))))+e,left:Math.min.apply(Math,Object(u["a"])(t.map((function(t){return t.center[0]-t.width/2}))))-e},this.graphSelected=!0}}]),n}(O),q=V,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"super-flow__menu-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"flow__menu-mask",on:{mousemove:function(t){t.stopPropagation(),t.preventDefault()},mousedown:t.close}}),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"super-flow__menu",style:t.style,attrs:{tabindex:"-1"},on:{mousemove:function(t){t.stopPropagation(),t.preventDefault()},contextmenu:function(t){t.preventDefault(),t.stopPropagation()},blur:t.close}},[t._l(t.list,(function(e){return[t._l(e,(function(e){return n("li",{staticClass:"super-flow__menu-item",class:{"is-disabled":e.disable},on:{click:function(n){return t.select(e)}}},[t._t("default",[n("span",{staticClass:"super-flow__menu-item-icon"},[e.icon?n("i",{staticClass:"fa fa-fw",class:e.icon}):t._e()]),t._v(" "),n("span",{staticClass:"super-flow__menu-item-content"},[t._v("\n            "+t._s(e.label)+"\n          ")])],{item:e})],2)})),t._v(" "),n("li",{staticClass:"super-flow__menu-line"})]}))],2)])},K=[],tt={props:{graph:Object,visible:{type:Boolean,default:!1},list:{type:Array,default:function(){return[]}},position:{type:Array,default:function(){return[0,0]}},source:{type:Object,default:function(){return{}}}},computed:{style:function(){return{left:this.position[0]+"px",top:this.position[1]+"px"}}},methods:{select:function(t){t.disable||(this.$emit("update:visible",!1),t.selected(this.source,$(this.position).minus(this.graph.origin).end))},close:function(t){this.$emit("update:visible",!1)}},watch:{visible:function(){var t=this;this.visible&&this.$nextTick((function(){return t.$el.focus()}))}}},et=tt,nt=(n("41f6"),n("2877")),it=Object(nt["a"])(et,H,K,!1,null,null,null),ot=it.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"super-flow__node",class:{"can-move":t.nodeDrop},style:t.style,attrs:{tabindex:"-1"},on:{mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.nodeMousedown(e)},mouseenter:t.nodeMouseenter,mouseleave:t.nodeMouseleave,mouseup:t.nodeMouseup,contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),t.nodeContextmenu(e)}}},[t._t("default",null,{meta:t.node.meta}),t._v(" "),t._l(t.direction,(function(e,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.output&&t.lineDrop,expression:"output && lineDrop"}],class:"node-side node-side-"+i,on:{contextmenu:function(t){t.stopPropagation(),t.preventDefault()},mousedown:function(n){return!n.type.indexOf("key")&&t._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])||"button"in n&&0!==n.button?null:(n.preventDefault(),n.stopPropagation(),function(n){return t.sideMousedown(n,e)}(n))}}})}))],2)},at=[],st={props:{graph:Object,node:Object,index:Number,isMove:Boolean,isTemEdge:Boolean,nodeIntercept:Function,lineDrop:Boolean,nodeDrop:Boolean},data:function(){return{direction:G,output:this.nodeIntercept()}},computed:{style:function(){var t=this.node,e=t.position,n=t.width,i=t.height;return{width:n+"px",height:i+"px",top:e[1]+"px",left:e[0]+"px"}}},methods:{nodeMousedown:function(t){this.graph.toLastNode(this.index),this.$emit("node-mousedown",this.node,M(t))},nodeMouseenter:function(t){this.output=this.nodeIntercept(),this.graph.mouseonNode=this.node,this.isTemEdge&&this.$emit("node-mouseenter",t,this.node,M(t,this.$el))},nodeMouseleave:function(){this.graph.mouseonNode=null,this.isTemEdge&&this.$emit("node-mouseleave")},nodeMouseup:function(){this.isTemEdge&&this.$emit("node-mouseup")},nodeContextmenu:function(t){this.$emit("node-contextmenu",t,this.node)},sideMousedown:function(t){this.$emit("side-mousedown",t,this.node,M(t,this.$el))}}},ut=st,ct=(n("6a8a"),Object(nt["a"])(ut,rt,at,!1,null,null,null)),lt=ct.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{staticClass:"super-flow__line"})},ht=[],ft=(n("466d"),n("cb29"),{props:{padding:{type:Number,default:50},linkDesc:[Function,null],linkStyle:[Function,null],linkBaseStyle:Object,index:Number,graph:Object,link:Object},data:function(){return{top:0,right:0,bottom:0,left:0,currentPointList:[],currentPathPointList:null}},mounted:function(){var t=this;this.ctx=this.$el.getContext("2d"),this.draw(),this.graph.add("mousemove",this.rootMousemove),this.$once("hook:beforeDestroy",(function(){t.graph.remove("mousemove",t.rootMousemove)}))},computed:{styles:function(){return Object.assign({hover:"#FF0000",color:"#666666",textColor:"#FF6600",textHover:"#FF0000",font:"14px Arial",dotted:!1,lineDash:[4,4],background:"rgba(255,255,255,0.5)"},this.linkBaseStyle)},inPath:{get:function(){return this.graph.mouseonLink===this.link},set:function(t){t&&!this.graph.mouseonNode?(this.graph.mouseonLink=this.link,this.$el.style.zIndex="1",this.graph.toLastLink(this.index)):this.inPath&&(this.graph.mouseonLink=null,this.$el.style.zIndex="0")}}},methods:{draw:function(){var t=this,e=this.currentPathPointList=this.link.pathPointList,n=e.pointList,i=e.minX,o=e.minY,r=e.maxX,a=e.maxY;this.top=o-this.padding,this.right=r+this.padding,this.bottom=a+this.padding,this.left=i-this.padding,this.currentPointList=n.map((function(e){return[Math.floor(e[0]-t.left),Math.floor(e[1]-t.top)]})),this.changeStyle(),this.initLine()},changeStyle:function(){this.$el.width=this.right-this.left,this.$el.height=this.bottom-this.top,this.$el.style.top=this.top+"px",this.$el.style.left=this.left+"px"},initLine:function(){if(this.ctx.clearRect(0,0,this.$el.width,this.$el.height),this.linkStyle){var t=this.linkStyle(this.link);Y(t)&&Object.assign(this.styles,t)}if(this.inPath){var e=this.styles.hover,n=this.styles.textHover;this.drawLine(e),this.drawDesc(n),this.drawArrow(e)}else{var i=this.styles.color,o=this.styles.textColor;this.drawLine(i),this.drawDesc(o),this.drawArrow(i)}},drawLine:function(t){var e=2,n=this.ctx;n.lineJoin="round",n.beginPath(),this.styles.dotted&&n.setLineDash(this.styles.lineDash),n.lineWidth=e,n.strokeStyle=t,this.currentPointList.forEach((function(t,e){0===e?n.moveTo.apply(n,Object(u["a"])(t)):(n.lineTo.apply(n,Object(u["a"])(t)),n.stroke())})),n.save()},drawDesc:function(t){var e,n=this.ctx;if(R(this.linkDesc)&&(e=this.linkDesc(this.link)),B(e)){var i=this.styles,o=i.font,r=i.background;this.ctx.font=o,this.ctx.textAlign="center",this.ctx.textBaseline="middle";var a=this.descIntercept(e),s=a.text,c=a.width,l=parseInt(o.match(/(\d+px)/g)[0]),d=this.descPosition(),h=$(d).minus([c/2,l/2]).end;this.ctx.fillStyle=r,n.fillRect(h[0],h[1],c,l),this.ctx.fillStyle=t,n.fillText.apply(n,[s].concat(Object(u["a"])(d)))}},descPosition:function(){var t=0,e=0,n=null;return this.currentPointList.reduce((function(e,n){var i=$(e).minus(n).end;return t+=Math.abs(i[0])+Math.abs(i[1]),n})),this.currentPointList.reduce((function(i,o){var r=$(i).minus(o).end,a=Math.abs(r[0])+Math.abs(r[1]),s=e,u=t/2;return e+=a,e>=t/2&&null===n&&(n=i,n=i[0]===o[0]?i[1]<o[1]?$(i).add([0,u-s]).end:$(i).add([0,-(u-s)]).end:i[0]<o[0]?$(i).add([u-s,0]).end:$(i).add([-(u-s),0]).end),o})),n},descIntercept:function(t){var e=this.ctx,n=e.measureText(t).width,i=2*this.padding-10,o="...",r=e.measureText(o).width;if(n<=i||i<=r)return{text:t,width:n};var a=t.length;while(n>=i-r&&a-- >0)t=t.slice(0,a),n=e.measureText(t).width;return{text:t+o,width:i+r}},drawArrow:function(t){var e=6,n=this.currentPointList.length;if(!(n<2)){var i=this.currentPointList[n-2],o=this.currentPointList[n-1],r=this.ctx;r.translate.apply(r,Object(u["a"])(o));var a=Math.atan((o[0]-i[0])/(o[1]-i[1]));r.beginPath(),o[1]-i[1]>=0?r.rotate(-a):r.rotate(Math.PI-a),r.fillStyle=t,r.lineTo(-e,2*-e),r.lineTo(e,2*-e),r.lineTo(0,0),r.closePath(),r.fill(),r.restore()}},getCoordinates:function(t){var e=t.clientX,n=t.clientY,i=this.$el.getBoundingClientRect(),o=i.top,r=i.left;return[e-r,n-o]},isPointInStroke:function(t){var e=this.getCoordinates(t),n=Object(U["a"])(e,2),i=n[0],o=n[1];return this.link.isPointInLink([this.left+i,this.top+o],this.currentPathPointList)},rootMousemove:function(t){var e=t.evt;return this.inPath=this.isPointInStroke(e),this.inPath}},watch:{"link.pathPointList":function(){this.draw()},inPath:function(){this.initLine()},"link.meta":{deep:!0,handler:function(){this.draw()}},linkBaseStyle:{deep:!0,handler:function(){this.draw()}}}}),pt=ft,mt=(n("bf1a"),Object(nt["a"])(pt,dt,ht,!1,null,null,null)),vt=mt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{ref:"markLine",staticClass:"super-flow__mark-line"})},yt=[],bt={props:{width:{type:Number,default:0},height:{type:Number,default:0},markLine:Array,markColor:String},mounted:function(){this.$refs.markLine.height=this.height,this.$refs.markLine.width=this.width,this.draw()},methods:{draw:function(){var t=this.$el.getContext("2d");t.clearRect(0,0,this.width,this.height),t.strokeStyle=this.markColor,t.lineWidth=1,t.setLineDash([4,2]),this.markLine.forEach((function(e){var n=Object(U["a"])(e,2),i=n[0],o=n[1];t.beginPath(),t.moveTo.apply(t,Object(u["a"])(i)),t.lineTo.apply(t,Object(u["a"])(o)),t.stroke()}))}},watch:{markLine:function(){this.draw()}}},kt=bt,wt=(n("1188"),Object(nt["a"])(kt,gt,yt,!1,null,null,null)),Lt=wt.exports,xt={name:"super-flow",props:{draggable:{type:Boolean,default:!0},linkAddable:{type:Boolean,default:!0},linkEditable:{type:Boolean,default:!0},hasMarkLine:{type:Boolean,default:!0},linkDesc:{type:[Function,null],default:null},linkStyle:{type:[Function,null],default:null},linkBaseStyle:{type:Object,default:function(){return{}}},markLineColor:{type:String,default:"#ff6600"},origin:{type:Array,default:function(){return[0,0]}},nodeList:{type:Array,default:function(){return[]}},linkList:{type:Array,default:function(){return[]}},graphMenu:{type:Array,default:function(){return[]}},nodeMenu:{type:Array,default:function(){return[]}},linkMenu:{type:Array,default:function(){return[]}},linkPadding:{type:Number,default:50},enterIntercept:{type:Function,default:function(){return!0}},outputIntercept:{type:Function,default:function(){return!0}},beforeNodeCreate:{type:Function,default:function(){return null}},onNodeCreated:{type:Function,default:function(){return null}},beforeLinkCreate:{type:Function,default:function(){return null}},onLinkCreated:{type:Function,default:function(){return null}}},data:function(){return{graph:new q({width:this.width,height:this.height,origin:this.origin,beforeNodeCreate:this.beforeNodeCreate,onNodeCreated:this.onNodeCreated,beforeLinkCreate:this.beforeLinkCreate,onLinkCreated:this.onLinkCreated}),menuConf:{visible:!1,position:[0,0],source:null,list:[]},moveNodeConf:{isMove:!1,node:null,offset:null,verticalList:[],horizontalList:[],markLine:[]},moveAllConf:{isMove:!1,downPosition:[0,0]},temEdgeConf:{visible:!1,link:null},loaded:!1,clientWidth:0,clientHeight:0}},components:{GraphMenu:ot,GraphNode:lt,GraphLine:vt,MarkLine:Lt},computed:{maskStyle:function(){var t=this.graph.maskBoundingClientRect,e=t.top,n=t.right,i=t.bottom,o=t.left;return{width:"".concat(n-o,"px"),height:"".concat(i-e,"px"),top:"".concat(e+this.graph.origin[1],"px"),left:"".concat(o+this.graph.origin[0],"px")}}},mounted:function(){var t=this;document.addEventListener("mouseup",this.docMouseup),document.addEventListener("mousemove",this.docMousemove),this.$once("hook:beforeDestroy",(function(){document.removeEventListener("mouseup",t.docMouseup),document.removeEventListener("mousemove",t.docMousemove)})),this.$nextTick((function(){t.graph.initNode(t.nodeList),t.graph.initLink(t.linkList)}))},methods:{initMenu:function(t,e){return t.map((function(t){return t.map((function(t){var n,i;return n=R(t.disable)?t.disable(e):z(t.disable)?t.disable:Boolean(t.disable),i=R(t.hidden)?t.hidden(e):z(t.hidden)?t.hidden:Boolean(t.hidden),d(d({},t),{},{disable:n,hidden:i})})).filter((function(t){return!t.hidden}))})).filter((function(t){return t.length}))},showContextMenu:function(t,e,n){e.length&&(this.$set(this.menuConf,"position",t),this.$set(this.menuConf,"list",e),this.$set(this.menuConf,"source",n),this.menuConf.visible=!0)},docMouseup:function(t){this.moveNodeConf.isMove&&(t.stopPropagation(),t.preventDefault()),this.moveNodeConf.isMove=!1,this.moveNodeConf.node=null,this.moveNodeConf.offset=null,Q(this.moveNodeConf.markLine,[]),this.temEdgeConf.visible=!1,this.temEdgeConf.link=null,this.moveAllConf.isMove=!1},docMousemove:function(t){this.moveNodeConf.isMove?this.moveNode(t):this.temEdgeConf.visible?this.moveTemEdge(t):this.graph.graphSelected?this.moveWhole(t):this.linkEditable&&this.graph.dispatch({type:"mousemove",evt:t},!0)},moveNode:function(t){var e=this,n=10,i=this.moveNodeConf,o=this.graph.origin,r=$(i.offset).differ(M(t,this.$el)).minus(o).add([i.node.width/2,i.node.height/2]).end;if(this.hasMarkLine){var a=[];i.verticalList.some((function(t){var i=r[0],s=t-n<i&&t+n>i;return s&&(r[0]=t,t=Math.floor(t),t+=o[0],t+=t%1===0?.5:0,a.push([[t,0],[t,e.clientHeight]])),s})),i.horizontalList.some((function(t){var i=r[1],s=t-n<i&&t+n>i;return s&&(r[1]=t,t=Math.floor(t),t+=o[1],t+=t%1===0?.5:0,a.push([[0,t],[e.clientWidth,t]])),s})),Q(i.markLine,a)}i.node.center=r},moveTemEdge:function(t){this.temEdgeConf.link.movePosition=M(t,this.$el)},moveWhole:function(t){if(this.moveAllConf.isMove){var e=$(this.moveAllConf.downPosition).differ([t.clientX,t.clientY]).end;Q(this.graph.origin,$(this.moveAllConf.origin).add(e).end)}},contextmenu:function(t){var e,n,i=this.graph.mouseonLink,o=M(t);i&&i.isPointInLink(o)?(e=this.initMenu(this.linkMenu,i),n=i):(i&&(this.graph.mouseonLink=null),e=this.initMenu(this.graphMenu,this.graph),n=this.graph),this.showContextMenu(o,e,n)},nodeMousedown:function(t,e){if(this.draggable){this.clientWidth=this.$el.clientWidth,this.clientHeight=this.$el.clientHeight;var n=this.moveNodeConf.verticalList,i=this.moveNodeConf.horizontalList,o=this.graph.nodeList.filter((function(e){return e!==t})).map((function(t){return t.center}));Q(n,Object(u["a"])(new Set(o.map((function(t){return t[0]})))).sort((function(t,e){return t-e}))),Q(i,Object(u["a"])(new Set(o.map((function(t){return t[1]})))).sort((function(t,e){return t-e}))),this.moveNodeConf.isMove=!0,this.moveNodeConf.node=t,this.moveNodeConf.offset=e}},nodeMouseenter:function(t,e,n){var i=this.temEdgeConf.link;this.enterIntercept(i.start,e,this.graph)&&(i.end=e,i.endAt=n)},nodeMouseleave:function(){this.temEdgeConf.link.end=null},nodeMouseup:function(){this.graph.addLink(this.temEdgeConf.link)},nodeContextmenu:function(t,e){var n=this.initMenu(this.nodeMenu,e);n.length&&(this.$set(this.menuConf,"position",M(t,this.$el)),this.$set(this.menuConf,"list",n),this.$set(this.menuConf,"source",e),this.menuConf.visible=!0)},sideMousedown:function(t,e,n){if(this.linkAddable){var i=this.graph.createLink({start:e,startAt:n});i.movePosition=M(t,this.$el),this.$set(this.temEdgeConf,"link",i),this.temEdgeConf.visible=!0}},nodeIntercept:function(t){var e=this;return function(){return e.outputIntercept(t,e.graph)}},menuItemSelect:function(){this.menuConf.visible=!1},selectAllMaskMouseDown:function(t){this.moveAllConf.isMove=!0,this.moveAllConf.origin=Object(u["a"])(this.graph.origin),this.moveAllConf.downPosition=[t.clientX,t.clientY]},selectedAll:function(){this.graph.selectAll()},toJSON:function(){return this.graph.toJSON()},getMouseCoordinate:function(t,e){var n=M({clientX:t,clientY:e},this.$el);return $(n).minus(this.graph.origin).end},addNode:function(t){return this.graph.addNode(t)}},watch:{"graph.graphSelected":function(){var t=this;this.graph.graphSelected&&this.$nextTick((function(){t.$refs.selectAllMask.focus()}))},"graph.mouseonLink":function(){this.graph.mouseonLink?document.body.style.cursor="pointer":document.body.style.cursor=""},origin:function(){this.graph.origin=this.origin||[]},nodeList:function(){this.graph.initNode(this.nodeList)},linkList:function(){this.graph.initLink(this.linkList)}},install:function(t){t.component(this.name,this)}},Ct=xt,Ot=(n("8de6"),Object(nt["a"])(Ct,a,s,!1,null,null,null)),Mt=Ot.exports,_t={name:"Blueprint",components:{SuperFlow:Mt},watch:{$route:{immediate:!0,handler:function(t,e){var n=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.loadData();case 2:case"end":return t.stop()}}),t)})))()}},"$store.state.uiLocale":function(){this.$refs.superFlow.graph.linkList.forEach((function(t){t.meta.updateTime=(new Date).toISOString()}))}},methods:{_getGraph:function(){return this.$refs.superFlow?this.$refs.superFlow.graph:null},genDemoData:function(){var t='{"origin":[0,0],"nodeList":[{"id":"node-Vs6Yq0LqNOYy","width":200,"height":50,"coordinate":[157,24.8125],"meta":{"type":"authLinkEntry","title":null,"updateTime":"2021-06-10T19:18:04.438Z","category":"entry"}},{"id":"node-OufQE7LOzs7G","width":200,"height":50,"coordinate":[387,24.8125],"meta":{"type":"crontabEntry","title":null,"updateTime":"2021-06-10T19:18:06.718Z","category":"entry"}},{"id":"node-YdP5EVjzsbQo","width":200,"height":50,"coordinate":[157,146.8125],"meta":{"type":"execStage","title":null,"updateTime":"2021-06-10T19:17:44.249Z","category":"stage","code":null,"kwargs":null,"template":null}},{"id":"node-6hvn6piGex6i","width":200,"height":50,"coordinate":[387,240.8125],"meta":{"type":"execStage","title":null,"updateTime":"2021-06-10T19:17:44.975Z","category":"stage","code":null,"kwargs":null,"template":null}},{"id":"node-nrtKrQyOmFL7","width":60,"height":60,"coordinate":[957,235.8125],"meta":{"type":"mergePoint","title":null,"updateTime":"2021-06-10T19:18:54.298Z","category":"point"}},{"id":"node-m1QXhzlrr6l4","width":200,"height":50,"coordinate":[657,184.8125],"meta":{"type":"execStage","title":null,"updateTime":"2021-06-10T19:18:19.161Z","category":"stage","code":null,"kwargs":null,"template":null}},{"id":"node-M9QG6pIz0Rdb","width":200,"height":50,"coordinate":[657,295.8125],"meta":{"type":"execStage","title":null,"updateTime":"2021-06-10T19:18:21.321Z","category":"stage","code":null,"kwargs":null,"template":null}},{"id":"node-ctkEbzixtQOm","width":200,"height":50,"coordinate":[387,379.8125],"meta":{"type":"execStage","title":null,"updateTime":"2021-06-10T19:18:32.795Z","category":"stage","code":null,"kwargs":null,"template":null}},{"id":"node-l2vz8jIcdYyU","width":60,"height":60,"coordinate":[1182,235.8125],"meta":{"type":"endPoint","title":null,"updateTime":"2021-06-10T19:18:51.418Z","category":"point"}}],"linkList":[{"id":"link-5vMIPEpxUM47","startId":"node-YdP5EVjzsbQo","endId":"node-6hvn6piGex6i","startAt":[200,25],"endAt":[0,25],"meta":{"type":"execLink","updateTime":"2021-06-10T19:17:56.552Z","code":null,"kwargs":null,"template":null}},{"id":"link-rk4O7sZBOjvP","startId":"node-Vs6Yq0LqNOYy","endId":"node-YdP5EVjzsbQo","startAt":[100,50],"endAt":[100,0],"meta":{"type":"execLink","updateTime":"2021-06-10T19:18:11.360Z","code":null,"kwargs":null,"template":null}},{"id":"link-PjnJ7U62d675","startId":"node-OufQE7LOzs7G","endId":"node-6hvn6piGex6i","startAt":[100,50],"endAt":[100,0],"meta":{"type":"execLink","updateTime":"2021-06-10T19:18:17.570Z","code":null,"kwargs":null,"template":null}},{"id":"link-NcWDNmqifnSb","startId":"node-6hvn6piGex6i","endId":"node-M9QG6pIz0Rdb","startAt":[200,25],"endAt":[0,25],"meta":{"type":"execLink","updateTime":"2021-06-10T19:18:28.721Z","code":null,"kwargs":null,"template":null}},{"id":"link-d84tMR5JHec4","startId":"node-6hvn6piGex6i","endId":"node-m1QXhzlrr6l4","startAt":[200,25],"endAt":[0,25],"meta":{"type":"execLink","updateTime":"2021-06-10T19:18:23.994Z","code":null,"kwargs":null,"template":null}},{"id":"link-goRtUr1htsCn","startId":"node-m1QXhzlrr6l4","endId":"node-nrtKrQyOmFL7","startAt":[200,25],"endAt":[30,0],"meta":{"type":"execLink","updateTime":"2021-06-10T19:18:57.381Z","code":null,"kwargs":null,"template":null}},{"id":"link-XAx1ijj8yiu0","startId":"node-M9QG6pIz0Rdb","endId":"node-nrtKrQyOmFL7","startAt":[200,25],"endAt":[30,60],"meta":{"type":"execLink","updateTime":"2021-06-10T19:18:58.969Z","code":null,"kwargs":null,"template":null}},{"id":"link-rMS7cum4PobL","startId":"node-nrtKrQyOmFL7","endId":"node-l2vz8jIcdYyU","startAt":[60,30],"endAt":[0,30],"meta":{"type":"execLink","updateTime":"2021-06-10T19:19:23.022Z","code":null,"kwargs":null,"template":null}},{"id":"link-80TB9625dOoV","startId":"node-ctkEbzixtQOm","endId":"node-l2vz8jIcdYyU","startAt":[200,25],"endAt":[30,60],"meta":{"type":"execLink","updateTime":"2021-06-10T19:19:21.402Z","code":null,"kwargs":null,"template":null}},{"id":"link-7alh8N0EKRbS","startId":"node-6hvn6piGex6i","endId":"node-ctkEbzixtQOm","startAt":[100,50],"endAt":[100,0],"meta":{"type":"execLink","updateTime":"2021-06-10T19:18:40.948Z","code":null,"kwargs":null,"template":null}}]}',e={id:this.T.genDataId("blpt"),dataJSON:JSON.parse(t)};return e},loadData:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.T.callAPI("/api/v1/do/ping");case 2:if(n=e.sent,n.ok){e.next=5;break}return e.abrupt("return");case 5:t.data=t.genDemoData(),t.$store.commit("updateLoadStatus",!0);case 7:case"end":return e.stop()}}),e)})))()},createNodeData:function(t,e){e=e||{};var n={id:this.T.genDataId("node"),coordinate:e.coordinate||[30,30],meta:{type:t,title:e.title||null,updateTime:(new Date).toISOString()}};switch(t){case"execStage":n.meta.category="stage",n.meta.code=e.code||null,n.meta.kwargs=e.kwargs||null,n.meta.template=e.template||null;break;case"authLinkEntry":case"crontabEntry":n.meta.category="entry";break;case"mergePoint":case"endPoint":n.meta.category="point";break}switch(n.meta.category){case"stage":case"entry":n.width=200,n.height=50;break;case"point":n.width=60,n.height=60;break}return n},createLinkMeta:function(t,e){e=e||{};var n={type:t,title:e.title,updateTime:(new Date).toISOString()};switch(t){case"execLink":n.code=e.code||null,n.kwargs=e.kwargs||null,n.template=e.template||null;break}return n},updateItemMeta:function(){var t=this,e=this.T.startsWith(this.configItemId,"node")?this._getGraph().nodeList.find((function(e){return e.id===t.configItemId})):this._getGraph().linkList.find((function(e){return e.id===t.configItemId}));e.meta=this.T.jsonCopy(this.configForm),e.meta.updateTime=(new Date).toISOString(),this.showConfigPanel=!1},enterIntercept:function(t,e,n){return("entry"!==t.meta.category||"endPoint"!==e.meta.type)&&"entry"!==e.meta.category},outputIntercept:function(t,e){return"endPoint"!==t.meta.type&&("stage"===t.meta.category||("entry"!==t.meta.category||e.linkList.filter((function(e){return e.start.id===t.id})).length<=0))},linkDesc:function(t){return this.getTitle(t.meta)},getTitle:function(t){return t?t.title?t.title:this.$t("Title"):""},beforeNodeCreate:function(t,e){},onNodeCreated:function(t,e){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},beforeLinkCreate:function(t,e){return t.meta=this.createLinkMeta("execLink"),t},onLinkCreated:function(t,e){return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()}},computed:{graphMenu:function(){var t=this;return[[{icon:"fa-cogs",label:this.$t("Execute stage"),selected:function(e,n){e.addNode(t.createNodeData("execStage",{coordinate:n}))}}],[{icon:"fa-link",label:this.$t("Auth Link entry"),selected:function(e,n){e.addNode(t.createNodeData("authLinkEntry",{coordinate:n}))}},{icon:"fa-clock-o",label:this.$t("Crontab entry"),selected:function(e,n){e.addNode(t.createNodeData("crontabEntry",{coordinate:n}))}}],[{icon:"fa-compress",label:this.$t("Merge point"),selected:function(e,n){e.addNode(t.createNodeData("mergePoint",{coordinate:n}))}},{icon:"fa-stop",label:this.$t("End point"),disable:function(t){return!!t.nodeList.find((function(t){return"endPoint"===t.meta.type}))},selected:function(e,n){e.addNode(t.createNodeData("endPoint",{coordinate:n}))}}],[{icon:"fa-mouse-pointer",label:this.$t("Select all"),selected:function(t,e){t.selectAll()}}]]},nodeMenu:function(){var t=this;return[[{icon:"fa-edit",label:this.$t("Setup"),disable:!1,selected:function(e,n){t.configItemId=e.id,t.$set(t,"configForm",t.T.jsonCopy(e.meta)),t.showConfigPanel=!0}},{icon:"fa-times",label:this.$t("Delete"),disable:!1,selected:function(t,e){t.remove()}}]]},linkMenu:function(){var t=this;return[[{icon:"fa-edit",label:this.$t("Setup"),disable:!1,selected:function(e,n){t.configItemId=e.id,t.$set(t,"configForm",t.T.jsonCopy(e.meta)),t.showConfigPanel=!0}},{icon:"fa-times",label:this.$t("Delete"),disable:!1,selected:function(t,e){t.remove()}}]]},linkBaseStyle:function(){var t=this.$store.getters.uiColorSchema;switch(t){case"light":return{background:"white"};case"dark":return{background:"#222222"}}}},props:{},data:function(){return{data:{},showConfigPanel:!1,configItemId:null,configForm:{title:null,code:null,kwargs:null,template:null}}},created:function(){},mounted:function(){window._DFF_Blueprint=this}},At=_t,It=(n("7c93"),n("42ad")),Pt=Object(nt["a"])(At,i,o,!1,null,null,null);"function"===typeof It["default"]&&Object(It["default"])(Pt);e["default"]=Pt.exports},dbb4:function(t,e,n){var i=n("23e7"),o=n("83ab"),r=n("56ef"),a=n("fc6a"),s=n("06cf"),u=n("8418");i({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(t){var e,n,i=a(t),o=s.f,c=r(i),l={},d=0;while(c.length>d)n=o(i,e=c[d++]),void 0!==n&&u(l,e,n);return l}})},dfb6:function(t,e,n){},e2cc:function(t,e,n){var i=n("6eeb");t.exports=function(t,e,n){for(var o in e)i(t,o,e[o],n);return t}},e439:function(t,e,n){var i=n("23e7"),o=n("d039"),r=n("fc6a"),a=n("06cf").f,s=n("83ab"),u=o((function(){a(1)})),c=!s||u;i({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(t,e){return a(r(t),e)}})},e95a:function(t,e,n){var i=n("b622"),o=n("3f8c"),r=i("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||a[r]===t)}},eae9:function(t,e,n){var i=n("d039");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},f183:function(t,e,n){var i=n("d012"),o=n("861d"),r=n("5135"),a=n("9bf2").f,s=n("90e3"),u=n("bb2f"),c=s("meta"),l=0,d=Object.isExtensible||function(){return!0},h=function(t){a(t,c,{value:{objectID:"O"+ ++l,weakData:{}}})},f=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,c)){if(!d(t))return"F";if(!e)return"E";h(t)}return t[c].objectID},p=function(t,e){if(!r(t,c)){if(!d(t))return!0;if(!e)return!1;h(t)}return t[c].weakData},m=function(t){return u&&v.REQUIRED&&d(t)&&!r(t,c)&&h(t),t},v=t.exports={REQUIRED:!1,fastKey:f,getWeakData:p,onFreeze:m};i[c]=!0}}]);