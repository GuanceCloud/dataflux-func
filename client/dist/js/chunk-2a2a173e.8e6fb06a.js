(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a2a173e"],{"746a":function(t,e,a){"use strict";a("81a8")},"7c45":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("el-container",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[a("el-header",{attrs:{height:"60px"}},[a("div",{staticClass:"page-header"},[a("span",[t._v(t._s(t.$t("System Logs")))]),t._v(" "),a("div",{staticClass:"header-control"},[a("div",{staticClass:"log-filter-input"},[a("el-input",{attrs:{placeholder:t.$t("Input filter content"),size:"small"},model:{value:t.logFilter,callback:function(e){t.logFilter=e},expression:"logFilter"}},[t.logFilter?a("i",{staticClass:"el-input__icon el-icon-close text-main",attrs:{slot:"prefix"},on:{click:function(e){t.logFilter=""}},slot:"prefix"}):t._e()])],1)])])]),t._v(" "),a("el-main",{staticClass:"common-table-container"},[t.T.isNothing(t.filteredData)?t._e():a("el-table",{staticClass:"common-table",attrs:{height:"100%",size:"mini","show-header":!1,data:t.filteredData}},[a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("pre",{staticClass:"log-line",class:t.logClass(e.row)},[t._v(t._s(e.row))])]}}],null,!1,1558803519)})],1)],1)],1)],1)},s=[],i=a("1da1"),r=(a("99af"),a("fb6a"),a("2ca0"),a("4de4"),a("d3b7"),a("96cf"),{name:"SystemLogs",components:{},watch:{$route:{immediate:!0,handler:function(t,e){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.loadData();case 2:case"end":return t.stop()}}),t)})))()}}},methods:{loadData:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=t||{},n={},n[e.$store.getters.CONFIG("_WEB_TRACE_ID_HEADER")]=e.$store.getters.CONFIG("_WEB_PULL_LOG_TRACE_ID"),a.next=5,e.T.callAPI_get("/api/v1/system-logs",{headers:n,query:{position:e.nextPosition}});case 5:if(s=a.sent,s.ok){a.next=8;break}return a.abrupt("return");case 8:t.append?e.data=e.data.concat(s.data.logs):e.data=s.data.logs,e.data=e.data.slice(-5e3),e.nextPosition=s.data.nextPosition,e.$store.commit("updateLoadStatus",!0);case 12:case"end":return a.stop()}}),a)})))()},logClass:function(t){return this.T.startsWith(t,"[D]")?"log-debug":this.T.startsWith(t,"[I]")?"log-info":this.T.startsWith(t,"[W]")?"log-warning":this.T.startsWith(t,"[E]")?"log-error":""}},computed:{filteredData:function(){var t=this;return this.logFilter?this.data.filter((function(e){return e.toLowerCase().indexOf(t.logFilter.toLowerCase())>=0})):this.data}},props:{},data:function(){return{data:[],logFilter:"",nextPosition:null,autoRefreshTimer:null}},mounted:function(){var t=this;this.autoRefreshTimer=setInterval((function(){t.loadData({append:!0})}),5e3)},beforeDestroy:function(){this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer)}}),o=r,l=(a("746a"),a("2877")),c=a("ce39"),u=Object(l["a"])(o,n,s,!1,null,"8e607e5c",null);"function"===typeof c["default"]&&Object(c["default"])(u);e["default"]=u.exports},"81a8":function(t,e,a){},ce39:function(t,e,a){"use strict";var n=a("fb09"),s=a.n(n);e["default"]=s.a},fb09:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Input filter content":"输入过滤内容"}}'),delete t.options._Ctor}}}]);