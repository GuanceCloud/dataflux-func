(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-230a36f6"],{"0bcd":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("el-container",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[a("el-header",{attrs:{height:"60px"}},[a("div",{staticClass:"page-header"},[a("span",[t._v("脚本库还原点")]),t._v(" "),a("div",{staticClass:"header-control"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.openSetup(null,"add")}}},[a("i",{staticClass:"fa fa-fw fa-camera"}),t._v("\n            创建还原点\n          ")])],1)])]),t._v(" "),a("el-main",[t.T.isNothing(t.data)?a("div",{staticClass:"no-data-area"},[t.T.isPageFiltered()?a("h1",{staticClass:"no-data-title"},[t._v("当前过滤条件无匹配数据")]):a("h1",{staticClass:"no-data-title"},[t._v("当前未全新安装系统，尚无任何还原点")]),t._v(" "),a("p",{staticClass:"no-data-tip"},[t._v("\n          在进行发布脚本、导入脚本集、安装官方脚本集等操作之前，系统会自动创建还原点，保存整个脚本库状态\n          "),a("br"),t._v("如您在某项操作之后，函数遇到无法解决的问题，可以尝试恢复到执行操作时的还原点\n        ")])]):a("el-timeline",t._l(t.data,(function(e){return a("el-timeline-item",{key:e.id,attrs:{placement:"top",size:"large",type:"primary",timestamp:t.T.getDateTimeString(e.createTime)+" ("+t.T.fromNow(e.createTime)+")"}},[a("el-card",{staticClass:"recover-point-card",attrs:{shadow:"hover"}},[a("span",{staticClass:"text-info"},[t._v("#")]),t._v(" "),a("span",{staticClass:"text-main text-large"},[t._v(t._s(e.seq))]),t._v(" "),a("span",{staticClass:"recover-point-title",class:t.C.SCRIPT_RECOVER_POINT_MAP.get(e.type).textClass},[t._v(t._s(t.C.SCRIPT_RECOVER_POINT_MAP.get(e.type).name))]),t._v(" "),a("div",{staticClass:"recover-point-operation"},[a("el-button",{attrs:{type:e.nodeType,plain:"",size:"small"},on:{click:function(a){return t.quickSubmitData(e,"recover")}}},[t._v("还原至此状态")])],1),t._v(" "),e.note?a("div",{staticClass:"recover-point-note"},[a("pre",{staticClass:"text-info text-small"},[t._v(t._s(e.note))])]):t._e()])],1)})),1)],1)],1)],1)},n=[],s=a("c7eb"),i=a("1da1"),c={name:"ScriptRecoverPointList",components:{},watch:{$route:{immediate:!0,handler:function(t,e){var a=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.loadData();case 2:case"end":return t.stop()}}),t)})))()}}},methods:{loadData:function(t){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.callAPI_get("/api/v1/script-recover-points/do/list",{query:{pageSize:50}});case 2:if(a=t.sent,a.ok){t.next=5;break}return t.abrupt("return");case 5:e.data=a.data,e.$store.commit("updateLoadStatus",!0);case 7:case"end":return t.stop()}}),t)})))()},quickSubmitData:function(t,e){var a=this;return Object(i["a"])(Object(s["a"])().mark((function r(){var n;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.OP_NAME_MAP[e],r.t0=e,r.next="recover"===r.t0?4:9;break;case 4:return r.next=6,a.T.confirm('执行恢复后，脚本集、脚本、函数等数据将完整恢复到还原点创建时刻的状态且立即生效\n                <hr class="br">是否确认恢复？');case 6:if(r.sent){r.next=8;break}return r.abrupt("return");case 8:return r.abrupt("break",9);case 9:n=null,r.t1=e,r.next="recover"===r.t1?13:24;break;case 13:if(!t.hasExportData){r.next=19;break}return r.next=16,a.T.callAPI("post","/api/v1/script-sets/do/import",{body:{scriptRecoverPointId:t.id},alert:{okMessage:a.$t("Script Lib recovered")}});case 16:n=r.sent,r.next=23;break;case 19:if(!t.hasTableDumpJSON){r.next=23;break}return r.next=22,a.T.callAPI("post","/api/v1/script-recover-points/:id/do/recover",{params:{id:t.id},alert:{okMessage:a.$t("Script Lib recovered")}});case 22:n=r.sent;case 23:return r.abrupt("break",24);case 24:if(n&&n.ok){r.next=26;break}return r.abrupt("return");case 26:return r.next=28,a.loadData();case 28:case"end":return r.stop()}}),r)})))()},openSetup:function(t,e){switch(e){case"add":this.$router.push({name:"script-recover-point-add"});break}}},computed:{OP_NAME_MAP:function(){return{recover:"还原"}}},props:{},data:function(){return{data:[]}}},o=c,u=(a("540e"),a("2877")),p=a("1118"),l=Object(u["a"])(o,r,n,!1,null,"3bb77509",null);"function"===typeof p["default"]&&Object(p["default"])(l);e["default"]=l.exports},1118:function(t,e,a){"use strict";var r=a("403b"),n=a.n(r);e["default"]=n.a},"403b":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Recover Script Lib":"还原脚本库","Script Lib recovered":"脚本库已还原"}}'),delete t.options._Ctor}},"540e":function(t,e,a){"use strict";a("dc736")},dc736:function(t,e,a){}}]);