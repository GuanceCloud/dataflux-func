(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33bebb7b"],{"0bcd":function(t,e,a){"use strict";a.r(e);a("99af"),a("b0c0");var r=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[e("el-container",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[e("el-header",{attrs:{height:"60px"}},[e("div",{staticClass:"page-header"},[e("span",[t._v("脚本库还原点")]),t._v(" "),e("div",{staticClass:"header-control"},[e("el-button",{attrs:{size:"small"},on:{click:function(e){return t.openSetup(null,"add")}}},[e("i",{staticClass:"fa fa-fw fa-camera"}),t._v("\n            创建还原点\n          ")])],1)])]),t._v(" "),e("el-main",[t.T.isNothing(t.data)?e("div",{staticClass:"no-data-area"},[t.T.isPageFiltered()?e("h1",{staticClass:"no-data-title"},[e("i",{staticClass:"fa fa-fw fa-search"}),t._v(t._s(t.$t("No matched data found")))]):e("h1",{staticClass:"no-data-title"},[e("i",{staticClass:"fa fa-fw fa-info-circle"}),t._v("当前未全新安装系统，尚无任何还原点")]),t._v(" "),e("p",{staticClass:"no-data-tip"},[t._v("\n          在进行发布脚本、导入脚本集、安装官方脚本集等操作之前，系统会自动创建还原点，保存整个脚本库状态\n          "),e("br"),t._v("如您在某项操作之后，函数遇到无法解决的问题，可以尝试恢复到执行操作时的还原点\n        ")])]):e("el-timeline",t._l(t.data,(function(a){return e("el-timeline-item",{key:a.id,attrs:{placement:"top",size:"large",type:"primary",timestamp:"".concat(t.T.getDateTimeString(a.createTime)," (").concat(t.T.fromNow(a.createTime),")")}},[e("el-card",{staticClass:"recover-point-card",attrs:{shadow:"hover"}},[e("span",{staticClass:"text-info"},[t._v("#")]),t._v(" "),e("span",{staticClass:"text-main text-large"},[t._v(t._s(a.seq))]),t._v(" "),e("span",{staticClass:"recover-point-title",class:t.C.SCRIPT_RECOVER_POINT_MAP.get(a.type).textClass},[t._v(t._s(t.C.SCRIPT_RECOVER_POINT_MAP.get(a.type).name))]),t._v(" "),e("div",{staticClass:"recover-point-operation"},[e("el-button",{attrs:{type:a.nodeType,plain:"",size:"small"},on:{click:function(e){return t.quickSubmitData(a,"recover")}}},[t._v("还原至此状态")])],1),t._v(" "),a.note?e("div",{staticClass:"recover-point-note"},[e("pre",{staticClass:"text-info text-small"},[t._v(t._s(a.note))])]):t._e()])],1)})),1)],1)],1)],1)},n=[],s=a("c7eb"),i=a("1da1"),c=(a("14d9"),{name:"ScriptRecoverPointList",components:{},watch:{$route:{immediate:!0,handler:function(t,e){var a=this;return Object(i["a"])(Object(s["a"])().mark((function t(){return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.loadData();case 2:case"end":return t.stop()}}),t)})))()}}},methods:{loadData:function(t){var e=this;return Object(i["a"])(Object(s["a"])().mark((function t(){var a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.callAPI_get("/api/v1/script-recover-points/do/list",{query:{pageSize:20}});case 2:if(a=t.sent,a&&a.ok){t.next=5;break}return t.abrupt("return");case 5:e.data=a.data,e.$store.commit("updateLoadStatus",!0);case 7:case"end":return t.stop()}}),t)})))()},quickSubmitData:function(t,e){var a=this;return Object(i["a"])(Object(s["a"])().mark((function r(){var n;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.OP_NAME_MAP[e],r.t0=e,r.next="recover"===r.t0?4:9;break;case 4:return r.next=6,a.T.confirm('执行恢复后，脚本集、脚本、函数等数据将完整恢复到还原点创建时刻的状态且立即生效\n                <hr class="br">是否确认恢复？');case 6:if(r.sent){r.next=8;break}return r.abrupt("return");case 8:return r.abrupt("break",9);case 9:n=null,r.t1=e,r.next="recover"===r.t1?13:17;break;case 13:return r.next=15,a.T.callAPI("post","/api/v1/script-recover-points/:id/do/recover",{params:{id:t.id},alert:{okMessage:a.$t("Script Lib recovered")}});case 15:return n=r.sent,r.abrupt("break",17);case 17:if(n&&n.ok){r.next=19;break}return r.abrupt("return");case 19:return r.next=21,a.loadData();case 21:case"end":return r.stop()}}),r)})))()},openSetup:function(t,e){switch(e){case"add":this.$router.push({name:"script-recover-point-add"});break}}},computed:{OP_NAME_MAP:function(){return{recover:"还原"}}},props:{},data:function(){return{data:[]}}}),o=c,u=(a("b514"),a("2877")),l=a("1118"),p=Object(u["a"])(o,r,n,!1,null,"5bed66aa",null);"function"===typeof l["default"]&&Object(l["default"])(p);e["default"]=p.exports},1118:function(t,e,a){"use strict";var r=a("403b"),n=a.n(r);e["default"]=n.a},"1e2e":function(t,e,a){},"403b":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Script Lib Recovering":"还原脚本库","Script Lib recovered":"脚本库已还原"}}'),delete t.options._Ctor}},b514:function(t,e,a){"use strict";a("1e2e")}}]);