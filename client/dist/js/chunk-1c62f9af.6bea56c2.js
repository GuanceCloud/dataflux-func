(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c62f9af"],{"0f8f":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("transition",{attrs:{name:"fade"}},[e.$store.state.isLoaded?t("el-container",{attrs:{direction:"vertical"}},[t("el-header",{attrs:{height:"60px"}},[t("h1",[e._v(e._s(e.$t("Change Password")))])]),e._v(" "),t("el-main",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:15}},[t("div",{staticClass:"common-form"},[t("el-form",{ref:"form",attrs:{"label-width":"120px",model:e.form,rules:e.formRules,disabled:e.$store.getters.isIntegratedUser}},[t("el-form-item",[e.$store.getters.isIntegratedUser?t("InfoBlock",{attrs:{type:"warning",title:e.$t("You are signed in as a integrated user, please change your password in the origin system")}}):e._e()],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Old password"),prop:"oldPassword",error:e.respError.oldPassword}},[t("el-input",{attrs:{tabindex:"1",maxlength:"100",placeholder:e.$t("Please input old password"),"show-password":""},model:{value:e.form.oldPassword,callback:function(a){e.$set(e.form,"oldPassword",a)},expression:"form.oldPassword"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("New password"),prop:"newPassword"}},[t("el-input",{attrs:{tabindex:"2",maxlength:"100",placeholder:e.$t("Please input new password"),"show-password":""},model:{value:e.form.newPassword,callback:function(a){e.$set(e.form,"newPassword",a)},expression:"form.newPassword"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Confirm"),prop:"confirmNewPassword"}},[t("el-input",{attrs:{tabindex:"3",maxlength:"100",placeholder:e.$t("Please confirm new password"),"show-password":""},model:{value:e.form.confirmNewPassword,callback:function(a){e.$set(e.form,"confirmNewPassword",a)},expression:"form.confirmNewPassword"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Captcha"),_captcha:"",prop:"captcha",error:e.respError.captcha}},[t("el-input",{attrs:{tabindex:"4",maxlength:4,clearable:!0,placeholder:e.$t("Please input captcha")},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.submitData(a)}},model:{value:e.form.captcha,callback:function(a){e.$set(e.form,"captcha",a)},expression:"form.captcha"}}),e._v(" "),t("CaptchaImage",{attrs:{"captcha-category":"changePassword","captcha-token":e.form.captchaToken},nativeOn:{click:function(a){return e.refreshCaptcha(!0)}}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{tabindex:"5",type:"primary"},on:{click:e.submitData}},[e._v(e._s(e.$t("Change Password")))])],1)],1)],1)]),e._v(" "),t("el-col",{staticClass:"hidden-md-and-down",attrs:{span:9}})],1)],1)],1):e._e()],1)},s=[],n=t("1da1"),o=(t("d3b7"),t("25f0"),t("ac1f"),t("466d"),t("96cf"),t("d4ab")),c={name:"PasswordSetup",components:{CaptchaImage:o["a"]},watch:{},methods:{submitData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.$refs.form.validate();case 3:a.next=8;break;case 5:return a.prev=5,a.t0=a["catch"](0),a.abrupt("return",console.error(a.t0));case 8:return e.T.jsonClear(e.respError),t=e.T.jsonCopy(e.form),a.next=12,e.T.callAPI("post","/api/v1/auth/do/change-password",{body:{captchaToken:t.captchaToken,captcha:t.captcha,changePassword:{oldPassword:t.oldPassword,newPassword:t.newPassword}},alert:{okMessage:e.$t("Password changed")}});case 12:if(r=a.sent,r.ok){a.next=25;break}e.refreshCaptcha(),a.t1=r.reason,a.next="EUserPassword"===a.t1?18:"EBizBadData"===a.t1?20:"EUserCaptcha"===a.t1?22:24;break;case 18:return e.respError.oldPassword=e.$t("Invalid old password"),a.abrupt("break",24);case 20:return e.respError.captcha=e.$t("User not found"),a.abrupt("break",24);case 22:return e.respError.captcha=e.$t("Invalid captcha"),a.abrupt("break",24);case 24:return a.abrupt("return");case 25:e.$refs.form.resetFields();case 27:case"end":return a.stop()}}),a,null,[[0,5]])})))()},refreshCaptcha:function(e){this.form.captchaToken=Math.random().toString(),e&&(this.form.captcha="")}},computed:{formRules:function(){var e=this;return{oldPassword:[{trigger:"change",message:this.$t("Please input old password"),required:!0}],newPassword:[{trigger:"change",message:this.$t("Please input new password"),required:!0},{trigger:"change",required:!0,validator:function(a,t,r){return t.length<6?r(new Error(e.$t("Length of password should longer than 6"))):t.match(/[a-z]/)&&t.match(/[A-Z]/)&&t.match(/[0-9]/)?(e.$refs.form.validateField("confirmNewPassword"),r()):r(new Error(e.$t("Password should contains uppercase, lowercase alphabet and number")))}}],confirmNewPassword:[{trigger:"change",message:this.$t("Please confirm new password"),required:!0},{trigger:"change",required:!0,validator:function(a,t,r){return t!==e.form.newPassword?r(new Error(e.$t("New password not matches"))):r()}}],captcha:[{trigger:"change",message:this.$t("Please input captcha"),required:!0}]}}},props:{},data:function(){return{respError:{oldPassword:null,captcha:null},form:{captchaToken:null,captcha:null,oldPassword:null,newPassword:null,confirmNewPassword:null}}},created:function(){this.refreshCaptcha(!0),this.$store.commit("updateLoadStatus",!0)}},i=c,d=(t("1d16"),t("2877")),p=t("91d1"),l=Object(d["a"])(i,r,s,!1,null,null,null);"function"===typeof p["default"]&&Object(p["default"])(l);a["default"]=l.exports},"1d16":function(e,a,t){"use strict";t("f461")},"6f0d":function(e,a,t){},"91d1":function(e,a,t){"use strict";var r=t("d8e6"),s=t.n(r);a["default"]=s.a},"9d4c":function(e,a,t){"use strict";t("6f0d")},d4ab:function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"captcha-image"},[t("div",{domProps:{innerHTML:e._s(e.captchaImageRaw)}})])},s=[],n=t("1da1"),o=(t("96cf"),{name:"CaptchaImage",components:{},watch:{captchaToken:{immediate:!0,handler:function(e,a){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.showCaptchaImage();case 2:case"end":return e.stop()}}),e)})))()}}},methods:{showCaptchaImage:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.captchaToken){a.next=2;break}return a.abrupt("return");case 2:return t={captchaToken:e.captchaToken},e.captchaCategory&&(t.captchaCategory=e.captchaCategory),a.next=6,e.T.callAPI_get(e.captchaUrl,{respType:"text",query:t});case 6:r=a.sent,e.captchaImageRaw=r||"";case 8:case"end":return a.stop()}}),a)})))()}},computed:{},props:{captchaCategory:String,captchaToken:String,captchaUrl:{type:String,default:"/api/v1/captcha/do/get"}},data:function(){return{captchaImageRaw:""}},created:function(){}}),c=o,i=(t("9d4c"),t("2877")),d=Object(i["a"])(c,r,s,!1,null,"eee2afa2",null);a["a"]=d.exports},d8e6:function(e,a){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Change Password":"修改密码","You are signed in as a integrated user, please change your password in the origin system":"当前登录用户为集成登录用户，修改密码请前往原系统进行操作","Old password":"旧密码","Please input old password":"请输入旧密码","New password":"新密码","Please input new password":"请输入新密码","Confirm":"确认新密码","Please confirm new password":"请再输入一遍新密码","Captcha":"验证码","Please input captcha":"请输入验证码","Password changed":"密码已修改","Invalid old password":"旧密码错误","User not found":"当前用户不存在","Invalid captcha":"验证码错误或无效","Length of password should longer than 6":"密码至少6位","Password should contains uppercase, lowercase alphabet and number":"密码必须同时包含大写英文、小写英文和数字","New password not matches":"两次输入密码不一致"}}'),delete e.options._Ctor}},f461:function(e,a,t){}}]);