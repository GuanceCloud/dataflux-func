(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-088827da"],{3286:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Administrator":"系统管理员","User disabled":"用户已禁用","User enabled":"用户已启用","No User has ever been added":"从未添加过任何用户","Are you sure you want to disable the User?":"是否确认禁用此用户？"}}'),delete t.options._Ctor}},ac7d:function(t,e,a){"use strict";var r=a("3286"),s=a.n(r);e["default"]=s.a},fbd0:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("el-container",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[a("el-header",{attrs:{height:"60px"}},[a("h1",[t._v("\n        "+t._s(t.$t("User Manager"))+"\n        "),a("div",{staticClass:"header-control"},[a("FuzzySearchInput",{attrs:{dataFilter:t.dataFilter}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.openSetup(null,"add")}}},[a("i",{staticClass:"fa fa-fw fa-plus"}),t._v("\n            "+t._s(t.$t("New"))+"\n          ")])],1)])]),t._v(" "),a("el-main",{staticClass:"common-table-container"},[t.T.isNothing(t.data)?a("div",{staticClass:"no-data-area"},[t.T.isPageFiltered()?a("h1",{staticClass:"no-data-title"},[t._v(t._s(t.$t("No matched data found")))]):a("h1",{staticClass:"no-data-title"},[t._v(t._s(t.$t("No User has ever been added")))]),t._v(" "),a("p",{staticClass:"no-data-tip"},[t._v("\n          添加成员，允许其他用户使用本平台\n        ")])]):t._e(),t._v(" "),a("el-table",{staticClass:"common-table",attrs:{height:"100%",data:t.data,"row-class-name":t.T.getHighlightRowCSS}},[a("el-table-column",{attrs:{label:t.$t("Username")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("code",{staticClass:"text-code text-small"},[t._v(t._s(e.row.username))]),a("CopyButton",{attrs:{content:e.row.username}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("Name")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$t("Status"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isDisabled?a("span",{staticClass:"text-bad"},[t._v(t._s(t.$t("Disabled")))]):a("span",{staticClass:"text-good"},[t._v(t._s(t.$t("Enabled")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"right",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[Array.isArray(e.row.roles)&&e.row.roles.indexOf("sa")>=0?a("span",{staticClass:"text-bad"},[t._v(t._s(t.$t("Administrator")))]):[e.row.isDisabled?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.quickSubmitData(e.row,"enable")}}},[t._v(t._s(t.$t("Enable")))]):a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.quickSubmitData(e.row,"disable")}}},[t._v(t._s(t.$t("Disable")))]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.openSetup(e.row,"setup")}}},[t._v(t._s(t.$t("Setup")))])]]}}])})],1)],1),t._v(" "),a("Pager",{attrs:{pageInfo:t.pageInfo}})],1)],1)},s=[],n=a("1da1"),i=(a("130f"),a("96cf"),{name:"UserList",components:{},watch:{$route:{immediate:!0,handler:function(t,e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.loadData();case 2:case"end":return t.stop()}}),t)})))()}},"$store.state.isLoaded":function(t){var e=this;t&&setImmediate((function(){return e.T.autoScrollTable()}))}},methods:{loadData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dataFilter=t.T.createListQuery({sort:["seq"]}),e.next=3,t.T.callAPI_get("/api/v1/users/do/list",{query:a});case 3:if(r=e.sent,r.ok){e.next=6;break}return e.abrupt("return");case 6:t.data=r.data,t.pageInfo=r.pageInfo,t.$store.commit("updateLoadStatus",!0);case 9:case"end":return e.stop()}}),e)})))()},quickSubmitData:function(t,e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:r.t0=e,r.next="disable"===r.t0?3:8;break;case 3:return r.next=5,a.T.confirm(a.$t("Are you sure you want to disable the User?"));case 5:if(r.sent){r.next=7;break}return r.abrupt("return");case 7:return r.abrupt("break",8);case 8:s=null,r.t1=e,r.next="disable"===r.t1?12:"enable"===r.t1?16:20;break;case 12:return r.next=14,a.T.callAPI("post","/api/v1/users/:id/do/modify",{params:{id:t.id},body:{data:{isDisabled:!0}},alert:{okMessage:a.$t("User disabled")}});case 14:return s=r.sent,r.abrupt("break",20);case 16:return r.next=18,a.T.callAPI("post","/api/v1/users/:id/do/modify",{params:{id:t.id},body:{data:{isDisabled:!1}},alert:{okMessage:a.$t("User enabled")}});case 18:return s=r.sent,r.abrupt("break",20);case 20:if(s&&s.ok){r.next=22;break}return r.abrupt("return");case 22:return a.$store.commit("updateHighlightedTableDataId",t.id),r.next=25,a.loadData();case 25:case"end":return r.stop()}}),r)})))()},openSetup:function(t,e){var a=this.T.packRouteQuery();switch(e){case"add":this.$router.push({name:"user-add",query:a});break;case"setup":this.$store.commit("updateHighlightedTableDataId",t.id),this.$router.push({name:"user-setup",params:{id:t.id},query:a});break}}},computed:{},props:{},data:function(){var t=this.T.createPageInfo(),e=this.T.createListQuery();return{data:[],pageInfo:t,dataFilter:{_fuzzySearch:e._fuzzySearch}}}}),o=i,u=a("2877"),c=a("ac7d"),d=Object(u["a"])(o,r,s,!1,null,"ba63dc5c",null);"function"===typeof c["default"]&&Object(c["default"])(d);e["default"]=d.exports}}]);