(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fe9a96c"],{"2ead":function(t,e,a){"use strict";var s=a("f0af"),n=a.n(s);e["default"]=n.a},"707d":function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"en":{"sessionCount":"{n} session | {n} sessions","lastAccess":"Accessed {t}"}}'),delete t.options._Ctor}},dd01:function(t,e,a){"use strict";var s=a("707d"),n=a.n(s);e["default"]=n.a},f0af:function(t,e){t.exports=function(t){t.options.__i18n=t.options.__i18n||[],t.options.__i18n.push('{"zh-CN":{"Session":"会话","User disabled":"用户已禁用","User enabled":"用户已启用","No User has ever been added":"从未添加过任何用户","Are you sure you want to disable the User?":"是否确认禁用此用户？","Add members to allow other users to use the platform":"添加成员，允许其他用户使用本平台","sessionCount":"{n} 个会话","lastAccess":"{t}访问"}}'),delete t.options._Ctor}},fbd0:function(t,e,a){"use strict";a.r(e);a("b0c0");var s=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[e("el-container",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.isLoaded,expression:"$store.state.isLoaded"}],attrs:{direction:"vertical"}},[e("el-header",{attrs:{height:"60px"}},[e("div",{staticClass:"page-header"},[e("span",[t._v(t._s(t.$t("User Manage")))]),t._v(" "),e("div",{staticClass:"header-control"},[e("FuzzySearchInput",{attrs:{dataFilter:t.dataFilter}}),t._v(" "),t.$store.getters.isAdmin?e("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.openSetup(null,"add")}}},[e("i",{staticClass:"fa fa-fw fa-plus"}),t._v("\n            "+t._s(t.$t("New"))+"\n          ")]):t._e()],1)])]),t._v(" "),e("el-main",{staticClass:"common-table-container"},[t.T.isNothing(t.data)?e("div",{staticClass:"no-data-area"},[t.T.isPageFiltered()?e("h1",{staticClass:"no-data-title"},[e("i",{staticClass:"fa fa-fw fa-search"}),t._v(t._s(t.$t("No matched data found")))]):e("h1",{staticClass:"no-data-title"},[e("i",{staticClass:"fa fa-fw fa-info-circle"}),t._v(t._s(t.$t("No User has ever been added")))]),t._v(" "),e("p",{staticClass:"no-data-tip"},[t._v("\n          "+t._s(t.$t("Add members to allow other users to use the platform"))+"\n        ")])]):e("el-table",{staticClass:"common-table",attrs:{height:"100%",data:t.data,"row-class-name":t.T.getHighlightRowCSS}},[e("el-table-column",{attrs:{label:t.$t("Username"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("code",{staticClass:"text-main"},[t._v(t._s(a.row.username))]),t._v(" "),e("CopyButton",{attrs:{content:a.row.username}})]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Name"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.name))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Email"),width:"300"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.email))])]}}])}),t._v(" "),e("el-table-column"),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Session"),width:"350"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.sessions.length>0?[a.row.sessions[0].idleMs<9e5?e("span",{staticClass:"text-good"},[e("i",{staticClass:"fa fa-fw fa-circle"}),t._v(" "+t._s(t.$t("Online")))]):e("span",{staticClass:"text-watch"},[e("i",{staticClass:"fa fa-fw fa-circle"}),t._v(" "+t._s(t.$t("Idle")))]),t._v(" "),a.row.sessions.length>1?e("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[e("div",{attrs:{slot:"content"},slot:"content"},t._l(a.row.sessions,(function(a,s){return e("div",[t._v("\n                    "+t._s(t.$t("Session"))+" "),e("code",{staticClass:"code-font"},[t._v("#"+t._s(s+1))]),t._v(t._s(t.$t(":"))+"\n                    "+t._s(t.$t("lastAccess",{t:t.T.fromNow(a.lastAccessTime)}))+"\n                  ")])})),0),t._v(" "),e("span",{staticClass:"text-info"},[t._v("\n                  "+t._s(t.$t("("))+t._s(t.$tc("sessionCount",a.row.sessions.length))+t._s(t.$t(")"))+"\n                ")])]):t._e(),t._v(" "),e("br"),t._v(" "),e("i",{staticClass:"fa fa-fw fa-mouse-pointer"}),t._v("\n              "+t._s(t.$t("lastAccess",{t:t.T.fromNow(a.row.sessions[0].lastAccessTime)}))+"\n            ")]:[e("span",{staticClass:"text-info"},[e("i",{staticClass:"fa fa-fw fa-circle"}),t._v("\n                "+t._s(t.$t("Offline"))+"\n              ")])]]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.$t("Status"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.isDisabled?e("span",{staticClass:"text-bad"},[e("i",{staticClass:"fa fa-fw fa-ban"}),t._v(" "+t._s(t.$t("Disabled")))]):e("span",{staticClass:"text-good"},[e("i",{staticClass:"fa fa-fw fa-check"}),t._v(" "+t._s(t.$t("Enabled")))])]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"right",width:"200"},scopedSlots:t._u([{key:"default",fn:function(a){return[Array.isArray(a.row.roles)&&a.row.roles.indexOf("sa")>=0?e("span",{staticClass:"text-bad"},[t._v(t._s(t.$t("Administrator")))]):t.$store.getters.isAdmin?[a.row.isDisabled?e("el-link",{on:{click:function(e){return t.quickSubmitData(a.row,"enable")}}},[t._v(t._s(t.$t("Enable")))]):e("el-link",{on:{click:function(e){return t.quickSubmitData(a.row,"disable")}}},[t._v(t._s(t.$t("Disable")))]),t._v(" "),e("el-link",{on:{click:function(e){return t.openSetup(a.row,"setup")}}},[t._v(t._s(t.$t("Setup")))])]:t._e()]}}])})],1)],1)],1)],1)},n=[],r=a("c7eb"),i=a("1da1"),o=(a("130f"),a("14d9"),{name:"UserList",components:{},watch:{$route:{immediate:!0,handler:function(t,e){var a=this;return Object(i["a"])(Object(r["a"])().mark((function t(){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.loadData();case 2:case"end":return t.stop()}}),t)})))()}},"$store.state.isLoaded":function(t){var e=this;t&&setImmediate((function(){return e.T.autoScrollTable()}))}},methods:{loadData:function(){var t=this;return Object(i["a"])(Object(r["a"])().mark((function e(){var a,s;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dataFilter=t.T.createListQuery({sort:["seq"]}),e.next=3,t.T.callAPI_get("/api/v1/users/do/list",{query:a});case 3:if(s=e.sent,s&&s.ok){e.next=6;break}return e.abrupt("return");case 6:t.data=s.data,t.$store.commit("updateLoadStatus",!0);case 8:case"end":return e.stop()}}),e)})))()},quickSubmitData:function(t,e){var a=this;return Object(i["a"])(Object(r["a"])().mark((function s(){var n;return Object(r["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:s.t0=e,s.next="disable"===s.t0?3:8;break;case 3:return s.next=5,a.T.confirm(a.$t("Are you sure you want to disable the User?"));case 5:if(s.sent){s.next=7;break}return s.abrupt("return");case 7:return s.abrupt("break",8);case 8:n=null,s.t1=e,s.next="disable"===s.t1?12:"enable"===s.t1?16:20;break;case 12:return s.next=14,a.T.callAPI("post","/api/v1/users/:id/do/modify",{params:{id:t.id},body:{data:{isDisabled:!0}},alert:{okMessage:a.$t("User disabled")}});case 14:return n=s.sent,s.abrupt("break",20);case 16:return s.next=18,a.T.callAPI("post","/api/v1/users/:id/do/modify",{params:{id:t.id},body:{data:{isDisabled:!1}},alert:{okMessage:a.$t("User enabled")}});case 18:return n=s.sent,s.abrupt("break",20);case 20:if(n&&n.ok){s.next=22;break}return s.abrupt("return");case 22:return a.$store.commit("updateHighlightedTableDataId",t.id),s.next=25,a.loadData();case 25:case"end":return s.stop()}}),s)})))()},openSetup:function(t,e){var a=this.T.packRouteQuery();switch(e){case"add":this.$router.push({name:"user-add",query:a});break;case"setup":this.$store.commit("updateHighlightedTableDataId",t.id),this.$router.push({name:"user-setup",params:{id:t.id},query:a});break}}},computed:{},props:{},data:function(){var t=this.T.createListQuery();return{data:[],dataFilter:{_fuzzySearch:t._fuzzySearch}}}}),l=o,c=a("2877"),u=a("dd01"),d=a("2ead"),f=Object(c["a"])(l,s,n,!1,null,"4179f922",null);"function"===typeof u["default"]&&Object(u["default"])(f),"function"===typeof d["default"]&&Object(d["default"])(f);e["default"]=f.exports}}]);