(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a18b438"],{"015a":function(e,t,a){"use strict";a("3495")},"0797":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Download as a text file":"作为文本文件下载"}}'),delete e.options._Ctor}},"0984":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Are you sure you want to delete the Script Set?<br><strong class=\\"text-bad\\">{label}</strong>":"是否確認刪除此指令碼集?<br><strong class=\\"text-bad\\">{label}</strong>","Are you sure you want to delete the Script?<br><strong class=\\"text-bad\\">{label}</strong>":"是否確認刪除此指令碼<br><strong class=\\"text-bad\\">{label}</strong>","Are you sure you want to run the Crontab Config manually?":"是否確認手動執行此自動觸發配置？","Assigned to queue #{queue}":"指派到佇列 #{queue}","Auth":"認證","Auth Link List":"授權連結列表","Auth Links, Crontab Configs and Batches":"授權連結、自動觸發配置和批處理","Batch List":"批處理列表","Cannot not starts with a number":"不得以數字開頭","Code edited but not published yet":"程式碼已修改但尚未釋出","Config":"配置","Copy example":"複製示例","Copy {name} ID":"複製{name} ID","Created":"建立","Crontab Config List":"自動觸發配置列表","Crontab Config Task sent":"自動觸發配置任務已傳送","Edited":"已修改","Example":"示例","Expires":"過期","Export Script Set":"匯出指令碼集","Go to Recent Task Record":"前往最近任務記錄","Go to Script Market":"前往指令碼市場","Import/Calling will run the published version":"引用 / API 呼叫實際將執行已釋出程式碼","In most cases, the Script Sets that users doesn\'t need to care about are hidden by default.":"大多數情況下，使用者不需要關心的指令碼集預設會被隱藏。","Inputed Script Set ID already exists":"輸入的指令碼集 ID 已經存在","Installed form Script Market":"從指令碼市場安裝的指令碼集","Jump to...":"跳轉到...","Locked by other user ({user})":"被其他使用者（{user}）鎖定","Locked by you":"被您鎖定","New Script":"新建指令碼","New Script Set":"新建指令碼集","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Please input ID":"請輸入 ID","Please input new Script Set ID":"請輸入新指令碼集 ID","Quick View":"快速檢視","Refresh":"重新整理列表","Run":"執行","Script Set ID too long":"指令碼集 ID 過長","Script Set cloned":"指令碼集已克隆","Script Set deleted":"指令碼集已刪除","Script Set exported":"指令碼集已匯出","Script Set locked":"指令碼集已上鎖","Script Set pinned":"指令碼集已置頂","Script Set unlocked":"指令碼集已解鎖","Script Set unpinned":"指令碼集已取消","Script Set {id}":"指令碼集 {id}","Script deleted":"指令碼已刪除","Script locked":"指令碼已上鎖","Script unlocked":"指令碼已解鎖","Script {id}":"指令碼 {id}","Setup":"配置","Some Script Sets have been hidden":"一些指令碼集已被隱藏","The Script Market has been removed":"指令碼市場已被刪除","Throttling":"限流","View":"檢視","You can change the default behavior in [Management / System Settings].":"您可以在「管理 / 系統設定」中修改預設此行為。","failureCount":"失敗 {n}","lastFailed":"{t}呼叫失敗","lastRan":"{t}呼叫","lastSucceeded":"{t}呼叫成功","successCount":"成功 {n}"}}'),delete e.options._Ctor}},"0a43":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Jump to...":"跳转到...","Refresh":"刷新列表","New ENV":"新建环境变量","Setup":"配置","Example":"示例","Copy example":"复制示例","Copy {name} ID":"复制{name} ID","ENV Variable pinned":"环境变量已置顶","ENV Variable unpinned":"环境变量已取消","ENV Variable deleted":"环境变量已删除","Are you sure you want to delete the ENV?<br><strong class=\\"text-bad\\">{label}</strong>":"是否确认删除此环境变量？<br><strong class=\\"text-bad\\">{label}</strong>"}}'),delete e.options._Ctor}},"0a76":function(e,t,a){},"0bc4":function(e,t,a){},"0bc6":function(e,t,a){"use strict";var n=a("4064"),s=a.n(n);t["default"]=s.a},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"12e2":function(e,t,a){"use strict";var n=a("363a"),s=a.n(n);t["default"]=s.a},1681:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Cannot connect to this Connector, check the configs and try again.":"無法使用此聯結器，請檢查配置後重試。","Code":"程式碼","Collections":"集合","Command Debugger":"命令除錯","Data":"資料","Database":"資料庫","Databases":"資料庫","Error Message":"錯誤資訊如下","Fields":"欄位","Guance DataWay":"觀測雲DataWay","Indices":"索引","Initials":"首字母","Keys (a part of)":"鍵（部分）","Measurements":"指標","Moving...":"調整位置...","Other":"其他","Query":"查詢語句","Query Failed":"查詢失敗","Query is running. It waits up to 5 seconds, You can refresh the page when it not response for a long time.":"查詢執行中，最多等待 5 秒，長時間無響應後再嘗試重新整理頁面","Result":"結果","Results will be shown here...":"執行結果將顯示在此...","Retention Policies":"保留策略","Run":"執行","SQL Debugger":"SQL 除錯","Schema Browser":"結構瀏覽器","Tables":"表","Tags":"標籤","URI Query Debugger":"URI Query 除錯"}}'),delete e.options._Ctor}},"1aaa":function(e,t,a){"use strict";var n=a("a09a"),s=a.n(n);t["default"]=s.a},"1b65":function(e,t,a){"use strict";var n=a("2731"),s=a.n(n);t["default"]=s.a},"1b85":function(e,t,a){"use strict";a("7c5d")},"1f86":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"1. $share/GROUP/TOPIC in MQTTv5":"1. MQTTv5 的 $share/GROUP/TOPIC","2. $queue/TOPIC in EMQX":"2. EMQX 的 $queue/TOPIC","API Key":"API Key","API Key ID":"API Key ID","API Key here is always required":"每次修改都必須重新輸入 API Key","Add Connector":"新增聯結器","Add Topic / Handler":"新增主題 / 處理函式","Are you sure you want to delete the Connector?":"是否確認刪除此聯結器？","Auth Type":"認證型別","Cannot find the Guance Node you need?":"找不到需要的觀測雲節點？","Cannot not starts with a number":"不得以數字開頭","Charset":"編碼","Client ID":"客戶端 ID","Compatibility":"相容性","Connector Development Doc":"聯結器開發文件","Connector created":"聯結器已建立","Connector deleted":"聯結器已刪除","Connector saved":"聯結器已儲存","Content":"內容","Current consumption rate":"當前消費速度","Database":"資料庫","Func Return Value":"函式返回值","Group ID":"分組 ID","Guance Node":"觀測雲節點","Handler Func":"處理函式","Host":"主機","Last Consumed":"最後消費","Learn more about subscribing using Connector":"瞭解透過聯結器進行訂閱","Message":"訊息","Multi Sub":"多訂閱器","Name in Guance":"觀測雲中名稱","No Recent Message":"無近期訊息","Node SDK used in the Subscriber":"本訂閱器所使用的 Node SDK","Only HTTP and HTTPS are allowed":"協議只能為HTTP或HTTPS","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Only integer between 1 and 65535 are allowed":"主機埠範圍為 1-65535","OpenAPI URL":"OpenAPI 地址","OpenWay URL":"OpenWay 地址","Password":"密碼","Password here is always required when the Connector requires password to connect":"如聯結器需要密碼，則每次修改都必須重新輸入密碼","Please input API Key":"請輸入 API Key","Please input API Key ID":"請輸入 API Key ID","Please input Access Key":"請輸入Access Key","Please input Connector type":"請選擇聯結器型別","Please input ID":"請輸入 ID","Please input OpenAPI URL":"請輸入 OpenAPI 地址","Please input OpenWay URL":"請輸入 OpenWay 地址","Please input Secret Key":"請輸入Secret Key","Please input Websocket URL":"請輸入 WebSocket 地址","Please input auth type":"請輸入認證方式","Please input charset":"請輸入字符集","Please input client ID":"請輸入客戶端 ID","Please input database":"請輸入資料庫名","Please input host":"請輸入主機地址","Please input password":"請輸入密碼","Please input port":"請輸入主機埠","Please input servers":"請輸入伺服器列表","Please input source":"請輸入聯結器名稱","Please input topic":"請輸入訂閱主題","Please input user":"請輸入使用者名稱","Please select Guance Node":"請選擇觀測雲節點","Please select HTTP protocol":"請選擇HTTP協議","Please select handler Func":"請選擇處理函式","Port":"埠","Protocol":"協議","Python SDK used in the Connector":"本聯結器所使用的 Python SDK","SASL Mechanisms":"SASL 機制","Save without connection test":"儲存（忽略連通性測試）","Security Protocol":"安全協議","Servers":"伺服器列表","Servers to connect (e.g. host1:80,host2:81)":"連線地址列表，如：host1:80,host2:81","Setup Connector":"配置聯結器","Should start with http:// or https://":"必須以 http:// 或 https:// 開頭","Source":"源","Sub Offset":"訂閱 Offset","Test connection":"測試連通性","This Title will also be displayed in Guance":"這個標題同時也會展示在觀測雲中","This is a built-in Connector, please contact the admin to change the config":"當前聯結器為內建聯結器，請聯絡管理員調整叢集配置","Topic":"主題","Topic Handler is disabled":"主題訂閱處理已禁用","Topic/Handler":"主題 / 處理函式","Traceback":"呼叫堆疊","User":"使用者","WebSocket URL":"WebSocket 地址","messageRate":"{n} 條/分鐘"}}'),delete e.options._Ctor}},"20d1":function(e,t,a){"use strict";a("db23")},"21a6":function(e,t,a){(function(a){var n,s,r;(function(a,i){s=[],n=i,r="function"===typeof n?n.apply(t,s):n,void 0===r||(e.exports=r)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,a){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){c(n.response,t,a)},n.onerror=function(){console.error("could not download file")},n.send()}function s(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof a&&a.global===a?a:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,t,a){var o=i.URL||i.webkitURL,c=document.createElement("a");t=t||e.name||"download",c.download=t,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?r(c):s(c.href)?n(e,t,a):r(c,c.target="_blank")):(c.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(c.href)}),4e4),setTimeout((function(){r(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,a,i){if(a=a||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,i),a);else if(s(e))n(e,a,i);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){r(o)}))}}:function(e,t,a,s){if(s=s||open("","_blank"),s&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,a);var r="application/octet-stream"===e.type,c=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&c||o)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},u.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,p=d.createObjectURL(e);s?s.location=p:location.href=p,s=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});i.saveAs=c.saveAs=c,e.exports=c}))}).call(this,a("c8ba"))},"24f2":function(e,t,a){},2668:function(e,t,a){"use strict";var n=a("0a43"),s=a.n(n);t["default"]=s.a},2731:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Add Connector":"新增聯結器","Are you sure you want to delete the Connector?<br><strong class=\\"text-bad\\">{label}</strong>":"是否確認刪除此聯結器<br><strong class=\\"text-bad\\">{label}</strong>","Connector deleted":"聯結器已刪除","Connector pinned":"聯結器已置頂","Connector unpinned":"聯結器已取消","Copy example":"複製示例","Copy {name} ID":"複製{name} ID","Example":"示例","Go to Recent Task Record":"前往最近任務記錄","Jump to...":"跳轉到...","Refresh":"重新整理列表","Setup":"配置","Simple Debug":"簡易除錯","View":"檢視"}}'),delete e.options._Ctor}},"276d":function(e,t,a){"use strict";var n=a("376b"),s=a.n(n);t["default"]=s.a},"27c5":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Add Script":"添加脚本","Setup Script":"配置脚本","Script Template":"脚本模板","Show Script Template":"显示脚本模板","Basic Example":"基础示例","Blank Script":"空白脚本","From Example Script":"来自示例脚本","Script Set ID should be a prefix of the Script ID":"脚本集 ID 应作为脚本 ID 的前缀","Please input ID":"请输入 ID","Only alphabets, numbers and underscore are allowed":"只能包含大小写英文、数字及下划线","Cannot not starts with a number":"不得以数字开头","This Script ID should starts with \\"{prefix}\\"":"本脚本 ID 必须以 \\"{prefix}\\" 开头","Script created":"脚本已创建","Script saved":"脚本已保存","Script deleted":"脚本已删除","Are you sure you want to delete the Script?":"是否确认删除此脚本？","This Script is locked by you":"当前脚本已被您锁定","This Script is locked by other user ({user})":"当前脚本已被其他用户（{user}）锁定"}}'),delete e.options._Ctor}},"29a8d":function(e,t,a){"use strict";var n=a("852c"),s=a.n(n);t["default"]=s.a},"2c4c":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Add ENV":"新增環境變數","Are you sure you want to delete the ENV?":"是否確認刪除此環境變數？","Cannot not starts with a number":"不得以數字開頭","ENV Variable created":"環境變數已建立","ENV Variable deleted":"環境變數已刪除","ENV Variable saved":"環境變數已儲存","Leave blank when not changing":"不修改時請留空","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Please input ID":"請輸入 ID","Please input Value":"請輸入值","Setup ENV":"配置環境變數","Value Type":"值型別"}}'),delete e.options._Ctor}},"2c5b":function(e,t,a){"use strict";a("24f2")},"2cda":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Add Script":"添加腳本","Are you sure you want to delete the Script?":"是否確認刪除此腳本？","Basic Example":"基礎示例","Blank Script":"空白腳本","Cannot not starts with a number":"不得以數字開頭","From Example Script":"來自示例腳本","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Please input ID":"請輸入 ID","Script Set ID should be a prefix of the Script ID":"腳本集 ID 應作為腳本 ID 的前綴","Script Template":"腳本模板","Script created":"腳本已創建","Script deleted":"腳本已刪除","Script saved":"腳本已保存","Setup Script":"配置腳本","Show Script Template":"顯示腳本模板","This Script ID should starts with \\"{prefix}\\"":"本腳本 ID 必須以 \\"{prefix}\\" 開頭","This Script is locked by other user ({user})":"當前腳本已被其他用户（{user}）鎖定","This Script is locked by you":"當前腳本已被您鎖定"}}'),delete e.options._Ctor}},"2d84":function(e,t,a){"use strict";var n=a("360b"),s=a.n(n);t["default"]=s.a},"308c":function(e,t,a){"use strict";var n=a("c59f"),s=a.n(n);t["default"]=s.a},"31a0":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Are you sure you want to delete the ENV?<br><strong class=\\"text-bad\\">{label}</strong>":"是否確認刪除此環境變量？<br><strong class=\\"text-bad\\">{label}</strong>","Copy example":"複製示例","Copy {name} ID":"複製{name} ID","ENV Variable deleted":"環境變量已刪除","ENV Variable pinned":"環境變量已置頂","ENV Variable unpinned":"環境變量已取消","Example":"示例","Jump to...":"跳轉到...","New ENV":"新建環境變量","Refresh":"刷新列表","Setup":"配置"}}'),delete e.options._Ctor}},"327c":function(e,t,a){"use strict";var n=a("3c8b"),s=a.n(n);t["default"]=s.a},3495:function(e,t,a){},"34d2":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Jump to...":"跳转到...","Refresh":"刷新列表","Add Connector":"添加连接器","Simple Debug":"简易调试","View":"查看","Setup":"配置","Example":"示例","Copy example":"复制示例","Copy {name} ID":"复制{name} ID","Connector pinned":"连接器已置顶","Connector unpinned":"连接器已取消","Connector deleted":"连接器已删除","Are you sure you want to delete the Connector?<br><strong class=\\"text-bad\\">{label}</strong>":"是否确认删除此连接器<br><strong class=\\"text-bad\\">{label}</strong>","Go to Recent Task Record":"前往最近任务记录"}}'),delete e.options._Ctor}},"360b":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Jump to...":"跳转到...","Refresh":"刷新列表","New Script":"新建脚本","New Script Set":"新建脚本集","Edited":"已修改","Locked by other user ({user})":"被其他用户（{user}）锁定","Locked by you":"被您锁定","Quick View":"快速查看","View":"查看","Setup":"配置","Copy example":"复制示例","Copy {name} ID":"复制{name} ID","Example":"示例","Code edited but not published yet":"代码已修改但尚未发布","Import/Calling will run the published version":"引用 / API 调用实际将运行已发布代码","Export Script Set":"导出脚本集","Assigned to queue #{queue}":"指派到队列 #{queue}","Script Set {id}":"脚本集 {id}","Script {id}":"脚本 {id}","Please input ID":"请输入 ID","Script Set ID too long":"脚本集 ID 过长","Only alphabets, numbers and underscore are allowed":"只能包含大小写英文、数字及下划线","Cannot not starts with a number":"不得以数字开头","Please input new Script Set ID":"请输入新脚本集 ID","Inputed Script Set ID already exists":"输入的脚本集 ID 已经存在","Script Set pinned":"脚本集已置顶","Script Set unpinned":"脚本集已取消","Script Set locked":"脚本集已上锁","Script Set unlocked":"脚本集已解锁","Script Set cloned":"脚本集已克隆","Script Set exported":"脚本集已导出","Script Set deleted":"脚本集已删除","Script locked":"脚本已上锁","Script unlocked":"脚本已解锁","Script deleted":"脚本已删除","Installed form Script Market":"从脚本市场安装的脚本集","The Script Market has been removed":"脚本市场已被删除","Config":"配置","Auth":"认证","Expires":"过期","Throttling":"限流","Created":"创建","Run":"执行","Auth Link List":"授权链接列表","Crontab Config List":"自动触发配置列表","Batch List":"批处理列表","lastSucceeded":"{t}调用成功","lastFailed":"{t}调用失败","lastRan":"{t}调用","successCount":"成功 {n}","failureCount":"失败 {n}","Are you sure you want to delete the Script Set?<br><strong class=\\"text-bad\\">{label}</strong>":"是否确认删除此脚本集?<br><strong class=\\"text-bad\\">{label}</strong>","Are you sure you want to delete the Script?<br><strong class=\\"text-bad\\">{label}</strong>":"是否确认删除此脚本<br><strong class=\\"text-bad\\">{label}</strong>","Are you sure you want to run the Crontab Config manually?":"是否确认手动执行此自动触发配置？","Crontab Config Task sent":"自动触发配置任务已发送","Auth Links, Crontab Configs and Batches":"授权链接、自动触发配置和批处理","Go to Recent Task Record":"前往最近任务记录","Go to Script Market":"前往脚本市场","Some Script Sets have been hidden":"一些脚本集已被隐藏","In most cases, the Script Sets that users doesn\'t need to care about are hidden by default.":"大多数情况下，用户不需要关心的脚本集默认会被隐藏。","You can change the default behavior in [Management / System Settings].":"您可以在「管理 / 系统设置」中修改默认此行为。"}}'),delete e.options._Ctor}},"363a":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Drag to place":"调整位置","The Quick View window is only shown when the Script Lib is active, drag and drop the title bar to move the position":"快速查看窗口仅在脚本库激活时显示，拖拽标题栏可以移动位置"}}'),delete e.options._Ctor}},"376b":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Drag to place":"調整位置","The Quick View window is only shown when the Script Lib is active, drag and drop the title bar to move the position":"快速檢視視窗僅在指令碼庫啟用時顯示，拖拽標題欄可以移動位置"}}'),delete e.options._Ctor}},"3a23":function(e,t,a){"use strict";var n=a("34d2"),s=a.n(n);t["default"]=s.a},"3be4":function(e,t,a){"use strict";a("d082")},"3c8b":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Add Script Set":"添加腳本集","Are you sure you want to delete the Script Set?":"是否確認刪除此腳本集？","Cannot not starts with a number":"不得以數字開頭","Go to PIP tool to install":"前往 PIP 工具安裝","ID cannot contains double underscore \\"__\\"":"不能包含雙下劃線 \\"__\\"","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Please input ID":"請輸入 ID","Requirements":"依賴包","Script Set ID will be a part of the Func ID":"腳本集 ID 將作為函數 ID 的一部分","Script Set created":"腳本集已創建","Script Set deleted":"腳本集已刪除","Script Set saved":"腳本集已保存","Setup Script Set":"配置腳本集","This Script Set is locked by other user ({user})":"當前腳本已被其他用户（{user}）鎖定","This Script Set is locked by you":"當前腳本已被您鎖定","requirementsTip":"\\"package\\" 或 \\"package==1.2.3\\" 格式，每行一個"}}'),delete e.options._Ctor}},4064:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"requirementsTip":"\\"package\\" 或 \\"package==1.2.3\\" 格式，每行一个","Add Script Set":"添加脚本集","Setup Script Set":"配置脚本集","Requirements":"依赖包","Script Set ID will be a part of the Func ID":"脚本集 ID 将作为函数 ID 的一部分","Go to PIP tool to install":"前往 PIP 工具安装","Please input ID":"请输入 ID","Only alphabets, numbers and underscore are allowed":"只能包含大小写英文、数字及下划线","Cannot not starts with a number":"不得以数字开头","ID cannot contains double underscore \\"__\\"":"不能包含双下划线 \\"__\\"","Script Set created":"脚本集已创建","Script Set saved":"脚本集已保存","Script Set deleted":"脚本集已删除","Are you sure you want to delete the Script Set?":"是否确认删除此脚本集？","This Script Set is locked by you":"当前脚本已被您锁定","This Script Set is locked by other user ({user})":"当前脚本已被其他用户（{user}）锁定"}}'),delete e.options._Ctor}},"45a1":function(e,t,a){"use strict";var n=a("1681"),s=a.n(n);t["default"]=s.a},"474c":function(e,t,a){"use strict";a("0bc4")},"477a":function(e,t,a){"use strict";var n=a("a867"),s=a.n(n);t["default"]=s.a},4929:function(e,t,a){"use strict";var n=a("91de"),s=a.n(n);t["default"]=s.a},"4c53":function(e,t,a){"use strict";var n=a("23e7"),s=a("857a"),r=a("af03");n({target:"String",proto:!0,forced:r("sub")},{sub:function(){return s(this,"sub","","")}})},"4d91":function(e,t,a){"use strict";a("9c55")},"4f7b":function(e,t,a){"use strict";var n=a("0984"),s=a.n(n);t["default"]=s.a},5034:function(e,t,a){"use strict";var n=a("2cda"),s=a.n(n);t["default"]=s.a},"53d1":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Drag to place":"調整位置","The Quick View window is only shown when the Script Lib is active, drag and drop the title bar to move the position":"快速查看窗口僅在腳本庫激活時顯示，拖拽標題欄可以移動位置"}}'),delete e.options._Ctor}},"5a45":function(e,t,a){"use strict";a("a4d3"),a("e01a");var n=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"FeatureNotice",visible:e.show&&!e.disabled,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"850px"}},[t("div",{staticClass:"notice-feature-container"},[t("el-image",{attrs:{src:e.image}}),e._v(" "),t("el-card",{staticClass:"notice-feature-content"},[t("i",{staticClass:"fa fa-fw notice-feature-icon",class:e.icon}),e._v(" "),t("p",{domProps:{innerHTML:e._s(e.description)}})]),e._v(" "),t("div",{staticClass:"notice-feature-buttons"},[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.close(!0)}}},[e._v(e._s(e.$t("Don't prompt again")))]),e._v(" "),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.close()}}},[e._v(e._s(e.$t("OK")))])],1)],1)])},s=[],r=a("a92d"),i=a.n(r),o={name:"FeatureNoticeDialog",components:{},watch:{},methods:{close:function(e){this.show=!1,this.$store.commit("dismissFeatureNotice",this.featureKey),e&&this.$store.commit("disableFeatureNotice",this.featureKey)}},computed:{},props:{featureKey:String,description:String,icon:{type:String,default:"fa-lightbulb-o"},image:{type:Object,default:i.a},disabled:{type:Boolean,default:!1}},data:function(){return{show:!1}},mounted:function(){var e=this;setTimeout((function(){e.$store.getters.showFeatureNotice(e.featureKey)&&(e.show=!0)}),500)}},c=o,l=(a("9e94"),a("4d91"),a("2877")),u=a("928e"),d=a("6bc8"),p=a("a49b"),f=Object(l["a"])(c,n,s,!1,null,"cb70d276",null);"function"===typeof u["default"]&&Object(u["default"])(f),"function"===typeof d["default"]&&Object(d["default"])(f),"function"===typeof p["default"]&&Object(p["default"])(f);t["a"]=f.exports},"5b39":function(e,t,a){"use strict";var n=a("7470"),s=a.n(n);t["default"]=s.a},"5c76":function(e,t,a){"use strict";a("f9d6")},6477:function(e,t,a){"use strict";var n=a("27c5"),s=a.n(n);t["default"]=s.a},"64f0":function(e,t,a){"use strict";a("c426")},"6bc8":function(e,t,a){"use strict";var n=a("df4b"),s=a.n(n);t["default"]=s.a},7094:function(e,t,a){"use strict";var n=a("e254"),s=a.n(n);t["default"]=s.a},7470:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Add ENV":"添加環境變量","Are you sure you want to delete the ENV?":"是否確認刪除此環境變量？","Cannot not starts with a number":"不得以數字開頭","ENV Variable created":"環境變量已創建","ENV Variable deleted":"環境變量已刪除","ENV Variable saved":"環境變量已保存","Leave blank when not changing":"不修改時請留空","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Please input ID":"請輸入 ID","Please input Value":"請輸入值","Setup ENV":"配置環境變量","Value Type":"值類型"}}'),delete e.options._Ctor}},"7a34":function(e,t,a){"use strict";a("9024")},"7b0b4":function(e,t,a){"use strict";var n=a("0797"),s=a.n(n);t["default"]=s.a},"7c5d":function(e,t,a){},"7de6":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"messageRate":"{n} Message/minute | {n} Message/minute | {n} Messages/minute"}}'),delete e.options._Ctor}},"7df8":function(e,t,a){},"82ce":function(e,t,a){"use strict";var n=a("f65c"),s=a.n(n);t["default"]=s.a},"841c":function(e,t,a){"use strict";var n=a("c65b"),s=a("d784"),r=a("825a"),i=a("1d80"),o=a("129f"),c=a("577e"),l=a("dc4a"),u=a("14c3");s("search",(function(e,t,a){return[function(t){var a=i(this),s=void 0==t?void 0:l(t,e);return s?n(s,t,a):new RegExp(t)[e](c(a))},function(e){var n=r(this),s=c(e),i=a(t,n,s);if(i.done)return i.value;var l=n.lastIndex;o(l,0)||(n.lastIndex=0);var d=u(n,s);return o(n.lastIndex,l)||(n.lastIndex=l),null===d?-1:d.index}]}))},"852c":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"requirementsTip":"\\"package\\" or \\"package==1.2.3\\", one per row"}}'),delete e.options._Ctor}},"857a":function(e,t,a){var n=a("e330"),s=a("1d80"),r=a("577e"),i=/"/g,o=n("".replace);e.exports=function(e,t,a,n){var c=r(s(e)),l="<"+t;return""!==a&&(l+=" "+a+'="'+o(r(n),i,"&quot;")+'"'),l+">"+c+"</"+t+">"}},"88d6":function(e,t,a){"use strict";var n=a("2c4c"),s=a.n(n);t["default"]=s.a},8981:function(e,t,a){"use strict";a("7df8")},"8a4f":function(e,t,a){},"8b75":function(e,t,a){"use strict";var n=a("9d78"),s=a.n(n);t["default"]=s.a},9024:function(e,t,a){},"91de":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Add Script":"新增指令碼","Are you sure you want to delete the Script?":"是否確認刪除此指令碼？","Basic Example":"基礎示例","Blank Script":"空白指令碼","Cannot not starts with a number":"不得以數字開頭","From Example Script":"來自示例指令碼","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Please input ID":"請輸入 ID","Script Set ID should be a prefix of the Script ID":"指令碼集 ID 應作為指令碼 ID 的字首","Script Template":"指令碼模板","Script created":"指令碼已建立","Script deleted":"指令碼已刪除","Script saved":"指令碼已儲存","Setup Script":"配置指令碼","Show Script Template":"顯示指令碼模板","This Script ID should starts with \\"{prefix}\\"":"本指令碼 ID 必須以 \\"{prefix}\\" 開頭","This Script is locked by other user ({user})":"當前指令碼已被其他使用者（{user}）鎖定","This Script is locked by you":"當前指令碼已被您鎖定"}}'),delete e.options._Ctor}},"928e":function(e,t,a){"use strict";var n=a("a5bc"),s=a.n(n);t["default"]=s.a},"932a":function(e,t,a){e.exports=a.p+"img/notice-func-is-just-python-wrapper.9f3618dc.png"},"9c55":function(e,t,a){},"9d31":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"1. $share/GROUP/TOPIC in MQTTv5":"1. MQTTv5 的 $share/GROUP/TOPIC","2. $queue/TOPIC in EMQX":"2. EMQX 的 $queue/TOPIC","API Key":"API Key","API Key ID":"API Key ID","API Key here is always required":"每次修改都必須重新輸入 API Key","Add Connector":"添加連接器","Add Topic / Handler":"添加主題 / 處理函數","Are you sure you want to delete the Connector?":"是否確認刪除此連接器？","Auth Type":"認證類型","Cannot find the Guance Node you need?":"找不到需要的觀測雲節點？","Cannot not starts with a number":"不得以數字開頭","Charset":"編碼","Client ID":"客户端 ID","Compatibility":"兼容性","Connector Development Doc":"連接器開發文檔","Connector created":"連接器已創建","Connector deleted":"連接器已刪除","Connector saved":"連接器已保存","Content":"內容","Current consumption rate":"當前消費速度","Database":"數據庫","Func Return Value":"函數返回值","Group ID":"分組 ID","Guance Node":"觀測雲節點","Handler Func":"處理函數","Host":"主機","Last Consumed":"最後消費","Learn more about subscribing using Connector":"瞭解通過連接器進行訂閲","Message":"消息","Multi Sub":"多訂閲器","Name in Guance":"觀測雲中名稱","No Recent Message":"無近期消息","Node SDK used in the Subscriber":"本訂閲器所使用的 Node SDK","Only HTTP and HTTPS are allowed":"協議只能為HTTP或HTTPS","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Only integer between 1 and 65535 are allowed":"主機端口範圍為 1-65535","OpenAPI URL":"OpenAPI 地址","OpenWay URL":"OpenWay 地址","Password":"密碼","Password here is always required when the Connector requires password to connect":"如連接器需要密碼，則每次修改都必須重新輸入密碼","Please input API Key":"請輸入 API Key","Please input API Key ID":"請輸入 API Key ID","Please input Access Key":"請輸入Access Key","Please input Connector type":"請選擇連接器類型","Please input ID":"請輸入 ID","Please input OpenAPI URL":"請輸入 OpenAPI 地址","Please input OpenWay URL":"請輸入 OpenWay 地址","Please input Secret Key":"請輸入Secret Key","Please input Websocket URL":"請輸入 WebSocket 地址","Please input auth type":"請輸入認證方式","Please input charset":"請輸入字符集","Please input client ID":"請輸入客户端 ID","Please input database":"請輸入數據庫名","Please input host":"請輸入主機地址","Please input password":"請輸入密碼","Please input port":"請輸入主機端口","Please input servers":"請輸入服務器列表","Please input source":"請輸入連接器名稱","Please input topic":"請輸入訂閲主題","Please input user":"請輸入用户名","Please select Guance Node":"請選擇觀測雲節點","Please select HTTP protocol":"請選擇HTTP協議","Please select handler Func":"請選擇處理函數","Port":"端口","Protocol":"協議","Python SDK used in the Connector":"本連接器所使用的 Python SDK","SASL Mechanisms":"SASL 機制","Save without connection test":"保存（忽略連通性測試）","Security Protocol":"安全協議","Servers":"服務器列表","Servers to connect (e.g. host1:80,host2:81)":"連接地址列表，如：host1:80,host2:81","Setup Connector":"配置連接器","Should start with http:// or https://":"必須以 http:// 或 https:// 開頭","Source":"源","Sub Offset":"訂閲 Offset","Test connection":"測試連通性","This Title will also be displayed in Guance":"這個標題同時也會展示在觀測雲中","This is a built-in Connector, please contact the admin to change the config":"當前連接器為內置連接器，請聯繫管理員調整集羣配置","Topic":"主題","Topic Handler is disabled":"主題訂閲處理已禁用","Topic/Handler":"主題 / 處理函數","Traceback":"調用堆棧","User":"用户","WebSocket URL":"WebSocket 地址","messageRate":"{n} 條/分鐘"}}'),delete e.options._Ctor}},"9d78":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"messageRate":"{n} 条/分钟","Add Connector":"添加连接器","Setup Connector":"配置连接器","Compatibility":"兼容性","Connector Development Doc":"连接器开发文档","Python SDK used in the Connector":"本连接器所使用的 Python SDK","Node SDK used in the Subscriber":"本订阅器所使用的 Node SDK","Guance Node":"观测云节点","Name in Guance":"观测云中名称","OpenAPI URL":"OpenAPI 地址","WebSocket URL":"WebSocket 地址","OpenWay URL":"OpenWay 地址","API Key ID":"API Key ID","API Key":"API Key","Host":"主机","Port":"端口","Servers":"服务器列表","Protocol":"协议","Source":"源","Database":"数据库","User":"用户","Password":"密码","Auth Type":"认证类型","Charset":"编码","Client ID":"客户端 ID","Group ID":"分组 ID","Security Protocol":"安全协议","SASL Mechanisms":"SASL 机制","Multi Sub":"多订阅器","Sub Offset":"订阅 Offset","Topic/Handler":"主题 / 处理函数","Topic":"主题","Handler Func":"处理函数","No Recent Message":"无近期消息","Last Consumed":"最后消费","Add Topic / Handler":"添加主题 / 处理函数","Current consumption rate":"当前消费速度","Topic Handler is disabled":"主题订阅处理已禁用","Test connection":"测试连通性","Message":"消息","Content":"内容","Func Return Value":"函数返回值","Traceback":"调用堆栈","Save without connection test":"保存（忽略连通性测试）","This Title will also be displayed in Guance":"这个标题同时也会展示在观测云中","Servers to connect (e.g. host1:80,host2:81)":"连接地址列表，如：host1:80,host2:81","Password here is always required when the Connector requires password to connect":"如连接器需要密码，则每次修改都必须重新输入密码","API Key here is always required":"每次修改都必须重新输入 API Key","1. $share/GROUP/TOPIC in MQTTv5":"1. MQTTv5 的 $share/GROUP/TOPIC","2. $queue/TOPIC in EMQX":"2. EMQX 的 $queue/TOPIC","Please input ID":"请输入 ID","Only alphabets, numbers and underscore are allowed":"只能包含大小写英文、数字及下划线","Cannot not starts with a number":"不得以数字开头","Please input Connector type":"请选择连接器类型","Please select Guance Node":"请选择观测云节点","Please input OpenAPI URL":"请输入 OpenAPI 地址","Please input Websocket URL":"请输入 WebSocket 地址","Please input OpenWay URL":"请输入 OpenWay 地址","Please input API Key ID":"请输入 API Key ID","Please input API Key":"请输入 API Key","Cannot find the Guance Node you need?":"找不到需要的观测云节点？","Should start with http:// or https://":"必须以 http:// 或 https:// 开头","Please input host":"请输入主机地址","Please input port":"请输入主机端口","Only integer between 1 and 65535 are allowed":"主机端口范围为 1-65535","Please input servers":"请输入服务器列表","Please select HTTP protocol":"请选择HTTP协议","Only HTTP and HTTPS are allowed":"协议只能为HTTP或HTTPS","Please input source":"请输入连接器名称","Please input database":"请输入数据库名","Please input user":"请输入用户名","Please input password":"请输入密码","Please input auth type":"请输入认证方式","Please input charset":"请输入字符集","Please input Access Key":"请输入Access Key","Please input Secret Key":"请输入Secret Key","Please input client ID":"请输入客户端 ID","Please input topic":"请输入订阅主题","Please select handler Func":"请选择处理函数","Connector created":"连接器已创建","Connector saved":"连接器已保存","Connector deleted":"连接器已删除","Are you sure you want to delete the Connector?":"是否确认删除此连接器？","Learn more about subscribing using Connector":"了解通过连接器进行订阅","This is a built-in Connector, please contact the admin to change the config":"当前连接器为内置连接器，请联系管理员调整集群配置"}}'),delete e.options._Ctor}},"9df4":function(e,t,a){"use strict";var n=a("31a0"),s=a.n(n);t["default"]=s.a},"9e94":function(e,t,a){"use strict";a("0a76")},"9f63":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Add ENV":"添加环境变量","Setup ENV":"配置环境变量","Value Type":"值类型","Please input ID":"请输入 ID","Only alphabets, numbers and underscore are allowed":"只能包含大小写英文、数字及下划线","Cannot not starts with a number":"不得以数字开头","Please input Value":"请输入值","Leave blank when not changing":"不修改时请留空","ENV Variable created":"环境变量已创建","ENV Variable saved":"环境变量已保存","ENV Variable deleted":"环境变量已删除","Are you sure you want to delete the ENV?":"是否确认删除此环境变量？"}}'),delete e.options._Ctor}},a09a:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Are you sure you want to delete the ENV?<br><strong class=\\"text-bad\\">{label}</strong>":"是否確認刪除此環境變數？<br><strong class=\\"text-bad\\">{label}</strong>","Copy example":"複製示例","Copy {name} ID":"複製{name} ID","ENV Variable deleted":"環境變數已刪除","ENV Variable pinned":"環境變數已置頂","ENV Variable unpinned":"環境變數已取消","Example":"示例","Jump to...":"跳轉到...","New ENV":"新建環境變數","Refresh":"重新整理列表","Setup":"配置"}}'),delete e.options._Ctor}},a3ae:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Schema Browser":"结构浏览器","Guance DataWay":"观测云DataWay","SQL Debugger":"SQL 调试","URI Query Debugger":"URI Query 调试","Command Debugger":"命令调试","Databases":"数据库","Tables":"表","Fields":"字段","Data":"数据","Measurements":"指标","Tags":"标签","Indices":"索引","Collections":"集合","Retention Policies":"保留策略","Initials":"首字母","Keys (a part of)":"键（部分）","Other":"其他","Moving...":"调整位置...","Cannot connect to this Connector, check the configs and try again.":"无法使用此连接器，请检查配置后重试。","Error Message":"错误信息如下","Query is running. It waits up to 5 seconds, You can refresh the page when it not response for a long time.":"查询执行中，最多等待 5 秒，长时间无响应后再尝试刷新页面","Results will be shown here...":"执行结果将显示在此...","Query Failed":"查询失败","Database":"数据库","Run":"执行","Query":"查询语句","Code":"代码","Result":"结果"}}'),delete e.options._Ctor}},a434:function(e,t,a){"use strict";var n=a("23e7"),s=a("7b0b"),r=a("23cb"),i=a("5926"),o=a("07fa"),c=a("3511"),l=a("65f0"),u=a("8418"),d=a("083a"),p=a("1dde"),f=p("splice"),m=Math.max,b=Math.min;n({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var a,n,p,f,h,g,_=s(this),v=o(_),y=r(e,v),S=arguments.length;for(0===S?a=n=0:1===S?(a=0,n=v-y):(a=S-2,n=b(m(i(t),0),v-y)),c(v+a-n),p=l(_,n),f=0;f<n;f++)h=y+f,h in _&&u(p,f,_[h]);if(p.length=n,a<n){for(f=y;f<v-n;f++)h=f+n,g=f+a,h in _?_[g]=_[h]:d(_,g);for(f=v;f>v-n+a;f--)d(_,f-1)}else if(a>n)for(f=v-n;f>y;f--)h=f+n-1,g=f+a-1,h in _?_[g]=_[h]:d(_,g);for(f=0;f<a;f++)_[f+y]=arguments[f+2];return _.length=v-n+a,p}})},a47c:function(e,t,a){"use strict";a("e20cf")},a49b:function(e,t,a){"use strict";var n=a("d866"),s=a.n(n);t["default"]=s.a},a5bc:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-CN":{"Don\'t prompt again":"不再提示"}}'),delete e.options._Ctor}},a867:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Add Script Set":"新增指令碼集","Are you sure you want to delete the Script Set?":"是否確認刪除此指令碼集？","Cannot not starts with a number":"不得以數字開頭","Go to PIP tool to install":"前往 PIP 工具安裝","ID cannot contains double underscore \\"__\\"":"不能包含雙下劃線 \\"__\\"","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Please input ID":"請輸入 ID","Requirements":"依賴包","Script Set ID will be a part of the Func ID":"指令碼集 ID 將作為函式 ID 的一部分","Script Set created":"指令碼集已建立","Script Set deleted":"指令碼集已刪除","Script Set saved":"指令碼集已儲存","Setup Script Set":"配置指令碼集","This Script Set is locked by other user ({user})":"當前指令碼已被其他使用者（{user}）鎖定","This Script Set is locked by you":"當前指令碼已被您鎖定","requirementsTip":"\\"package\\" 或 \\"package==1.2.3\\" 格式，每行一個"}}'),delete e.options._Ctor}},a92d:function(e,t,a){e.exports=a.p+"img/notice-feature.a3847dd5.png"},aa09:function(e,t){(function(){"use strict";e.exports=function(e,t,a){for(var n=t||/\s/g,s=!1,r=!1,i=[],o=[],c=e.split(""),l=0;l<c.length;++l){var u=c[l],d=u.match(n);"'"!==u||r?'"'!==u||s?s||r||!d?i.push(u):i.length>0?(o.push(i.join("")),i=[]):t&&o.push(u):(!0===a&&i.push(u),r=!r):(!0===a&&i.push(u),s=!s)}return i.length>0?o.push(i.join("")):t&&o.push(""),o}})()},aee1:function(e,t,a){"use strict";var n=a("9f63"),s=a.n(n);t["default"]=s.a},af03:function(e,t,a){var n=a("d039");e.exports=function(e){return n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b2d3:function(e,t,a){"use strict";var n=a("7de6"),s=a.n(n);t["default"]=s.a},b62a:function(e,t,a){"use strict";var n=a("cc59"),s=a.n(n);t["default"]=s.a},b76c:function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"LongTextDialog",visible:e.show,"close-on-click-modal":!1,width:"70%"},on:{"update:visible":function(t){e.show=t}}},[t("template",{slot:"title"},[e._v("\n    "+e._s(e.title)+"\n    "),t("span",{staticClass:"text-info press-esc-to-close-tip"},[e._v(e._s(e.$t("Press ESC to close")))])]),e._v(" "),t("div",[e.showDownload&&e.fileName&&e.content?t("div",{staticClass:"download-link"},[t("el-link",{attrs:{type:"primary"},on:{click:e.download}},[e._v("\n        "+e._s(e.$t("Download as a text file"))+"\n        "),t("i",{staticClass:"fa fa-fw fa-download"})])],1):e._e(),e._v(" "),t("textarea",{attrs:{id:"longTextDialogContent"}})])],2)},s=[],r=(a("130f"),a("21a6")),i=a.n(r),o={name:"LongTextDialog",components:{},watch:{},methods:{update:function(e,t){var a=this;this.codeMirror&&this.codeMirror.setValue(""),this.content=e,this.fileName=(t||"dump")+".txt",this.show=!0,setImmediate((function(){if(!a.codeMirror){var e={mode:a.mode||"text"};a.codeMirror=a.T.initCodeMirror("longTextDialogContent",e),a.codeMirror.setOption("theme",a.T.getCodeMirrorThemeName()),a.T.setCodeMirrorReadOnly(a.codeMirror,!0)}a.codeMirror.setValue(a.content||""),a.codeMirror.refresh(),a.codeMirror.focus()}))},download:function(){var e=new Blob([this.content],{type:"text/plain"}),t=this.fileName;i.a.saveAs(e,t)}},computed:{},props:{title:String,mode:String,showDownload:Boolean},data:function(){return{show:!1,fileName:null,content:null,codeMirror:null}},beforeDestroy:function(){this.T.destoryCodeMirror(this.codeMirror)}},c=o,l=(a("1b85"),a("f7d2"),a("2877")),u=a("7b0b4"),d=a("7094"),p=a("308c"),f=Object(l["a"])(c,n,s,!1,null,"fc951d86",null);"function"===typeof u["default"]&&Object(u["default"])(f),"function"===typeof d["default"]&&Object(d["default"])(f),"function"===typeof p["default"]&&Object(p["default"])(f);t["a"]=f.exports},b88a:function(e,t,a){"use strict";var n=a("b9a0"),s=a.n(n);t["default"]=s.a},b9a0:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"lastSucceeded":"Succeeded {t}","lastFailed":"Failed {t}","lastRan":"Ran {t}","successCount":"Success {n}","failureCount":"Failure {n}"}}'),delete e.options._Ctor}},c130:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Cannot connect to this Connector, check the configs and try again.":"無法使用此連接器，請檢查配置後重試。","Code":"代碼","Collections":"集合","Command Debugger":"命令調試","Data":"數據","Database":"數據庫","Databases":"數據庫","Error Message":"錯誤信息如下","Fields":"字段","Guance DataWay":"觀測雲DataWay","Indices":"索引","Initials":"首字母","Keys (a part of)":"鍵（部分）","Measurements":"指標","Moving...":"調整位置...","Other":"其他","Query":"查詢語句","Query Failed":"查詢失敗","Query is running. It waits up to 5 seconds, You can refresh the page when it not response for a long time.":"查詢執行中，最多等待 5 秒，長時間無響應後再嘗試刷新頁面","Result":"結果","Results will be shown here...":"執行結果將顯示在此...","Retention Policies":"保留策略","Run":"執行","SQL Debugger":"SQL 調試","Schema Browser":"結構瀏覽器","Tables":"表","Tags":"標籤","URI Query Debugger":"URI Query 調試"}}'),delete e.options._Ctor}},c3b8:function(e,t,a){},c426:function(e,t,a){},c59f:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Download as a text file":"作為文字檔案下載"}}'),delete e.options._Ctor}},c882:function(e,t,a){"use strict";var n=a("9d31"),s=a.n(n);t["default"]=s.a},cc59:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Are you sure you want to delete the Script Set?<br><strong class=\\"text-bad\\">{label}</strong>":"是否確認刪除此腳本集?<br><strong class=\\"text-bad\\">{label}</strong>","Are you sure you want to delete the Script?<br><strong class=\\"text-bad\\">{label}</strong>":"是否確認刪除此腳本<br><strong class=\\"text-bad\\">{label}</strong>","Are you sure you want to run the Crontab Config manually?":"是否確認手動執行此自動觸發配置？","Assigned to queue #{queue}":"指派到隊列 #{queue}","Auth":"認證","Auth Link List":"授權鏈接列表","Auth Links, Crontab Configs and Batches":"授權鏈接、自動觸發配置和批處理","Batch List":"批處理列表","Cannot not starts with a number":"不得以數字開頭","Code edited but not published yet":"代碼已修改但尚未發佈","Config":"配置","Copy example":"複製示例","Copy {name} ID":"複製{name} ID","Created":"創建","Crontab Config List":"自動觸發配置列表","Crontab Config Task sent":"自動觸發配置任務已發送","Edited":"已修改","Example":"示例","Expires":"過期","Export Script Set":"導出腳本集","Go to Recent Task Record":"前往最近任務記錄","Go to Script Market":"前往腳本市場","Import/Calling will run the published version":"引用 / API 調用實際將運行已發佈代碼","In most cases, the Script Sets that users doesn\'t need to care about are hidden by default.":"大多數情況下，用户不需要關心的腳本集默認會被隱藏。","Inputed Script Set ID already exists":"輸入的腳本集 ID 已經存在","Installed form Script Market":"從腳本市場安裝的腳本集","Jump to...":"跳轉到...","Locked by other user ({user})":"被其他用户（{user}）鎖定","Locked by you":"被您鎖定","New Script":"新建腳本","New Script Set":"新建腳本集","Only alphabets, numbers and underscore are allowed":"只能包含大小寫英文、數字及下劃線","Please input ID":"請輸入 ID","Please input new Script Set ID":"請輸入新腳本集 ID","Quick View":"快速查看","Refresh":"刷新列表","Run":"執行","Script Set ID too long":"腳本集 ID 過長","Script Set cloned":"腳本集已克隆","Script Set deleted":"腳本集已刪除","Script Set exported":"腳本集已導出","Script Set locked":"腳本集已上鎖","Script Set pinned":"腳本集已置頂","Script Set unlocked":"腳本集已解鎖","Script Set unpinned":"腳本集已取消","Script Set {id}":"腳本集 {id}","Script deleted":"腳本已刪除","Script locked":"腳本已上鎖","Script unlocked":"腳本已解鎖","Script {id}":"腳本 {id}","Setup":"配置","Some Script Sets have been hidden":"一些腳本集已被隱藏","The Script Market has been removed":"腳本市場已被刪除","Throttling":"限流","View":"查看","You can change the default behavior in [Management / System Settings].":"您可以在「管理 / 系統設置」中修改默認此行為。","failureCount":"失敗 {n}","lastFailed":"{t}調用失敗","lastRan":"{t}調用","lastSucceeded":"{t}調用成功","successCount":"成功 {n}"}}'),delete e.options._Ctor}},ce30:function(e,t,a){"use strict";var n=a("c130"),s=a.n(n);t["default"]=s.a},d082:function(e,t,a){},d5cd:function(e,t,a){"use strict";var n=a("1f86"),s=a.n(n);t["default"]=s.a},d866:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-TW":{"Don\'t prompt again":"不再提示"}}'),delete e.options._Ctor}},db23:function(e,t,a){},defc:function(e,t,a){"use strict";a("8a4f")},df4b:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Don\'t prompt again":"不再提示"}}'),delete e.options._Ctor}},e20cf:function(e,t,a){},e254:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Download as a text file":"作為文本文件下載"}}'),delete e.options._Ctor}},e440:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("split-pane",{ref:"vueSplitPane",attrs:{"min-percent":0,"default-percent":20,split:"vertical"},on:{resize:e.resizeVueSplitPane}},[t("template",{slot:"paneL"},[t("div",{staticClass:"aside"},[t("div",{staticClass:"aside-content"},[t("i",{staticClass:"icon-bg",class:e.currentTabIcon}),e._v(" "),t("el-tabs",{attrs:{stretch:"",type:"border-card"},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[t("el-tab-pane",{attrs:{label:e.$t("Script Lib"),name:"aside-script"}},[t("AsideScript",{ref:"asideScript"})],1),e._v(" "),t("el-tab-pane",{attrs:{label:e.$t("Connector"),name:"aside-connector"}},[t("AsideConnector",{ref:"asideConnector"})],1),e._v(" "),t("el-tab-pane",{attrs:{label:e.$t("ENV"),name:"aside-env-variable"}},[t("AsideEnvVariable",{ref:"asideEnvVariable"})],1)],1)],1)])]),e._v(" "),t("template",{slot:"paneR"},[t("router-view")],1)],2)},s=[],r=(a("14d9"),a("b0c0"),a("a4d3"),a("e01a"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"aside-inner-content",attrs:{id:"aside-script-content"}},[t("div",{staticClass:"jump-to-select-wrap"},[t("el-select",{staticClass:"jump-to-select",attrs:{placeholder:e.$t("Jump to..."),"no-data-text":e.$t("No Data"),size:"small",clearable:"",filterable:"","filter-method":e.T.debounce(e.doFilter)},model:{value:e.selectFilterText,callback:function(t){e.selectFilterText=t},expression:"selectFilterText"}},e._l(e.selectShowOptions,(function(a){return t("el-option",{key:a.id,attrs:{label:a.label,value:a.id}},[t("span",{staticClass:"select-item-name"},["scriptSet"===a.type?t("i",{staticClass:"fa fa-fw fa-folder"}):"script"===a.type?t("i",{staticClass:"fa fa-fw fa-file-code-o"}):"func"===a.type?t("el-tag",{attrs:{type:"info",size:"mini"}},[t("code",[e._v("def")])]):e._e(),e._v("\n          "+e._s(a.label)+"\n        ")],1),e._v(" "),t("code",{staticClass:"select-item-id code-font"},[e._v("ID: "+e._s(a.id))])])})),1)],1),e._v(" "),t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",staticClass:"aside-tree",attrs:{data:e.data,"highlight-current":!0,"default-expand-all":!1,"default-expanded-keys":e.defaultExpandedNodeKeys,"auto-expand-parent":!1,"expand-on-click-node":!1,indent:10,"node-key":"id"},on:{"node-expand":e.onExpandNode,"node-collapse":e.onCollapseNode},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.node,s=a.data;return t("span",{staticClass:"aside-tree-node",attrs:{"entry-id":s.id},on:{click:function(t){return e.openEntity(s)}}},[t("el-popover",{attrs:{placement:"right-start",trigger:"hover","popper-class":"aside-tip",disabled:!s.id&&!s.tip},model:{value:s.showPopover,callback:function(t){e.$set(s,"showPopover",t)},expression:"data.showPopover"}},[t("div",{staticClass:"aside-item",attrs:{slot:"reference"},slot:"reference"},[t("span",{class:{"text-watch":"builtin"===s.origin,"text-main":"scriptMarket"===s.origin,"text-bad":s.isPinned}},["refresh"===s.type?t("el-link",{attrs:{type:"primary"}},[t("i",{staticClass:"fa fa-fw fa-refresh"}),e._v(" "+e._s(e.$t("Refresh"))+"\n            ")]):"addScriptSet"===s.type?t("el-link",{attrs:{type:"primary"}},[t("i",{staticClass:"fa fa-fw fa-plus"}),e._v(" "+e._s(e.$t("New Script Set"))+"\n            ")]):"scriptSetHiddenTip"===s.type?t("el-link",{attrs:{type:"info"}},[t("i",{staticClass:"fa fa-fw fa-eye-slash"}),e._v(" "),t("i",[e._v(e._s(e.$t("Some Script Sets have been hidden")))])]):t("div",["scriptSet"===s.type?["builtin"===s.origin?t("i",{staticClass:"fa fa-fw fa-microchip"}):"scriptMarket"===s.origin?t("i",{staticClass:"fa fa-fw fa-shopping-cart"}):"blueprint"===s.origin?t("i",{staticClass:"fa fa-fw fa-sitemap fa-rotate-270"}):t("i",{staticClass:"fa fa-fw",class:[n.expanded?"fa-folder-open":"fa-folder"]})]:"script"===s.type?t("i",{staticClass:"fa fa-fw fa-file-code-o"}):"func"===s.type?t("el-tag",{attrs:{type:"info",size:"mini"}},[t("code",[e._v("def")])]):e._e(),e._v(" "),s.isCodeEdited?t("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v(e._s(e.$t("Edited")))]):e._e(),e._v(" "),t("span",[e._v(e._s(n.label))])],2)],1),e._v(" "),t("div",["func"===s.type&&e.T.notNothing(s.queue)?t("el-tooltip",{attrs:{effect:"dark",content:e.$t("Assigned to queue #{queue}",{queue:s.queue}),placement:"top",enterable:!1}},[t("el-tag",{attrs:{size:"mini"}},[e._v("#"+e._s(s.queue))])],1):e._e(),e._v(" "),s.isLocked?t("el-tooltip",{attrs:{effect:"dark",content:s.isLockedByOther?e.$t("Locked by other user ({user})",{user:s.lockedByUser}):e.$t("Locked by you"),placement:"top",enterable:!1}},[t("i",{staticClass:"fa fa-fw fa-lock",class:(s.isLockedByOther?"text-bad":"text-good")+(s.isLockedByScriptSet?"-fade text-small":"")})]):e._e(),e._v(" "),s.isPinned?t("el-tooltip",{attrs:{effect:"dark",content:e.$t("Pinned"),placement:"top",enterable:!1}},[t("i",{staticClass:"fa fa-fw fa-thumb-tack text-bad"})]):e._e()],1)]),e._v(" "),s.tip?t("div",{staticClass:"aside-tree-node-tip"},[t("i",{staticClass:"fa fa-fw fa-info-circle"}),e._v(" "),s.tipTitle?t("strong",[e._v(e._s(s.tipTitle)),t("br")]):e._e(),e._v(" "),t("span",{domProps:{innerHTML:e._s(s.tip)}})]):e._e(),e._v(" "),s.id?t("div",{staticClass:"aside-tree-node-description"},["builtin"===s.origin?t("InfoBlock",{attrs:{type:"warning",title:e.$t("Built-in Script Set")}}):e._e(),e._v(" "),"scriptMarket"===s.origin?t("InfoBlock",{attrs:{type:"warning",title:e.$t("Installed form Script Market")}}):e._e(),e._v(" "),t("span",{staticClass:"text-info"},[e._v("ID")]),e._v("\n           "),t("code",{staticClass:"text-main"},[e._v(e._s(s.id))]),e._v(" "),t("CopyButton",{attrs:{content:s.id}}),e._v(" "),"scriptSet"!==s.type&&"script"!==s.type||!s.description?e._e():t("pre",[e._v(e._s(s.description))])],1):e._e(),e._v(" "),s.sampleCode?[t("div",{staticClass:"aside-tree-node-sample-code"},[t("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Example")))]),e._v(" "),t("CopyButton",{attrs:{content:s.sampleCode}}),e._v(" "),t("pre",[e._v(e._s(s.sampleCode))])],1)]:e._e(),e._v(" "),s.isCodeEdited?[t("br"),e._v(" "),t("div",{staticClass:"code-edited-tip"},[t("span",{staticClass:"text-bad"},[e._v(e._s(e.$t("Code edited but not published yet"))),t("br"),e._v(e._s(e.$t("Import/Calling will run the published version")))])])]:e._e(),e._v(" "),["scriptSet","script","func"].indexOf(s.type)>=0?[["scriptSet","script"].indexOf(s.type)>=0?[t("br"),e._v(" "),t("el-button-group",["scriptSet"===s.type?t("el-button",{attrs:{size:"small",disabled:!s.isEditable},on:{click:function(t){return e.openEntity(s,"add")}}},[t("i",{staticClass:"fa fa-fw fa-plus"}),e._v("\n                "+e._s(e.$t("New Script"))+"\n              ")]):e._e(),e._v(" "),"script"===s.type?t("el-button",{attrs:{size:"small",disabled:!(e.scriptSetMap[s.scriptSetId]||{}).isEditable},on:{click:function(t){return e.openEntity(s,"add")}}},[t("i",{staticClass:"fa fa-fw fa-plus"}),e._v("\n                "+e._s(e.$t("New Script"))+"\n              ")]):e._e(),e._v(" "),t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.openEntity(s,"setup")}}},[t("i",{staticClass:"fa fa-fw fa-wrench"}),e._v("\n                "+e._s(e.$t("Setup"))+"\n              ")])],1),e._v(" "),t("el-button-group",["script"===s.type?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.showQuickViewWindow(s)}}},[t("i",{staticClass:"fa fa-fw fa-window-restore"}),e._v("\n                "+e._s(e.$t("Quick View"))+"\n              ")]):e._e(),e._v(" "),"scriptSet"===s.type?t("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],class:s.isPinned?"aside-on-button":"",attrs:{size:"small",disabled:!s.isEditable},on:{click:function(t){return e.pinData(s.type,s.id,!s.isPinned)}}},[t("i",{staticClass:"fa fa-fw",class:[s.isPinned?"fa-thumb-tack fa-rotate-270":"fa-thumb-tack"]}),e._v("\n                "+e._s(s.isPinned?e.$t("Unpin"):e.$t("Pin"))+"\n              ")]):e._e(),e._v(" "),t("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],class:s.isLocked?"aside-on-button":"",attrs:{size:"small",disabled:!s.isEditable||"script"===s.type&&s.isLockedByScriptSet},on:{click:function(t){return e.lockData(s.type,s.id,!s.isLocked)}}},[t("i",{staticClass:"fa fa-fw",class:[s.isLocked?"fa-unlock":"fa-lock"]}),e._v("\n                "+e._s(s.isLocked?e.$t("Unlock"):e.$t("Lock"))+"\n              ")]),e._v(" "),"scriptSet"===s.type?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.cloneData(s)}}},[t("i",{staticClass:"fa fa-fw fa-files-o"}),e._v("\n                "+e._s(e.$t("Clone"))+"\n              ")]):e._e(),e._v(" "),"scriptSet"===s.type?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.exportData(s)}}},[t("i",{staticClass:"fa fa-fw fa-cloud-download"}),e._v("\n                "+e._s(e.$t("Export"))+"\n              ")]):e._e()],1),e._v(" "),t("el-button-group",[t("el-button",{staticClass:"danger-button",attrs:{size:"small",disabled:!s.isEditable},on:{click:function(t){return e.deleteEntity(s)}}},[t("i",{staticClass:"fa fa-fw fa-times"}),e._v("\n                "+e._s(e.$t("Delete"))+"\n              ")])],1)]:e._e(),e._v(" "),t("div",{staticClass:"goto-links"},["func"===s.type?t("el-link",{on:{click:function(t){return e.openRelEntity(n,s,"authLink")}}},[t("i",{staticClass:"fa fa-fw fa-window-restore"}),e._v("\n              "+e._s(e.$t("Auth Links, Crontab Configs and Batches"))+"\n            ")]):e._e(),e._v(" "),"func"===s.type?t("el-link",{on:{click:function(t){return e.common.goToTaskRecord({funcId:s.id})}}},[t("i",{staticClass:"fa fa-fw fa-share-square"}),e._v("\n              "+e._s(e.$t("Go to Recent Task Record"))+"\n            ")]):e._e(),e._v(" "),t("el-tooltip",{attrs:{effect:"dark",disabled:!!s.scriptMarketId,content:e.$t("The Script Market has been removed"),placement:"right"}},["scriptMarket"===s.origin&&s.originId?t("el-link",{attrs:{disabled:!s.scriptMarketId},on:{click:function(t){return e.openEntity(s,"scriptMarket")}}},[t("i",{staticClass:"fa fa-fw fa-share-square"}),e._v("\n                "+e._s(e.$t("Go to Script Market"))+"\n              ")]):e._e()],1)],1)]:e._e()],2)],1)}}])}),e._v(" "),t("QuickViewWindow",{ref:"quickViewWindow"}),e._v(" "),t("APIExampleDialog",{ref:"apiExampleDialog",attrs:{showPostExample:!0,showPostExampleSimplified:!0,showGetExample:!0,showGetExampleSimplified:!0}}),e._v(" "),t("ScriptSetSetup",{ref:"ScriptSetSetup"}),e._v(" "),t("ScriptSetup",{ref:"ScriptSetup"}),e._v(" "),t("el-dialog",{attrs:{visible:e.showRelEntity,width:"1050px"},on:{"update:visible":function(t){e.showRelEntity=t}}},[t("div",{attrs:{slot:"title"},slot:"title"},[t("FuncInfo",{attrs:{id:e.relEntityFunc.id,title:e.relEntityFunc.title,definition:e.relEntityFunc.definition,hideGotoFunc:!0}}),e._v(" "),t("span",{staticClass:"text-info press-esc-to-close-tip"},[e._v(e._s(e.$t("Press ESC to close")))])],1),e._v(" "),t("el-tabs",{model:{value:e.relEntityTarget,callback:function(t){e.relEntityTarget=t},expression:"relEntityTarget"}},[t("el-tab-pane",{attrs:{name:"authLink"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"fa fa-fw fa-link"}),e._v(" "+e._s(e.$t("Auth Link")))]),e._v(" "),t("transition",{attrs:{name:"fade"}},[e.showRelEntityData?t("el-table",{staticClass:"common-table",attrs:{data:e.relEntities.authLinks}},[t("el-table-column",{attrs:{label:e.$t("Auth Link")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"text-info"},[e._v("ID")]),e._v("\n               "),t("code",{staticClass:"text-main"},[e._v(e._s(a.row.id))]),e._v(" "),t("CopyButton",{attrs:{content:a.row.id}}),e._v(" "),a.row.note?[t("br"),e._v(" "),t("span",{staticClass:"text-info"},[e._v("　"+e._s(e.$t("Note"))+e._s(e.$t(":")))]),e._v(" "),t("span",[e._v(e._s(a.row.note))])]:e._e()]}}],null,!1,729312038)}),e._v(" "),t("el-table-column",{attrs:{label:e.$t("Config"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Auth"))+e._s(e.$t(":")))]),e._v(" "),t("el-tooltip",{attrs:{content:a.row.apia_title,disabled:!a.row.apia_title,placement:"right"}},[t("span",{class:{"text-main":!!a.row.apia_id}},[e._v(e._s(e.C.API_AUTH_MAP.get(a.row.apia_type).name))])]),e._v(" "),t("br"),e._v(" "),t("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Expires"))+e._s(e.$t(":")))]),e._v(" "),a.row.expireTime?[t("RelativeDateTime",{class:e.T.isExpired(a.row.expireTime)?"text-bad":"text-good",attrs:{datetime:a.row.expireTime}})]:t("span",[e._v("-")]),e._v(" "),t("br"),e._v(" "),t("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Throttling"))+e._s(e.$t(":")))]),e._v(" "),e.T.isNothing(a.row.throttlingJSON)?t("span",[e._v("-")]):t("el-tooltip",{attrs:{placement:"right"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._l(e.C.AUTH_LINK_THROTTLING,(function(n){return[a.row.throttlingJSON[n.key]?t("span",[e._v(e._s(e.$tc(n.name,a.row.throttlingJSON[n.key]))),t("br")]):e._e()]}))],2),e._v(" "),t("span",{staticClass:"text-bad"},[e._v(e._s(e.$t("ON")))])])]}}],null,!1,2001901600)}),e._v(" "),t("el-table-column",{attrs:{label:e.$t("Status"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isDisabled?t("span",{staticClass:"text-bad"},[t("i",{staticClass:"fa fa-fw fa-ban"}),e._v(" "+e._s(e.$t("Disabled")))]):t("span",{staticClass:"text-good"},[t("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("Enabled")))]),e._v(" "),a.row.lastStartTime?[t("br"),e._v(" "),"success"===a.row.lastStatus?t("span",{staticClass:"text-good"},[t("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("lastSucceeded",{t:e.T.fromNow(a.row.lastStartTime)}))+"\n                ")]):"failure"===a.row.lastStatus?t("span",{staticClass:"text-bad"},[t("i",{staticClass:"fa fa-fw fa-times"}),e._v(" "+e._s(e.$t("lastFailed",{t:e.T.fromNow(a.row.lastStartTime)}))+"\n                ")]):t("span",{staticClass:"text-main"},[t("i",{staticClass:"fa fa-fw fa-clock-o"}),e._v(" "+e._s(e.$t("lastRan",{t:e.T.fromNow(a.row.lastStartTime)}))+"\n                ")]),e._v(" "),t("br"),e._v(" "),t("i",{staticClass:"fa fa-fw fa-pie-chart text-info"}),e._v(" "),t("span",{class:{"text-good":!!a.row.recentSuccessCount}},[e._v(e._s(e.$t("successCount",{n:e.T.numberLimit(a.row.recentSuccessCount)})))]),e._v("\n                / "),t("span",{class:{"text-bad":!!a.row.recentFailureCount}},[e._v(e._s(e.$t("failureCount",{n:e.T.numberLimit(a.row.recentFailureCount)})))])]:e._e()]}}],null,!1,2994765989)}),e._v(" "),t("el-table-column",{attrs:{align:"right",width:"180"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push({name:"auth-link-list"})}}},[e._v("\n                "+e._s(e.$t("Auth Link List"))+"\n                "),t("i",{staticClass:"fa fa-fw fa-share-square"})])]}},{key:"default",fn:function(a){return[t("el-link",{attrs:{disabled:e.T.isNothing(a.row.func_id)},on:{click:function(t){return e.showAPI(a.row,"/api/v1/al/:id")}}},[e._v(e._s(e.$t("Example")))])]}}],null,!1,2584423376)})],1):e._e()],1)],1),e._v(" "),t("el-tab-pane",{attrs:{name:"crontabConfig"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"fa fa-fw fa-clock-o"}),e._v(" "+e._s(e.$t("Crontab Config")))]),e._v(" "),t("transition",{attrs:{name:"fade"}},[e.showRelEntityData?t("el-table",{staticClass:"common-table",attrs:{data:e.relEntities.crontabConfigs}},[t("el-table-column",{attrs:{label:e.$t("Crontab Config")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"text-info"},[e._v("ID")]),e._v("\n               "),t("code",{staticClass:"text-main"},[e._v(e._s(a.row.id))]),e._v(" "),t("CopyButton",{attrs:{content:a.row.id}}),e._v(" "),a.row.note?[t("br"),e._v(" "),t("span",{staticClass:"text-info"},[e._v("　"+e._s(e.$t("Note"))+e._s(e.$t(":")))]),e._v(" "),t("span",[e._v(e._s(a.row.note))])]:e._e()]}}],null,!1,729312038)}),e._v(" "),t("el-table-column",{attrs:{label:e.$t("Config"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"text-info"},[e._v("Crontab"+e._s(e.$t(":")))]),e._v(" "),a.row.func_extraConfigJSON&&a.row.func_extraConfigJSON.fixedCrontab?[t("code",{staticClass:"text-main"},[e._v(e._s(a.row.func_extraConfigJSON.fixedCrontab))]),e._v(" "),t("el-tag",{attrs:{size:"mini"}},[e._v(e._s(e.$t("Fixed")))])]:a.row.crontab?t("code",{staticClass:"text-main"},[e._v(e._s(a.row.crontab))]):t("span",{staticClass:"text-bad"},[e._v(e._s(e.$t("Not Set")))]),e._v(" "),t("br"),e._v(" "),t("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Created"))+e._s(e.$t(":")))]),e._v(" "),t("RelativeDateTime",{attrs:{datetime:a.row.createTime}}),e._v(" "),t("br"),e._v(" "),t("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Expires"))+e._s(e.$t(":")))]),e._v(" "),a.row.expireTime?[t("RelativeDateTime",{class:e.T.isExpired(a.row.expireTime)?"text-bad":"text-good",attrs:{datetime:a.row.expireTime}})]:t("span",[e._v("-")])]}}],null,!1,3248585843)}),e._v(" "),t("el-table-column",{attrs:{label:e.$t("Status"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isDisabled?t("span",{staticClass:"text-bad"},[t("i",{staticClass:"fa fa-fw fa-ban"}),e._v(" "+e._s(e.$t("Disabled")))]):t("span",{staticClass:"text-good"},[t("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("Enabled")))]),e._v(" "),a.row.lastStartTime?[t("br"),e._v(" "),"success"===a.row.lastStatus?t("span",{staticClass:"text-good"},[t("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("lastSucceeded",{t:e.T.fromNow(a.row.lastStartTime)}))+"\n                ")]):"failure"===a.row.lastStatus?t("span",{staticClass:"text-bad"},[t("i",{staticClass:"fa fa-fw fa-times"}),e._v(" "+e._s(e.$t("lastFailed",{t:e.T.fromNow(a.row.lastStartTime)}))+"\n                ")]):t("span",{staticClass:"text-main"},[t("i",{staticClass:"fa fa-fw fa-clock-o"}),e._v(" "+e._s(e.$t("lastRan",{t:e.T.fromNow(a.row.lastStartTime)}))+"\n                ")]),e._v(" "),t("br"),e._v(" "),t("i",{staticClass:"fa fa-fw fa-pie-chart text-info"}),e._v(" "),t("span",{class:{"text-good":!!a.row.recentSuccessCount}},[e._v(e._s(e.$t("successCount",{n:e.T.numberLimit(a.row.recentSuccessCount)})))]),e._v("\n                / "),t("span",{class:{"text-bad":!!a.row.recentFailureCount}},[e._v(e._s(e.$t("failureCount",{n:e.T.numberLimit(a.row.recentFailureCount)})))])]:e._e()]}}],null,!1,2994765989)}),e._v(" "),t("el-table-column",{attrs:{align:"right",width:"180"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push({name:"crontab-config-list"})}}},[e._v("\n                "+e._s(e.$t("Crontab Config List"))+"\n                "),t("i",{staticClass:"fa fa-fw fa-share-square"})])]}},{key:"default",fn:function(a){return[t("el-link",{attrs:{disabled:!a.row.func_id},on:{click:function(t){return e.runCrontabTask(a.row)}}},[e._v("\n                "+e._s(e.$t("Run"))+"\n              ")])]}}],null,!1,4285935997)})],1):e._e()],1)],1),e._v(" "),t("el-tab-pane",{attrs:{name:"batch"}},[t("span",{attrs:{slot:"label"},slot:"label"},[t("i",{staticClass:"fa fa-fw fa-tasks"}),e._v(" "+e._s(e.$t("Batch")))]),e._v(" "),t("transition",{attrs:{name:"fade"}},[e.showRelEntityData?t("el-table",{staticClass:"common-table",attrs:{data:e.relEntities.batches}},[t("el-table-column",{attrs:{label:e.$t("Batch")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"text-info"},[e._v("ID")]),e._v("\n               "),t("code",{staticClass:"text-main"},[e._v(e._s(a.row.id))]),e._v(" "),t("CopyButton",{attrs:{content:a.row.id}}),e._v(" "),a.row.note?[t("br"),e._v(" "),t("span",{staticClass:"text-info"},[e._v("　"+e._s(e.$t("Note"))+e._s(e.$t(":")))]),e._v(" "),t("span",[e._v(e._s(a.row.note))])]:e._e()]}}],null,!1,729312038)}),e._v(" "),t("el-table-column",{attrs:{label:e.$t("Config"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Auth"))+e._s(e.$t(":")))]),e._v(" "),t("el-tooltip",{attrs:{content:a.row.apia_title,disabled:!a.row.apia_title,placement:"right"}},[t("span",{class:{"text-main":!!a.row.apia_id}},[e._v(e._s(e.C.API_AUTH_MAP.get(a.row.apia_type).name))])])]}}],null,!1,3107884250)}),e._v(" "),t("el-table-column",{attrs:{label:e.$t("Status"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(a){return[a.row.isDisabled?t("span",{staticClass:"text-bad"},[t("i",{staticClass:"fa fa-fw fa-ban"}),e._v(" "+e._s(e.$t("Disabled")))]):t("span",{staticClass:"text-good"},[t("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("Enabled")))]),e._v(" "),a.row.lastStartTime?[t("br"),e._v(" "),"success"===a.row.lastStatus?t("span",{staticClass:"text-good"},[t("i",{staticClass:"fa fa-fw fa-check"}),e._v(" "+e._s(e.$t("lastSucceeded",{t:e.T.fromNow(a.row.lastStartTime)}))+"\n                ")]):"failure"===a.row.lastStatus?t("span",{staticClass:"text-bad"},[t("i",{staticClass:"fa fa-fw fa-times"}),e._v(" "+e._s(e.$t("lastFailed",{t:e.T.fromNow(a.row.lastStartTime)}))+"\n                ")]):t("span",{staticClass:"text-main"},[t("i",{staticClass:"fa fa-fw fa-clock-o"}),e._v(" "+e._s(e.$t("lastRan",{t:e.T.fromNow(a.row.lastStartTime)}))+"\n                ")]),e._v(" "),t("br"),e._v(" "),t("i",{staticClass:"fa fa-fw fa-pie-chart text-info"}),e._v(" "),t("span",{class:{"text-good":!!a.row.recentSuccessCount}},[e._v(e._s(e.$t("successCount",{n:e.T.numberLimit(a.row.recentSuccessCount)})))]),e._v("\n                / "),t("span",{class:{"text-bad":!!a.row.recentFailureCount}},[e._v(e._s(e.$t("failureCount",{n:e.T.numberLimit(a.row.recentFailureCount)})))])]:e._e()]}}],null,!1,2994765989)}),e._v(" "),t("el-table-column",{attrs:{align:"right",width:"180"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("el-link",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push({name:"batch-list"})}}},[e._v("\n                "+e._s(e.$t("Batch List"))+"\n                "),t("i",{staticClass:"fa fa-fw fa-share-square"})])]}},{key:"default",fn:function(a){return[t("el-link",{attrs:{disabled:e.T.isNothing(a.row.func_id)},on:{click:function(t){return e.showAPI(a.row,"/api/v1/bat/:id")}}},[e._v(e._s(e.$t("Example")))])]}}],null,!1,3635612871)})],1):e._e()],1)],1)],1)],1)],1)}),i=[],o=a("c7eb"),c=a("1da1"),l=(a("99af"),a("a15b"),a("fb6a"),a("4e82"),a("b64b"),a("d3b7"),a("07ac"),a("ac1f"),a("466d"),a("498a"),a("159b"),a("130f"),function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.show&&e.script,expression:"show && script"}],staticClass:"quick-view-window",class:{"quick-view-window-no-scoll":e.isDragging},style:{top:e.showPosition.top+"px",left:e.showPosition.left+"px"},attrs:{id:"quickViewWindow"}},[t("div",{staticClass:"quick-view-header",on:{mousedown:e.startDrag}},[t("span",{staticClass:"quick-view-title"},[t("span",[e._v(e._s(e.script.title||e.script.id))])]),e._v(" "),t("el-link",{staticClass:"quick-view-close",on:{click:function(t){return t.stopPropagation(),e.hideWindow()}},nativeOn:{mousedown:function(e){e.stopPropagation()}}},[t("i",{staticClass:"fa fa-times"}),e._v(" "+e._s(e.$t("Close")))])],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isDragging,expression:"isDragging"}],staticClass:"quick-view-dragging-cover"},[t("span",{staticClass:"quick-view-dragging-cover-tip"},[e._v(e._s(e.$t("Drag to place")))])]),e._v(" "),t("el-tabs",{attrs:{"tab-position":"bottom",type:"border-card"},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},[t("el-tab-pane",{attrs:{label:e.$t("Published"),name:"code"}},[t("div",{staticClass:"quick-view-code"},[t("textarea",{attrs:{id:"quickView_code"}})])]),e._v(" "),t("el-tab-pane",{attrs:{label:e.$t("Draft"),name:"codeDraft"}},[t("div",{staticClass:"quick-view-code"},[t("textarea",{attrs:{id:"quickView_codeDraft"}})])])],1)],1)}),u=[],d={name:"QuickViewWindow",components:{},watch:{selectedTab:function(e){var t=this;setImmediate((function(){switch(e){case"code":t.codeMirror_code.refresh();break;case"codeDraft":t.codeMirror_codeDraft.refresh();break}}))}},methods:{showWindow:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.T.callAPI_get("/api/v1/scripts/:id/do/get",{params:{id:e}});case 2:if(n=a.sent,n&&n.ok){a.next=5;break}return a.abrupt("return");case 5:t.show||t.$message({type:"warning",duration:3e3,message:t.$t("The Quick View window is only shown when the Script Lib is active, drag and drop the title bar to move the position")}),t.script=n.data,t.show=!0,t.selectedTab="code",setImmediate((function(){t.fixShowPosition(),t.codeMirror_code||(t.codeMirror_code=t.T.initCodeMirror("quickView_code"),t.codeMirror_code.setOption("theme",t.T.getCodeMirrorThemeName()),t.T.setCodeMirrorReadOnly(t.codeMirror_code,!0)),t.codeMirror_codeDraft||(t.codeMirror_codeDraft=t.T.initCodeMirror("quickView_codeDraft"),t.codeMirror_codeDraft.setOption("theme",t.T.getCodeMirrorThemeName()),t.T.setCodeMirrorReadOnly(t.codeMirror_codeDraft,!0)),t.codeMirror_code.setValue(""),t.codeMirror_code.setValue(t.script.code||""),t.codeMirror_code.refresh(),t.codeMirror_codeDraft.setValue(""),t.codeMirror_codeDraft.setValue(t.script.codeDraft||""),t.codeMirror_codeDraft.refresh()}));case 10:case"end":return a.stop()}}),a)})))()},hideWindow:function(){this.show=!1},startDrag:function(e){var t=this,a=document.getElementById("quickViewWindow"),n=e.screenX-a.offsetLeft,s=e.screenY-a.offsetTop;this.isDragging=!0,document.onmousemove=function(r){var i=(r||e).screenX-n,o=(r||e).screenY-s,c=window.innerWidth-a.offsetWidth-10,l=window.innerHeight-a.offsetHeight-10;i<0&&(i=0),o<0&&(o=0),i>c&&(i=c),o>l&&(o=l);var u={left:i,top:o};t.dragPosition=u,t.$store.commit("updateAsideScript_quickViewWindowPosition",t.dragPosition),t.fixShowPosition()},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null,t.isDragging=!1}},fixShowPosition:function(){var e={top:this.dragPosition.top,left:this.dragPosition.left},t=document.getElementById("quickViewWindow");if(t){var a=window.innerWidth-t.offsetWidth-10,n=window.innerHeight-t.offsetHeight-10;e.left<0&&(e.left=0),e.top<0&&(e.top=0),e.left>a&&(e.left=a),e.top>n&&(e.top=n),this.showPosition=e}}},computed:{},props:{},data:function(){var e=this.$store.state.asideScript_quickViewWindowPosition||{left:10,top:10};return{show:!1,selectedTab:"code",showPosition:this.T.jsonCopy(e),dragPosition:this.T.jsonCopy(e),isDragging:!1,script:{},codeMirror_code:null,codeMirror_codeDraft:null}},mounted:function(){window.addEventListener("resize",this.fixShowPosition,!1)},beforeDestroy:function(){window.removeEventListener("resize",this.fixShowPosition,!1),this.T.destoryCodeMirror(this.codeMirror_code),this.T.destoryCodeMirror(this.codeMirror_codeDraft)}},p=d,f=(a("7a34"),a("3be4"),a("2877")),m=a("12e2"),b=a("ff0e"),h=a("276d"),g=Object(f["a"])(p,l,u,!1,null,"8fd80e2a",null);"function"===typeof m["default"]&&Object(m["default"])(g),"function"===typeof b["default"]&&Object(b["default"])(g),"function"===typeof h["default"]&&Object(h["default"])(g);var _=g.exports,v=a("b3fd"),y=a("21a6"),S=a.n(y),w=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"ScriptSetSetup",visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"750px"},on:{"update:visible":function(t){e.show=t}}},[t("template",{slot:"title"},[e._v("\n    "+e._s(e.pageTitle)+" "),t("code",{staticClass:"text-main"},[e._v(e._s(e.data.title||e.data.id))])]),e._v(" "),t("el-container",{attrs:{direction:"vertical"}},[t("el-main",[t("div",{staticClass:"setup-form"},[t("el-form",{ref:"form",attrs:{"label-width":"135px",model:e.form,disabled:!e.isEditable,rules:e.formRules}},[e.isLockedByMe?t("el-form-item",[t("InfoBlock",{attrs:{type:"success",title:e.$t("This Script Set is locked by you")}})],1):e.isLockedByOther?t("el-form-item",[t("InfoBlock",{attrs:{type:e.isEditable?"warning":"error",title:e.$t("This Script Set is locked by other user ({user})",{user:e.lockedByUser})}})],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"ID",prop:"id"}},[t("el-input",{attrs:{disabled:"setup"===e.pageMode,maxlength:"60"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),e._v(" "),t("InfoBlock",{attrs:{title:e.$t("Script Set ID will be a part of the Func ID")}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Title")}},[t("el-input",{attrs:{placeholder:e.$t("Optional"),maxlength:"200"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Description")}},[t("el-input",{attrs:{placeholder:e.$t("Optional"),type:"textarea",resize:"none",autosize:{minRows:2},maxlength:"5000"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Requirements")}},[t("el-input",{attrs:{placeholder:e.$t("Optional"),type:"textarea",resize:"none",autosize:{minRows:2},maxlength:"5000"},model:{value:e.form.requirements,callback:function(t){e.$set(e.form,"requirements",t)},expression:"form.requirements"}}),e._v(" "),t("InfoBlock",{attrs:{title:e.$t("requirementsTip")}}),e._v(" "),t("div",{staticClass:"setup-right"},[e.requirementsLine?t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.common.goToPIPTools(e.requirementsLine)}}},[e._v(e._s(e.$t("Go to PIP tool to install")))]):e._e()],1)],1),e._v(" "),t("el-form-item",{staticClass:"setup-footer"},["setup"===e.pageMode?t("el-button",{staticClass:"danger-button float-left",on:{click:e.deleteData}},[e._v(e._s(e.$t("Delete")))]):e._e(),e._v(" "),t("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],attrs:{type:"primary"},on:{click:e.submitData}},[e._v(e._s(e.$t("Save")))])],1)],1)],1)])],1)],2)},C=[],k=(a("d9e2"),a("1276"),{name:"ScriptSetSetup",components:{},watch:{show:function(e){e&&this.$refs.form&&this.$refs.form.clearValidate()}},methods:{loadData:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n,s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=6;break}t.pageMode="add",t.T.jsonClear(t.form),t.data={},a.next=17;break;case 6:return t.pageMode="setup",t.data.id=e,a.next=10,t.T.callAPI_getOne("/api/v1/script-sets/do/list",t.scriptSetId);case 10:if(n=a.sent,n&&n.ok){a.next=13;break}return a.abrupt("return");case 13:t.data=n.data,s={},Object.keys(t.form).forEach((function(e){return s[e]=t.data[e]})),t.form=s;case 17:t.show=!0;case 18:case"end":return a.stop()}}),a)})))()},submitData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t["catch"](0),t.abrupt("return",console.error(t.t0));case 8:a=null,t.t1=e.pageMode,t.next="add"===t.t1?12:"setup"===t.t1?16:20;break;case 12:return t.next=14,e.addData();case 14:return a=t.sent,t.abrupt("break",20);case 16:return t.next=18,e.modifyData();case 18:return a=t.sent,t.abrupt("break",20);case 20:a&&e.$store.commit("updateEditor_selectedItemId",null);case 21:case"end":return t.stop()}}),t,null,[[0,5]])})))()},addData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.callAPI("post","/api/v1/script-sets/do/add",{body:{data:e.T.jsonCopy(e.form)},alert:{okMessage:e.$t("Script Set created")}});case 2:if(a=t.sent,a&&a.ok){t.next=5;break}return t.abrupt("return");case 5:return e.$store.commit("updateScriptListSyncTime"),e.show=!1,t.abrupt("return",a.data.id);case 8:case"end":return t.stop()}}),t)})))()},modifyData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.T.jsonCopy(e.form),delete a.id,t.next=4,e.T.callAPI("post","/api/v1/script-sets/:id/do/modify",{params:{id:e.scriptSetId},body:{data:a},alert:{okMessage:e.$t("Script Set saved")}});case 4:if(n=t.sent,n&&n.ok){t.next=7;break}return t.abrupt("return");case 7:return e.$store.commit("updateScriptListSyncTime"),e.show=!1,t.abrupt("return",e.scriptSetId);case 10:case"end":return t.stop()}}),t)})))()},deleteData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.confirm(e.$t("Are you sure you want to delete the Script Set?"));case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.T.callAPI("/api/v1/script-sets/:id/do/delete",{params:{id:e.scriptSetId},alert:{okMessage:e.$t("Script Set deleted")}});case 6:if(a=t.sent,a&&a.ok){t.next=9;break}return t.abrupt("return");case 9:e.$store.commit("updateScriptListSyncTime"),e.show=!1;case 11:case"end":return t.stop()}}),t)})))()}},computed:{pageTitle:function(){var e={setup:this.$t("Setup Script Set"),add:this.$t("Add Script Set")};return e[this.pageMode]},scriptSetId:function(){switch(this.pageMode){case"add":return this.form.id;case"setup":return this.data.id}},lockedByUser:function(){return"".concat(this.data.lockedByUserName||this.data.lockedByUsername)},isLockedByMe:function(){return this.data.lockedByUserId===this.$store.getters.userId},isLockedByOther:function(){return this.data.lockedByUserId&&!this.isLockedByMe},isEditable:function(){return!!this.$store.getters.isAdmin||!this.isLockedByOther},requirementsLine:function(){if(!this.form.requirements)return null;var e=this.form.requirements.split(/\s+/).join(" ");return e}},props:{},data:function(){var e=this;return{show:!1,pageMode:null,data:{},form:{id:null,title:null,description:null,requirements:null},formRules:{id:[{trigger:"blur",message:this.$t("Please input ID"),required:!0},{trigger:"change",message:this.$t("Only alphabets, numbers and underscore are allowed"),pattern:/^[a-zA-Z0-9_]*$/g},{trigger:"change",message:this.$t("Cannot not starts with a number"),pattern:/^[^0-9]/g},{trigger:"change",validator:function(t,a,n){if(a&&a.indexOf("__")>=0){var s=e.$t('ID cannot contains double underscore "__"');return n(new Error(s))}return n()}}]}}}}),T=k,O=a("29a8d"),x=a("0bc6"),E=a("327c"),N=a("477a"),$=Object(f["a"])(T,w,C,!1,null,"60da0316",null);"function"===typeof O["default"]&&Object(O["default"])($),"function"===typeof x["default"]&&Object(x["default"])($),"function"===typeof E["default"]&&Object(E["default"])($),"function"===typeof N["default"]&&Object(N["default"])($);var I=$.exports,P=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"ScriptSet",visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"750px"},on:{"update:visible":function(t){e.show=t}}},[t("template",{slot:"title"},[e._v("\n    "+e._s(e.pageTitle)+" "),t("code",{staticClass:"text-main"},[e._v(e._s(e.data.title||e.data.id))])]),e._v(" "),t("el-container",{attrs:{direction:"vertical"}},[t("el-main",[t("div",{staticClass:"setup-form"},[t("el-form",{ref:"form",attrs:{"label-width":"135px",model:e.form,disabled:!e.isEditable,rules:e.formRules}},[e.isLockedByMe?t("el-form-item",[t("InfoBlock",{attrs:{type:"success",title:e.$t("This Script is locked by you")}})],1):e.isLockedByOther?t("el-form-item",[t("InfoBlock",{attrs:{type:e.isEditable?"warning":"error",title:e.$t("This Script is locked by other user ({user})",{user:e.lockedByUser})}})],1):e._e(),e._v(" "),t("el-form-item",{staticClass:"script-set-id-field",attrs:{label:"ID",prop:"id"}},[t("el-input",{attrs:{disabled:"setup"===e.pageMode,maxlength:"60"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),e._v(" "),t("InfoBlock",{attrs:{title:e.$t("Script Set ID should be a prefix of the Script ID")}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Title")}},[t("el-input",{attrs:{placeholder:e.$t("Optional"),maxlength:"200"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Description")}},[t("el-input",{attrs:{placeholder:e.$t("Optional"),type:"textarea",resize:"none",autosize:{minRows:2},maxlength:"5000"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),"add"===e.pageMode?t("el-form-item",{attrs:{label:e.$t("Script Template")}},[t("el-select",{attrs:{filterable:"","filter-method":e.T.debounce(e.doFilter)},on:{change:e.showScriptTemplate},model:{value:e.templateScriptId,callback:function(t){e.templateScriptId=t},expression:"templateScriptId"}},[t("el-option-group",[t("el-option",{key:"_basicExample",attrs:{label:e.$t("Basic Example"),value:"_basicExample"}}),e._v(" "),t("el-option",{key:"_blankScript",attrs:{label:e.$t("Blank Script"),value:"_blankScript"}})],1),e._v(" "),e.templateScriptShowOptions.length>0?t("el-option-group",{attrs:{label:e.$t("From Example Script")}},e._l(e.templateScriptShowOptions,(function(a){return t("el-option",{key:a.id,attrs:{label:a.label,value:a.id}},[t("span",{staticClass:"example-script"},[e._v(e._s(a.label))])])})),1):e._e()],1),e._v(" "),e.templateScript?t("el-button",{attrs:{type:"text"},on:{click:e.showScriptTemplate}},[e._v(e._s(e.$t("Show Script Template")))]):e._e()],1):e._e(),e._v(" "),t("el-form-item",{staticClass:"setup-footer"},["setup"===e.pageMode?t("el-button",{staticClass:"danger-button float-left",on:{click:e.deleteData}},[e._v(e._s(e.$t("Delete")))]):e._e(),e._v(" "),t("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],attrs:{type:"primary"},on:{click:e.submitData}},[e._v(e._s(e.$t("Save")))])],1)],1)],1)]),e._v(" "),t("LongTextDialog",{ref:"longTextDialog",attrs:{title:e.$t("Script Template"),mode:"python"}})],1)],2)},D=[],M=(a("13d5"),a("b76c")),A={name:"ScriptSetup",components:{LongTextDialog:M["a"]},watch:{show:function(e){e&&this.$refs.form&&this.$refs.form.clearValidate()},"form.id":function(e){(!e||e.length<this.ID_PREFIX.length||e.indexOf(this.ID_PREFIX)<0)&&(this.form.id=this.ID_PREFIX)}},methods:{doFilter:function(e){e=(e||"").toLowerCase().trim(),e&&"_"!==e[0]?this.templateScriptShowOptions=this.T.filterByKeywords(e,this.templateScripts):this.templateScriptShowOptions=this.templateScripts},loadData:function(e,t){var a=this;return Object(c["a"])(Object(o["a"])().mark((function n(){var s,r,i,c;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a.scriptSetId=e,t){n.next=18;break}return a.pageMode="add",a.T.jsonClear(a.form),a.data={},a.form.id=a.ID_PREFIX,n.next=8,a.T.callAPI_getAll("/api/v1/scripts/do/list",{query:{fields:["id","title","scriptSetId","sset_title","code"],_withCode:!0,scriptName:"example"}});case 8:if(s=n.sent,s&&s.ok){n.next=11;break}return n.abrupt("return");case 11:r=s.data,r.forEach((function(e){e.shortScriptId=e.id.split("__").slice(1).join("__"),e.label="".concat(e.sset_title||e.scriptSetId," / ").concat(e.title||e.shortScriptId),a.T.appendSearchFields(e,["sset_title","scriptSetId","title","shortScriptId"])})),a.templateScripts=r,a.templateScriptShowOptions=r,a.templateScriptMap=r.reduce((function(e,t){return e[t.id]=t,e}),{}),n.next=29;break;case 18:return a.pageMode="setup",a.data.id=t,n.next=22,a.T.callAPI_getOne("/api/v1/scripts/do/list",a.scriptId);case 22:if(i=n.sent,i&&i.ok){n.next=25;break}return n.abrupt("return");case 25:a.data=i.data,c={},Object.keys(a.form).forEach((function(e){return c[e]=a.data[e]})),a.form=c;case 29:a.show=!0;case 30:case"end":return n.stop()}}),n)})))()},submitData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t["catch"](0),t.abrupt("return",console.error(t.t0));case 8:a=null,t.t1=e.pageMode,t.next="add"===t.t1?12:"setup"===t.t1?16:20;break;case 12:return t.next=14,e.addData();case 14:return a=t.sent,t.abrupt("break",20);case 16:return t.next=18,e.modifyData();case 18:return a=t.sent,t.abrupt("break",20);case 20:a&&e.$store.commit("updateEditor_selectedItemId",null);case 21:case"end":return t.stop()}}),t,null,[[0,5]])})))()},addData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a,n,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.T.jsonCopy(e.form),t.t0=e.templateScriptId,t.next="_basicExample"===t.t0?4:"_blankScript"===t.t0?6:8;break;case 4:return delete a.codeDraft,t.abrupt("break",11);case 6:return a.codeDraft="",t.abrupt("break",11);case 8:return n=e.templateScriptMap[e.templateScriptId],a.codeDraft=n&&n.code?n.code:"",t.abrupt("break",11);case 11:return t.next=13,e.T.callAPI("post","/api/v1/scripts/do/add",{body:{data:a},alert:{okMessage:e.$t("Script created")}});case 13:if(s=t.sent,s&&s.ok){t.next=16;break}return t.abrupt("return");case 16:return e.$store.commit("updateScriptListSyncTime"),e.show=!1,e.$router.push({name:"code-editor",params:{id:s.data.id}}),t.abrupt("return",s.data.id);case 20:case"end":return t.stop()}}),t)})))()},modifyData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.T.jsonCopy(e.form),delete a.id,t.next=4,e.T.callAPI("post","/api/v1/scripts/:id/do/modify",{params:{id:e.scriptId},body:{data:a},alert:{okMessage:e.$t("Script saved")}});case 4:if(n=t.sent,n&&n.ok){t.next=7;break}return t.abrupt("return");case 7:return e.$store.commit("updateScriptListSyncTime"),e.show=!1,t.abrupt("return",e.scriptId);case 10:case"end":return t.stop()}}),t)})))()},deleteData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.confirm(e.$t("Are you sure you want to delete the Script?"));case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return e.T.jumpDeletedEntity(e.scriptId),t.next=7,e.T.callAPI("/api/v1/scripts/:id/do/delete",{params:{id:e.scriptId},alert:{okMessage:e.$t("Script deleted")}});case 7:if(a=t.sent,a&&a.ok){t.next=10;break}return t.abrupt("return");case 10:e.$store.commit("updateScriptListSyncTime"),e.show=!1;case 12:case"end":return t.stop()}}),t)})))()},showScriptTemplate:function(){this.templateScript&&this.$refs.longTextDialog.update(this.templateScript)}},computed:{ID_PREFIX:function(){return"".concat(this.scriptSetId,"__")},pageTitle:function(){var e={setup:this.$t("Setup Script"),add:this.$t("Add Script")};return e[this.pageMode]},scriptId:function(){switch(this.pageMode){case"add":return this.form.id;case"setup":return this.data.id}},lockedByUserId:function(){return this.data.sset_lockedByUserId||this.data.lockedByUserId},lockedByUser:function(){return this.data.sset_lockedByUserId?"".concat(this.data.sset_lockedByUserName||this.data.sset_lockedByUsername):this.data.lockedByUserId?"".concat(this.data.lockedByUserName||this.data.lockedByUsername):void 0},isLockedByMe:function(){return this.lockedByUserId===this.$store.getters.userId},isLockedByOther:function(){return this.lockedByUserId&&!this.isLockedByMe},isEditable:function(){return!!this.$store.getters.isAdmin||!this.isLockedByOther},templateScript:function(){return this.templateScriptId&&!this.T.isNothing(this.templateScriptMap)&&this.templateScriptMap[this.templateScriptId]&&this.templateScriptMap[this.templateScriptId].code||""}},props:{},data:function(){var e=this;return{show:!1,pageMode:null,scriptSetId:"",data:{},templateScriptId:"_basicExample",templateScripts:[],templateScriptShowOptions:[],templateScriptMap:{},form:{id:null,title:null,description:null,codeDraft:null},formRules:{id:[{trigger:"blur",message:this.$t("Please input ID"),required:!0},{trigger:"change",message:this.$t("Only alphabets, numbers and underscore are allowed"),pattern:/^[a-zA-Z0-9_]*$/g},{trigger:"change",message:this.$t("Cannot not starts with a number"),pattern:/^[^0-9]/g},{trigger:"change",validator:function(t,a,n){if(a&&a.indexOf(e.ID_PREFIX)<0||a===e.ID_PREFIX){var s=e.$t('This Script ID should starts with "{prefix}"',{scriptSetId:e.scriptSetId,prefix:e.ID_PREFIX});return n(new Error(s))}if(!a.slice(e.ID_PREFIX.length).match(/^[^0-9]/g)){var r=e.$t("Cannot not starts with a number");return n(new Error(r))}return n()}}]}}}},R=A,L=(a("eb79"),a("6477")),j=a("5034"),F=a("4929"),q=Object(f["a"])(R,P,D,!1,null,"eac0a368",null);"function"===typeof L["default"]&&Object(L["default"])(q),"function"===typeof j["default"]&&Object(j["default"])(q),"function"===typeof F["default"]&&Object(F["default"])(q);var J=q.exports,B={name:"AsideScript",components:{QuickViewWindow:_,APIExampleDialog:v["a"],ScriptSetSetup:I,ScriptSetup:J},watch:{selectFilterText:function(e){if(e&&this.$refs.tree){var t=this.$refs.tree.getNode(e);this.openEntity(t.data)}},"$store.state.scriptListSyncTime":function(){this.loadData()},expandedNodeMap:function(e){this.$store.commit("updateAsideScript_expandedNodeMap",e)},relEntityTarget:function(e){var t=this;this.showRelEntityData=!1,this.$nextTick((function(){t.showRelEntityData=!0}))}},methods:{doFilter:function(e){e=(e||"").toLowerCase().trim(),this.selectShowOptions=e?this.T.filterByKeywords(e,this.selectOptions):this.selectOptions},onExpandNode:function(e,t){this.$set(this.expandedNodeMap,e.id,!0)},onCollapseNode:function(e,t){this.$delete(this.expandedNodeMap,e.id)},selectNode:function(e,t){var a=this;t=t||{},this.$refs.tree&&e&&setImmediate((function(){var n=a.$refs.tree.getNode(e);if(n&&n.data){a.$refs.tree.setCurrentKey(n.data.id);var s=n.parent;while(s)s.expand(),a.onExpandNode(s.data,s),s=s.parent;t.expandChildren&&(n.expand(),a.onExpandNode(n.data,n)),setTimeout((function(){var e=document.getElementById("aside-script-content"),t=document.querySelector('[entry-id="'.concat(n.data.id,'"]'));if(t){var a=0,s=35;if(e.scrollTop+s>t.offsetTop)a=t.offsetTop-s;else{if(!(e.scrollTop+e.offsetHeight<t.offsetTop))return;a=t.offsetTop-e.offsetHeight+t.offsetHeight}e.scrollTo({top:a,behavior:"smooth"})}}),300)}}))},loadData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a,n,s,r,i,c,l,u,d,p,f,m,b;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.T.isNothing(e.data)&&(e.loading=!0),a={},n={},s={},r={},i=!1,t.next=8,e.T.callAPI_getAll("/api/v1/script-sets/do/list",{query:{fields:["id","title","description","lockedByUserId","lockedByUserUsername","lockedByUserName","origin","originId","pinTime","smkt_id"]}});case 8:if(c=t.sent,c&&c.ok){t.next=11;break}return t.abrupt("return");case 11:return c.data.forEach((function(t){if(e.common.shouldScriptSetHidden(t))i=!0;else{a[t.id]="scriptSet",t.description=e.T.limitLines(t.description,10);var s="".concat(t.lockedByUserName||t.lockedByUsername||e.$t("UNKNOWN")),r=t.lockedByUserId===e.$store.getters.userId,o=t.lockedByUserId&&!r,c=e.$store.getters.isAdmin||!o,l=r||o,u=!!t.pinTime;n[t.id]={id:t.id,label:t.title||t.id,type:"scriptSet",lockedByUser:s,isLockedByMe:r,isLockedByOther:o,isEditable:c,isLocked:l,isPinned:u,pinTime:t.pinTime,origin:t.origin,originId:t.originId,scriptMarketId:t.smkt_id,title:t.title,description:t.description,children:[],showPopover:!1},e.T.appendSearchFields(n[t.id],["id","title"])}})),t.next=14,e.T.callAPI_getAll("/api/v1/scripts/do/list",{query:{fields:["id","title","description","scriptSetId","codeMD5","codeDraftMD5","lockedByUserId","lockedByUserUsername","lockedByUserName","sset_lockedByUserId","sset_lockedByUserUsername","sset_lockedByUserName"]}});case 14:if(c=t.sent,c&&c.ok){t.next=17;break}return t.abrupt("return");case 17:return window._DFF_scriptIds=[],c.data.forEach((function(t){if(n[t.scriptSetId]){window._DFF_scriptIds.push(t.id),a[t.id]="script",t.description=e.T.limitLines(t.description,10);var r=t.id.split("__").slice(1).join("__"),i="import ".concat(t.id," as ").concat(r),o=t.codeMD5!==t.codeDraftMD5,c=t.sset_lockedByUserId||t.lockedByUserId,l=t.sset_lockedByUserId?"".concat(t.sset_lockedByUserName||t.sset_lockedByUsername||e.$t("UNKNOWN")):"".concat(t.lockedByUserName||t.lockedByUsername||e.$t("UNKNOWN")),u=c===e.$store.getters.userId,d=c&&!u,p=u||d,f=p&&!!t.sset_lockedByUserId,m=e.$store.getters.isAdmin||!d;s[t.id]={id:t.id,scriptSetId:t.scriptSetId,label:t.title||r,type:"script",isCodeEdited:o,lockedByUser:l,isLockedByMe:u,isLockedByOther:d,isLocked:p,isLockedByScriptSet:f,isEditable:m,title:t.title,description:t.description,sampleCode:i,children:[],showPopover:!1},e.T.appendSearchFields(s[t.id],["id","title"]),n[t.scriptSetId]&&n[t.scriptSetId].children.push(s[t.id])}})),t.next=21,e.T.callAPI_getAll("/api/v1/funcs/do/list",{query:{fields:["id","title","description","definition","scriptSetId","scriptId","sset_type","integration","extraConfigJSON"]}});case 21:if(c=t.sent,c&&c.ok){t.next=24;break}return t.abrupt("return");case 24:for(p in window._DFF_funcIds=[],c.data.forEach((function(t){if(s[t.scriptId]){window._DFF_funcIds.push(t.id),a[t.id]="func",t.description=e.T.limitLines(t.description,10);var n=t.scriptId.split("__").slice(1).join("__"),i="import ".concat(t.scriptId," as ").concat(n,"\n").concat(n,".").concat(t.definition);r[t.id]={id:t.id,scriptSetId:t.scriptSetId,scriptId:t.scriptId,label:t.title||t.id,type:"func",definition:t.definition,title:t.title,description:t.description,sampleCode:i,queue:(t.extraConfigJSON||{}).queue,disabled:!e.$store.state.codeEditor_isCodeLoaded,integration:t.integration,extraConfigJSON:t.extraConfigJSON,showPopover:!1},e.T.appendSearchFields(r[t.id],["id","title"]),s[t.scriptId]&&s[t.scriptId].children.push(r[t.id])}})),l=Object.values(n),l.forEach((function(t){t.children.sort(e.T.asideItemSorter)})),l.sort(e.T.scriptSetSorter),l.unshift({type:"addScriptSet"}),l.unshift({type:"refresh"}),i&&(u=e.$t("In most cases, the Script Sets that users doesn't need to care about are hidden by default."),e.$store.getters.isAdmin&&(u+="<br>"+e.$t("You can change the default behavior in [Management / System Settings].")),l.push({type:"scriptSetHiddenTip",tipTitle:e.$t("Some Script Sets have been hidden"),tip:u})),d=e.T.jsonCopy(e.$store.state.asideScript_expandedNodeMap),d)a[p]||delete d[p];for(f in e.$store.commit("updateAsideScript_expandedNodeMap",d),d=e.T.jsonCopy(e.$store.state.codeEditor_highlightedLineConfigMap),d)s[f]&&!e.T.isNothing(d[f])||delete d[f];for(m in e.$store.commit("updateCodeEditor_highlightedLineConfigMap",d),d=e.T.jsonCopy(e.$store.state.codeViewer_highlightedLineConfigMap),d)s[m]&&!e.T.isNothing(d[m])||delete d[m];e.$store.commit("updateCodeViewer_highlightedLineConfigMap",d),b=[],[n,s,r].forEach((function(t){var a=Object.values(t);a.sort(e.T.asideItemSorter),b=b.concat(a)})),e.loading=!1,e.data=l,e.selectOptions=b,e.selectShowOptions=b,e.scriptSetMap=n,e.scriptMap=s,e.funcMap=r,e.expandedNodeMap=e.$store.state.asideScript_expandedNodeMap||{},e.defaultExpandedNodeKeys=Object.keys(e.expandedNodeMap),e.selectNode(e.$route.params.id);case 53:case"end":return t.stop()}}),t)})))()},pinData:function(e,t,a){var n=this;return Object(c["a"])(Object(o["a"])().mark((function s(){var r,i,c;return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:r=null,i=null,s.t0=e,s.next="scriptSet"===s.t0?5:8;break;case 5:return r="/api/v1/script-sets/:id/do/modify",i=a?n.$t("Script Set pinned"):n.$t("Script Set unpinned"),s.abrupt("break",9);case 8:return s.abrupt("return");case 9:return s.next=11,n.T.callAPI("post",r,{params:{id:t},body:{data:{isPinned:a}},alert:{okMessage:i}});case 11:if(c=s.sent,c&&c.ok){s.next=14;break}return s.abrupt("return");case 14:n.$store.commit("updateScriptListSyncTime");case 15:case"end":return s.stop()}}),s)})))()},lockData:function(e,t,a){var n=this;return Object(c["a"])(Object(o["a"])().mark((function s(){var r,i,c;return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:r=null,i=null,s.t0=e,s.next="scriptSet"===s.t0?5:"script"===s.t0?8:11;break;case 5:return r="/api/v1/script-sets/:id/do/modify",i=a?n.$t("Script Set locked"):n.$t("Script Set unlocked"),s.abrupt("break",11);case 8:return r="/api/v1/scripts/:id/do/modify",i=a?n.$t("Script locked"):n.$t("Script unlocked"),s.abrupt("break",11);case 11:return s.next=13,n.T.callAPI("post",r,{params:{id:t},body:{data:{isLocked:a}},alert:{okMessage:i}});case 13:if(c=s.sent,c&&c.ok){s.next=16;break}return s.abrupt("return");case 16:n.$store.commit("updateScriptListSyncTime");case 17:case"end":return s.stop()}}),s)})))()},cloneData:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n,s,r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.showPopover=!1,n={inputValidator:function(e){return e.length<=0?t.$t("Please input ID"):e.length>32?t.$t("Script Set ID too long"):e.match(/^[a-zA-Z0-9_]*$/g)?!!e.match(/^[^0-9]/g)||t.$t("Cannot not starts with a number"):t.$t("Only alphabets, numbers and underscore are allowed")}},a.next=4,t.T.prompt(t.$t("Please input new Script Set ID"),"".concat(e.id,"_2"),n);case 4:if(s=a.sent,s){a.next=7;break}return a.abrupt("return");case 7:return a.next=9,t.T.callAPI_getOne("/api/v1/script-sets/do/list",s);case 9:if(r=a.sent,!r.data){a.next=12;break}return a.abrupt("return",t.T.alert(t.$t("Inputed Script Set ID already exists")));case 12:return a.next=14,t.T.callAPI("post","/api/v1/script-sets/:id/do/clone",{params:{id:e.id},body:{newId:s},alert:{okMessage:t.$t("Script Set cloned")}});case 14:if(r=a.sent,r&&r.ok){a.next=17;break}return a.abrupt("return");case 17:t.$store.commit("updateScriptListSyncTime");case 18:case"end":return a.stop()}}),a)})))()},exportData:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n,s,r,i,c;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.showPopover=!1,n={respType:"blob",packResp:!0,body:{scriptSetIds:[e.id],note:t.$t("Export Script Set")}},a.next=4,t.T.callAPI("post","/api/v1/script-sets/do/export",n);case 4:if(s=a.sent,s&&s.ok){a.next=7;break}return a.abrupt("return");case 7:return r=new Blob([s.data],{type:s.extra.contentType}),i=[e.id,t.M().utcOffset("+08:00").format("YYYYMMDD_HHmmss")],c=i.join("-")+".zip",S.a.saveAs(r,c),a.next=13,t.T.alert(t.$t("Script Set exported"),"success");case 13:case"end":return a.stop()}}),a)})))()},showQuickViewWindow:function(e){e.showPopover=!1,this.$refs.quickViewWindow.showWindow(e.id)},openEntity:function(e,t){var a=this;e.showPopover=!1;var n=function(e){"code-editor"===a.$route.name&&a.$route.params.id!==e&&a.$store.commit("updateCodeEditor_isCodeLoaded",!1)};switch(e.type){case"refresh":this.loadData();break;case"addScriptSet":this.$refs.ScriptSetSetup.loadData();break;case"scriptSet":"add"===t?(this.selectNode(e.id,{expandChildren:!0}),this.$refs.ScriptSetup.loadData(e.id)):"setup"===t?(this.selectNode(e.id,{expandChildren:!1}),this.$refs.ScriptSetSetup.loadData(e.id)):"scriptMarket"===t?this.$router.push({name:"script-market-contents",params:{id:e.originId}}):this.selectNode(e.id,{expandChildren:!0});break;case"script":"add"===t?(this.selectNode(e.id,{expandChildren:!0}),this.$refs.ScriptSetup.loadData(e.scriptSetId)):"setup"===t?(this.selectNode(e.id,{expandChildren:!1}),this.$refs.ScriptSetup.loadData(e.id.split("__")[0],e.id)):"code-viewer"!==this.$route.name&&"code-editor"!==this.$route.name||e.id!==this.$route.params.id?(this.selectNode(e.id,{expandChildren:!0}),n(e.id),this.$router.push({name:"code-viewer",params:{id:e.id}})):this.selectNode(e.id,{expandChildren:!0});break;case"func":this.$store.commit("updateEditor_selectedItemId",e.id),"code-viewer"!==this.$route.name&&"code-editor"!==this.$route.name||e.scriptId!==this.$route.params.id?(this.selectNode(e.id,{expandChildren:!1}),n(e.scriptId),this.$router.push({name:"code-viewer",params:{id:e.scriptId}})):this.selectNode(e.id,{expandChildren:!1});break;default:console.error("Unexcepted data type: ".concat(e.type));break}},deleteEntity:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n,s,r,i;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=null,s=null,r=null,a.t0=e.type,a.next="scriptSet"===a.t0?6:"script"===a.t0?10:14;break;case 6:return n="/api/v1/script-sets/:id/do/delete",s=t.$t('Are you sure you want to delete the Script Set?<br><strong class="text-bad">{label}</strong>',{label:e.label}),r=t.$t("Script Set deleted"),a.abrupt("break",15);case 10:return n="/api/v1/scripts/:id/do/delete",s=t.$t('Are you sure you want to delete the Script?<br><strong class="text-bad">{label}</strong>',{label:e.label}),r=t.$t("Script deleted"),a.abrupt("break",15);case 14:return a.abrupt("return");case 15:return a.next=17,t.T.confirm(s);case 17:if(a.sent){a.next=19;break}return a.abrupt("return");case 19:return t.T.jumpDeletedEntity(e.id),a.next=22,t.T.callAPI(n,{params:{id:e.id},alert:{okMessage:r}});case 22:if(i=a.sent,i&&i.ok){a.next=25;break}return a.abrupt("return");case 25:t.$store.commit("updateScriptListSyncTime");case 26:case"end":return a.stop()}}),a)})))()},loadRelEntityData:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n,s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=null,s={query:{origin:"user",funcId:e.id,pageSize:20}},a.next=4,t.T.callAPI_get("/api/v1/auth-links/do/list",s);case 4:return n=a.sent,n.ok&&(t.relEntities.authLinks=n.data),a.next=8,t.T.callAPI_get("/api/v1/crontab-configs/do/list",s);case 8:return n=a.sent,n.ok&&(t.relEntities.crontabConfigs=n.data),a.next=12,t.T.callAPI_get("/api/v1/batches/do/list",s);case 12:n=a.sent,n.ok&&(t.relEntities.batches=n.data);case 14:case"end":return a.stop()}}),a)})))()},openRelEntity:function(e,t,a){var n=this;return Object(c["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showPopover=!1,e.next=3,n.loadRelEntityData(t);case 3:n.relEntityFunc=t,n.relEntityTarget=a,n.showRelEntity=!0;case 6:case"end":return e.stop()}}),e)})))()},showAPI:function(e,t){var a=this;return Object(c["a"])(Object(o["a"])().mark((function n(){var s,r,i,c,l,u;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.T.callAPI_getOne("/api/v1/funcs/do/list",e.funcId);case 2:if(s=n.sent,s&&s.ok){n.next=5;break}return n.abrupt("return");case 5:for(c in r=a.T.formatURL(t,{baseURL:!0,params:{id:e.id}}),i={},e.funcCallKwargsJSON)e.funcCallKwargsJSON.hasOwnProperty(c)&&a.common.isFuncArgumentPlaceholder(e.funcCallKwargsJSON[c])&&(i[c]=e.funcCallKwargsJSON[c]);l={kwargs:i},u=s.data.kwargsJSON,a.$refs.apiExampleDialog.update(r,l,u);case 11:case"end":return n.stop()}}),n)})))()},runCrontabTask:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.T.confirm(t.$t("Are you sure you want to run the Crontab Config manually?"));case 2:if(a.sent){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,t.T.callAPI("post","/api/v1/cron/:id",{params:{id:e.id},alert:{okMessage:t.$t("Crontab Config Task sent")}});case 6:a.sent;case 7:case"end":return a.stop()}}),a)})))()}},computed:{highlightedFuncId:function(){switch(this.$route.name){case"code-editor":case"code-viewer":return this.$store.state.Editor_selectedItemId;default:return null}}},props:{},data:function(){return{loading:!1,data:[],selectFilterText:"",selectOptions:[],selectShowOptions:[],scriptSetMap:{},scriptMap:{},funcMap:{},expandedNodeMap:{},defaultExpandedNodeKeys:[],showRelEntity:!1,showRelEntityData:!1,relEntityTarget:"",relEntityFunc:{},relEntities:{authLinks:[],crontabConfigs:[],batches:[]}}},created:function(){this.loadData()}},U=B,V=(a("2c5b"),a("b88a")),H=a("2d84"),K=a("b62a"),W=a("4f7b"),z=Object(f["a"])(U,r,i,!1,null,"a32dbc6e",null);"function"===typeof V["default"]&&Object(V["default"])(z),"function"===typeof H["default"]&&Object(H["default"])(z),"function"===typeof K["default"]&&Object(K["default"])(z),"function"===typeof W["default"]&&Object(W["default"])(z);var G=z.exports,Q=function(){var e=this,t=e._self._c;return t("div",{staticClass:"aside-inner-content",attrs:{id:"aside-connector-content"}},[t("div",{staticClass:"jump-to-select-wrap"},[t("el-select",{staticClass:"jump-to-select",attrs:{placeholder:e.$t("Jump to..."),"no-data-text":e.$t("No Data"),size:"small",clearable:"",filterable:"","filter-method":e.T.debounce(e.doFilter)},model:{value:e.selectFilterText,callback:function(t){e.selectFilterText=t},expression:"selectFilterText"}},e._l(e.selectShowOptions,(function(a){return t("el-option",{key:a.id,attrs:{label:a.label,value:a.id}},[t("span",{staticClass:"select-item-name"},[t("el-tag",{staticClass:"aside-tree-node-tag",attrs:{type:e.C.CONNECTOR_MAP.get(a.connectorType).tagType,size:"mini"}},[e._v(e._s(e.C.CONNECTOR_MAP.get(a.connectorType).name))]),e._v("\n          "+e._s(a.label)+"\n        ")],1),e._v(" "),t("code",{staticClass:"select-item-id code-font"},[e._v("ID: "+e._s(a.id))])])})),1)],1),e._v(" "),t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",staticClass:"aside-tree",attrs:{data:e.data,"highlight-current":!0,indent:10,"node-key":"id"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.node,s=a.data;return t("span",{staticClass:"aside-tree-node",attrs:{"entry-id":s.id},on:{click:function(t){return e.openEntity(s)}}},[t("el-popover",{attrs:{placement:"right-start",trigger:"hover","popper-class":"aside-tip",disabled:!s.id},model:{value:s.showPopover,callback:function(t){e.$set(s,"showPopover",t)},expression:"data.showPopover"}},[t("div",{staticClass:"aside-item",attrs:{slot:"reference"},slot:"reference"},[t("span",{class:{"text-watch":s.isBuiltin,"text-bad":s.isPinned}},["refresh"===s.type?t("el-link",{attrs:{type:"primary"}},[t("i",{staticClass:"fa fa-fw fa-refresh"}),e._v(" "+e._s(e.$t("Refresh"))+"\n            ")]):"addConnector"===s.type?t("el-link",{attrs:{type:"primary"}},[t("i",{staticClass:"fa fa-fw fa-plus"}),e._v(" "+e._s(e.$t("Add Connector"))+"\n            ")]):t("div",[t("el-tag",{staticClass:"aside-tree-node-tag",attrs:{type:e.C.CONNECTOR_MAP.get(s.connectorType).tagType,size:"mini"}},[e._v(e._s(e.C.CONNECTOR_MAP.get(s.connectorType).name))]),e._v(" "),s.isBuiltin?t("el-tag",{attrs:{effect:"dark",type:"warning",size:"mini"}},[e._v(e._s(e.$t("Built-in")))]):e._e(),e._v(" "),t("span",[e._v(e._s(n.label))])],1)],1),e._v(" "),t("div",[t("el-tooltip",{attrs:{effect:"dark",content:e.$t("Pinned"),placement:"top",enterable:!1}},[t("i",{staticClass:"fa fa-fw text-bad",class:[s.isPinned?"fa-thumb-tack":""]})])],1)]),e._v(" "),t("div",{staticClass:"aside-tree-node-description"},[t("div",[t("el-tag",{staticClass:"aside-tree-node-tag-title",attrs:{type:e.C.CONNECTOR_MAP.get(s.connectorType).tagType,size:"mini"}},[e._v(e._s(e.C.CONNECTOR_MAP.get(s.connectorType).name))])],1),e._v(" "),t("span",{staticClass:"text-info"},[e._v("ID")]),e._v("\n           "),t("code",{staticClass:"text-main"},[e._v(e._s(s.id))]),e._v(" "),t("CopyButton",{attrs:{content:s.id}}),e._v(" "),s.description?t("pre",[e._v(e._s(s.description))]):e._e()],1),e._v(" "),s.sampleCode?[t("div",{staticClass:"aside-tree-node-sample-code"},[t("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Example")))]),e._v(" "),t("CopyButton",{attrs:{content:s.sampleCode}}),e._v(" "),t("pre",[e._v(e._s(s.sampleCode))])],1)]:e._e(),e._v(" "),t("br"),e._v(" "),t("el-button-group",[e.C.CONNECTOR_MAP.get(s.connectorType).debugSupported?t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.showSimpleDebugWindow(s)}}},[t("i",{staticClass:"fa fa-fw fa-window-restore"}),e._v("\n            "+e._s(e.$t("Simple Debug"))+"\n          ")]):e._e(),e._v(" "),t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.openEntity(s,"setup")}}},[t("i",{staticClass:"fa fa-fw",class:[s.isBuiltin?"fa-search":"fa-wrench"]}),e._v("\n            "+e._s(s.isBuiltin?e.$t("View"):e.$t("Setup"))+"\n          ")])],1),e._v(" "),t("el-button-group",[t("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],class:s.isPinned?"aside-on-button":"",attrs:{size:"small"},on:{click:function(t){return e.pinData(s.type,s.id,!s.isPinned)}}},[t("i",{staticClass:"fa fa-fw",class:[s.isPinned?"fa-thumb-tack fa-rotate-270":"fa-thumb-tack"]}),e._v("\n            "+e._s(s.isPinned?e.$t("Unpin"):e.$t("Pin"))+"\n          ")])],1),e._v(" "),t("el-button-group",[t("el-button",{staticClass:"danger-button",attrs:{size:"small"},on:{click:function(t){return e.deleteEntity(s)}}},[t("i",{staticClass:"fa fa-fw fa-times"}),e._v("\n            "+e._s(e.$t("Delete"))+"\n          ")])],1),e._v(" "),s.connectorType?t("div",{staticClass:"goto-links"},[e.C.CONNECTOR_MAP.get(s.connectorType).configFields.topicHandlers||"guance"===s.connectorType?t("el-link",{on:{click:function(t){return e.common.goToTaskRecord({origin:"connector",originId:s.id})}}},[t("i",{staticClass:"fa fa-fw fa-info-circle"}),e._v("\n            "+e._s(e.$t("Go to Recent Task Record"))+"\n          ")]):e._e()],1):e._e()],2)],1)}}])}),e._v(" "),t("SimpleDebugWindow",{ref:"simpleDebugWindow"}),e._v(" "),t("ConnectorSetup",{ref:"setup"})],1)},Y=[],X=(a("4de4"),function(){var e=this,t=e._self._c;return e.show&&e.connector?t("div",{staticClass:"simple-debug-window",style:{top:e.showPosition.top+"px",left:e.showPosition.left+"px"},attrs:{id:"simpleDebugWindow"}},[t("div",{staticClass:"simple-debug-header",on:{mousedown:e.startDrag}},[t("span",{staticClass:"simple-debug-title"},[t("el-tag",{attrs:{type:e.CONNECTOR_DEBUGGER_META_MAP[e.connector.type].tagType,size:"mini"}},[t("span",[e._v(e._s(e.CONNECTOR_DEBUGGER_META_MAP[e.connector.type].name))])]),e._v(" "),t("span",{class:{builtin:e.connector.isBuiltin}},[e._v(e._s(e.connector.title||e.connector.id))])],1),e._v(" "),t("el-link",{staticClass:"simple-debug-close",on:{click:function(t){return t.stopPropagation(),e.hideWindow()}},nativeOn:{mousedown:function(e){e.stopPropagation()}}},[t("i",{staticClass:"fa fa-times"}),e._v(" "+e._s(e.$t("Close")))])],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isDragging,expression:"isDragging"}],staticClass:"simple-debug-dragging-cover"},[t("span",{staticClass:"simple-debug-dragging-cover-tip"},[e._v(e._s(e.$t("Moving...")))])]),e._v(" "),t("el-tabs",{class:{"simple-debug-window-fade":e.isDragging},attrs:{"tab-position":"bottom",type:"border-card"},model:{value:e.selectedTab,callback:function(t){e.selectedTab=t},expression:"selectedTab"}},[e.CONNECTOR_DEBUGGER_META_MAP[e.connector.type].supportBrowser?t("el-tab-pane",{attrs:{label:e.$t("Schema Browser"),name:"browser"}},[t("div",{staticClass:"simple-debug-browser"},[e.browserCascaderErrorMessage?t("el-link",{attrs:{type:"danger"}},[e._v("\n          "+e._s(e.$t("Cannot connect to this Connector, check the configs and try again."))+"\n          "),t("br"),e._v(e._s(e.$t("Error Message"))+e._s(e.$t(":"))+"\n          "),t("pre",{staticClass:"simple-debug-browser-error"},[e._v(e._s(e.browserCascaderErrorMessage))])]):t("el-form",[t("el-form-item",[t("el-cascader-panel",{ref:"browserCascader",staticClass:"simple-debug-browser-cascader",attrs:{placeholder:"--",size:"mini",props:e.browserCascaderProps},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.node,s=a.data;return t("div",{staticClass:"simple-debug-browser-cascader-item",on:{click:function(t){return e.updateCodeExample(n)}}},[s.showDefaultTag?t("el-tag",{attrs:{plain:"",size:"mini"}},[e._v(e._s(e.$t("Default")))]):e._e(),e._v(" "),s.dbTag?t("el-tag",{attrs:{plain:"",type:s.dbTag.type,size:"mini"}},[e._v(e._s(s.dbTag.title))]):e._e(),e._v(" "),t("span",{class:{"text-bad":s.isError}},[e._v(e._s(s.label||s.value))]),e._v(" "),s.itemCount?t("span",[e._v(" ("+e._s(s.itemCount)+") ")]):e._e()],1)}}],null,!1,2840819864)})],1),e._v(" "),t("el-form-item",[t("pre",{staticClass:"simple-debug-browser-example-code",attrs:{rows:"2"}},[e._v(e._s(e.browserCascaderExampleCode))]),e._v(" "),t("div",{staticClass:"simple-debug-browser-example-code-edit"},[t("i",{staticClass:"fa fa-fw fa-terminal text-main"})]),e._v(" "),t("CopyButton",{directives:[{name:"show",rawName:"v-show",value:e.browserCascaderExampleCode,expression:"browserCascaderExampleCode"}],staticClass:"simple-debug-browser-example-code-copy",attrs:{content:e.browserCascaderExampleCode}})],1)],1)],1)]):e._e(),e._v(" "),e.CONNECTOR_DEBUGGER_META_MAP[e.connector.type].supportDebugger?t("el-tab-pane",{attrs:{label:e.CONNECTOR_DEBUGGER_META_MAP[e.connector.type].debuggerName,name:"debugger"}},[t("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:e.isQuerying,expression:"isQuerying",modifiers:{lock:!0}}],staticClass:"simple-debug-sql",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-text":e.$t("Query is running. It waits up to 5 seconds, You can refresh the page when it not response for a long time.")}},[t("el-form",[t("el-form-item",[t("el-input",{attrs:{type:"textarea",resize:"none",rows:"3"},model:{value:e.latestQueryOptionsMap[e.connector.id].queryStatement,callback:function(t){e.$set(e.latestQueryOptionsMap[e.connector.id],"queryStatement",t)},expression:"latestQueryOptionsMap[connector.id].queryStatement"}})],1),e._v(" "),t("el-form-item",[e.CONNECTOR_DEBUGGER_META_MAP[e.connector.type].supportDatabase?[t("span",[e._v(e._s(e.$t("Database")))]),e._v(" "),e.connector.configJSON.database?t("el-input",{staticClass:"simple-debug-database",attrs:{size:"mini",disabled:!0,value:e.connector.configJSON.database}}):t("el-input",{staticClass:"simple-debug-database",attrs:{size:"mini"},model:{value:e.latestQueryOptionsMap[e.connector.id].database,callback:function(t){e.$set(e.latestQueryOptionsMap[e.connector.id],"database",t)},expression:"latestQueryOptionsMap[connector.id].database"}})]:e._e(),e._v(" "),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return t.stopPropagation(),e.queryConnector(e.latestQueryOptionsMap[e.connector.id])}}},[t("i",{staticClass:"fa fa-fw fa-play"}),e._v(" "+e._s(e.$t("Run"))+"\n            ")]),e._v(" "),e.latestQueryResultMap[e.connector.id]&&e.latestQueryResultMap[e.connector.id].ok?t("div",{staticClass:"simple-debug-copy-content"},[t("CopyButton",{attrs:{tipPlacement:"bottom",title:e.$t("Query"),content:e.latestQueryOptionsMap[e.connector.id].queryStatement}}),e._v("\n               \n              "),t("CopyButton",{attrs:{tipPlacement:"bottom",title:e.$t("Code"),content:e.latestQueryOptionsMap[e.connector.id].queryCode}}),e._v("\n               \n              "),t("CopyButton",{attrs:{tipPlacement:"bottom",title:e.$t("Result"),content:e.latestQueryResultMap[e.connector.id].data}})],1):e._e()],2),e._v(" "),t("el-form-item",[t("pre",{staticClass:"simple-debug-result",class:{"simple-debug-query-failed":e.latestQueryResultMap[e.connector.id]&&!e.latestQueryResultMap[e.connector.id].ok},attrs:{rows:"5"}},[e._v(e._s(e.latestQueryResultMap[e.connector.id]&&e.latestQueryResultMap[e.connector.id].data||e.$t("Results will be shown here...")))])])],1)],1)]):e._e()],1)],1):e._e()}),Z=[],ee=(a("5319"),a("4c53"),a("ddb0"),a("aa09")),te=a.n(ee),ae={name:"SimpleDebugWindow",components:{},watch:{connector:function(e){this.$refs.browserCascader&&(this.$refs.browserCascader.clearCheckedNodes(),this.$refs.browserCascader.initStore(),this.browserCascaderExampleCode="")}},methods:{showWindow:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n,s,r,i,c;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.browserCascaderErrorMessage="",n=t.CONNECTOR_DEBUGGER_META_MAP[e.type],n.supportDebugger&&(s=n.command,r=n.exampleCommandArgs,t.latestQueryOptionsMap[e.id]||(i="helper = DFF.CONN('".concat(e.id,"')"),c="helper.".concat(s,"('").concat(r.join("', '"),"')"),t.$set(t.latestQueryOptionsMap,e.id,{database:e.database,queryStatement:r.join(" "),queryCode:"".concat(i,"\n").concat(c)}))),t.connector=e,t.show=!0,n.supportBrowser?t.selectedTab="browser":n.supportDebugger&&(t.selectedTab="debugger"),setImmediate((function(){t.fixShowPosition()}));case 7:case"end":return a.stop()}}),a)})))()},hideWindow:function(){this.show=!1},startDrag:function(e){var t=this,a=document.getElementById("simpleDebugWindow"),n=e.screenX-a.offsetLeft,s=e.screenY-a.offsetTop;this.isDragging=!0,document.onmousemove=function(r){var i=(r||e).screenX-n,o=(r||e).screenY-s,c=window.innerWidth-a.offsetWidth-10,l=window.innerHeight-a.offsetHeight-10;i<0&&(i=0),o<0&&(o=0),i>c&&(i=c),o>l&&(o=l);var u={left:i,top:o};t.dragPosition=u,t.$store.commit("updateAsideConnector_simpleDebugWindowPosition",t.dragPosition),t.fixShowPosition()},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null,t.isDragging=!1}},fixShowPosition:function(){var e={top:this.dragPosition.top,left:this.dragPosition.left},t=document.getElementById("simpleDebugWindow");if(t){var a=window.innerWidth-t.offsetWidth-10,n=window.innerHeight-t.offsetHeight-10;e.left<0&&(e.left=0),e.top<0&&(e.top=0),e.left>a&&(e.left=a),e.top>n&&(e.top=n),this.showPosition=e}},queryConnector:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n,s,r,i,c,l,u,d;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isQuerying=!0,a.next=3,t.T.callAPI("post","/api/v1/connectors/:id/do/query",{params:{id:t.connector.id},body:{database:e.database,queryStatement:e.queryStatement,returnType:"repr"},alert:{muteError:!0},extraOptions:{noCountProcessing:!0}});case 3:if(n=a.sent,s={ok:n.ok},!n.ok){a.next=33;break}s.data="# pprint.pprint(db_res)\n"+n.data,r=t.CONNECTOR_DEBUGGER_META_MAP[t.connector.type].command,i=null,c="",l="",a.t0=t.connector.type,a.next="influxdb"===a.t0?14:"mysql"===a.t0||"clickhouse"===a.t0||"oracle"===a.t0||"sqlserver"===a.t0||"postgresql"===a.t0?17:"redis"===a.t0||"memcached"===a.t0?20:"elasticsearch"===a.t0?25:28;break;case 14:return i=[e.queryStatement],l="if len(db_res.get('series', [])) > 0:\n    for d in db_res['series'][0]['values']:\n        # Your code here...\n        pass",a.abrupt("break",28);case 17:return i=[e.queryStatement],l="for d in db_res:\n    # Your code here...\n    pass",a.abrupt("break",28);case 20:return i=te()(e.queryStatement),c=n.data+"",t.validator.isInt(c)?l="db_res = int(db_res)\n":t.validator.isFloat(c)&&(l="db_res = float(db_res)\n"),l+="\n# Your code...",a.abrupt("break",28);case 25:return i=[e.queryStatement],l+="\n# Your code...",a.abrupt("break",28);case 28:u="helper = DFF.CONN('".concat(t.connector.id,"')"),d="db_res = helper.".concat(r,"('").concat((i||[]).join("', '"),"')"),t.$set(t.latestQueryOptionsMap,t.connector.id,{database:e.database,queryStatement:e.queryStatement,queryCode:"".concat(u,"\n").concat(d,"\n").concat(l)}),a.next=37;break;case 33:s.data=t.$t("Query Failed"),n.message&&(s.data+="\n\n"+n.message),n.detail&&n.detail.error&&(s.data+="\n\n"+n.detail.error),n.detail&&n.detail.message&&(s.data+="\n\n"+n.detail.message);case 37:t.$set(t.latestQueryResultMap,t.connector.id,s),t.isQuerying=!1;case 39:case"end":return a.stop()}}),a)})))()},browserDataLoader:function(e,t){var a=this;return Object(c["a"])(Object(o["a"])().mark((function n(){var s,r,i,c,l,u,d,p,f,m,b,h,g,_;return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.isLeaf){n.next=2;break}return n.abrupt("return",t());case 2:if(s=a.CONNECTOR_DEBUGGER_META_MAP[a.connector.type],s.browsers){n.next=5;break}return n.abrupt("return",t());case 5:if(r=[],e.root){n.next=18;break}i=e,c=0;case 9:if(!(c<10)){n.next=17;break}if(i&&!i.root&&i.data){n.next=12;break}return n.abrupt("break",17);case 12:r.push(i.data),i=i.parent;case 14:c++,n.next=9;break;case 17:r.reverse();case 18:l=s.browsers,u=0;case 20:if(!(u<e.level)){n.next=38;break}n.t0=l.type,n.next="static"===n.t0?24:"query"===n.t0||"api"===n.t0?33:35;break;case 24:d=0;case 25:if(!(d<l.data.length)){n.next=32;break}if(l.data[d].value!==r[u].value){n.next=29;break}return l=l.data[d].sub,n.abrupt("break",32);case 29:d++,n.next=25;break;case 32:return n.abrupt("break",35);case 33:return l=l.sub,n.abrupt("break",35);case 35:u++,n.next=20;break;case 38:p=function(e,t,a){return e?(r.forEach((function(t){t.ref&&t.value&&(e=e.replace("{".concat(t.ref,"}"),t.value))})),t&&a&&(e=e.replace("{".concat(t,"}"),a)),e):null},f=null,m=[],n.t1=l.type,n.next="static"===n.t1?44:"query"===n.t1?46:"api"===n.t1?86:97;break;case 44:return l.data.forEach((function(e){m.push({label:e.label,value:e.value,ref:e.ref,leaf:!e.sub,example:p(e.example,e.ref,e.value),defaultExample:p(e.defaultExample,e.ref,e.value)})})),n.abrupt("break",97);case 46:return b=p(l.query),n.next=49,a.T.callAPI("post","/api/v1/connectors/:id/do/query",{params:{id:a.connector.id},body:{database:a.connector.configJSON.database,queryStatement:b,returnType:"json"},alert:{muteError:!0},extraOptions:{noCountProcessing:!0}});case 49:if(f=n.sent,f.ok){n.next=53;break}return e.root?a.browserCascaderErrorMessage=f.message:t([{label:a.$t("Query Failed"),value:null,leaf:!0,disabled:!0,isError:!0}]),n.abrupt("return");case 53:n.t2=a.connector.type,n.next="influxdb"===n.t2?56:"mysql"===n.t2?58:"redis"===n.t2?60:"clickhouse"===n.t2?62:"oracle"===n.t2?64:"sqlserver"===n.t2?66:"postgresql"===n.t2?68:"mongodb"===n.t2?70:"elasticsearch"===n.t2?72:84;break;case 56:return f.data.series&&f.data.series.length>0&&f.data.series[0].values.forEach((function(e){m.push({value:e[0]})})),n.abrupt("break",85);case 58:return f.data.forEach((function(e){switch(l.ref){case"table":m.push({value:Object.values(e)[0]});break;case"field":m.push({value:e["Field"]});break;default:break}})),n.abrupt("break",85);case 60:return f.data[1].forEach((function(e){m.push({value:e})})),n.abrupt("break",85);case 62:return f.data.forEach((function(e){switch(l.ref){case"database":case"table":m.push({value:e["name"]});break;case"field":m.push({value:e["name"]});break;default:break}})),n.abrupt("break",85);case 64:return f.data.forEach((function(e){switch(l.ref){case"table":m.push({value:e["TABLE_NAME"]});break;case"field":m.push({value:e["COLUMN_NAME"]});break;default:break}})),n.abrupt("break",85);case 66:return f.data.forEach((function(e){switch(l.ref){case"table":case"field":m.push({value:e["NAME"]});break;default:break}})),n.abrupt("break",85);case 68:return f.data.forEach((function(e){switch(l.ref){case"schema":m.push({value:e["schemaname"]});break;case"table":m.push({value:e["tablename"]});break;case"field":m.push({value:e["attname"]});break;default:break}})),n.abrupt("break",85);case 70:return f.data.forEach((function(e){switch(l.ref){case"database":case"collection":m.push({value:e});break}})),n.abrupt("break",85);case 72:n.t3=l.ref,n.next="index"===n.t3?75:"field"===n.t3?77:82;break;case 75:return f.data.forEach((function(e){m.push({value:e["index"]})})),n.abrupt("break",83);case 77:h=[];try{h=Object.keys(Object.values(f.data)[0]["mappings"]["properties"])}catch(o){}return h.forEach((function(e){m.push({value:e})})),n.abrupt("break",83);case 82:return n.abrupt("break",83);case 83:return n.abrupt("break",85);case 84:return n.abrupt("break",85);case 85:return n.abrupt("break",97);case 86:return n.next=88,a.T.callAPI_get(l.api,{extraOptions:{noCountProcessing:!0}});case 88:if(f=n.sent,f.ok){n.next=92;break}return e.root?a.browserCascaderErrorMessage=f.message:t([{label:a.$t("Query Failed"),value:null,leaf:!0,disabled:!0,isError:!0}]),n.abrupt("return");case 92:n.t4=a.connector.type,n.next=95;break;case 95:return n.abrupt("break",96);case 96:return n.abrupt("break",97);case 97:n.t5=l.type,n.next="api"===n.t5||"query"===n.t5?100:(n.t5,102);break;case 100:return m.forEach((function(e){e.ref=l.ref,e.leaf=!l.sub,e.example=p(l.example,e.ref,e.value),e.defaultExample=p(l.defaultExample,e.ref,e.value)})),n.abrupt("break",103);case 102:return n.abrupt("break",103);case 103:return m.forEach((function(e){e.isDefaultDatabase="database"===e.ref&&e.value===a.connector.configJSON.database,e.isDefaultDatabase||r.forEach((function(t){"database"===t.ref&&t.value===a.connector.configJSON.database&&(e.isDefaultDatabase=!0)})),e.isDefaultDatabase&&"database"===e.ref&&(e.showDefaultTag=!0)})),g=m.length,_=l.title||"",_&&g>0&&(_="".concat(_," (").concat(g,")")),m.unshift({label:_,value:null,leaf:!0,disabled:!0,isTitle:!0}),e.root||a.$set(e.data,"itemCount",g),n.abrupt("return",t(m));case 110:case"end":return n.stop()}}),n)})))()},updateCodeExample:function(e){this.browserCascaderExampleCode=e.data.isDefaultDatabase&&e.data.defaultExample||e.data.example}},computed:{CONNECTOR_DEBUGGER_META_MAP:function(){for(var e={title:this.$t("Keys (a part of)"),type:"query",query:'SCAN 0 MATCH "{pattern}" COUNT 100',example:'TYPE "{key}"',ref:"key"},t={title:this.$t("Initials"),type:"static",data:[]},a=[],n="a".charCodeAt();n<="z".charCodeAt();n++){var s=String.fromCharCode(n);t.data.push({label:"".concat(s).concat(s.toUpperCase()),value:"[".concat(s.toUpperCase()).concat(s,"]*"),example:'SCAN 0 MATCH "{pattern}" COUNT 100',ref:"pattern",sub:e}),a.push("".concat(s.toUpperCase()).concat(s))}return t.data.push({label:this.$t("Other"),value:"[^".concat(a.join(),"]*"),example:'SCAN 0 MATCH "{pattern}" COUNT 100',ref:"pattern",sub:e}),{df_dataway:{name:this.$t("Guance DataWay"),supportDebugger:!1,supportBrowser:!1,supportDatabase:!1,tagType:"info"},influxdb:{name:"InfluxDB",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:null,command:"query",exampleCommandArgs:["SELECT * FROM some_measurement LIMIT 10"],debuggerName:this.$t("SQL Debugger"),browsers:{title:this.$t("Databases"),type:"query",query:"SHOW DATABASES",example:'SHOW MEASUREMENTS ON "{database}"',defaultExample:"SHOW MEASUREMENTS",ref:"database",sub:{title:this.$t("Data"),type:"static",data:[{value:this.$t("Measurements"),example:'SHOW MEASUREMENTS ON "{database}"',defaultExample:"SHOW MEASUREMENTS",sub:{title:this.$t("Measurements"),type:"query",query:'SHOW MEASUREMENTS ON "{database}"',example:'SELECT * FROM "{database}".."{measurement}"',defaultExample:'SELECT * FROM "{measurement}"',ref:"measurement",sub:{type:"static",data:[{value:this.$t("Tags"),example:'SHOW TAG KEYS ON "{database}" FROM "{measurement}"',defaultExample:'SHOW TAG KEYS FROM "{measurement}"',sub:{title:this.$t("Tags"),type:"query",query:'SHOW TAG KEYS ON "{database}" FROM "{measurement}"',example:'SELECT * FROM "{database}".."{measurement}" WHERE "{tagKey}" = \'tagValue\'',defaultExample:'SELECT * FROM "{measurement}" WHERE "{tagKey}" = \'tagValue\'',ref:"tagKey"}},{value:this.$t("Fields"),example:'SHOW FIELD KEYS ON "{database}" FROM "{measurement}"',defaultExample:'SHOW FIELD KEYS FROM "{measurement}"',sub:{title:this.$t("Fields"),type:"query",query:'SHOW FIELD KEYS ON "{database}" FROM "{measurement}"',example:'SELECT "{fieldKey}" FROM "{database}".."{measurement}"',defaultExample:'SELECT "{fieldKey}" FROM "{measurement}"',ref:"fieldKey"}}]}}},{value:this.$t("Retention Policies"),example:'SHOW RETENTION POLICIES ON "{database}"',defaultExample:"SHOW RETENTION POLICIES",sub:{title:this.$t("Retention Policies"),type:"query",query:'SHOW RETENTION POLICIES ON "{database}"',example:'SELECT * FROM "{database}"."{retentionPolicy}"."measurement"',ref:"retentionPolicy"}}]}}},mysql:{name:"MySQL",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"success",command:"query",exampleCommandArgs:["SELECT * FROM `some_table` LIMIT 10"],debuggerName:this.$t("SQL Debugger"),browsers:{title:this.$t("Tables"),type:"query",query:"SHOW TABLES",example:"SELECT * FROM `{table}`",ref:"table",sub:{title:this.$t("Fields"),type:"query",query:"SHOW FULL COLUMNS FROM `{table}`",example:"SELECT `{field}` FROM `{table}`",ref:"field"}}},redis:{name:"Redis",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"danger",command:"query",exampleCommandArgs:["SCAN","0","COUNT","10"],debuggerName:this.$t("Command Debugger"),browsers:t},memcached:{name:"Memcached",supportDebugger:!0,supportBrowser:!1,supportDatabase:!1,tagType:"success",command:"query",exampleCommandArgs:["GET","key"],debuggerName:this.$t("Command Debugger")},clickhouse:{name:"ClickHouse",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"warning",command:"query",exampleCommandArgs:["SELECT * FROM some_table LIMIT 10"],debuggerName:this.$t("SQL Debugger"),browsers:{title:this.$t("Databases"),type:"query",query:"SHOW DATABASES",example:"SHOW TABLES FROM `{database}`",defaultExample:"SHOW TABLES",ref:"database",sub:{title:this.$t("Tables"),type:"query",query:"SHOW TABLES FROM `{database}`",example:"SELECT * FROM `{database}`.`{table}`",defaultExample:"SELECT * FROM `{table}`",ref:"table",sub:{title:this.$t("Fields"),type:"query",query:"DESCRIBE TABLE `{database}`.`{table}`",example:"SELECT `{field}` FROM `{database}`.`{table}`",defaultExample:"SELECT `{field}` FROM `{table}`",ref:"field"}}}},oracle:{name:"Oracle",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"danger",command:"query",exampleCommandArgs:["SELECT * FROM SOME_TABLE WHERE ROWNUM <= 10"],debuggerName:this.$t("SQL Debugger"),browsers:{title:this.$t("Tables"),type:"query",query:"SELECT TABLE_NAME FROM USER_TABLES",example:"SELECT * FROM {table}",ref:"table",sub:{title:this.$t("Fields"),type:"query",query:"SELECT COLUMN_NAME FROM USER_TAB_COLUMNS WHERE TABLE_NAME='{table}'",example:"SELECT {field} FROM {table}",ref:"field"}}},sqlserver:{name:"SQLServer",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"info",command:"query",exampleCommandArgs:["SELECT TOP 10 * FROM some_table"],debuggerName:this.$t("SQL Debugger"),browsers:{title:this.$t("Tables"),type:"query",query:"SELECT [NAME] FROM [sys].[TABLES]",example:"SELECT * FROM [{table}]",ref:"table",sub:{title:this.$t("Fields"),type:"query",query:"SELECT NAME FROM SYSCOLUMNS WHERE ID = object_id('{table}')",example:"SELECT [{field}] FROM [{table}]",ref:"field"}}},postgresql:{name:"PostgreSQL",supportDebugger:!0,supportBrowser:!0,supportDatabase:!0,tagType:"info",command:"query",exampleCommandArgs:["SELECT * FROM some_table LIMIT 10"],debuggerName:this.$t("SQL Debugger"),browsers:{title:"Schema",type:"query",query:'SELECT DISTINCT "schemaname" FROM "pg_tables" GROUP BY "schemaname" ORDER BY "schemaname"',example:'SELECT "tablename" FROM "pg_tables" WHERE "schemaname" = \'public\'',defaultExample:'SELECT "tablename" FROM "pg_tables" WHERE "schemaname" = \'public\'',ref:"schema",sub:{title:this.$t("Tables"),type:"query",query:'SELECT "tablename" FROM "pg_tables" WHERE "schemaname" = \'{schema}\'',example:'SELECT * FROM "{schema}"."{table}"',defaultExample:'SELECT * FROM "{table}"',ref:"table",sub:{title:this.$t("Fields"),type:"query",query:'SELECT "A"."attname" FROM "pg_class" AS "C", "pg_attribute" AS "A" WHERE "A"."attrelid" = "C"."oid" AND "A"."attnum" > 0 AND "C"."relname" = \'{table}\'',example:'SELECT "{field}" FROM "{schema}"."{table}"',defaultExample:'SELECT "{field}" FROM {table}"',ref:"field"}}}},mongodb:{name:"mongoDB",supportDebugger:!1,supportBrowser:!0,supportDatabase:!1,tagType:"success",command:"query",exampleCommandArgs:["GET /_search?q=field:value"],debuggerName:this.$t("URI Query Debugger"),browsers:{title:this.$t("Databases"),type:"query",query:'{"method": "list_database_names"}',example:"# Python\ndata = helper.db('{database}')",defaultExample:"# Python\ndata = helper.db()",ref:"database",sub:{title:this.$t("Collections"),type:"query",query:'{"method": "list_collection_names", "db_name": "{database}"}',example:"# Python\ndata = helper.db('{database}')['{collection}'].find_one()",defaultExample:"# Python\ndata = helper.db()['{collection}'].find_one()",ref:"collection"}}},elasticsearch:{name:"ES",supportDebugger:!0,supportBrowser:!0,supportDatabase:!1,tagType:"success",command:"query",exampleCommandArgs:["GET /_search?q=field:value"],debuggerName:this.$t("URI Query Debugger"),browsers:{title:this.$t("Indices"),type:"query",query:"GET /_cat/indices",example:"GET /{index}/_search",defaultExample:"GET /{index}/_search",ref:"index",sub:{title:this.$t("Fields"),type:"query",query:"GET /{index}/_mapping",example:"GET /{index}/_search?q={field}:something",defaultExample:"GET /{index}/_search?q={field}:something",ref:"field"}}}}}},props:{},data:function(){var e=this.$store.state.asideConnector_simpleDebugWindowPosition||{left:10,bottom:10};return{show:!1,isQuerying:!1,selectedTab:"browser",showPosition:this.T.jsonCopy(e),dragPosition:this.T.jsonCopy(e),isDragging:!1,connector:{},latestQueryOptionsMap:{},latestQueryResultMap:{},browserCascaderProps:{lazy:!0,lazyLoad:this.browserDataLoader},browserCascaderExampleCode:"",browserCascaderErrorMessage:""}},mounted:function(){window.addEventListener("resize",this.fixShowPosition,!1)},beforeDestroy:function(){window.removeEventListener("resize",this.fixShowPosition,!1)}},ne=ae,se=(a("474c"),a("64f0"),a("f96c")),re=a("ce30"),ie=a("45a1"),oe=Object(f["a"])(ne,X,Z,!1,null,"e873f9f8",null);"function"===typeof se["default"]&&Object(se["default"])(oe),"function"===typeof re["default"]&&Object(re["default"])(oe),"function"===typeof ie["default"]&&Object(ie["default"])(oe);var ce=oe.exports,le=a("ade3"),ue=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"ScriptSetSetup",visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"750px"},on:{"update:visible":function(t){e.show=t}}},[t("template",{slot:"title"},[e._v("\n    "+e._s(e.pageTitle)+" "),t("code",{staticClass:"text-main"},[e._v(e._s(e.data.title||e.data.id))])]),e._v(" "),t("el-container",{attrs:{direction:"vertical"}},[t("el-main",[t("div",{staticClass:"setup-form"},[t("el-form",{ref:"form",attrs:{"label-width":"135px",model:e.form,disabled:e.data.isBuiltin,rules:e.formRules}},[t("el-form-item",{staticStyle:{height:"0",overflow:"hidden"}},[t("input",{attrs:{tabindex:"-1",type:"text",name:"username"}}),e._v(" "),t("input",{attrs:{tabindex:"-1",type:"password",name:"password"}})]),e._v(" "),e.data.isBuiltin?t("el-form-item",[t("InfoBlock",{attrs:{type:"error",title:e.$t("This is a built-in Connector, please contact the admin to change the config")}})],1):e._e(),e._v(" "),"add"===e.pageMode?t("el-form-item",{attrs:{label:e.$t("Type"),prop:"type"}},[t("el-select",{attrs:{filterable:"","filter-method":e.T.debounce(e.doFilter)},on:{change:e.switchType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.selectShowOptions,(function(e){return t("el-option",{key:e.key,attrs:{label:e.fullName,value:e.key}})})),1)],1):t("el-form-item",{attrs:{label:e.$t("Type")}},[t("el-select",{attrs:{disabled:!0},model:{value:e.selectedType,callback:function(t){e.selectedType=t},expression:"selectedType"}},[t("el-option",{attrs:{label:e.C.CONNECTOR_MAP.get(e.selectedType).fullName,value:e.selectedType}})],1)],1),e._v(" "),e.selectedType?[e.C.CONNECTOR_MAP.get(e.selectedType).logo?t("el-form-item",[t("el-image",{staticClass:"connector-logo",class:["logo-".concat(e.selectedType)],attrs:{src:e.C.CONNECTOR_MAP.get(e.selectedType).logo}})],1):e._e(),e._v(" "),e.C.CONNECTOR_MAP.get(e.selectedType).tips?t("el-form-item",[t("InfoBlock",{attrs:{type:"info",title:e.C.CONNECTOR_MAP.get(e.selectedType).tips}})],1):e._e(),e._v(" "),e.T.notNothing(e.C.CONNECTOR_MAP.get(e.selectedType).compatibleDBs)?t("el-form-item",{attrs:{label:e.$t("Compatibility")}},e._l(e.C.CONNECTOR_MAP.get(e.selectedType).compatibleDBs,(function(a){return t("el-tag",{key:a,attrs:{type:"info",size:"medium","disable-transitions":!0}},[e._v(e._s(a))])})),1):e._e(),e._v(" "),e.C.CONNECTOR_MAP.get(e.selectedType).links?t("el-form-item",[e.C.CONNECTOR_MAP.get(e.selectedType).links.doc?[t("el-link",{attrs:{href:e.C.CONNECTOR_MAP.get(e.selectedType).links.doc,target:"_blank"}},[t("i",{staticClass:"fa fa-fw fa-external-link"}),e._v("\n                  "+e._s(e.$t("Connector Development Doc"))+"\n                ")]),e._v(" "),t("br")]:e._e(),e._v(" "),e.C.CONNECTOR_MAP.get(e.selectedType).links.pypi?[t("el-link",{attrs:{href:e.C.CONNECTOR_MAP.get(e.selectedType).links.pypi,target:"_blank"}},[t("i",{staticClass:"fa fa-fw fa-external-link"}),e._v("\n                  "+e._s(e.$t("Python SDK used in the Connector"))+"\n                ")]),e._v(" "),t("br")]:e._e(),e._v(" "),e.C.CONNECTOR_MAP.get(e.selectedType).links.npm?[t("el-link",{attrs:{href:e.C.CONNECTOR_MAP.get(e.selectedType).links.npm,target:"_blank"}},[t("i",{staticClass:"fa fa-fw fa-external-link"}),e._v("\n                  "+e._s(e.$t("Node SDK used in the Subscriber"))+"\n                ")]),e._v(" "),t("br")]:e._e()],2):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"ID",prop:"id"}},[t("el-input",{attrs:{disabled:"setup"===e.pageMode,maxlength:"60"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Title")}},[t("el-input",{attrs:{placeholder:e.$t("Optional"),maxlength:"200"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),e._v(" "),"guance"===e.selectedType?t("InfoBlock",{attrs:{type:"info",title:e.$t("This Title will also be displayed in Guance")}}):e._e()],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Description")}},[t("el-input",{attrs:{placeholder:e.$t("Optional"),type:"textarea",resize:"none",autosize:{minRows:2},maxlength:"5000"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),e.hasConfigField(e.selectedType,"guanceNode")?t("el-form-item",{attrs:{label:e.$t("Guance Node"),prop:"configJSON.guanceNode"}},[t("el-select",{on:{change:e.switchGuanceNode},model:{value:e.form.configJSON.guanceNode,callback:function(t){e.$set(e.form.configJSON,"guanceNode",t)},expression:"form.configJSON.guanceNode"}},e._l(e.guanceNodes,(function(a){return t("el-option",{key:a.key,attrs:{label:a["name_".concat(e.$i18n.locale)]||a.name,value:a.key}})})),1),e._v(" "),t("el-link",{attrs:{type:"primary",href:"https://func.guance.com/doc/ui-guide-development-module-guance-node/",target:"_blank"}},[e._v(e._s(e.$t("Cannot find the Guance Node you need?")))])],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"guanceOpenAPIURL")?t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"private"===e.form.configJSON.guanceNode,expression:"form.configJSON.guanceNode === 'private'"}],attrs:{label:e.$t("OpenAPI URL"),prop:"configJSON.guanceOpenAPIURL"}},[t("el-input",{model:{value:e.form.configJSON.guanceOpenAPIURL,callback:function(t){e.$set(e.form.configJSON,"guanceOpenAPIURL",t)},expression:"form.configJSON.guanceOpenAPIURL"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"guanceWebSocketURL")?t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"private"===e.form.configJSON.guanceNode,expression:"form.configJSON.guanceNode === 'private'"}],attrs:{label:e.$t("WebSocket URL"),prop:"configJSON.guanceWebSocketURL"}},[t("el-input",{model:{value:e.form.configJSON.guanceWebSocketURL,callback:function(t){e.$set(e.form.configJSON,"guanceWebSocketURL",t)},expression:"form.configJSON.guanceWebSocketURL"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"guanceOpenWayURL")?t("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"private"===e.form.configJSON.guanceNode,expression:"form.configJSON.guanceNode === 'private'"}],attrs:{label:e.$t("OpenWay URL"),prop:"configJSON.guanceOpenWayURL"}},[t("el-input",{model:{value:e.form.configJSON.guanceOpenWayURL,callback:function(t){e.$set(e.form.configJSON,"guanceOpenWayURL",t)},expression:"form.configJSON.guanceOpenWayURL"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"guanceAPIKeyId")?t("el-form-item",{attrs:{label:e.$t("API Key ID"),prop:"configJSON.guanceAPIKeyId"}},[t("el-input",{model:{value:e.form.configJSON.guanceAPIKeyId,callback:function(t){e.$set(e.form.configJSON,"guanceAPIKeyId",t)},expression:"form.configJSON.guanceAPIKeyId"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"guanceAPIKey")?t("el-form-item",{attrs:{label:e.$t("API Key"),prop:"configJSON.guanceAPIKey"}},[t("el-input",{attrs:{"show-password":""},model:{value:e.form.configJSON.guanceAPIKey,callback:function(t){e.$set(e.form.configJSON,"guanceAPIKey",t)},expression:"form.configJSON.guanceAPIKey"}}),e._v(" "),"setup"===e.pageMode?t("InfoBlock",{attrs:{type:"info",title:e.$t("API Key here is always required")}}):e._e()],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"host")?t("el-form-item",{attrs:{label:e.$t("Host"),prop:"configJSON.host"}},[t("el-input",{on:{blur:e.unpackURL},model:{value:e.form.configJSON.host,callback:function(t){e.$set(e.form.configJSON,"host",t)},expression:"form.configJSON.host"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"port")?t("el-form-item",{attrs:{label:e.$t("Port"),prop:"configJSON.port"}},[t("el-input",{attrs:{min:"0",max:"65535"},model:{value:e.form.configJSON.port,callback:function(t){e.$set(e.form.configJSON,"port",e._n(t))},expression:"form.configJSON.port"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"servers")?t("el-form-item",{attrs:{label:e.$t("Servers"),prop:"configJSON.servers"}},[t("el-input",{attrs:{type:"textarea",resize:"none",autosize:{minRows:2}},model:{value:e.form.configJSON.servers,callback:function(t){e.$set(e.form.configJSON,"servers",t)},expression:"form.configJSON.servers"}}),e._v(" "),t("InfoBlock",{attrs:{type:"info",title:e.$t("Servers to connect (e.g. host1:80,host2:81)")}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"protocol")?t("el-form-item",{attrs:{label:e.$t("Protocol"),prop:"configJSON.protocol"}},[t("el-select",{model:{value:e.form.configJSON.protocol,callback:function(t){e.$set(e.form.configJSON,"protocol",t)},expression:"form.configJSON.protocol"}},[t("el-option",{key:"http",attrs:{label:"HTTP",value:"http"}}),e._v(" "),t("el-option",{key:"https",attrs:{label:"HTTPS",value:"https"}})],1)],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"securityProtocol")?t("el-form-item",{attrs:{label:e.$t("Security Protocol"),prop:"configJSON.securityProtocol"}},[t("el-input",{model:{value:e.form.configJSON.securityProtocol,callback:function(t){e.$set(e.form.configJSON,"securityProtocol",t)},expression:"form.configJSON.securityProtocol"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"saslMechanisms")?t("el-form-item",{attrs:{label:e.$t("SASL Mechanisms"),prop:"configJSON.saslMechanisms"}},[t("el-input",{model:{value:e.form.configJSON.saslMechanisms,callback:function(t){e.$set(e.form.configJSON,"saslMechanisms",t)},expression:"form.configJSON.saslMechanisms"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"source")?t("el-form-item",{attrs:{label:e.$t("Source"),prop:"configJSON.source"}},[t("el-input",{model:{value:e.form.configJSON.source,callback:function(t){e.$set(e.form.configJSON,"source",t)},expression:"form.configJSON.source"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"database")?t("el-form-item",{attrs:{label:e.$t("Database"),prop:"configJSON.database"}},[t("el-input",{model:{value:e.form.configJSON.database,callback:function(t){e.$set(e.form.configJSON,"database",t)},expression:"form.configJSON.database"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"user")?t("el-form-item",{attrs:{label:e.$t("User"),prop:"configJSON.user"}},[t("el-input",{model:{value:e.form.configJSON.user,callback:function(t){e.$set(e.form.configJSON,"user",t)},expression:"form.configJSON.user"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"password")?t("el-form-item",{attrs:{label:e.$t("Password"),prop:"configJSON.password"}},[t("el-input",{attrs:{"show-password":""},model:{value:e.form.configJSON.password,callback:function(t){e.$set(e.form.configJSON,"password",t)},expression:"form.configJSON.password"}}),e._v(" "),e.data.isBuiltin||"setup"!==e.pageMode?e._e():t("InfoBlock",{attrs:{type:"info",title:e.$t("Password here is always required when the Connector requires password to connect")}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"authType")?t("el-form-item",{attrs:{label:e.$t("Auth Type"),prop:"configJSON.authType"}},[t("el-select",{model:{value:e.form.configJSON.authType,callback:function(t){e.$set(e.form.configJSON,"authType",t)},expression:"form.configJSON.authType"}},["redis"===e.selectedType?t("el-option",{key:"default",attrs:{label:e.$t("Default"),value:"default"}}):e._e(),e._v(" "),"redis"===e.selectedType?t("el-option",{key:"aliyun",attrs:{label:e.$t("Alibaba Cloud"),value:"aliyun"}}):e._e()],1)],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"charset")?t("el-form-item",{attrs:{label:e.$t("Charset"),prop:"configJSON.charset"}},[t("el-input",{model:{value:e.form.configJSON.charset,callback:function(t){e.$set(e.form.configJSON,"charset",t)},expression:"form.configJSON.charset"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"token")?t("el-form-item",{attrs:{label:"Token",prop:"configJSON.token"}},[t("el-input",{model:{value:e.form.configJSON.token,callback:function(t){e.$set(e.form.configJSON,"token",t)},expression:"form.configJSON.token"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"accessKey")?t("el-form-item",{attrs:{label:"Access Key",prop:"configJSON.accessKey"}},[t("el-input",{model:{value:e.form.configJSON.accessKey,callback:function(t){e.$set(e.form.configJSON,"accessKey",t)},expression:"form.configJSON.accessKey"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"secretKey")?t("el-form-item",{attrs:{label:"Secret Key",prop:"configJSON.secretKey"}},[t("el-input",{attrs:{"show-password":""},model:{value:e.form.configJSON.secretKey,callback:function(t){e.$set(e.form.configJSON,"secretKey",t)},expression:"form.configJSON.secretKey"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"clientId")?t("el-form-item",{attrs:{label:e.$t("Client ID"),prop:"configJSON.clientId"}},[t("el-input",{model:{value:e.form.configJSON.clientId,callback:function(t){e.$set(e.form.configJSON,"clientId",t)},expression:"form.configJSON.clientId"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"groupId")?t("el-form-item",{attrs:{label:e.$t("Group ID"),prop:"configJSON.groupId"}},[t("el-input",{model:{value:e.form.configJSON.groupId,callback:function(t){e.$set(e.form.configJSON,"groupId",t)},expression:"form.configJSON.groupId"}})],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"multiSubClient")?t("el-form-item",{attrs:{label:e.$t("Multi Sub"),prop:"configJSON.multiSubClient"}},[t("el-select",{model:{value:e.form.configJSON.multiSubClient,callback:function(t){e.$set(e.form.configJSON,"multiSubClient",t)},expression:"form.configJSON.multiSubClient"}},[t("el-option",{key:"enabled",attrs:{label:e.$t("Enabled"),value:!0}}),e._v(" "),t("el-option",{key:"disabled",attrs:{label:e.$t("Disabled"),value:!1}})],1)],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"kafkaSubOffset")?t("el-form-item",{attrs:{label:e.$t("Sub Offset"),prop:"configJSON.kafkaSubOffset"}},[t("el-select",{model:{value:e.form.configJSON.kafkaSubOffset,callback:function(t){e.$set(e.form.configJSON,"kafkaSubOffset",t)},expression:"form.configJSON.kafkaSubOffset"}},[t("el-option",{key:"smallest",attrs:{label:"smallest",value:"smallest"}}),e._v(" "),t("el-option",{key:"earliest",attrs:{label:"earliest",value:"earliest"}}),e._v(" "),t("el-option",{key:"beginning",attrs:{label:"beginning",value:"beginning"}}),e._v(" "),t("el-option",{key:"largest",attrs:{label:"largest",value:"largest"}}),e._v(" "),t("el-option",{key:"latest",attrs:{label:"latest",value:"latest"}}),e._v(" "),t("el-option",{key:"end",attrs:{label:"end",value:"end"}})],1)],1):e._e(),e._v(" "),e.hasConfigField(e.selectedType,"topicHandlers")?[t("el-form-item",{staticClass:"config-divider",attrs:{label:e.$t("Topic/Handler")}},[t("el-divider")],1),e._v(" "),e._l(e.form.configJSON.topicHandlers||[],(function(a,n){return[t("el-form-item",{key:"topic-".concat(n),staticClass:"topic-handler",attrs:{label:"#".concat(n+1),prop:"configJSON.topicHandlers.".concat(n,".topic"),rules:e.formRules_topic}},[t("el-input",{attrs:{placeholder:e.$t("Topic")},model:{value:a.topic,callback:function(t){e.$set(a,"topic",t)},expression:"topicHandler.topic"}}),e._v(" "),t("el-link",{staticClass:"topic-handler-button",attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.removeTopicHandler(n)}}},[e._v(e._s(e.$t("Delete")))])],1),e._v(" "),t("el-form-item",{key:"handler-".concat(n),staticClass:"func-cascader-input",attrs:{prop:"configJSON.topicHandlers.".concat(n,".funcId"),rules:e.formRules_topicHandler}},[t("el-cascader",{ref:"funcCascader",refInFor:!0,attrs:Object(le["a"])(Object(le["a"])(Object(le["a"])({"popper-class":"code-font",placeholder:"--",filterable:"","filter-method":e.common.funcCascaderFilter},"placeholder",e.$t("Handler Func")),"options",e.funcCascader),"props",{expandTrigger:"hover",emitPath:!1,multiple:!1}),model:{value:a.funcId,callback:function(t){e.$set(a,"funcId",t)},expression:"topicHandler.funcId"}}),e._v(" "),a.isDisabled?t("el-link",{staticClass:"topic-handler-button",on:{click:function(t){return t.preventDefault(),e.enableTopicHandler(n)}}},[e._v(e._s(e.$t("Enable")))]):t("el-link",{staticClass:"topic-handler-button",on:{click:function(t){return t.preventDefault(),e.disableTopicHandler(n)}}},[e._v(e._s(e.$t("Disable")))]),e._v(" "),a.isDisabled?t("el-link",{attrs:{type:"danger"}},[t("i",{staticClass:"fa fa-fw fa-ban"}),e._v("\n                    "+e._s(e.$t("Topic Handler is disabled"))+"\n                  ")]):e.subInfoMap[a.topic]?[e._l(e.C.TASK_STATUS,(function(n){return[e.subInfoMap[a.topic].lastConsumed[n.key]?t("el-link",{attrs:{type:n.tagType},on:{click:function(t){return e.showDetail(a.topic,e.subInfoMap[a.topic].lastConsumed[n.key])}}},[t("i",{class:n.icon}),e._v("\n                        "+e._s(e.$t("Last Consumed"))+" "+e._s(e.$t("("))+e._s(n.name)+e._s(e.$t(")"))+e._s(e.$t(":"))+"\n                        "+e._s(e.T.getDateTimeString(e.subInfoMap[a.topic].lastConsumed[n.key].timestampMs,"MM-DD HH:mm:ss"))+"\n                        "+e._s(e.$t("("))+e._s(e.T.fromNow(e.subInfoMap[a.topic].lastConsumed[n.key].timestampMs))+e._s(e.$t(")"))+"\n                      ")]):e._e()]})),e._v(" "),t("el-link",{attrs:{type:"info",underline:!1}},[t("i",{staticClass:"el-icon-odometer"}),e._v("\n                      "+e._s(e.$t("Current consumption rate"))+e._s(e.$t(":"))+"\n                      "+e._s(e.$tc("messageRate",e.subInfoMap[a.topic].lastMinuteCount||0))+"\n                    ")])]:t("el-link",{attrs:{type:"info",underline:!1}},[e._v("\n                    "+e._s(e.$t("No Recent Message"))+"\n                  ")])],2)]})),e._v(" "),t("el-form-item",[t("el-link",{attrs:{type:"primary"},on:{click:e.addTopicHandler}},[t("i",{staticClass:"fa fa-fw fa-plus"}),e._v("\n                  "+e._s(e.$t("Add Topic / Handler"))+"\n                ")]),e._v(" "),t("br"),e._v(" "),t("el-link",{attrs:{href:"https://func.guance.com/doc/development-guide-connector-subscribe/",target:"_blank"}},[t("i",{staticClass:"fa fa-fw fa-external-link"}),e._v("\n                  "+e._s(e.$t("Learn more about subscribing using Connector"))+"\n                ")])],1)]:e._e(),e._v(" "),t("el-form-item",{staticClass:"setup-footer"},["setup"!==e.pageMode||e.data.isBuiltin?e._e():t("el-button",{staticClass:"danger-button float-left",on:{click:e.deleteData}},[e._v(e._s(e.$t("Delete")))]),e._v(" "),"setup"===e.pageMode?t("el-button",{attrs:{disabled:"running"===e.testConnectorResult},on:{click:e.testConnector}},["ok"===e.testConnectorResult?t("i",{staticClass:"fa fa-fw fa-check text-good"}):"ng"===e.testConnectorResult?t("i",{staticClass:"fa fa-fw fa-times text-bad"}):"running"===e.testConnectorResult?t("i",{staticClass:"fa fa-fw fa-circle-o-notch fa-spin"}):t("i",{staticClass:"fa fa-fw fa-question-circle"}),e._v("\n                "+e._s(e.$t("Test connection"))+"\n              ")]):e._e(),e._v(" "),e.data.isBuiltin?e._e():t("el-dropdown",{attrs:{"split-button":"",type:"primary",disabled:e.isSaving},on:{click:e.submitData,command:e.submitData}},[e.isSaving?t("i",{staticClass:"fa fa-fw fa-circle-o-notch fa-spin"}):e._e(),e._v("\n                "+e._s(e.$t("Save"))+"\n                "),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:{skipTest:!0}}},[e._v(e._s(e.$t("Save without connection test")))])],1)],1)],1)]:e._e()],2)],1)]),e._v(" "),t("LongTextDialog",{ref:"longTextDialog",attrs:{showDownload:!0}}),e._v(" "),t("FeatureNoticeDialog",{attrs:{featureKey:"connector.funcIsJustPythonWarpper",description:e.$t("FeatureNotice_funcIsJustPythonWarpper"),icon:"fa-warning",image:e.img_noticeFuncIsJustPythonWrapper}})],1)],2)},de=[],pe=(a("d81d"),a("a434"),a("e9c4"),a("3ca3"),a("841c"),a("2b3d"),a("9861"),a("bc3a"),a("5a45")),fe=a("932a"),me=a.n(fe),be={name:"ConnectorSetup",components:{LongTextDialog:M["a"],FeatureNoticeDialog:pe["a"]},watch:{show:function(e){e&&this.$refs.form&&this.$refs.form.clearValidate()},selectedType:{immediate:!0,handler:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:"guance"===e&&t.T.isNothing(t.guanceNodes)&&(n=t.$store.getters.SYSTEM_INFO("GUANCE_NODES"),t.guanceNodes=n,t.guanceNodeMap=n.reduce((function(e,t){return e[t.key]=t,e}),{}));case 1:case"end":return a.stop()}}),a)})))()}}},methods:{doFilter:function(e){e=(e||"").toLowerCase().trim(),this.selectShowOptions=e?this.T.filterByKeywords(e,this.SUPPORTED_CONNECTORS):this.SUPPORTED_CONNECTORS},updateValidator:function(e){this.$refs.form&&this.$refs.form.clearValidate();var t=this.C.CONNECTOR_MAP.get(e).configFields;if(t)for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];if(!n)continue;var s=this.formRules["configJSON.".concat(a)];s&&(s[0].required=!!n.isRequired)}},fillDefault:function(e){var t=this.C.CONNECTOR_MAP.get(e).configFields;if(t){var a={};for(var n in t)if(t.hasOwnProperty(n)){var s=t[n];if(!s)continue;this.T.notNothing(s.default)&&(a[n]=s.default)}this.form.configJSON=a}},switchType:function(e){this.fillDefault(e),this.updateValidator(e)},switchGuanceNode:function(e){var t=this.T.jsonCopy(this.form.configJSON),a=this.T.jsonCopy(this.guanceNodeMap[e]);t.guanceOpenAPIURL=a.openapi,t.guanceWebSocketURL=a.websocket,t.guanceOpenWayURL=a.openway,this.form.configJSON=t},unpackURL:function(){if(this.form&&this.form.configJSON&&this.form.configJSON.host){var e=null;try{e=new URL(this.form.configJSON.host)}catch(s){}if(e&&e.hostname!=this.form.configJSON.host){var t=this.C.CONNECTOR_MAP.get(this.selectedType).configFields;if(t){var a=this.T.jsonCopy(this.form.configJSON);t.host&&e.hostname&&(a.host=e.hostname),t.port&&(e.port?a.port=parseInt(e.port):t.protocol&&e.protocol&&(a.port="https"===e.protocol.split(":")[0]?443:80)),t.protocol&&e.protocol&&(a.protocol=e.protocol.split(":")[0]),t.database&&e.pathname&&(a.database=e.pathname.split("/")[0]),t.user&&e.username&&(a.user=e.username),t.password&&e.password&&(a.password=e.password);var n=this.T.getQuery(e.search);switch(this.selectedType){case"df_dataway":t.token&&n.token&&(a.token=n.token);break}this.form.configJSON=a}}}},loadData:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n,s,r;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=7;break}t.pageMode="add",t.T.jsonClear(t.form),t.form.configJSON={},t.data={},a.next=23;break;case 7:return t.pageMode="setup",t.data.id=e,a.next=11,t.T.callAPI_getOne("/api/v1/connectors/do/list",t.data.id);case 11:if(n=a.sent,n&&n.ok){a.next=14;break}return a.abrupt("return");case 14:return n.data.configJSON&&n.data.configJSON.topicHandlers&&n.data.configJSON.topicHandlers.forEach((function(e){e.isDisabled=e.isDisabled||!1})),t.data=n.data,s={},Object.keys(t.form).forEach((function(e){return s[e]=t.data[e]})),t.form=s,t.testConnectorResult=null,t.updateValidator(t.data.type),a.next=23,t.updateSubInfo();case 23:return a.next=25,t.common.getFuncList();case 25:r=a.sent,t.funcMap=r.map,t.funcCascader=r.cascader,t.selectShowOptions=t.SUPPORTED_CONNECTORS,t.show=!0;case 30:case"end":return a.stop()}}),a)})))()},updateSubInfo:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a,n,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.data.id){t.next=2;break}return t.abrupt("return");case 2:a=!1;try{a=e.T.notNothing(e.form.configJSON.topicHandlers)}catch(r){}if(a){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,e.T.callAPI_get("/api/v1/connector-sub-info/do/list",{query:{connectorId:e.data.id}});case 8:if(n=t.sent,n&&n.ok){t.next=11;break}return t.abrupt("return");case 11:s=n.data.reduce((function(e,t){return e[t.topic]=t,e}),{}),e.subInfoMap=s;case 13:case"end":return t.stop()}}),t)})))()},submitData:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$refs.form.validate();case 3:a.next=8;break;case 5:return a.prev=5,a.t0=a["catch"](0),a.abrupt("return",console.error(a.t0));case 8:t.isSaving=!0,a.t1=t.pageMode,a.next="add"===a.t1?12:"setup"===a.t1?15:18;break;case 12:return a.next=14,t.addData(e);case 14:return a.abrupt("break",18);case 15:return a.next=17,t.modifyData(e);case 17:return a.abrupt("break",18);case 18:setTimeout((function(){t.isSaving=!1}),500);case 19:case"end":return a.stop()}}),a,null,[[0,5]])})))()},_getFormData:function(){var e=this.T.jsonCopy(this.form);if(e.configJSON)for(var t in e.configJSON)this.T.isNothing(e.configJSON[t])&&(e.configJSON[t]=null);return e},addData:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n,s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=e||{},n=t._getFormData(),"string"===typeof n.configJSON.servers&&(n.configJSON.servers=n.configJSON.servers.replace(/\n/g,",").replace(/\s/g,"")),a.next=5,t.T.callAPI("post","/api/v1/connectors/do/add",{body:{data:n,skipTest:!!e.skipTest},alert:{okMessage:t.$t("Connector created")}});case 5:if(s=a.sent,s&&s.ok){a.next=8;break}return a.abrupt("return");case 8:t.$store.commit("updateConnectorListSyncTime"),t.show=!1;case 10:case"end":return a.stop()}}),a)})))()},modifyData:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n,s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=e||{},n=t._getFormData(),delete n.id,delete n.type,a.next=6,t.T.callAPI("post","/api/v1/connectors/:id/do/modify",{params:{id:t.data.id},body:{data:n,skipTest:!!e.skipTest},alert:{okMessage:t.$t("Connector saved")}});case 6:if(s=a.sent,s&&s.ok){a.next=9;break}return a.abrupt("return");case 9:t.$store.commit("updateConnectorListSyncTime"),t.show=!1;case 11:case"end":return a.stop()}}),a)})))()},deleteData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.confirm(e.$t("Are you sure you want to delete the Connector?"));case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.T.callAPI("/api/v1/connectors/:id/do/delete",{params:{id:e.data.id},alert:{okMessage:e.$t("Connector deleted")}});case 6:if(a=t.sent,a&&a.ok){t.next=9;break}return t.abrupt("return");case 9:e.$store.commit("updateConnectorListSyncTime"),e.show=!1;case 11:case"end":return t.stop()}}),t)})))()},testConnector:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.testConnectorResult="running",t.next=3,e.T.callAPI_get("/api/v1/connectors/:id/do/test",{params:{id:e.data.id}});case 3:a=t.sent,setTimeout((function(){a.ok?e.testConnectorResult="ok":e.testConnectorResult="ng"}),500);case 5:case"end":return t.stop()}}),t)})))()},hasConfigField:function(e,t){return!(!this.C.CONNECTOR_MAP.get(e)||!this.C.CONNECTOR_MAP.get(e).configFields)&&t in this.C.CONNECTOR_MAP.get(e).configFields},addTopicHandler:function(){this.T.isNothing(this.form.configJSON.topicHandlers)&&this.$set(this.form.configJSON,"topicHandlers",[]),this.form.configJSON.topicHandlers.push({topic:"",funcId:"",isDisabled:!1})},removeTopicHandler:function(e){this.form.configJSON.topicHandlers.splice(e,1)},enableTopicHandler:function(e){this.form.configJSON.topicHandlers[e].isDisabled=!1},disableTopicHandler:function(e){this.form.configJSON.topicHandlers[e].isDisabled=!0},showDetail:function(e,t){var a=[];a.push("===== ".concat(this.$t("Message")," =====")),a.push("".concat(this.$t("Topic"),": ").concat(e)),a.push("".concat(this.$t("Time"),": ").concat(this.M(t.timestampMs).format("YYYY-MM-DD HH:mm:ss Z"))),a.push("\n===== ".concat(this.$t("Content")," =====")),a.push(t.message),t.taskResp.result&&(a.push("\n===== ".concat(this.$t("Func Return Value")," =====")),a.push(JSON.stringify(t.taskResp.result.returnValue,null,2))),t.taskResp.traceback&&(a.push("\n===== ".concat(this.$t("Traceback")," =====")),a.push(t.taskResp.traceback));var n=a.join("\n"),s=this.M(t.timestampMs).format("YYYYMMDD_HHmmss"),r="connector-sub-dump.".concat(t.connectorId,".").concat(t.topic,".").concat(s);this.$refs.longTextDialog.update(n,r)}},computed:{SUPPORTED_CONNECTORS:function(){var e=this,t=this.C.CONNECTOR.filter((function(t){switch(t.key){case"sqlserver":return"x86_64"===e.$store.getters.SYSTEM_INFO("ARCHITECTURE");case"oracle":return"UniontechOS"!==e.$store.getters.SYSTEM_INFO("LINUX_DISTRO");default:return!0}}));return t.forEach((function(t){e.T.appendSearchFields(t,["key","name","fullName"])})),t},pageTitle:function(){var e={setup:this.$t("Setup Connector"),add:this.$t("Add Connector")};return e[this.pageMode]},selectedType:function(){switch(this.pageMode){case"add":return this.form.type;case"setup":return this.data.type}}},props:{},data:function(){return{show:!1,pageMode:null,data:{},subInfoMap:{},funcMap:{},funcCascader:[],selectShowOptions:[],guanceNodes:[],guanceNodeMap:{},form:{id:null,title:null,type:null,description:null,configJSON:{}},formRules:{id:[{trigger:"blur",message:this.$t("Please input ID"),required:!0},{trigger:"change",message:this.$t("Only alphabets, numbers and underscore are allowed"),pattern:/^[a-zA-Z0-9_]*$/g},{trigger:"change",message:this.$t("Cannot not starts with a number"),pattern:/^[^0-9]/g}],type:[{trigger:"blur",message:this.$t("Please input Connector type"),required:!0}],"configJSON.guanceNode":[{trigger:"blur",message:this.$t("Please select Guance Node"),required:!0}],"configJSON.guanceOpenAPIURL":[{trigger:"blur",message:this.$t("Please input OpenAPI URL"),required:!0},{trigger:"change",message:this.$t("Should start with http:// or https://"),pattern:this.C.RE_PATTERN.httpURL}],"configJSON.guanceWebSocketURL":[{trigger:"blur",message:this.$t("Please input Websocket URL"),required:!0},{trigger:"change",message:this.$t("Should start with http:// or https://"),pattern:this.C.RE_PATTERN.httpURL}],"configJSON.guanceOpenWayURL":[{trigger:"blur",message:this.$t("Please input OpenWay URL"),required:!0},{trigger:"change",message:this.$t("Should start with http:// or https://"),pattern:this.C.RE_PATTERN.httpURL}],"configJSON.guanceAPIKeyId":[{trigger:"blur",message:this.$t("Please input API Key ID"),required:!0}],"configJSON.guanceAPIKey":[{trigger:"blur",message:this.$t("Please input API Key"),required:!0}],"configJSON.host":[{trigger:"blur",message:this.$t("Please input host"),required:!0}],"configJSON.port":[{trigger:"blur",message:this.$t("Please input port"),required:!0},Object(le["a"])({trigger:"change",message:this.$t("Only integer between 1 and 65535 are allowed"),type:"integer",min:1,max:65535},"trigger","change")],"configJSON.servers":[{trigger:"blur",message:this.$t("Please input servers"),required:!0}],"configJSON.protocol":[{trigger:"blur",message:this.$t("Please select HTTP protocol"),required:!0},{trigger:"change",message:this.$t("Only HTTP and HTTPS are allowed"),type:"enum",enum:["http","https"]}],"configJSON.source":[{trigger:"blur",message:this.$t("Please input source"),required:!1}],"configJSON.database":[{trigger:"blur",message:this.$t("Please input database"),required:!1}],"configJSON.user":[{trigger:"blur",message:this.$t("Please input user"),required:!1}],"configJSON.password":[{trigger:"blur",message:this.$t("Please input password"),required:!1}],"configJSON.authType":[{trigger:"blur",message:this.$t("Please input auth type"),required:!1}],"configJSON.charset":[{trigger:"blur",message:this.$t("Please input charset"),required:!1}],"configJSON.token":[{trigger:"blur",message:this.$t("Please input token"),required:!1}],"configJSON.accessKey":[{trigger:"blur",message:this.$t("Please input Access Key"),required:!1}],"configJSON.secretKey":[{trigger:"blur",message:this.$t("Please input Secret Key"),required:!1}],"configJSON.clientId":[{trigger:"blur",message:this.$t("Please input client ID"),required:!1}],"configJSON.groupId":[{trigger:"blur",message:this.$t("Please input group ID"),required:!1}],"configJSON.securityProtocol":[{trigger:"blur",message:this.$t("Please input security protocol"),required:!1}],"configJSON.saslMechanisms":[{trigger:"blur",message:this.$t("Please input SASL Mechanisms"),required:!1}],"configJSON.multiSubClient":[{trigger:"blur",message:this.$t("Please select if Multi Sub allowed"),required:!1}],"configJSON.kafkaSubOffset":[{trigger:"blur",message:this.$t("Please input Sub Offset"),required:!1}]},formRules_topic:{trigger:"blur",message:this.$t("Please input topic"),required:!0},formRules_topicHandler:{trigger:"blur",message:this.$t("Please select handler Func"),required:!0},isSaving:!1,testConnectorResult:null,autoRefreshTimer:null,img_noticeFuncIsJustPythonWrapper:me.a}},mounted:function(){var e=this;this.autoRefreshTimer=setInterval((function(){e.updateSubInfo()}),5e3)},beforeDestroy:function(){this.autoRefreshTimer&&clearInterval(this.autoRefreshTimer)}},he=be,ge=(a("8981"),a("20d1"),a("b2d3")),_e=a("8b75"),ve=a("c882"),ye=a("d5cd"),Se=Object(f["a"])(he,ue,de,!1,null,"99014692",null);"function"===typeof ge["default"]&&Object(ge["default"])(Se),"function"===typeof _e["default"]&&Object(_e["default"])(Se),"function"===typeof ve["default"]&&Object(ve["default"])(Se),"function"===typeof ye["default"]&&Object(ye["default"])(Se);var we=Se.exports,Ce={name:"AsideConnector",components:{SimpleDebugWindow:ce,ConnectorSetup:we},watch:{selectFilterText:function(e){if(e&&this.$refs.tree){var t=this.$refs.tree.getNode(e);this.openEntity(t.data)}},"$store.state.connectorListSyncTime":function(){this.loadData()}},methods:{doFilter:function(e){e=(e||"").toLowerCase().trim(),this.selectShowOptions=e?this.T.filterByKeywords(e,this.selectOptions):this.selectOptions},selectNode:function(e,t){var a=this;t=t||{},this.$refs.tree&&e&&setImmediate((function(){var t=a.$refs.tree.getNode(e);t&&t.data&&(a.$refs.tree.setCurrentKey(t.data.id),setTimeout((function(){var e=document.getElementById("aside-connector-content"),a=document.querySelector('[entry-id="'.concat(t.data.id,'"]'));if(a){var n=0,s=35;if(e.scrollTop+s>a.offsetTop)n=a.offsetTop-s;else{if(!(e.scrollTop+e.offsetHeight<a.offsetTop))return;n=a.offsetTop-e.offsetHeight+a.offsetHeight}e.scrollTo({top:n,behavior:"smooth"})}}),300))}))},loadData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a,n,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.T.callAPI_getAll("/api/v1/connectors/do/list",{query:{fields:["id","title","description","type","configJSON","isBuiltin","isPinned","pinTime"]}});case 3:if(a=t.sent,a&&a.ok){t.next=6;break}return t.abrupt("return");case 6:n=[],window._DFF_connectorIds=[],a.data.forEach((function(t){window._DFF_connectorIds.push(t.id),t.description=e.T.limitLines(t.description,10);var a=e.T.strf(e.C.CONNECTOR_MAP.get(t.type).sampleCode,t.id),s={id:t.id,label:t.title||t.id,type:"connector",connectorType:t.type,isBuiltin:t.isBuiltin,isPinned:t.isPinned,pinTime:t.pinTime,title:t.title,description:t.description,sampleCode:a,connector:t,showPopover:!1};e.T.appendSearchFields(s,["id","title"]),n.push(s)})),n.sort(e.T.asideItemSorter),n.unshift({type:"addConnector"}),n.unshift({type:"refresh"}),s=n.filter((function(e){return"connector"===e.type})),e.loading=!1,e.data=n,e.selectOptions=s,e.selectShowOptions=s,e.selectNode(e.$route.params.id);case 18:case"end":return t.stop()}}),t)})))()},pinData:function(e,t,a){var n=this;return Object(c["a"])(Object(o["a"])().mark((function s(){var r,i,c;return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:r=null,i=null,s.t0=e,s.next="connector"===s.t0?5:8;break;case 5:return r="/api/v1/connectors/:id/do/modify",i=a?n.$t("Connector pinned"):n.$t("Connector unpinned"),s.abrupt("break",9);case 8:return s.abrupt("return");case 9:return s.next=11,n.T.callAPI("post",r,{params:{id:t},body:{data:{isPinned:a}},alert:{okMessage:i}});case 11:if(c=s.sent,c&&c.ok){s.next=14;break}return s.abrupt("return");case 14:n.$store.commit("updateConnectorListSyncTime");case 15:case"end":return s.stop()}}),s)})))()},showSimpleDebugWindow:function(e){e.showPopover=!1,this.$refs.simpleDebugWindow.showWindow(e.connector)},openEntity:function(e,t){switch(e.showPopover=!1,e.type){case"refresh":this.loadData();break;case"addConnector":this.$refs.setup.loadData();break;case"connector":this.selectNode(e.id),this.$refs.setup.loadData(e.id);break;default:console.error("Unexcepted data type: ".concat(e.type));break}},deleteEntity:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.T.confirm(t.$t('Are you sure you want to delete the Connector?<br><strong class="text-bad">{label}</strong>',{label:e.label}));case 2:if(a.sent){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,t.T.callAPI("/api/v1/connectors/:id/do/delete",{params:{id:e.id},alert:{okMessage:t.$t("Connector deleted")}});case 6:if(n=a.sent,n&&n.ok){a.next=9;break}return a.abrupt("return");case 9:t.$store.commit("updateConnectorListSyncTime");case 10:case"end":return a.stop()}}),a)})))()}},props:{},data:function(){return{loading:!1,data:[],selectFilterText:"",selectOptions:[],selectShowOptions:[]}},created:function(){this.loadData()}},ke=Ce,Te=(a("defc"),a("3a23")),Oe=a("82ce"),xe=a("1b65"),Ee=Object(f["a"])(ke,Q,Y,!1,null,"498babd1",null);"function"===typeof Te["default"]&&Object(Te["default"])(Ee),"function"===typeof Oe["default"]&&Object(Oe["default"])(Ee),"function"===typeof xe["default"]&&Object(xe["default"])(Ee);var Ne=Ee.exports,$e=function(){var e=this,t=e._self._c;return t("div",{staticClass:"aside-inner-content",attrs:{id:"aside-env-variable-content"}},[t("div",{staticClass:"jump-to-select-wrap"},[t("el-select",{staticClass:"jump-to-select",attrs:{placeholder:e.$t("Jump to..."),"no-data-text":e.$t("No Data"),size:"small",clearable:"",filterable:"","filter-method":e.T.debounce(e.doFilter)},model:{value:e.selectFilterText,callback:function(t){e.selectFilterText=t},expression:"selectFilterText"}},e._l(e.selectShowOptions,(function(a){return t("el-option",{key:a.id,attrs:{label:a.label,value:a.id}},[t("span",{staticClass:"select-item-name"},[e._v("\n          "+e._s(a.label)+"\n        ")]),e._v(" "),t("code",{staticClass:"select-item-id code-font"},[e._v("ID: "+e._s(a.id))])])})),1)],1),e._v(" "),t("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tree",staticClass:"aside-tree",attrs:{data:e.data,"highlight-current":!0,indent:10,"node-key":"id"},scopedSlots:e._u([{key:"default",fn:function(a){var n=a.node,s=a.data;return t("span",{staticClass:"aside-tree-node",attrs:{"entry-id":s.id},on:{click:function(t){return e.openEntity(s)}}},[t("el-popover",{attrs:{placement:"right-start",trigger:"hover","popper-class":"aside-tip",disabled:!s.id},model:{value:s.showPopover,callback:function(t){e.$set(s,"showPopover",t)},expression:"data.showPopover"}},[t("div",{staticClass:"aside-item",attrs:{slot:"reference"},slot:"reference"},[t("span",{class:{"text-bad":s.isPinned}},["refresh"===s.type?t("el-link",{attrs:{type:"primary"}},[t("i",{staticClass:"fa fa-fw fa-refresh"}),e._v(" "+e._s(e.$t("Refresh"))+"\n            ")]):"addEnvVariable"===s.type?t("el-link",{attrs:{type:"primary"}},[t("i",{staticClass:"fa fa-fw fa-plus"}),e._v(" "+e._s(e.$t("New ENV"))+"\n            ")]):t("div",[t("span",[e._v(e._s(n.label))])])],1),e._v(" "),t("div",[t("el-tooltip",{attrs:{effect:"dark",content:e.$t("Pinned"),placement:"top",enterable:!1}},[t("i",{staticClass:"fa fa-fw text-bad",class:[s.isPinned?"fa-thumb-tack":""]})])],1)]),e._v(" "),t("div",{staticClass:"aside-tree-node-description"},[t("span",{staticClass:"text-info"},[e._v("ID")]),e._v("\n           "),t("code",{staticClass:"text-main"},[e._v(e._s(s.id))]),e._v(" "),t("CopyButton",{attrs:{content:s.id}}),e._v(" "),s.description?t("pre",[e._v(e._s(s.description))]):e._e()],1),e._v(" "),s.sampleCode?[t("div",{staticClass:"aside-tree-node-sample-code"},[t("span",{staticClass:"text-info"},[e._v(e._s(e.$t("Example")))]),e._v(" "),t("CopyButton",{attrs:{content:s.sampleCode}}),e._v(" "),t("pre",[e._v(e._s(s.sampleCode))])],1)]:e._e(),e._v(" "),t("br"),e._v(" "),t("el-button-group",[t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.openEntity(s,"setup")}}},[t("i",{staticClass:"fa fa-fw fa-wrench"}),e._v("\n            "+e._s(e.$t("Setup"))+"\n          ")])],1),e._v(" "),t("el-button-group",[t("el-button",{class:s.isPinned?"aside-on-button":"",attrs:{size:"small"},on:{click:function(t){return e.pinData(s.type,s.id,!s.isPinned)}}},[t("i",{staticClass:"fa fa-fw",class:[s.isPinned?"fa-thumb-tack fa-rotate-270":"fa-thumb-tack"]}),e._v("\n            "+e._s(s.isPinned?e.$t("Unpin"):e.$t("Pin"))+"\n          ")])],1),e._v(" "),t("el-button-group",[t("el-button",{staticClass:"danger-button",attrs:{size:"small"},on:{click:function(t){return e.deleteEntity(s)}}},[t("i",{staticClass:"fa fa-fw fa-times"}),e._v("\n            "+e._s(e.$t("Delete"))+"\n          ")])],1)],2)],1)}}])}),e._v(" "),t("EnvVariableSetup",{ref:"setup"})],1)},Ie=[],Pe=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{id:"ScriptSetSetup",visible:e.show,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"750px"},on:{"update:visible":function(t){e.show=t}}},[t("template",{slot:"title"},[e._v("\n    "+e._s(e.pageTitle)+" "),t("code",{staticClass:"text-main"},[e._v(e._s(e.data.title||e.data.id))])]),e._v(" "),t("el-container",{attrs:{direction:"vertical"}},[t("el-main",[t("div",{staticClass:"setup-form"},[t("el-form",{ref:"form",attrs:{"label-width":"135px",model:e.form,rules:e.formRules}},[t("el-form-item",{attrs:{label:"ID",prop:"id"}},[t("el-input",{attrs:{disabled:"setup"===e.pageMode,maxlength:"60"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Title")}},[t("el-input",{attrs:{placeholder:e.$t("Optional"),maxlength:"200"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Description")}},[t("el-input",{attrs:{placeholder:e.$t("Optional"),type:"textarea",resize:"none",autosize:{minRows:2},maxlength:"5000"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Value Type")}},[t("el-select",{on:{change:e.switchAutoTypeCasting},model:{value:e.form.autoTypeCasting,callback:function(t){e.$set(e.form,"autoTypeCasting",t)},expression:"form.autoTypeCasting"}},e._l(e.C.ENV_VARIABLE,(function(e){return t("el-option",{key:e.key,attrs:{label:e.name,value:e.key}})})),1),e._v(" "),e.C.ENV_VARIABLE_MAP.get(e.form.autoTypeCasting)?t("InfoBlock",{attrs:{title:e.C.ENV_VARIABLE_MAP.get(e.form.autoTypeCasting).tips}}):e._e()],1),e._v(" "),t("el-form-item",{attrs:{label:e.$t("Value"),prop:"valueTEXT"}},[t("el-input",{attrs:{type:"password"===e.form.autoTypeCasting?null:"textarea","show-password":"password"===e.form.autoTypeCasting,placeholder:"setup"===e.pageMode&&"password"===e.form.autoTypeCasting?e.$t("Leave blank when not changing"):"",resize:"none",autosize:{minRows:3},maxlength:"5000"},model:{value:e.form.valueTEXT,callback:function(t){e.$set(e.form,"valueTEXT",t)},expression:"form.valueTEXT"}})],1),e._v(" "),t("el-form-item",{staticClass:"setup-footer"},["setup"===e.pageMode?t("el-button",{staticClass:"danger-button float-left",on:{click:e.deleteData}},[e._v(e._s(e.$t("Delete")))]):e._e(),e._v(" "),t("el-button",{directives:[{name:"prevent-re-click",rawName:"v-prevent-re-click"}],attrs:{type:"primary"},on:{click:e.submitData}},[e._v(e._s(e.$t("Save")))])],1)],1)],1)])],1)],2)},De=[],Me={name:"EnvVariableSetup",components:{},watch:{show:function(e){e&&this.$refs.form&&this.$refs.form.clearValidate()}},methods:{updateValidator:function(e){this.$refs.form&&this.$refs.form.clearValidate();var t="setup"===this.pageMode&&"password"===e;this.formRules.valueTEXT[0].required=!t},switchAutoTypeCasting:function(e){console.log("in @change, now =",this.form.autoTypeCasting),this.updateValidator(e)},loadData:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n,s;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=7;break}t.pageMode="add",t.T.jsonClear(t.form),t.data={},t.form.autoTypeCasting="string",a.next=19;break;case 7:return t.pageMode="setup",t.data.id=e,a.next=11,t.T.callAPI_getOne("/api/v1/env-variables/do/list",t.data.id);case 11:if(n=a.sent,n&&n.ok){a.next=14;break}return a.abrupt("return");case 14:t.data=n.data,s={},Object.keys(t.form).forEach((function(e){return s[e]=t.data[e]})),t.form=s,t.updateValidator(t.data.autoTypeCasting);case 19:t.show=!0;case 20:case"end":return a.stop()}}),a)})))()},submitData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$refs.form.validate();case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t["catch"](0),t.abrupt("return",console.error(t.t0));case 8:t.t1=e.pageMode,t.next="add"===t.t1?11:"setup"===t.t1?14:17;break;case 11:return t.next=13,e.addData();case 13:return t.abrupt("return",t.sent);case 14:return t.next=16,e.modifyData();case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t,null,[[0,5]])})))()},addData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.callAPI("post","/api/v1/env-variables/do/add",{body:{data:e.T.jsonCopy(e.form)},alert:{okMessage:e.$t("ENV Variable created")}});case 2:if(a=t.sent,a&&a.ok){t.next=5;break}return t.abrupt("return");case 5:e.$store.commit("updateEnvVariableListSyncTime"),e.show=!1;case 7:case"end":return t.stop()}}),t)})))()},modifyData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a,n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.T.jsonCopy(e.form),delete a.id,t.next=4,e.T.callAPI("post","/api/v1/env-variables/:id/do/modify",{params:{id:e.data.id},body:{data:a},alert:{okMessage:e.$t("ENV Variable saved")}});case 4:if(n=t.sent,n&&n.ok){t.next=7;break}return t.abrupt("return");case 7:e.$store.commit("updateEnvVariableListSyncTime"),e.show=!1;case 9:case"end":return t.stop()}}),t)})))()},deleteData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.T.confirm(e.$t("Are you sure you want to delete the ENV?"));case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.T.callAPI("/api/v1/env-variables/:id/do/delete",{params:{id:e.data.id},alert:{okMessage:e.$t("ENV Variable deleted")}});case 6:if(a=t.sent,a&&a.ok){t.next=9;break}return t.abrupt("return");case 9:e.$store.commit("updateEnvVariableListSyncTime"),e.show=!1;case 11:case"end":return t.stop()}}),t)})))()}},computed:{pageTitle:function(){var e={setup:this.$t("Setup ENV"),add:this.$t("Add ENV")};return e[this.pageMode]}},props:{},data:function(){return{show:!1,pageMode:null,data:{},form:{id:null,title:null,description:null,autoTypeCasting:null,valueTEXT:null},formRules:{id:[{trigger:"blur",message:this.$t("Please input ID"),required:!0},{trigger:"change",message:this.$t("Only alphabets, numbers and underscore are allowed"),pattern:/^[a-zA-Z0-9_]*$/g},{trigger:"change",message:this.$t("Cannot not starts with a number"),pattern:/^[^0-9]/g}],valueTEXT:[{trigger:"blur",message:this.$t("Please input Value"),required:!0}]}}}},Ae=Me,Re=a("aee1"),Le=a("5b39"),je=a("88d6"),Fe=Object(f["a"])(Ae,Pe,De,!1,null,"4f883c0e",null);"function"===typeof Re["default"]&&Object(Re["default"])(Fe),"function"===typeof Le["default"]&&Object(Le["default"])(Fe),"function"===typeof je["default"]&&Object(je["default"])(Fe);var qe=Fe.exports,Je={name:"AsideEnvVariable",components:{EnvVariableSetup:qe},watch:{selectFilterText:function(e){if(e&&this.$refs.tree){var t=this.$refs.tree.getNode(e);this.openEntity(t.data)}},"$store.state.envVariableListSyncTime":function(){this.loadData()}},methods:{doFilter:function(e){e=(e||"").toLowerCase().trim(),this.selectShowOptions=e?this.T.filterByKeywords(e,this.selectOptions):this.selectOptions},selectNode:function(e,t){var a=this;t=t||{},this.$refs.tree&&e&&setImmediate((function(){var t=a.$refs.tree.getNode(e);t&&t.data&&(a.$refs.tree.setCurrentKey(t.data.id),setTimeout((function(){var e=document.getElementById("aside-env-variable-content"),a=document.querySelector('[entry-id="'.concat(t.data.id,'"]'));if(a){var n=0,s=35;if(e.scrollTop+s>a.offsetTop)n=a.offsetTop-s;else{if(!(e.scrollTop+e.offsetHeight<a.offsetTop))return;n=a.offsetTop-e.offsetHeight+a.offsetHeight}e.scrollTo({top:n,behavior:"smooth"})}}),300))}))},loadData:function(){var e=this;return Object(c["a"])(Object(o["a"])().mark((function t(){var a,n,s;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.T.callAPI_getAll("/api/v1/env-variables/do/list",{query:{fields:["id","title","description","isPinned","pinTime"]}});case 3:if(a=t.sent,a&&a.ok){t.next=6;break}return t.abrupt("return");case 6:n=[],window._DFF_envVariableIds=[],a.data.forEach((function(t){window._DFF_envVariableIds.push(t.id),t.description=e.T.limitLines(t.description);var a="".concat(t.id," = DFF.ENV('").concat(t.id,"')"),s={id:t.id,label:t.title||t.id,type:"envVariable",isPinned:t.isPinned,pinTime:t.pinTime,title:t.title,description:t.description,sampleCode:a,showPopover:!1};e.T.appendSearchFields(s,["id","title"]),n.push(s)})),n.sort(e.T.asideItemSorter),n.unshift({type:"addEnvVariable"}),n.unshift({type:"refresh"}),s=n.filter((function(e){return"envVariable"===e.type})),e.loading=!1,e.data=n,e.selectOptions=s,e.selectShowOptions=s,e.selectNode(e.$route.params.id);case 18:case"end":return t.stop()}}),t)})))()},pinData:function(e,t,a){var n=this;return Object(c["a"])(Object(o["a"])().mark((function s(){var r,i,c;return Object(o["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:r=null,i=null,s.t0=e,s.next="envVariable"===s.t0?5:8;break;case 5:return r="/api/v1/env-variables/:id/do/modify",i=a?n.$t("ENV Variable pinned"):n.$t("ENV Variable unpinned"),s.abrupt("break",9);case 8:return s.abrupt("return");case 9:return s.next=11,n.T.callAPI("post",r,{params:{id:t},body:{data:{isPinned:a}},alert:{okMessage:i}});case 11:if(c=s.sent,c&&c.ok){s.next=14;break}return s.abrupt("return");case 14:n.$store.commit("updateEnvVariableListSyncTime");case 15:case"end":return s.stop()}}),s)})))()},openEntity:function(e,t){switch(e.showPopover=!1,e.type){case"refresh":this.loadData();break;case"addEnvVariable":this.$refs.setup.loadData();break;case"envVariable":this.selectNode(e.id),this.$refs.setup.loadData(e.id);break;default:console.error("Unexcepted data type: ".concat(e.type));break}},deleteEntity:function(e){var t=this;return Object(c["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.T.confirm(t.$t('Are you sure you want to delete the ENV?<br><strong class="text-bad">{label}</strong>',{label:e.label}));case 2:if(a.sent){a.next=4;break}return a.abrupt("return");case 4:return a.next=6,t.T.callAPI("/api/v1/env-variables/:id/do/delete",{params:{id:e.id},alert:{okMessage:t.$t("ENV Variable deleted")}});case 6:if(n=a.sent,n&&n.ok){a.next=9;break}return a.abrupt("return");case 9:t.$store.commit("updateEnvVariableListSyncTime");case 10:case"end":return a.stop()}}),a)})))()}},props:{},data:function(){return{loading:!1,data:[],selectFilterText:"",selectOptions:[],selectShowOptions:[]}},created:function(){this.loadData()}},Be=Je,Ue=(a("015a"),a("2668")),Ve=a("9df4"),He=a("1aaa"),Ke=Object(f["a"])(Be,$e,Ie,!1,null,"fa4bc88a",null);"function"===typeof Ue["default"]&&Object(Ue["default"])(Ke),"function"===typeof Ve["default"]&&Object(Ve["default"])(Ke),"function"===typeof He["default"]&&Object(He["default"])(Ke);var We=Ke.exports,ze={name:"Development",components:{AsideScript:G,AsideConnector:Ne,AsideEnvVariable:We},watch:{$route:{immediate:!0,handler:function(e,t){var a=["code-editor","code-viewer"];a.indexOf(e.name)>=0?this.transitionName=null:this.transitionName="fade"}},splitPanePercent:function(e){this.resizeVueSplitPane(e)}},methods:{resizeVueSplitPane:function(e){e>this.SPLIT_PANE_MAX_PERCENT?e=this.SPLIT_PANE_MAX_PERCENT:e<this.SPLIT_PANE_MIN_PERCENT&&(e=this.SPLIT_PANE_MIN_PERCENT),this.$refs.vueSplitPane.percent=e,this.debouncedUpdatePanePercent(this.$store,e)}},computed:{SPLIT_PANE_MAX_PERCENT:function(){return 35},SPLIT_PANE_MIN_PERCENT:function(){return 10},currentTabIcon:function(){var e=["fa","fa-fw","icon-bg"];switch(this.currentTab){case"aside-script":e.push("fa-file-code-o");break;case"aside-connector":e.push("fa-database");break;case"aside-env-variable":e.push("fa-cogs");break}return e},splitPanePercent:function(){return this.$store.state.Editor_splitPanePercent||this.$store.getters.DEFAULT_STATE.Editor_splitPanePercent}},data:function(){return{currentTab:"aside-script"}},created:function(){this.debouncedUpdatePanePercent=this.T.debounce((function(e,t){e.commit("updateEditor_splitPanePercent",t)}),100)},mounted:function(){this.resizeVueSplitPane(this.splitPanePercent)}},Ge=ze,Qe=(a("5c76"),a("a47c"),Object(f["a"])(Ge,n,s,!1,null,"4b571ca6",null));t["default"]=Qe.exports},eb79:function(e,t,a){"use strict";a("fdb4")},f65c:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-HK":{"Add Connector":"添加連接器","Are you sure you want to delete the Connector?<br><strong class=\\"text-bad\\">{label}</strong>":"是否確認刪除此連接器<br><strong class=\\"text-bad\\">{label}</strong>","Connector deleted":"連接器已刪除","Connector pinned":"連接器已置頂","Connector unpinned":"連接器已取消","Copy example":"複製示例","Copy {name} ID":"複製{name} ID","Example":"示例","Go to Recent Task Record":"前往最近任務記錄","Jump to...":"跳轉到...","Refresh":"刷新列表","Setup":"配置","Simple Debug":"簡易調試","View":"查看"}}'),delete e.options._Ctor}},f7d2:function(e,t,a){"use strict";a("c3b8")},f96c:function(e,t,a){"use strict";var n=a("a3ae"),s=a.n(n);t["default"]=s.a},f9d6:function(e,t,a){},fdb4:function(e,t,a){},ff0e:function(e,t,a){"use strict";var n=a("53d1"),s=a.n(n);t["default"]=s.a}}]);