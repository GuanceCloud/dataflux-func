<i18n locale="zh-CN" lang="yaml">
Recent Task Triggered: 最近任务触发时间

Trigger Time: 触发时间
From Now    : 距现在
Interval    : 时间间隔
</i18n>

<!-- Generated by OpenCC START -->
<i18n locale="zh-HK" lang="yaml">
Download as a text file: 作為文本文件下載
</i18n>
<i18n locale="zh-TW" lang="yaml">
Download as a text file: 作為文字檔案下載
</i18n>
<!-- Generated by OpenCC END -->

<template>
  <el-dialog
    id="RecentTaskTriggeredDialog"
    :visible.sync="show"
    :close-on-click-modal="false"
    width="600px">
    <template slot="title">
      {{ $t('Recent Task Triggered') }}
      <span class="text-info press-esc-to-close-tip">{{ $t('Press ESC to close') }}</span>
    </template>
      <el-table v-if="data" :data="data">
        <el-table-column :label="$t('Trigger Time')" width="200">
          <template slot-scope="scope">
            <span>{{ scope.row.triggerTimeMs | datetime }}</span>
          </template>
        </el-table-column>

        <el-table-column :label="$t('From Now')" width="200">
          <template slot-scope="scope">
            <span>{{ scope.row.triggerTimeMs | fromNow }}</span>
          </template>
        </el-table-column>

        <el-table-column :label="$t('Interval')" width="200">
          <template slot-scope="scope">
            <template v-if="T.notNothing(scope.row.interval)">
              <span v-if="scope.row.interval >= 60 * 60">
                {{ parseInt(scope.row.interval / (60 * 60)) }} {{ $t('hours') }}
              </span>
              <span v-if="scope.row.interval >= 60">
                {{ parseInt((scope.row.interval % (60 * 60)) / 60) }} {{ $t('minutes') }}
              </span>
              {{ scope.row.interval % 60 }} {{ $t('seconds') }}
            </template>
            <template v-else>-</template>
          </template>
        </el-table-column>
      </el-table>
  </el-dialog>
</template>

<script>
export default {
  name: 'RecentTaskTriggeredDialog',
  components: {
  },
  watch: {
  },
  methods: {
    update(data) {
      data = data.reverse();
      let nextData = [];
      for (let i = 0; i < data.length; i++) {
        nextData.push({
          triggerTimeMs: data[i] * 1000,
          interval     : i < data.length - 1 ? parseInt(data[i] - data[i + 1]) : null,
        });
      }

      this.data = nextData;
      this.show = true;
    },
  },
  computed: {
  },
  props: {
  },
  data() {
    return {
      show: false,

      data: null,
    }
  },
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
</style>
<style>
</style>
